(function(B,D){"function"==typeof define?define(D):"undefined"!=typeof module?module.exports=D():this[B]=D()})("morpheus",function(){function B(a){var u;u=H.length;for(c&&(a=e());u--;)H[u](a);H.length&&F(B)}function D(a,c){var u={},r;if(r=a.match(h))u.rotate=g(r[1],c?c.rotate:null);if(r=a.match(k))u.scale=g(r[1],c?c.scale:null);if(r=a.match(l))u.skewx=g(r[1],c?c.skewx:null),u.skewy=g(r[3],c?c.skewy:null);if(r=a.match(n))u.translatex=g(r[1],c?c.translatex:null),u.translatey=g(r[3],c?c.translatey:null);
return u}function y(a){var c="";"rotate"in a&&(c+="rotate("+a.rotate+"deg) ");"scale"in a&&(c+="scale("+a.scale+") ");"translatex"in a&&(c+="translate("+a.translatex+"px,"+a.translatey+"px) ");"skewx"in a&&(c+="skew("+a.skewx+"deg,"+a.skewy+"deg)");return c}function q(a){var c=a.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(c?"#"+(16777216|c[1]<<16|c[2]<<8|c[3]).toString(16).slice(1):a).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function v(a){return a.replace(/-(.)/g,function(a,c){return c.toUpperCase()})}
function z(a){return"function"==typeof a}function d(a){return Math.sin(a*Math.PI/2)}function b(a,c,u,r,h,f){function k(a){a-=E;if(a>G||x){f=isFinite(f)?f:1;x?w&&c(f):c(f);var e;a:if(a=H,e=void 0,Array.prototype.indexOf)e=a.indexOf(k);else{for(e=0;e<a.length;++e)if(a[e]===k)break a;e=void 0}0<=e&&(a=H.slice(e+1),H.length=e,H=H.concat(a));return u&&u.apply(l)}isFinite(f)?c(n*r(a/G)+h):c(r(a/G))}r=z(r)?r:p.easings[r]||d;var G=a||1E3,l=this,n=f-h,E=e(),x=0,w=0;1===H.push(k)&&F(B);return{stop:function(a){x=
1;(w=a)||(u=null)}}}function t(a,c){var u=a.length,r=[],e,f;for(e=0;e<u;++e)r[e]=[a[e][0],a[e][1]];for(f=1;f<u;++f)for(e=0;e<u-f;++e)r[e][0]=(1-c)*r[e][0]+c*r[parseInt(e+1,10)][0],r[e][1]=(1-c)*r[e][1]+c*r[parseInt(e+1,10)][1];return[r[0][0],r[0][1]]}function g(a,c,u,r,e){return(u=f.exec(a))?(e=parseFloat(u[2]))&&c+("+"==u[1]?1:-1)*e:parseFloat(a)}function p(a,c){var e=a?e=isFinite(a.length)?a:[a]:[],f,h=c.complete,k=c.duration,l=c.easing,n=c.bezier,F=[],H=[],d=[],C=[],p,m;n&&(p=c.left,m=c.top,delete c.right,
delete c.bottom,delete c.left,delete c.top);for(f=e.length;f--;){F[f]={};H[f]={};d[f]={};if(n){var I=E(e[f],"left"),A=E(e[f],"top"),B=[g(z(p)?p(e[f]):p||0,parseFloat(I)),g(z(m)?m(e[f]):m||0,parseFloat(A))];C[f]=z(n)?n(e[f],B):n;C[f].push(B);C[f].unshift([parseInt(I,10),parseInt(A,10)])}for(var J in c){switch(J){case "complete":case "duration":case "easing":case "bezier":continue}var I=E(e[f],J),R,A=z(c[J])?c[J](e[f]):c[J];"string"==typeof A&&G.test(A)&&!G.test(I)?delete c[J]:(F[f][J]="transform"==
J?D(I):"string"==typeof A&&G.test(A)?q(I).slice(1):parseFloat(I),H[f][J]="transform"==J?D(A,F[f][J]):"string"==typeof A&&"#"==A.charAt(0)?q(A).slice(1):g(A,parseFloat(I)),"string"==typeof A&&(R=A.match(w))&&(d[f][J]=R[1]))}}return b.apply(e,[k,function(a,h,k){for(f=e.length;f--;){n&&(k=t(C[f],a),e[f].style.left=k[0]+"px",e[f].style.top=k[1]+"px");for(var G in c){h=a;var l=d;k=F;var E=H,w=G,b=f,g=void 0;if("transform"==w){g={};l=void 0;for(l in k[b][w])g[l]=l in E[b][w]?Math.round(1E3*((E[b][w][l]-
k[b][w][l])*h+k[b][w][l]))/1E3:k[b][w][l];h=g}else if("string"==typeof k[b][w]){k=k[b][w];E=E[b][w];w=[];l=g=g=b=void 0;for(b=0;6>b;b++)g=Math.min(15,parseInt(k.charAt(b),16)),l=Math.min(15,parseInt(E.charAt(b),16)),g=Math.floor((l-g)*h+g),g=15<g?15:0>g?0:g,w[b]=g.toString(16);h="#"+w.join("")}else g=Math.round(1E3*((E[b][w]-k[b][w])*h+k[b][w]))/1E3,w in x||(g+=l[b][w]||"px"),h=g;"transform"==G?e[f].style[r]=y(h):"opacity"!=G||u?e[f].style[v(G)]=h:e[f].style.filter="alpha(opacity="+100*h+")"}}},h,
l])}var m=document,A=window,I=A.performance,C=I&&(I.now||I.webkitNow||I.msNow||I.mozNow),e=C?function(){return C.call(I)}:function(){return+new Date},c=!1,a=m.documentElement,G=/^rgb\(|#/,f=/^([+\-])=([\d\.]+)/,w=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,h=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,k=/scale\(((?:[+\-]=)?([\d\.]+))\)/,l=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,n=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,x={lineHeight:1,
zoom:1,zIndex:1,opacity:1,transform:1},r=function(){var a=m.createElement("a").style,c=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],e;for(e=0;e<c.length;e++)if(c[e]in a)return c[e]}(),u="undefined"!==typeof m.createElement("a").style.opacity,E=m.defaultView&&m.defaultView.getComputedStyle?function(a,c){c="transform"==c?r:c;c=v(c);var e=null,u=m.defaultView.getComputedStyle(a,"");u&&(e=u[c]);return a.style[c]||e}:a.currentStyle?function(a,c){c=v(c);if("opacity"==c){var e=
100;try{e=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(u){try{e=a.filters("alpha").opacity}catch(f){}}return e/100}e=a.currentStyle?a.currentStyle[c]:null;return a.style[c]||e}:function(a,c){return a.style[v(c)]},F=function(){return A.requestAnimationFrame||A.webkitRequestAnimationFrame||A.mozRequestAnimationFrame||A.msRequestAnimationFrame||A.oRequestAnimationFrame||function(a){A.setTimeout(function(){a(+new Date)},17)}}();F(function(a){c=1E12<a!=1E12<e()});var H=[];p.tween=b;p.getStyle=
E;p.bezier=t;p.transform=r;p.parseTransform=D;p.formatTransform=y;p.animationFrame=F;p.easings={};return p});(function(B,D,y){function q(b,C,e,c){e=e||"width";var a;a=(C.match(g)||[])[2];var G="px"===a?1:p[a+"toPx"],f=/r?em/i;if(G||f.test(a)&&!c)b=G?b:"rem"===a?d:"fontSize"===e?b.parentNode||b:b,G=G||parseFloat(v(b,"fontSize")),b=parseFloat(C)*G;else{c=b.style;a=c[e];try{c[e]=C}catch(w){return 0}b=c[e]?parseFloat(v(b,e)):0;c[e]=a!==y?a:null}return b}function v(d,C){var e,c,a=/^top|bottom/,G=["paddingTop","paddingBottom","borderTop","borderBottom"],f=4;e=b?b(d)[C]:(c=d.style["pixel"+C.charAt(0).toUpperCase()+
C.slice(1)])?c+"px":"fontSize"===C?q(d,"1em","left",1)+"px":d.currentStyle[C];c=(e.match(g)||[])[2];if("%"===c&&t)if(a.test(C)){for(a=(c=d.parentNode||d).offsetHeight;f--;)a-=parseFloat(v(c,G[f]));e=parseFloat(e)/100*a+"px"}else e=q(d,e);else("auto"===e||c&&"px"!==c)&&b?e=0:c&&"px"!==c&&!b&&(e=q(d,e)+"px");return e}var z=D.createElement("test"),d=D.documentElement,b=(D=D.defaultView)&&D.getComputedStyle,t,g=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,p={};D=[1/25.4,1/2.54,1/72,1/6];var m="mm cm pt pc in mozmm".split(" "),
A=6;d.appendChild(z);b&&(z.style.marginTop="1%",t="1%"===b(z).marginTop);for(;A--;)p[m[A]+"toPx"]=D[A]?D[A]*p.inToPx:q(z,"1"+m[A]);d.removeChild(z);z=y;B.Length={toPx:q}})(this,this.document);(function(B){function D(d){var b=null,t=new XMLHttpRequest;t.open(d.type,d.url,!0);d.files||t.setRequestHeader("Content-type","application/json");d.cache&&t.setRequestHeader("Cache-Control","max-age=86400");t.onloadend=function(){200==t.status?b&&b(JSON.parse(t.responseText)):b&&b(null);t=null};d.files?t.send(d.data):t.send(d.data?JSON.stringify(d.data):null);this.done=function(d){b=d}}function y(d){var b=d.currentStyle||window.getComputedStyle(d);return Length.toPx(d,b.marginTop)}function q(){var d=
[],b=function(b,d){return b-d},t=function(g,p,m){var A=d.length;p=null==p?0:p;m=null==m?A-1:m;var q=p+Math.floor((m-p)/2);if(0==A)return A;if(0<b(g,d[m]))return m+1;if(0>b(g,d[p]))return p;A=b(g,d[q]);if(0==A)return q;if(0>A)return t(g,p,q-1);if(0<A)return t(g,q+1,m)};this.setCompare=function(d){d&&(b=d)};this.insert=function(b){d.splice(t(b),0,b)};this.length=function(){return d.length};this.at=function(b){return d[b]};this.grab=function(b){return d.splice(0,b)};this.data=function(){return d}}function v(d){var b=
function(){var b=window.performance||{};b.now=function(){return b.now||b.webkitNow||b.msNow||b.oNow||b.mozNow||function(){return(new Date).getTime()}}();return b.now()},t=function(){return d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.msRequestAnimationFrame||d.oRequestAnimationFrame||function(g){d.setTimeout(function(){g(b())},1E3/60)}}(),g=function(){return new function(){var b=new q,d=function(g){0<b.length()&&t(d);var q,C;q=0;for(C=b.length();q<C&&!(b.at(q).timestamp>
g);++q);g=b.grab(q);q=0;for(C=g.length;q<C;++q)g[q].func.apply(null,g[q].args)};b.setCompare(function(b,d){return b.timestamp-d.timestamp});this.addTask=function(g){b.insert(g);0<b.length()&&t(d)}}}();d.async=function(d,m,t){"Function"!=classOf(d)||m&&"Array"!=classOf(m)||g.addTask({timestamp:t?b()+t:0,func:d,args:m||[]})}}function z(d){var b={};d.events={listen:function(d,g){var p=b[d]||[];p[p.length]=g;b[d]=p},remove:function(d,g){var p=b[d]||[],m=p.indexOf(g);0<=m&&p.splice(m,1)},emit:function(t,
g){var p=b[t];if(p)for(var m=0;m<p.length;++m)d.async(p[m],g)}}}B.hashCode=function(d){var b=0,t,g,p;if(0===d.length)return b;t=0;for(p=d.length;t<p;t++)g=d.charCodeAt(t),b=(b<<5)-b+g,b|=0;return b};B.DropInsertManager=function(){function d(){p.setAttribute("position",0);p.parentNode&&p.parentNode.removeChild(p)}var b=this,t=null,g=null,p=document.createElement("div");p.className="drop-point";p.ondragover=function(b){b.preventDefault()};p.ondrop=function(d){d.preventDefault();null!=t&&null!=g&&t!=
g&&(d=p.getAttribute("position"),1==d&&b.insertBefore?b.insertBefore(t,g):2==d&&b.insertAfter&&b.insertAfter(t,g))};b.beginMove=function(b){t=b};b.hoverTarget=function(b,q){if(b==t)d(),g=null;else{b!=g&&(d(),g=b,g.el.appendChild(p));var v=g.el.offsetWidth,C=v/2,v=v-q,e=p.getAttribute("position");v>C&&1!=e?p.setAttribute("position",1):v<C&&2!=e&&p.setAttribute("position",2)}};b.endMove=d};B.MSInputObject=function(d){var b=this;b.__get_value=null;b.__set_value=null;d=d||{};if(window.admin||d.user){if(d.multiline){b.el=
document.createElement("textarea");var t=b.el.offsetHeight-b.el.clientHeight,g=0,p=b.el.clientHeight,m=function(){async(function(){var d=b.el.value.length;d<g&&(b.el.style.height="auto");var m=b.el.scrollHeight+t;0<m&&(b.el.style.height=m+"px");g=d;m!=p&&(p=m)})};b.__get_value=function(){return b.el.value};b.__set_value=function(d){b.el.value=d;m()};b.el.addEventListener("keydown",m);b.el.addEventListener("keyup",m)}else b.el=document.createElement("input"),b.el.setAttribute("type","text"),b.__get_value=
function(){return b.el.value},b.__set_value=function(d){b.el.value=d};b.el.onchange=function(){if(b.onchange)b.onchange(b)};d.placeholder&&this.el.setAttribute("placeholder",d.placeholder)}else b.el=document.createElement("div"),b.__get_value=function(){return b.el.innerHTML},b.__set_value=function(d){b.el.innerHTML=d};d.className&&(b.el.className=d.className);d.id&&(b.el.id=d.id)};MSInputObject.prototype.value=function(){return this.__get_value()||""};MSInputObject.prototype.setValue=function(d){this.__set_value(d||
"")};B.MSDivObject=function(d){this.el=d||document.createElement("div")};MSDivObject.prototype.addClass=function(d){-1==this.el.className.indexOf(d)&&(this.el.className=this.el.className.concat(" ",d))};MSDivObject.prototype.removeClass=function(d){-1<this.el.className.indexOf(d)&&(this.el.className=this.el.className.replace(d,"").replace("  "," ").trim())};MSDivObject.prototype.setPlaceholder=function(d){if(window.admin){var b=this,t=document.createElement("span"),g=!0;b.has_placeholder=!0;t.className=
"placeholder";t.innerHTML=d;0==b.el.innerHTML.length&&(b.el.appendChild(t),b.addClass("placeholder-visible"));b.el.addEventListener("text-changed",function(){0==b.el.innerHTML.length?(g||(b.addClass("placeholder-visible"),g=!0),b.el.appendChild(t)):g&&(g=!1,b.removeClass("placeholder-visible"))});b.el.addEventListener("focus",function(){g&&(b.el.removeChild(t),b.removeClass("placeholder-visible"),g=!1)});b.el.addEventListener("blur",function(){0==b.innerHTML.length&&(b.el.appendChild(t),b.addClass("placeholder-visible"),
g=!0)});b.has_text=function(){return!g}}};MSDivObject.prototype.refresh=function(){(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed"))};MSDivObject.prototype.setText=function(d){d&&(this.el.innerHTML=d,(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed")))};MSDivObject.prototype.getText=function(){return this.has_placeholder?this.has_text()?this.el.innerHTML:"":this.el.innerHTML};MSDivObject.prototype.textEdit=function(d){if(window.admin){var b=
this;d=d||{};d.textItem=d.textItem||b;b.el.addEventListener("click",function(){if(!b.in_edit){b.in_edit=!0;var t=d.textItem.getText(),g=d.multiline?document.createElement("textarea"):document.createElement("input");d.multiline&&d.autosize&&g.addEventListener("keydown",function(){async(function(){g&&(g.style.height=g.scrollHeight+"px")})});d.multiline||(g.type="text");g.className="inplace-text-edit";g.value=t;g.style.width=b.el.offsetWidth-(d.offsetWidth||0)+"px";g.style.height=b.el.offsetHeight-(d.offsetHeight||
0)+"px";b.el.innerHTML="";b.el.appendChild(g);g.focus();g.onblur=function(){d.textItem.setText(g.value);g=null;b.in_edit=!1;d.textItem!=b&&(b.el.innerHTML="",b.el.appendChild(d.textItem.el),b.refresh())}}})}};MSDivObject.prototype.loadImage=function(d){var b=this,t=d.url;async(function(){b.el.style.backgroundImage="url("+t+")"})};B.FileUpload=function(d){var b=this,t=document.createElement("div"),g=document.createElement("input");d=d||{multiple:!1};d.id&&(t.id=d.id);d.className&&(t.className=d.className);
g.type="file";g.name="file";g.accept="image/*";g.multiple=d.multiple;t.appendChild(g);g.onchange=function(d){b.preview&&b.preview(d.target.files)};b.el=t};B.DropDown=function(d,b){function t(a,c){if(a.manager)a.manager.setValue(c);else if(a.firstChild&&3==a.firstChild.nodeType)a.firstChild.nodeValue=c;else{var e=document.createTextNode(c);a.firstChild?a.insertBefore(e,a.firstChild):a.appendChild(e)}}function g(){var a=null,c=[];this.bind=function(e){c[c.length]=e;a&&t(e,a)};this.unbind=function(a){a=
c.indexOf(a);0<=a&&c.splice(a,1)};this.setValue=function(e){if(a=e)for(e=0;e<c.length;++e)t(c[e],a)}}var p=this,m=b||document.createElement("div"),q=!d.adminOnly||window.admin,v=q?document.createElement("img"):null,C=q?document.createElement("lu"):null,e=!1,c=!1,a={},G=null,f=!1,w=function(c){var f=a[c];f&&(G&&G.unbind(m),m.setAttribute("current-data-id",c),G=f,G.bind(m),q&&e&&p.close(),p.changed&&async(p.changed,[c]))};m.controller=p;p.addItem=function(c,e){var b=new g,n=null;a[c]=b;e&&b.setValue(c);
q&&(n=document.createElement("li"),n.className="dropdown-item text-invert",n.onclick=function(){f||w(c)},C.appendChild(n),b.bind(n));G||w(c);return{controller:b,item:n}};p.addVirtual=function(){var a=document.createElement("li");a.className="dropdown-item virtual text-invert";C.appendChild(a);return a};p.removeVirtual=function(a){C.contains(a)&&C.removeChild(a)};m.className=d.className?0<m.className.length?m.className+(" dropdown-container no-select text "+d.className):"dropdown-container no-select text "+
d.className:0<m.className.length?m.className+" dropdown-container text":"dropdown-container text";q&&(v.src=d.src||"../images/down.png",m.appendChild(v),C.className="dropdown-list no-select",m.appendChild(C),m.onclick=function(){f||c||(p.beforeOpen&&p.beforeOpen(),e=!0,C.style.display="block")},m.onmouseleave=function(){f||p.close()});p.el=m;p.manual=function(){f=!0};p.auto=function(){f=!1};p.open=function(){f&&(e=!0,C.style.display="block")};p.close=function(){e&&(p.beforeClose&&p.beforeClose(),
C.style.right="-200%",async(function(){C.removeAttribute("style")}))};p.setText=function(a){t(m,a)};p.text=function(){return m.firstChild&&3==m.firstChild.nodeType?m.firstChild.nodeValue:""};p.value=function(){return m.getAttribute("current-data-id")};p.setValue=function(a){w(a)};p.lock=function(){c=!0;m.setAttribute("locked",!0)};p.unlock=function(){c=!1;m.removeAttribute("locked")}};B.classOf=function(d){return/\[object (\w+)\]/.exec(Object.prototype.toString.call(d))[1]};B.getHeight=function(d){var b;
document.all?(b=parseInt(d.currentStyle.height),d=parseInt(d.currentStyle.marginTop,10)+parseInt(d.currentStyle.marginBottom,10)):(b=parseInt(document.defaultView.getComputedStyle(d,"").getPropertyValue("height")),d=parseInt(document.defaultView.getComputedStyle(d,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(d,"").getPropertyValue("margin-bottom")));return b+d};B.browser={opera:!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),firefox:"undefined"!==typeof InstallTrigger,
safari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),ie:!!document.documentMode};B.browser.chrome=!!window.chrome&&!window.browser.opera;B.ajax=function(d){return new D(d)};B.scrollBodyTo=function(d){var b=document.getElementById("content-wrapper"),t=parseInt(d.offsetTop-y(d)),g=parseInt(b.scrollTop);for(d=d.parentNode;d&&d!=b;)t+=parseInt(d.offsetTop-y(d)),d=d.parentNode;if(g!=t){var p=t-g;morpheus.tween(500,function(d){d=g+p*d;0<=d&&d<=b.scrollHeight&&(b.scrollTop=
d)})}};B.addEventListener("load",function(){new v(B);new z(B)})})(this);(function(){function B(){function y(b,d){if(b.controller)b.controller.setValue(d);else if(b.firstChild&&3==b.firstChild.nodeType&&b.firstChild.nodeValue)b.firstChild.nodeValue=d;else{var m=document.createTextNode(d);b.firstChild?b.insertBefore(m,b.firstChild):b.appendChild(m)}}var q="en",v={},z={};this.bind=function(b,d){y(d,D[q][b]);var m=v[b];m?m[m.length]=d:v[b]=[d]};this.bindInput=function(b,d){d.placeholder=D[q][b];var m=z[b];m?m[m.length]=d:z[b]=[d]};this.unbind=function(b){for(var d in v)if(v.hasOwnProperty(d)&&
0<v[d].length){var m=v[d].indexOf(b);-1!=m&&v[d].splice(m,1)}};this.unbindInput=function(b){for(var d in z)if(z.hasOwnProperty(d)&&0<z[d].length){var m=z[d].indexOf(b);-1!=m&&z[hey].splice(m,1)}};this.change=function(b){if(D[b]&&q!=b){q=b;for(var d in v)if(v.hasOwnProperty(d)&&0<v[d].length){b=v[d];for(var m=b.length,t=0;t<m;++t)y(b[t],D[q][d])}for(d in z)if(z.hasOwnProperty(d)&&0<z[d].length)for(b=z[d],m=b.length,t=0;t<m;++t)b[t].placeholder=D[q][d]}};for(var d=document.getElementsByTagName("*"),
b=0;b<d.length;++b)if(d[b].hasAttribute("lang")){var t=d[b].getAttribute("lang");this.bind(t,d[b])}else d[b].hasAttribute("placeholder-lang")&&(t=d[b].getAttribute("placeholder-lang"),this.bindInput(t,d[b]));this.change("pl")}var D={en:{about:"About",shop:"Shop",orders:"Orders",gallery:"Gallery",contact:"Contact",description:"Description",title:"Title",type:"Type",availability:"Availability",process:"Order Process",price:"Price",quantity:"Quantity",shipping:"Shipping",qandp:"Quantity & Price",payment_opt:"Payment methods",
lead:"Lead times",individual:"Individual",common:"Common",available:"Available",demand:"On-Demand",keep:"Keep in Shop",move:"Move to Gallery",remove:"Remove","delete":"Delete",save:"Save",close:"Close",order:"Order",aboutus:"About Us",office:"Our Office",contactus:"Contact Us",name:"Name",surname:"Surname",email:"E-mail",address:"Address",country:"Country",postcode:"Post Code",message:"Message"},pl:{about:"Pracownia",shop:"Sklep",orders:"Zam\u00f3wienie",order:"Zam\u00f3w",gallery:"Galeria",contact:"Kontakt",
description:"Opis",title:"Nazwa",type:"Rodzaj",availability:"Dost\u0119pno\u015b\u0107",process:"Akcja",price:"Cena",close:"Zamknij",save:"Zapisz","delete":"Kasuj",payment_opt:"Forma p\u0142atno\u015bci",lead:"Czas realizacji",quantity:"Ilo\u015b\u0107",shipping:"Transport",total:"Koszt ca\u0142kowity",checkout:"Dalej",about_us:"O nas",office:"Dane kontaktowe",about_us_value:"",send:"Wy\u015blij",personal_details:"Dane osobowe",forename:"Imi\u0119",surname:"Nazwisko",email:"Email",phone:"Numer telefonu",
shipping_address:"Adres wysy\u0142ki",company:"Nazwa firmy",address:"Ulica",city:"Miasto",county:"Wojew\u00f3dztwo",post_code:"Kod pocztowy",country:"Kraj",next:"Kontynuuj",back:"Wr\u00f3\u0107",payment_type:"Rodzaj p\u0142atno\u015bci",card_details:"Szczeg\u00f3\u0142y karty kredytowej",card_no:"Numer karty",cvv:"CVV",expiry:"Termin wa\u017cno\u015bci",billing_address:"Adres fakturowania",vat:"NIP",full_name:"Imi\u0119 i nazwisko",price_summary:"Podsumowanie",pay:"Zap\u0142a\u0107",message:"Wiadomo\u015b\u0107",
individual:"Pojedynczy",common:"Zbiorowy",advert:"Og\u0142oszenie",available:"Dost\u0119pny",demand:"Na zam\u00f3wienie",keep:"Sklep",move:"Galeria",remove:"Usu\u0144",today:"Dzisiaj",l_3_day:"3 dni",l_week:"Tydzie\u0144",l_month:"Miesi\u0105c",l_time:"Ca\u0142y czas",lead_avail:"- Realizacja zam\u00f3wienia: 1 dzie\u0144 roboczy\n- Czas dostawy: 2 - 3 dni robocze",lead_wait:"- Realizacja zam\u00f3wienia: 2 - 3 tygodnie\n- Czas dostawy: 2 - 3 dni robocze",components:"Nazwa",none:"Bez nazwy",labeled:"Oznaczona",
projects:"Projekt",category:"Kategoria",allitems:"Wszystkie",lowprice:"Cena malej\u0105co",hightprice:"Cena rosn\u0105co",iagree:"Akceptuj\u0119",terms:"Regulamin sklepu",workshop:"Warsztaty",duration:"Czas trwania",timetable:"Terminy zaj\u0119\u0107",location:"Lokalizacja"}};window.addEventListener("load",function(){window.language=new B})})();(function(){function B(){var y=document.getElementById("main_menu"),q=document.getElementById("menu_list"),v=y.getElementsByClassName("menu_item"),z=!1,d={};y.onclick=function(){z?(z=!1,q.removeAttribute("style")):(q.style.display="block",z=!0)};for(y=0;y<v.length;++y){var b=v[y].getAttribute("scrollto");d[b]=document.getElementById(b);v[y].onclick=function(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0;z=!1;q.removeAttribute("style");window.scrollBodyTo(d[b.target.getAttribute("scrollto")])}}}
function D(){if(window.mobile)new B;else{var y=document.getElementById("header"),q=document.getElementById("content-wrapper"),v=document.getElementById("title"),z=document.getElementById("main_menu"),d=z.getElementsByClassName("menu_item"),b=[y,q,v,z],t={},g=!1,p;for(p in d)if(d.hasOwnProperty(p)){var m=d[p].getAttribute("scrollto");t[m]=document.getElementById(m);d[p].onclick=function(b){window.scrollBodyTo(t[b.target.getAttribute("scrollto")])}}y.unset={height:160};q.unset={top:160};v.unset={height:120,
width:720,left:"50%",marginLeft:-360};z.unset={top:120,left:"50%",marginLeft:-350};y.set={height:60};q.set={top:60};v.set={height:60,width:350,left:"0%",marginLeft:0};z.set={top:15,left:"100%",marginLeft:-700};for(p in b){var d=b[p].unset,A;for(A in d)b[p].style[A]=d[A]}window.events.listen("requestHeaderHeight",function(b){b(y.offsetHeight)});window.addEventListener("resize",function(){g&&(v.style.marginLeft=(y.offsetWidth<z.offsetWidth+350?-350:0)+"px")});q.addEventListener("scroll",function(){var d=
q.scrollTop;g&&0==d?(g=!1,morpheus(b,{height:function(b){return b.unset.height},width:function(b){return b.unset.width},top:function(b){return b.unset.top},left:function(b){return b.unset.left},marginLeft:function(b){return b.unset.marginLeft},duration:350,complete:function(){window.events.emit("headerChanged",[y.unset.height])}})):!g&&0<d&&(g=!0,v.set.marginLeft=y.offsetWidth<z.offsetWidth+350?-350:0,morpheus(b,{height:function(b){return b.set.height},width:function(b){return b.set.width},top:function(b){return b.set.top},
left:function(b){return b.set.left},marginLeft:function(b){return b.set.marginLeft},duration:500,complete:function(){window.events.emit("headerChanged",[y.set.height])}}))})}}window.addEventListener("load",function(){window.header=new D})})();(function(){function B(y){var q=this,v=document.createElement("div"),z=new MSInputObject({multiline:!0,placeholder:"Description",className:"about-column-text text"}),d=window.admin?document.createElement("div"):null;v.className="about-column";z.setValue(y);v.appendChild(z.el);d&&(d.className="remove-about-column",v.appendChild(d),d.onclick=function(){q.remove&&q.remove(q)});q.el=v;q.text=function(){return z.value()}}function D(){var y=document.getElementById("about_panel"),q=document.getElementById("columns");
document.getElementById("demo_show");var v=window.admin?document.getElementById("create_about_column"):null,z=window.admin?document.getElementById("save_about_column"):null,d=window.admin?function(d){q.removeChild(d.el);b.splice(b.indexOf(d),1)}:null,b=[];window.admin&&y.setAttribute("admin",!0);v&&(v.onclick=function(){var t=new B;t.remove=d;b.push(t);q.appendChild(t.el)});z&&(z.onclick=function(){for(var d=[],g=0;g<b.length;++g)d.push(b[g].text());window.ajax({type:"POST",data:{fields:d},url:"/async/about/save"})});
window.ajax({type:"POST",url:"/async/about/load"}).done(function(t){if(t.status&&t.fields){var g=document.createDocumentFragment(),p;for(p in t.fields){var m=new B(t.fields[p]);m.remove=d;b.push(m);g.appendChild(m.el)}q.appendChild(g)}})}window.addEventListener("load",function(){window.home=new D})})();(function(){function B(b){var e=this,c=b.id,a=b.file?!0:!1,d=b.file,f=null,w=!1,h=null,k=!1,l=new MSDivObject;b=window.admin?document.createElement("div"):null;l.el.className="picture-thumb";b&&(b.className="picture-thumb-remove",b.onclick=function(){e.removed&&e.removed(c)},l.el.appendChild(b));window.admin&&(l.el.setAttribute("draggable",!0),l.el.ondragstart=function(a){e.beginMove&&(a.dataTransfer.setData("target",c),e.beginMove(e))},l.el.ondragover=function(a){a.preventDefault();e.hoverTarget&&
"picture-thumb"==a.target.className&&e.hoverTarget(e,a.layerX)},l.el.ondragend=function(a){a.preventDefault();e.endMove&&e.endMove(e)});l.el.onclick=function(){e.click&&e.click(e)};e.el=l.el;e.id=function(){return c};e.isTemp=function(){return a};e.file=function(){return d};e.data=function(){return f};e.remove=function(){w=!0;return a};e.pack=function(){return{id:c,temp:a,file:d,data:f,removed:w}};e.onload=function(a){k&&a?async(a,[e]):h=a};e.commit=function(e){if(w&&!a)window.ajax({type:"POST",data:{id:c},
url:"/async/images/delete"}).done(function(a){e()});else if(a){var b=new FormData;b.append("file",d);window.ajax({type:"POST",data:b,files:!0,url:"/async/images/save"}).done(function(a){e(a.id)})}else e(c)};e.update=function(e){c=e.id;a=e.temp;d=e.file;f=e.data;w=e.removed;l.el.style.backgroundImage=a?"url("+f+")":"url(/async/thumb/load/"+c+")"};a?(b=new FileReader,b.onload=function(a){f=a.target.result;l.el.style.backgroundImage="url("+f+")";k=!0;h&&(async(h,[e]),h=null)},b.readAsDataURL(d)):(l.loadImage({url:"/async/thumb/load/"+
c,color:"#e0e0e0",shadow:!0,radius:24,width:6,length:22,lines:15,speed:.75}),k=!0,h&&(async(h,[e]),h=null))}function D(){var b=this,e=document.createElement("div"),c=document.createElement("div"),a=document.createElement("div"),d=new MSDivObject,f=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,w=null,h={},k=[],l=window.admin?new DropInsertManager:null,n=function(c){var e=h[c];e&&(e.remove()&&delete h[c],a.removeChild(e.el));c=k.indexOf(c);0<=c&&k.splice(c,1)},x=function(a){a.isTemp()?
d.el.style.backgroundImage="url("+a.data()+")":d.loadImage({url:"/async/images/load/"+a.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});d.el.hasAttribute("current")&&scrollBodyTo(e);d.el.setAttribute("current",a.id())};window.admin&&(l.insertBefore=function(c,e){var b=k.indexOf(c.id()),f=null;0<=b&&(k.splice(b,1),f=k.indexOf(e.id()),0<=f&&(k.splice(f,0,c.id()),a.removeChild(c.el),a.insertBefore(c.el,e.el)))},l.insertAfter=function(c,e){var b=k.indexOf(c.id()),f=null;
0<=b&&(k.splice(b,1),f=k.indexOf(e.id()),0<=f&&(k.splice(f+1,0,c.id()),a.removeChild(c.el),(b=e.el.nextElementSibling)?a.insertBefore(c.el,b):a.appendChild(c.el)))});e.className="picture-manager";c.className="picture-container";a.className="picture-carousel";c.appendChild(a);d.el.className="picture-preview";f&&(a.appendChild(f.el),f.preview=function(a){if(a){b.beginAdd();for(var c=null,e=0;e<a.length;++e){var f=new B({id:String(hashCode(a[e].name)),file:a[e]});c||(c=f);b.add(f)}b.endAdd();b.show(c)}});
e.appendChild(d.el);e.appendChild(c);b.el=e;b.imageList=function(){return k};b.commit=function(a){var c=function(a,e,b,f,d){a==e?d(f):h[b[a]].commit(function(r){r&&f.push(r);c(a+1,e,b,f,d)})};c(0,k.length,k,[],a)};b.beginAdd=function(){null==w&&(w=document.createDocumentFragment())};b.endAdd=function(){if(w&&(a.appendChild(w),w=null,0<k.length))h[k[0]].onload(x)};b.present=function(a){(a=h[a])&&async(x,[a])};b.add=function(a){w&&!h[a.id()]&&(k.push(a.id()),h[a.id()]=a,a.removed=n,a.click=x,window.admin&&
(a.beginMove=l.beginMove,a.hoverTarget=l.hoverTarget,a.endMove=l.endMove),w.appendChild(a.el))};b.show=function(a){var c=function(){if(w)async(c);else if(a)a.onload(x)};async(c)}}function y(){function b(a){(a?1==a:d.getAttribute("off"))?(d.removeAttribute("off"),f.style=""):(d.setAttribute("off",!0),f.style="display:none;")}var e=document.createElement("table"),c=new MSInputObject({placeholder:"Duration",className:"text"}),a=new MSInputObject({placeholder:"Price",className:"text"}),d=document.createElement("div"),
f=document.createElement("tr");d.className="enable-price";d.onclick=function(){b()};language.bindInput("duration",c.el);language.bindInput("price",a.el);var w=document.createElement("tr"),h=document.createElement("th"),k=document.createElement("th"),l=document.createElement("th");w.className="text-invert";language.bind("duration",h);language.bind("price",k);w.appendChild(h);w.appendChild(k);l.appendChild(d);w.appendChild(l);e.appendChild(w);h=document.createElement("td");k=document.createElement("td");
l=document.createElement("td");h.appendChild(c.el);f.appendChild(h);k.appendChild(a.el);f.appendChild(k);f.appendChild(l);e.appendChild(f);e.className="single-item";this.el=e;this.value=function(){return d.getAttribute("off")?null:{duration:c.value(),price:a.value()}};this.setValue=function(e){e?(c.setValue(e.duration),a.setValue(e.price)):b(1)}}function q(){var b=document.createElement("table"),e=document.createElement("tr"),c=document.createElement("th"),a=document.createElement("th"),d=document.createElement("tr"),
f=document.createElement("td"),w=document.createElement("td");e.className="text-invert";language.bind("duration",c);language.bind("price",a);e.appendChild(c);e.appendChild(a);b.appendChild(e);d.appendChild(f);d.appendChild(w);b.appendChild(d);f.setAttribute("currency","godz.");w.setAttribute("currency","z\u0142");this.el=b;this.value=function(){return current};this.setValue=function(a){f.innerHTML=a.duration;w.innerHTML=a.price}}function v(b){var e=document.createElement("div"),c=window.admin?new y:
new q;e.appendChild(c.el);e.className="price text advert-hide";this.el=e;this.value=function(){return c.value()};this.setValue=function(a){if(a||window.admin)c.setValue(a);else return e.style="display: none;",1}}function z(){function b(){this.removeAttribute("error");this.onfocus=null}var e=document.createElement("div"),c=document.createElement("div"),a=document.createElement("input"),d=document.createElement("input"),f=new MSInputObject({className:"message text",multiline:!0,user:!0});e.className=
"workshop-item-contact-panel";c.className="text-header header-text";a.className="name text";d.className="email text";language.bind("contact",c);language.bindInput("full_name",a);language.bindInput("email",d);language.bindInput("message",f.el);e.appendChild(c);e.appendChild(a);e.appendChild(d);e.appendChild(f.el);this.el=e;this.value=function(){return{name:a.value,email:d.value,message:f.value()}};this.error=function(c){for(var e in c)"name"==e?(a.setAttribute("error",!0),a.onfocus=b):"email"==e?(d.setAttribute("error",
!0),d.onfocus=b):"message"==e&&(f.el.setAttribute("error",!0),f.el.onfocus=b)}}function d(){function b(a){var c=this,e=document.createElement("div"),f=window.admin?document.createElement("input"):document.createElement("div"),d=window.admin?new Flatpickr(f,{locale:Flatpickr.l10ns.pl,enableTime:!0,minDate:new Date,time_24hr:!0,dateFormat:"F j, Y H:i",onChange:function(a){1==a.length&&(h=a[0])}}):null,u=window.admin?document.createElement("div"):null,h=a;e.className="timetable-element";f.className=
"timetable-element-input text-invert";e.appendChild(f);window.admin?(u.className="timetable-element-remove",e.appendChild(u),d.setDate(h),u.onclick=function(){c.remove(c)}):(a=Flatpickr.l10ns.pl.months.longhand[h.getMonth()]+" "+h.getDate()+", "+h.getFullYear()+" "+h.getHours()+":"+(10>h.getMinutes()?"0"+h.getMinutes():h.getMinutes()),f.innerHTML=a);c.value=function(){return h.valueOf()};c.el=e}var e=this,c=document.createElement("div"),a=window.admin?document.createElement("div"):null,d=window.admin?
document.createElement("input"):null,f=window.admin?new Flatpickr(d,{locale:Flatpickr.l10ns.pl,enableTime:!0,minDate:new Date,time_24hr:!0,dateFormat:"F j, Y H:i",onClose:function(a){f.clear();f.jumpToDate(new Date);1==a.length&&e.createTimetable(a[0])}}):null,w=[],h=window.admin?function(a){c.removeChild(a.el);a=w.indexOf(a);0<=a&&w.splice(a,1)}:null;c.className="timetable-list";window.admin&&(a.className="timetable-add",a.appendChild(d),c.appendChild(a));e.createTimetable=function(e){e=new b(e);
w[w.length]=e;window.admin?(e.remove=h,c.insertBefore(e.el,a)):c.appendChild(e.el)};e.value=function(){for(var a=[],c=w.length,e=0;e<c;e++)a[e]=w[e].value();return a};e.setValue=function(a){if(a&&0<a.length||window.admin)for(var b=a?a.length:0,f=0;f<b;f++)e.createTimetable(new Date(a[f]));else return c.style="display:none;",1};e.el=c}function b(){function b(c,e){var h=e?!0:!1,k=window.admin?document.createElement("input"):null,l=document.createElement("div"),n=document.createElement("div"),x=window.admin?
document.createElement("div"):null,r=document.createElement("div"),u=document.createElement("a");if(window.maps){var E=new google.maps.Map(c,{center:{lat:52.160418,lng:21.02214},zoom:19,mapTypeControl:!1,fullscreenControl:!1}),F=new google.maps.Marker({map:E}),H=window.admin?new google.maps.places.Autocomplete(k):null,g=new google.maps.places.PlacesService(E);l.className="location-info";n.className="name text-invert";r.className="address text";u.className="website text";u.target="_blank";window.admin&&
(k.className="location-input text",x.className="save",x.setAttribute("checked",0),x.onclick=function(){if(0==parseInt(x.getAttribute("checked"))){var a=F.getPlace();a&&(d=a.placeId,k.setAttribute("disabled",1),x.setAttribute("checked",1))}else d=null,k.removeAttribute("disabled"),x.setAttribute("checked",0)},l.appendChild(k),n.appendChild(x),H.bindTo("bounds",E),H.addListener("place_changed",function(){var a=H.getPlace();a.geometry&&(E.setCenter(a.geometry.location),F.setPlace({placeId:a.place_id,
location:a.geometry.location}),F.setVisible(!0),E.setZoom(17),n.innerHTML=a.name,n.appendChild(x),r.innerHTML=a.formatted_address,u.innerHTML=a.website,u.href=a.website)}));l.appendChild(n);l.appendChild(r);l.appendChild(u);E.controls[google.maps.ControlPosition.TOP_LEFT].push(l);g.getDetails({placeId:e||"ChIJGZKqLO0yGUcRDo5fRhYCJ1I"},function(a,c){c==google.maps.places.PlacesServiceStatus.OK&&(F.setPlace({placeId:a.place_id,location:a.geometry.location}),F.setVisible(!0),E.setZoom(19),E.setCenter(a.geometry.location),
n.innerHTML=a.name,window.admin&&n.appendChild(x),r.innerHTML=a.formatted_address,u.innerHTML=a.website,u.href=a.website,window.admin&&h&&(k.setAttribute("disabled",1),x.setAttribute("checked",1)))})}this.update=function(){window.maps&&google.maps.event.trigger(a,"resize")}}var e=document.createElement("div"),c=document.createElement("div"),a=null,d=null;e.className="location-control";c.className="location-map";e.appendChild(c);this.el=e;this.show=function(){window.maps&&async(function(){c.style.width=
e.offsetWidth+"px";c.style.height=e.offsetHeight+"px";a=new b(c,d);window.addEventListener("resize",function(){c.style.width=e.offsetWidth+"px";c.style.height=e.offsetHeight+"px";a.update()})})};this.value=function(){return d};this.setValue=function(a){d=a}}function t(g){var e=this,c=document.createElement("div"),a=document.createElement("div"),G=document.createElement("div"),f=null,w=document.createElement("div"),h=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),k=document.createElement("div"),
l=new v({type:0}),n=document.createElement("div"),x=new d,r=document.createElement("div"),u=new b,E=document.createElement("div"),F=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),H=window.admin&&g.id()?document.createElement("div"):null,m=document.createElement("div"),p=document.createElement("div"),t={title:h,price:l,timetable:x,location:u,descrition:F},q={title:w,price:k,timetable:n,location:r,descrition:E};c.className="details-container";a.className="details-view";
c.appendChild(a);G.className="control-view";c.appendChild(G);w.className="text-header header-text";language.bind("title",w);language.bindInput("title",h.el);a.appendChild(w);a.appendChild(h.el);k.className="text-header header-text";language.bind("price",k);a.appendChild(k);a.appendChild(l.el);n.className="text-header header-text";language.bind("timetable",n);a.appendChild(n);a.appendChild(x.el);r.className="text-header header-text";language.bind("location",r);a.appendChild(r);a.appendChild(u.el);
E.className="text-header header-text";language.bind("description",E);language.bindInput("description",F.el);a.appendChild(E);a.appendChild(F.el);window.admin||(f=new z,a.appendChild(f.el));m.className="action-btn no-select text-invert";language.bind(window.admin?"save":"send",m);G.appendChild(m);m.onclick=function(){if(window.admin){var a={},c;for(c in t)t.hasOwnProperty(c)&&t[c]&&(a[c]=t[c].value());e.save(a)}else a=f.value(),a.data={id:g.id(),preview:g.preview(),title:h.value()},e.contact(a,function(a){a.status||
f.error(a.error)})};p.className="close-btn no-select text-invert";language.bind("close",p);G.appendChild(p);p.onclick=function(){e.close()};H&&(H.className="delete-btn no-select text-invert",language.bind("delete",H),G.appendChild(H),H.onclick=function(){e.remove()});e.el=c;e.show=function(){u.show()};e.init=function(){};e.setValue=function(a){for(var c in t)t.hasOwnProperty(c)&&t[c]&&1==t[c].setValue(a[c])&&q[c]&&(q[c].style="display:none;")}}function g(b,e){function c(a,c){var f=this,d=new D,r=
new t(a);r.close=function(){f.close()};r.order=function(a){f.close(function(){window.events.emit("order",[a])},{force:!0})};r.contact=function(a,c){window.ajax({type:"POST",data:a,url:"/async/contact"}).done(function(a){a.status?f.close():c(a)})};f.load=function(a){b.id()?window.ajax({type:"POST",data:{id:b.id()},url:"/async/workshop/load"}).done(function(c){if(c.workshop){r.setValue(c.workshop);d.beginAdd();for(var e in c.workshop.images)d.add(new B({id:c.workshop.images[e]}));d.endAdd();r.init()}a&&
a()}):(r.init(),a&&a())};r.selectImage=function(a){d.present(a)};f.create=function(){c.appendChild(d.el);c.appendChild(r.el)};f.destroy=function(){c.removeChild(d.el);c.removeChild(r.el)};f.show=function(){d.show();r.show()};window.admin&&(r.save=function(c){d.commit(function(d){c.id=b.id();c.images=d;window.ajax({type:"POST",data:c,url:"/async/workshop/save"}).done(function(b){if(b.status){var r=null;a.id()==b._id?a.update({title:c.title,price:c.price,preview:d[0]}):r=function(){e.reload()};f.close(r)}})})},
r.remove=function(){window.ajax({type:"POST",data:{id:a.id()},url:"/async/workshop/delete"}).done(function(c){c.status&&(e.removeItem(a),f.close())})})}function a(a,c){async(d.close,a?[a,c]:null)}var d=this,f=document.createElement("div"),w=document.createElement("div"),h=new c(b,w);h.close=a;f.className=window.admin?"workshop-item-container edit":"workshop-item-container";f.style.display="none";w.className="workshop-item-view";h.create();f.appendChild(w);this.el=f;this.id=function(){return b.id()};
this.item=function(){return b};this.replace=function(e,f){b=e;var d=new c(b,w);d.close=a;d.load(function(){h.destroy();d.create();h=d;f&&f()})};this.show=function(a){a=a||{};a.force?(scrollBodyTo(f),morpheus(f,{marginLeft:0,duration:300,complete:function(){async(h.show)}})):(f.style.display="block",a=f.offsetHeight,scrollBodyTo(f),f.style.height="0px",morpheus(f,{height:a,duration:300,complete:function(){morpheus(f,{marginLeft:0,duration:300,complete:function(){async(h.show)}});f.style.height=null}}))};
this.hide=function(a,c){c=c||{};morpheus(f,{marginLeft:"-110%",duration:300,complete:function(){c.force||scrollBodyTo(b.el);f.style.marginLeft=null;c.inline?a&&a():morpheus(f,{height:0,duration:300,complete:function(){f.style.display="none";a&&a()}})}})};h.load()}function p(){var b=this,e=document.createElement("div"),c=document.createElement("div"),a=document.createElement("div");e.className="workshop-item-new";c.className="workshop-item-internal";e.appendChild(c);a.className="workshop-item-image";
c.appendChild(a);b.el=e;e.onclick=function(){b.open&&b.open(b)};b.id=function(){return null};b.title=function(){return null};b.position=function(){return e.offsetTop}}function m(b){var e=this,c=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),f=new MSDivObject,w=b.preview,h=document.createElement("div");c.id=b._id;c.className=window.admin?"workshop-item edit no-select":"workshop-item no-select";a.className="workshop-item-internal";c.appendChild(a);f.el.className=
"workshop-item-image";a.appendChild(f.el);d.className="workshop-item-title text";a.appendChild(d);h.className="workshop-item-price text";a.appendChild(h);f.loadImage({url:"/async/preview/load/"+w,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=b.title;b.price?(h.innerHTML=Math.round(b.price.price),h.setAttribute("currency","z\u0142")):(h.innerHTML=null,h.removeAttribute("currency"));e.id=function(){return c.id};e.title=function(){return d.innerHTML};e.position=function(){return c.offsetTop};e.preview=
function(){return w};e.update=function(a){w=a.preview;f.loadImage({url:"/async/preview/load/"+w,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=a.title;a.price?(h.innerHTML=Math.round(a.price.price),h.setAttribute("currency","z\u0142")):(h.innerHTML=null,h.removeAttribute("currency"))};c.onclick=function(){e.open(e)};if(window.admin){b.counts=b.counts||{};var k=document.createElement("div"),l=document.createElement("div"),n=document.createElement("span"),x=document.createElement("div"),r=document.createElement("span"),
u=document.createElement("div"),E=document.createElement("span"),F=document.createElement("div"),H=document.createElement("span"),g=document.createElement("div"),m=document.createElement("span");k.className="visit-counter-container text";l.className="visit-counter";x.className="visit-counter";u.className="visit-counter";F.className="visit-counter";g.className="visit-counter";language.bind("today",l);language.bind("l_3_day",x);language.bind("l_week",u);language.bind("l_month",F);language.bind("l_time",
g);n.innerHTML=b.counts.day_1||0;r.innerHTML=b.counts.day_3||0;E.innerHTML=b.counts.day_7||0;H.innerHTML=b.counts.day_28||0;m.innerHTML=b.counts.all||0;l.appendChild(n);x.appendChild(r);u.appendChild(E);F.appendChild(H);g.appendChild(m);k.appendChild(l);k.appendChild(x);k.appendChild(u);k.appendChild(F);k.appendChild(g);a.appendChild(k)}e.el=c}function A(b){function e(a){async(function(){if(n){var c=h.childNodes,b=n.item().position(),e=null;h.contains(n.el)&&h.removeChild(n.el);for(var d=0;d<c.length;++d)if(b<
c[d].offsetTop){e=c[d];break}e?h.insertBefore(n.el,e):h.appendChild(n.el);a&&"Function"==classOf(a)&&a()}})}function c(a,c){if(n){window.removeEventListener("resize",e);var b=n.el;n.hide(function(){h.removeChild(b);b=null;a&&a()},c);n=null}else a&&a()}function a(a){if(n){var b=n.item().position()==a.position();n.hide(function(){n.replace(a,function(){b?n.show({force:!0}):e(function(){n.show()})})},{force:!0,inline:b})}else n=new g(a,f),n.close=c,e(function(){n.show()}),window.addEventListener("resize",
e)}function d(){window.ajax({type:"POST",data:{},url:"/async/workshop/list"}).done(function(c){if(c&&c.status){var b=document.createElement("div"),e=null;k&&(b.appendChild(k.el),k.open=a);if(c.workshops)for(var d=0;d<c.workshops.length;++d){var f=new m(c.workshops[d]);if(n&&n.item().id()==f.id()||f.id()==l)e=f,l=null;f.open=a;b.appendChild(f.el)}w.replaceChild(b,h);h=b;e?a(e):n=null}})}var f=this,w=document.getElementById("workshop_item_view"),h=document.createElement("div"),k=window.admin?new p:
null,l=window.location.hash?window.location.hash.substring(1):null,n=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");f.createItem=function(c,b){b&&k&&k.el.nextSibling?h.insertBefore(c.el,k.el.nextSibling):h.appendChild(c.el);c.open=a};f.removeItem=function(a){h.removeChild(a.el)};w.appendChild(h);f.el=w;f.reload=d;d()}function I(){var b=document.getElementById("workshop_panel");new A(b);this.el=b}window.addEventListener("load",function(){window.workshops=
new I})})();(function(){function B(c){var a=this,b=c.id,e=c.file?!0:!1,d=c.file,h=c.label,k=null,l=null,n=!1,x=null,r=!1,u=new MSDivObject;c=window.admin?document.createElement("div"):null;var E=function(a){h=a;k&&(k.innerHTML=h||"")};u.el.className="picture-thumb";c&&(c.className="picture-thumb-remove",c.onclick=function(){a.removed&&a.removed(b)},u.el.appendChild(c));window.admin&&(u.el.setAttribute("draggable",!0),u.el.ondragstart=function(c){a.beginMove&&(c.dataTransfer.setData("target",b),a.beginMove(a))},
u.el.ondragover=function(c){c.preventDefault();a.hoverTarget&&"picture-thumb"==c.target.className&&a.hoverTarget(a,c.layerX)},u.el.ondragend=function(c){c.preventDefault();a.endMove&&a.endMove(a)});u.el.onclick=function(){a.click&&a.click(a)};a.el=u.el;a.id=function(){return b};a.isTemp=function(){return e};a.file=function(){return d};a.label=function(){return h};a.setLabel=E;a.enableLabel=function(){k||(k=document.createElement("div"),k.className="picture-thumb-label header-text no-select",u.el.appendChild(k));
k&&(k.innerHTML=h||"")};a.disableLabel=function(){k&&(u.el.removeChild(k),k=null)};a.data=function(){return l};a.remove=function(){n=!0;return e};a.pack=function(){return{id:b,temp:e,file:d,label:h,data:l,removed:n}};a.onload=function(c){r&&c?async(c,[a]):x=c};a.commit=function(a){if(n&&!e)window.ajax({type:"POST",data:{id:b},url:"/async/images/delete"}).done(function(c){a()});else if(e){var c=new FormData;c.append("file",d);window.ajax({type:"POST",data:c,files:!0,url:"/async/images/save"}).done(function(c){a({id:c.id,
label:h})})}else a({id:b,label:h})};a.update=function(a){b=a.id;e=a.temp;E(a.label);d=a.file;l=a.data;n=a.removed;u.el.style.backgroundImage=e?"url("+l+")":"url(/async/thumb/load/"+b+")"};e?(c=new FileReader,c.onload=function(c){l=c.target.result;u.el.style.backgroundImage="url("+l+")";r=!0;x&&(async(x,[a]),x=null)},c.readAsDataURL(d)):(u.loadImage({url:"/async/thumb/load/"+b,color:"#e0e0e0",shadow:!0,radius:24,width:6,length:22,lines:15,speed:.75}),r=!0,x&&(async(x,[a]),x=null))}function D(){var c=
this,a=document.createElement("div"),b=document.createElement("div"),e=document.createElement("div"),d=new MSDivObject,h=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,k=null,l=null,n={},x=[],r=window.admin?new DropInsertManager:null,u=function(a){var c=n[a];c&&(c.remove()&&delete n[a],e.removeChild(c.el));a=x.indexOf(a);0<=a&&x.splice(a,1)},E=function(){var a=d.el.getAttribute("current");(a=n[a])&&a.setLabel(k.value())},F=function(c){c.isTemp()?d.el.style.backgroundImage=
"url("+c.data()+")":d.loadImage({url:"/async/images/load/"+c.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});scrollBodyTo(a);d.el.setAttribute("current",c.id());k&&(k.onchange=null,k.setValue(c.label()),k.onchange=E)};window.admin&&(r.insertBefore=function(a,c){var b=x.indexOf(a.id()),d=null;0<=b&&(x.splice(b,1),d=x.indexOf(c.id()),0<=d&&(x.splice(d,0,a.id()),e.removeChild(a.el),e.insertBefore(a.el,c.el)))},r.insertAfter=function(a,c){var b=x.indexOf(a.id()),d=null;
0<=b&&(x.splice(b,1),d=x.indexOf(c.id()),0<=d&&(x.splice(d+1,0,a.id()),e.removeChild(a.el),(b=c.el.nextElementSibling)?e.insertBefore(a.el,b):e.appendChild(a.el)))});a.className="picture-manager";b.className="picture-container";e.className="picture-carousel";b.appendChild(e);d.el.className="picture-preview";h&&(e.appendChild(h.el),h.preview=function(a){if(a){c.beginAdd();for(var b=null,e=0;e<a.length;++e){var d=new B({id:String(hashCode(a[e].name)),file:a[e]});b||(b=d);c.add(d)}c.endAdd();c.show(b)}});
a.appendChild(d.el);a.appendChild(b);c.el=a;c.imageList=function(){return x};c.enableLabel=function(a){k||(k=new MSInputObject({className:"picture-preview-label text"}),d.el.appendChild(k.el));k.onchange=null;a?k.setValue(a):(a=d.el.getAttribute("current"),(a=n[a])&&k.setValue(a.label()));for(var c in n)n.hasOwnProperty(c)&&n[c].enableLabel();k.onchange=E};c.disableLabel=function(){k&&(d.el.removeChild(k.el),k=null);for(var a in n)n.hasOwnProperty(a)&&n[a].disableLabel()};c.commit=function(a){var c=
function(a,b,e,d,f){a==b?f(d):n[e[a]].commit(function(u){u&&d.push(u);c(a+1,b,e,d,f)})};c(0,x.length,x,[],a)};c.beginAdd=function(){null==l&&(l=document.createDocumentFragment())};c.endAdd=function(){if(l&&(e.appendChild(l),l=null,0<x.length))n[x[0]].onload(F)};c.present=function(a){(a=n[a])&&async(F,[a])};c.add=function(a){l&&!n[a.id()]&&(x.push(a.id()),n[a.id()]=a,a.removed=u,a.click=F,window.admin&&(a.beginMove=r.beginMove,a.hoverTarget=r.hoverTarget,a.endMove=r.endMove),l.appendChild(a.el),k&&
a.enableLabel())};c.show=function(a){var c=function(){if(l)async(c);else if(a)a.onload(F)};async(c)}}function y(){var c=document.createElement("table"),a=new MSInputObject({placeholder:"Price",className:"text"}),b=new MSInputObject({placeholder:"Shipping",className:"text"});language.bindInput("price",a.el);language.bindInput("shipping",b.el);var e=document.createElement("tr"),d=document.createElement("th"),h=document.createElement("th");e.className="text-invert";language.bind("price",d);language.bind("shipping",
h);e.appendChild(d);e.appendChild(h);c.appendChild(e);e=document.createElement("tr");d=document.createElement("td");h=document.createElement("td");d.appendChild(a.el);e.appendChild(d);h.appendChild(b.el);e.appendChild(h);c.appendChild(e);c.className="single-item";this.el=c;this.value=function(){return[{quantity:1,price:a.value(),shipping:b.value()}]};this.setValue=function(c){a.setValue(c[0].price);b.setValue(c[0].shipping)}}function q(){function c(a,c,b){this.quantity=a;this.price=c;this.shipping=
b}var a=document.createElement("table"),b=[],e=function(e,d,f){var h=document.createElement("tr"),k=document.createElement("td"),l=new MSInputObject({placeholder:"Quantity",className:"text"}),w=document.createElement("td"),x=new MSInputObject({placeholder:"Price",className:"text"}),n=document.createElement("td"),g=new MSInputObject({placeholder:"Shipping",className:"text"}),m=document.createElement("td"),p=document.createElement("div"),t=new c(l,x,g);language.bindInput("quantity",l.el);language.bindInput("price",
x.el);language.bindInput("shipping",g.el);p.className="remove-row";b.push(t);l.setValue(e||"");x.setValue(d||"");g.setValue(f||"");k.appendChild(l.el);h.appendChild(k);w.appendChild(x.el);h.appendChild(w);n.appendChild(g.el);h.appendChild(n);m.appendChild(p);h.appendChild(m);a.appendChild(h);p.onclick=function(c){c=b.indexOf(t);0<=c&&(b.splice(c,1),a.removeChild(h))}},d=document.createElement("tr"),h=document.createElement("th"),k=document.createElement("th"),l=document.createElement("th"),n=document.createElement("th"),
x=document.createElement("div");d.className="text-invert";language.bind("quantity",h);language.bind("price",k);language.bind("shipping",l);d.appendChild(h);d.appendChild(k);d.appendChild(l);x.className="add-new-row";n.appendChild(x);d.appendChild(n);x.onclick=function(){e()};a.appendChild(d);a.className="multi-item";this.el=a;this.value=function(){for(var a=[],c=0;c<b.length;++c)a.push({quantity:b[c].quantity.value(),price:b[c].price.value(),shipping:b[c].shipping.value()});return a};this.setValue=
function(a){for(var c=0;c<a.length;++c)e(a[c].quantity,a[c].price,a[c].shipping)}}function v(){var c=null,a=document.createElement("table"),b=document.createElement("tr"),e=document.createElement("th"),d=document.createElement("th"),h=document.createElement("th"),k=document.createElement("tr"),l=document.createElement("td"),n=document.createElement("td"),x=document.createElement("td");b.className="text-invert";language.bind("quantity",e);language.bind("price",d);language.bind("shipping",h);b.appendChild(e);
b.appendChild(d);b.appendChild(h);a.appendChild(b);k.appendChild(l);k.appendChild(n);k.appendChild(x);a.appendChild(k);n.setAttribute("currency","z\u0142");x.setAttribute("currency","z\u0142");this.el=a;this.value=function(){return c};this.setValue=function(a){if(1==a.length)l.innerHTML=a[0].quantity,n.innerHTML=a[0].price,x.innerHTML=a[0].shipping,c={quantity:a[0].quantity,price:a[0].price,shipping:a[0].shipping};else if(1<a.length){var b=new DropDown({});b.changed=function(b){n.innerHTML=a[b].price;
x.innerHTML=a[b].shipping;c={quantity:a[b].quantity,price:a[b].price,shipping:a[b].shipping}};for(var e=0;e<a.length;++e)b.addItem(e).controller.setValue(a[e].quantity);l.appendChild(b.el)}}}function z(c){var a=this,b=document.createElement("div"),e=null,d=!1,h=0;window.admin?(e=[new y,new q],c&&c.type&&(h=0<=c.type&&2>c.type?c.type:0),b.appendChild(e[h].el)):(e=new v,b.appendChild(e.el));b.className="price text advert-hide";a.el=b;window.admin&&(a.change=function(c){b.removeChild(e[h].el);h=0<=c&&
2>c?c:0;b.appendChild(e[h].el);a.changed&&a.changed(c)},a.nullValue=function(a){d=a});a.value=function(){return window.admin?d?null:{type:h,values:e[h].value()}:e.value()};a.setValue=function(c){c&&(window.admin?(a.change(c.type),e[h].setValue(c.values)):e.setValue(c.values))}}function d(){var c=this,a=!0,b=document.createElement("div"),e=new DropDown({className:"component-ctl"});b.className="text-header header-text";language.bind("projects",b);e.changed=function(a){c.changed&&c.changed(a)};c.setValue=
function(a){if(a)for(var c=0;c<a.length;++c)e.addItem(a[c].id).controller.setValue(a[c].label)};c.value=function(){return e.value()};c.text=function(){return e.text()};c.enabled=function(){return a};c.enable=function(){a=!0;b.removeAttribute("style");e.el.removeAttribute("style")};c.disable=function(){a=!1;b.style.display="none";e.el.style.display="none"};var d=document.createDocumentFragment();d.appendChild(b);d.appendChild(e.el);c.el=d}function b(){function c(c){if(k.length<d.length){var e=document.createElement("div"),
f=document.createElement("div"),n=new DropDown({className:"category-ctl"},f),g=document.createElement("div");e.className="category-item-view";g.className="remove-category-item";e.appendChild(f);e.appendChild(g);g.onclick=function(){var c=k.indexOf(n);0<=c&&(k.splice(c,1),delete l[n.id],a.removeChild(e),e=null);k.length<d.length&&(b.style.display=null)};k[k.length]=n;n.beforeOpen=function(){if(h)for(var a=0;a<h.length;++a)n.removeVirtual(h[a]);h=[];for(a=0;a<d.length;++a)l[d[a]._id]&&l[d[a]._id]!=
n||function(a,c){a.onclick=function(a){a.preventDefault();a.stopPropagation();n.setText(c.title);delete l[n.id];n.id=c._id;l[c._id]=n;n.close()};a.className="dropdown-item text-invert";a.innerHTML=c.title;h[h.length]=a}(n.addVirtual(),d[a])};n.beforeClose=function(){if(h){for(var a=0;a<h.length;++a)n.removeVirtual(h[a]);h=null}};if(c)for(f=0;f<d.length;++f){if(d[f]._id==c){l[c]=n;n.id=c;n.setText(d[f].title);break}}else for(f=0;f<d.length;++f)if(!l[d[f]._id]){l[d[f]._id]=n;n.id=d[f]._id;n.setText(d[f].title);
break}a.insertBefore(e,b);k.length==d.length&&(b.style.display="none")}}var a=document.createElement("div"),b=document.createElement("div"),e=document.createElement("div"),d=[],h=null,k=[],l={},n=!1;a.className="category-list";b.className="category-item-view add-category-item";b.appendChild(e);a.appendChild(b);b.onclick=function(){c()};this.el=a;this.setValue=function(a){if(a){var b=function(){if(n)for(var e=0;e<a.length;++e)c(a[e]);else async(b)};b()}};this.value=function(){return Object.keys(l)};
window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(a){n=!0;a.status&&(d=a.categories||[],0==d.length&&(b.style.display="none"))})}function t(){function c(){this.removeAttribute("error");this.onfocus=null}var a=document.createElement("div"),b=document.createElement("div"),e=document.createElement("input"),d=document.createElement("input"),h=new MSInputObject({className:"message text",multiline:!0,user:!0});a.className="shop-item-contact-panel";b.className="text-header header-text";
e.className="name text";d.className="email text";language.bind("contact",b);language.bindInput("full_name",e);language.bindInput("email",d);language.bindInput("message",h.el);a.appendChild(b);a.appendChild(e);a.appendChild(d);a.appendChild(h.el);this.el=a;this.value=function(){return{name:e.value,email:d.value,message:h.value()}};this.error=function(a){for(var b in a)"name"==b?(e.setAttribute("error",!0),e.onfocus=c):"email"==b?(d.setAttribute("error",!0),d.onfocus=c):"message"==b&&(h.el.setAttribute("error",
!0),h.el.onfocus=c)}}function g(c){var a=this,e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=null,k=document.createElement("div"),l=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),n=window.admin?document.createElement("div"):null,x=window.admin?new DropDown({className:"type-ctl"}):{setValue:function(a){2==a&&(e.setAttribute("advert",!0),h=new t,f.appendChild(h.el),language.unbind("order",L),language.bind("send",L))}},
r=document.createElement("div"),u=new DropDown({className:"avail-ctl",adminOnly:!0}),E=window.admin?document.createElement("div"):null,F=window.admin?new DropDown({className:"action-ctl"}):null,m=window.admin?document.createElement("div"):null,p=window.admin?new DropDown({className:"component-ctl"}):{setValue:function(c){0==c?(a.disableLabel(),q.disable()):(a.enableLabel(),q.enable())}},q=window.admin?null:new d,v=window.admin?document.createElement("div"):null,C=window.admin?new b:null,y=document.createElement("div"),
A=new z({type:0}),B=document.createElement("div"),D=document.createElement("div"),I=document.createElement("div"),N=document.createElement("div"),P=document.createElement("div"),Q=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),M=window.admin&&c.id()?document.createElement("div"):null,L=document.createElement("div"),O=document.createElement("div"),K={title:l,type:x,availability:u,action:F,components:p,images:q,categories:C,price:A,descrition:Q};e.className="details-container";
f.className="details-view";e.appendChild(f);g.className="control-view";e.appendChild(g);k.className="text-header header-text";language.bind("title",k);language.bindInput("title",l.el);f.appendChild(k);f.appendChild(l.el);window.admin?(language.bind("individual",x.addItem(0)),language.bind("common",x.addItem(1)),language.bind("advert",x.addItem(2)),n.className="text-header header-text",language.bind("type",n),f.appendChild(n),f.appendChild(x.el)):q.changed=function(c){a.selectImage&&a.selectImage(c)};
u.changed=function(a){language.unbind(N);0==a?language.bind("lead_avail",N):language.bind("lead_wait",N)};language.bind("available",u.addItem(0));language.bind("demand",u.addItem(1));r.className="text-header header-text";language.bind("availability",r);f.appendChild(r);f.appendChild(u.el);window.admin?(language.bind("keep",F.addItem(0)),language.bind("move",F.addItem(1)),language.bind("remove",F.addItem(2)),E.className="text-header header-text",language.bind("process",E),f.appendChild(E),f.appendChild(F.el),
language.bind("components",m),m.className="text-header header-text",language.bind("none",p.addItem(0)),language.bind("labeled",p.addItem(1)),f.appendChild(m),f.appendChild(p.el),p.changed=function(c){0==c?a.disableLabel():a.enableLabel()},p.lock()):f.appendChild(q.el);window.admin&&(v.className="text-header header-text",language.bind("category",v),f.appendChild(v),f.appendChild(C.el));y.className="text-header header-text advert-hide";language.bind("price",y);f.appendChild(y);f.appendChild(A.el);B.className=
"text-header header-text advert-hide";language.bind("payment_opt",B);D.className="payments advert-hide";window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status)for(var c=0;c<a.types.length;++c){var b=document.createElement("div");b.className="payment-option";b.setAttribute("type",a.types[c]);D.appendChild(b)}});f.appendChild(B);f.appendChild(D);I.className="text-header header-text advert-hide";language.bind("lead",I);N.className="lead-time text advert-hide";f.appendChild(I);
f.appendChild(N);P.className="text-header header-text";language.bind("description",P);language.bindInput("description",Q.el);L.className="action-btn no-select text-invert";language.bind(window.admin?"save":"order",L);g.appendChild(L);L.onclick=function(){if(window.admin){var b={},e;for(e in K)K.hasOwnProperty(e)&&K[e]&&(b[e]=K[e].value());a.save(b)}else h?(b=h.value(),b.data={id:c.id(),preview:q.enabled()?q.value():c.preview(),title:l.value(),component:q.enabled()?q.text():null},a.contact(b,function(a){a.status||
h.error(a.error)})):(b=A.value()||{},b.id=c.id(),b.preview=q.enabled()?q.value():c.preview(),b.title=l.value(),b.availability=u.value(),b.component=q.enabled()?q.text():null,a.order(b))};O.className="close-btn no-select text-invert";language.bind("close",O);g.appendChild(O);O.onclick=function(){a.close()};M&&(M.className="delete-btn no-select text-invert",language.bind("delete",M),g.appendChild(M),M.onclick=function(){a.remove()});f.appendChild(P);f.appendChild(Q.el);x.changed=function(a){2==a&&(A.nullValue(!0),
u.setValue(1),u.lock(),F.setValue(0),F.lock(),p.unlock(),e.setAttribute("advert",!0))};a.el=e;a.show=function(){};a.init=function(){x.changed=function(a){A.nullValue(!1);e.removeAttribute("advert");0==a?(A.change(0),u.setValue(0),p.setValue(0),u.unlock(),F.unlock(),p.lock()):1==a?(A.change(1),u.setValue(1),F.setValue(0),u.lock(),F.lock(),p.unlock()):2==a&&(A.nullValue(!0),u.setValue(1),u.lock(),F.setValue(0),F.lock(),p.unlock(),e.setAttribute("advert",!0))}};a.setValue=function(a){for(var c in K)K.hasOwnProperty(c)&&
K[c]&&K[c].setValue(a[c])}}function p(c,a){function b(e,d,f){var h=this,l=new D,k=new g(e);k.close=function(){h.close()};k.order=function(a){h.close(function(){window.events.emit("order",[a])},{force:!0})};k.contact=function(a,c){window.ajax({type:"POST",data:a,url:"/async/contact"}).done(function(a){a.status?h.close():c(a)})};k.enableLabel=function(){l.enableLabel()};k.disableLabel=function(){l.disableLabel()};h.load=function(a){c.id()?window.ajax({type:"POST",data:{id:c.id()},url:"/async/shop/load"}).done(function(c){if(c.item){k.setValue(c.item);
l.beginAdd();for(var b in c.item.images)l.add(new B(c.item.images[b]));l.endAdd();k.init()}a&&a()}):(k.init(),a&&a())};k.selectImage=function(a){l.present(a)};h.create=function(){f.appendChild(l.el);f.appendChild(k.el)};h.destroy=function(){f.removeChild(l.el);f.removeChild(k.el)};h.show=function(){l.show();k.show()};window.admin&&(k.save=function(b){l.commit(function(d){b.id=c.id();b.images=d;window.ajax({type:"POST",data:b,url:"/async/shop/save"}).done(function(c){if(c.status){var f=null;e.id()==
c._id?e.update({title:b.title,price:b.price,preview:d[0]}):f=function(){a.reload()};h.close(f)}})})},k.remove=function(){window.ajax({type:"POST",data:{id:e.id()},url:"/async/shop/delete"}).done(function(a){a.status&&(d.removeItem(e),h.close())})})}function e(a,c){async(d.close,a?[a,c]:null)}var d=this,h=document.createElement("div"),k=document.createElement("div"),l=new b(c,a,k);l.close=e;h.className=window.admin?"shop-item-container edit":"shop-item-container";h.style.display="none";k.className=
"shop-item-view";l.create();h.appendChild(k);this.el=h;this.id=function(){return c.id()};this.item=function(){return c};this.replace=function(d,h,r){c=d;a=h;var u=new b(c,a,k);u.close=e;u.load(function(){l.destroy();u.create();l=u;r&&r()})};this.show=function(a){a=a||{};a.force?(scrollBodyTo(h),morpheus(h,{marginLeft:0,duration:300,complete:function(){l.show()}})):(h.style.display="block",a=h.offsetHeight,scrollBodyTo(h),h.style.height="0px",morpheus(h,{height:a,duration:300,complete:function(){morpheus(h,
{marginLeft:0,duration:300,complete:function(){l.show()}});h.style.height=null}}))};this.hide=function(a,b){b=b||{};morpheus(h,{marginLeft:"-110%",duration:300,complete:function(){b.force||scrollBodyTo(c.el);h.style.marginLeft=null;b.inline?a&&a():morpheus(h,{height:0,duration:300,complete:function(){h.style.display="none";a&&a()}})}})};l.load()}function m(){var c=this,a=document.createElement("div"),b=document.createElement("div"),e=document.createElement("div");a.className="shop-item-new";b.className=
"shop-item-internal";a.appendChild(b);e.className="shop-item-image";b.appendChild(e);c.el=a;a.onclick=function(){c.open&&c.open(c)};c.id=function(){return null};c.title=function(){return null};c.position=function(){return a.offsetTop}}function A(c){var a=this,b=document.createElement("div"),e=document.createElement("div"),d=document.createElement("div"),h=new MSDivObject,k=c.preview.id,l=document.createElement("div");b.id=c._id;b.className=window.admin?"shop-item edit no-select":"shop-item no-select";
e.className="shop-item-internal";b.appendChild(e);h.el.className="shop-item-image";e.appendChild(h.el);d.className="shop-item-title text";e.appendChild(d);l.className="shop-item-price text";e.appendChild(l);h.loadImage({url:"/async/preview/load/"+k,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=c.title;c.price?(l.innerHTML=Math.round(c.price.values[0].price/c.price.values[0].quantity),l.setAttribute("currency","z\u0142")):(l.innerHTML=null,l.removeAttribute("currency"));a.id=function(){return b.id};
a.title=function(){return d.innerHTML};a.position=function(){return b.offsetTop};a.preview=function(){return k};a.update=function(a){k=a.preview.id;h.loadImage({url:"/async/preview/load/"+k,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=a.title;a.price?(l.innerHTML=Math.round(a.price.values[0].price/a.price.values[0].quantity),l.setAttribute("currency","z\u0142")):(l.innerHTML=null,l.removeAttribute("currency"))};b.onclick=function(){b.getAttribute("ordered")?window.scrollBodyTo(window.orders.el):
a.open&&a.open(a)};if(window.admin){c.counts=c.counts||{};var n=document.createElement("div"),g=document.createElement("div"),r=document.createElement("span"),u=document.createElement("div"),E=document.createElement("span"),m=document.createElement("div"),p=document.createElement("span"),q=document.createElement("div"),t=document.createElement("span"),v=document.createElement("div"),C=document.createElement("span");n.className="visit-counter-container text";g.className="visit-counter";u.className=
"visit-counter";m.className="visit-counter";q.className="visit-counter";v.className="visit-counter";language.bind("today",g);language.bind("l_3_day",u);language.bind("l_week",m);language.bind("l_month",q);language.bind("l_time",v);r.innerHTML=c.counts.day_1||0;E.innerHTML=c.counts.day_3||0;p.innerHTML=c.counts.day_7||0;t.innerHTML=c.counts.day_28||0;C.innerHTML=c.counts.all||0;g.appendChild(r);u.appendChild(E);m.appendChild(p);q.appendChild(t);v.appendChild(C);n.appendChild(g);n.appendChild(u);n.appendChild(m);
n.appendChild(q);n.appendChild(v);e.appendChild(n)}else c=document.createElement("div"),e=document.createElement("div"),c.className="shop-item-ordered",e.className="shop-item-ordered-icon",c.appendChild(e),b.appendChild(c);a.el=b}function I(c){function a(a){async(function(){if(g){var c=k.childNodes,b=g.item().position(),e=null;k.contains(g.el)&&k.removeChild(g.el);for(var d=0;d<c.length;++d)if(b<c[d].offsetTop){e=c[d];break}e?k.insertBefore(g.el,e):k.appendChild(g.el);a&&"Function"==classOf(a)&&a()}})}
function b(c,e){if(g){window.removeEventListener("resize",a);var d=g.el;g.hide(function(){k.removeChild(d);d=null;c&&c()},e);g=null}else c&&c()}function e(c){if(g){var f=g.item().position()==c.position();g.hide(function(){g.replace(c,d,function(){f?g.show({force:!0}):a(function(){g.show()})})},{force:!0,inline:f})}else g=new p(c,d),g.close=b,a(function(){g.show()}),window.addEventListener("resize",a)}var d=this,h=document.getElementById("shop_item_view"),k=document.createElement("div"),l=window.admin?
new m:null,n=window.location.hash?window.location.hash.substring(1):null,g=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");d.createItem=function(a,c){c&&l&&l.el.nextSibling?k.insertBefore(a.el,l.el.nextSibling):k.appendChild(a.el);a.open=e};d.removeItem=function(a){k.removeChild(a.el)};h.appendChild(k);d.el=h;d.reload=function(){window.ajax({type:"POST",data:c.value(),url:"/async/shop/list"}).done(function(a){if(a&&a.status){var c=document.createElement("div"),
b=null;l&&(c.appendChild(l.el),l.open=e);if(a.items)for(var d=0;d<a.items.length;++d){var m=new A(a.items[d]);if(g&&g.item().id()==m.id()||m.id()==n)b=m,n=null;m.open=e;c.appendChild(m.el)}h.replaceChild(c,k);k=c;b?e(b):g=null}window.events.emit("update-ordered")})}}function C(){function c(a,c){var b=this,e=a.item,d=a.controller,f=document.createElement("div"),h=window.admin&&c?document.createElement("input"):null,l=window.admin&&c?document.createElement("div"):null,u=!1,k=!1;e.manager=b;f.className=
"categoty-title";e.appendChild(f);b.setValue=function(a){f.innerHTML=a||""};b.value=function(){return f.innerHTML};b.id=function(){return c?c._id:null};c?(d.setValue(c.title),window.admin&&(l&&(l.className="category-remove",l.onclick=function(a){a.preventDefault();a.stopPropagation();e.parentNode.removeChild(e);k=!0;u=!1}),h&&(h.className="categoty-title header-text"),b.forceEditStart=function(){h&&(e.replaceChild(h,f),e.appendChild(l),h.value=f.innerHTML,h.onchange=function(){k||(u=!0)})},b.forceEditEnd=
function(){h&&(h.onchange=null,e.replaceChild(f,h),e.removeChild(l),f.innerHTML=h.value)},b.save=function(a){k&&b.id()?window.ajax({type:"POST",data:{id:b.id()},url:"/async/category/delete"}).done(a):u?window.ajax({type:"POST",data:{id:b.id(),title:f.innerHTML},url:"/async/category/save"}).done(a):a()})):language.bind("allitems",a)}function a(a){var c=this,b=document.createElement("div");b.className="category-add";a.appendChild(b);c.el=a;b.onclick=function(){c.create&&c.create()}}function b(a,e){window.admin&&
a.el.insertBefore(l,a.el.firstChild);new c(a.addItem(0));window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(b){var d=[];if(b.status)for(var f=0;f<b.categories.length;++f){var h=a.addItem(b.categories[f]._id),h=new c(h,b.categories[f]);window.admin&&(d[d.length]=h)}e(d)})}var e=null,d=document.getElementById("shop_navigator"),h=new DropDown({className:"category-nav",src:"../images/list.png"}),k=null,l=null,g=1,m=new DropDown({className:"sorter-nav"}),r=m.addItem(0);r.controller.setValue("A  -  Z");
r=m.addItem(1);r.controller.setValue("Z  -  A");r=m.addItem(2);language.bind("lowprice",r);r=m.addItem(3);language.bind("hightprice",r);if(window.admin){var u=[],l=document.createElement("div");l.className="shop-category-edit";l.onclick=function(r){r.preventDefault();r.stopPropagation();if(l.hasAttribute("open"))l.removeAttribute("open"),h.el.removeAttribute("edit-mode"),h.close(),h.el.removeChild(l),k=null,function(a,c){var b=0,e=a.length,d=function(a){++b==e&&c()};if(0<e)for(var f=0;f<e;++f)a[f].forceEditEnd(),
a[f].save(d);else c()}(u,function(){var a=new DropDown({className:"category-nav",src:"../images/list.png"});b(a,function(c){u=c;d.replaceChild(a.el,h.el);h=a;h.changed=function(){e&&e.reload()};h.setValue(0)})});else for(l.setAttribute("open",!0),h.el.setAttribute("edit-mode",!0),k=new a(h.addVirtual()),k.create=function(){var a=k.el.parentNode;a.removeChild(k.el);var b=h.addItem(String("000000000000000000000000"+g++).slice(-24)),b=new c(b,{title:""});b.forceEditStart();u[u.length]=b;a.appendChild(k.el)},
h.manual(),h.open(),r=0;r<u.length;++r)u[r].forceEditStart()}}d.appendChild(h.el);d.appendChild(m.el);h.changed=function(){e&&e.reload()};m.changed=function(){e&&e.reload()};this.setView=function(a){e=a};this.value=function(){var a=h.value();return{sort:m.value(),filter:0==a?null:a}};this.el=d;b(h,function(a){window.admin&&(u=a)})}function e(){var c=document.getElementById("shop_panel"),a=new C,b=new I(a);a.setView(b);this.el=c}window.addEventListener("load",function(){window.shop=new e})})();(function(){function B(y){var q=this,v=y,z=new MSDivObject;y=window.admin?document.createElement("div"):null;z.el.className="gallery-thumb";y&&(y.className="gallery-thumb-remove",z.el.appendChild(y),y.onclick=function(){q.remove&&q.remove(q)});z.el.onclick=function(){q.click&&q.click(q)};if(window.admin){z.el.setAttribute("draggable",!0);var d=document.getElementById("content_scroll_top"),b=document.getElementById("content_scroll_bottom"),t=document.getElementById("content-wrapper"),g=!1,p=function(b){if(g){var d=
t.scrollTop;morpheus.tween(5,function(g){1==g&&async(p,[b]);g=d+b*g;0<=g&&g<=t.scrollHeight&&(t.scrollTop=g)})}};d.ondragenter=function(b){b.preventDefault();g=!0;p(-10)};d.ondragleave=function(b){b.preventDefault();g=!1};b.ondragenter=function(b){b.preventDefault();g=!0;p(10)};b.ondragleave=function(b){b.preventDefault();g=!1};z.el.ondragstart=function(g){g.dataTransfer.setData("target",v);d.setAttribute("enabled",!0);b.setAttribute("enabled",!0);q.beginMove&&(g.dataTransfer.setData("target",v),
q.beginMove(q))};z.el.ondragend=function(g){g.preventDefault();d.removeAttribute("enabled");b.removeAttribute("enabled");q.endMove&&q.endMove(q)};z.el.ondragover=function(b){b.preventDefault();q.hoverTarget&&"gallery-thumb"==b.target.className&&q.hoverTarget(q,b.layerX)}}q.el=z.el;q.id=function(){return v};q.change=function(b){v=b;z.loadImage({url:"/async/thumb/load/"+v,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})};z.loadImage({url:"/async/thumb/load/"+v,color:"#e0e0e0",
shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})}function D(){var y,q,v;function z(){var d=b.el.childNodes,e=d.length;q=y=1;if(0<e){var c;for(c=0;c<e&&0!=d[c].style.display.length;++c);v=Math.floor((b.el.offsetWidth-2)/(d[c].offsetWidth+6))*Math.floor((b.el.offsetHeight-2)/(d[c].offsetHeight+6));q=Math.ceil(e/v);for(c=Math.min(v,e)-1;0<=c;--c)0!=d[c].style.display.length&&async(function(a){a.style.display=null},[d[c]]);for(c=Math.min(v,e);c<e;++c)0<d[c].style.display.length||async(function(a){a.style.display=
"none"},[d[c]])}g.prev.setAttribute("disabled",!0);1==q?g.next.setAttribute("disabled",!0):g.next.removeAttribute("disabled");g.data.innerHTML=y+" / "+q}document.getElementById("gallery_panel");document.getElementById("content-wrapper");var d=window.admin?new FileUpload({id:"gallery_thumb_new",className:"gallery-thumb",multiple:!0}):null,b=new MSDivObject(document.getElementById("thumbs_container")),t=new MSDivObject(document.getElementById("gallery_view").firstElementChild),g={prev:document.getElementById("gallery_prev_page"),
data:document.getElementById("gallery_page_info"),next:document.getElementById("gallery_next_page")};q=y=1;v=0;var p={},m=window.admin?new DropInsertManager:null,A=function(b){t.loadImage({url:"/async/images/load/"+b.id()+"?height=700",color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75})},D=function(d){window.ajax({type:"POST",data:{id:d.id()},url:"/async/gallery/delete"}).done(function(e){e.status&&(delete p[d.id()],b.el.removeChild(d.el))})};window.admin?(m.insertBefore=function(d,
e){window.ajax({type:"POST",data:{source:d.id(),target:e.id(),offset:0},url:"/async/gallery/move"}).done(function(c){c.status&&(b.el.removeChild(d.el),b.el.insertBefore(d.el,e.el))})},m.insertAfter=function(d,e){window.ajax({type:"POST",data:{source:d.id(),target:e.id(),offset:1},url:"/async/gallery/move"}).done(function(c){c.status&&(b.el.removeChild(d.el),(c=e.el.nextElementSibling)?b.el.insertBefore(d.el,c):b.el.appendChild(d.el))})}):(window.addEventListener("resize",z),g.prev.onclick=function(){if(!g.prev.hasAttribute("disabled")){for(var d=
b.el.childNodes,e=d.length,c=Math.min(v*y,e)-1;c>=v*(y-1);--c)async(function(a){a.style.display="none"},[d[c]]);--y;1==y&&g.prev.setAttribute("disabled",!0);g.next.removeAttribute("disabled");g.data.innerHTML=y+" / "+q;for(c=Math.min(v*y,e)-1;c>=v*(y-1);--c)async(function(a){a.style.display=null},[d[c]])}},g.next.onclick=function(){if(!g.next.hasAttribute("disabled")){for(var d=b.el.childNodes,e=d.length,c=v*(y-1);c<v*y&&c<e;++c)async(function(a){a.style.display="none"},[d[c]]);y+=1;y==q&&g.next.setAttribute("disabled",
!0);g.prev.removeAttribute("disabled");g.data.innerHTML=y+" / "+q;for(c=v*(y-1);c<v*y&&c<e;++c)async(function(a){a.style.display=null},[d[c]])}});d&&(b.el.appendChild(d.el),d.preview=function(g){for(var e=0;e<g.length;++e){var c=new FormData;c.append("file",g[e]);window.ajax({type:"POST",data:c,files:!0,url:"/async/gallery/save"}).done(function(a){a.status&&(a=new B(a.id),p[a.id()]=a,a.click=A,a.remove=D,window.admin&&(a.beginMove=m.beginMove,a.hoverTarget=m.hoverTarget,a.endMove=m.endMove),d.el.nextSibling?
b.el.insertBefore(a.el,d.el.nextSibling):b.el.appendChild(a.el),A(a))})}});window.ajax({type:"POST",url:"/async/gallery/load"}).done(function(d){if(d.status){for(var e=document.createDocumentFragment(),c=null,a=0;a<d.result.length;++a){var g=new B(d.result[a].id);p[g.id()]=g;g.click=A;g.remove=D;window.admin&&(g.beginMove=m.beginMove,g.hoverTarget=m.hoverTarget,g.endMove=m.endMove);e.appendChild(g.el);c||(c=g)}b.el.appendChild(e);c&&A(c);window.admin||z()}})}window.addEventListener("load",function(){window.gallery=
new D})})();(function(){function B(){function B(){this.removeAttribute("error");this.onfocus=null}var y=document.getElementById("contact_name"),q=document.getElementById("contact_email"),v=document.getElementById("contact_message");document.getElementById("contact_send").onclick=function(){window.ajax({type:"POST",data:{name:y.value,email:q.value,message:v.value},url:"/async/contact"}).done(function(z){if(z.status)y.value="",q.value="",v.value="";else for(var d in z.error)"name"==d?(y.setAttribute("error",!0),
y.onfocus=B):"email"==d?(q.setAttribute("error",!0),q.onfocus=B):"message"==d&&(v.setAttribute("error",!0),v.onfocus=B)})}}window.addEventListener("load",function(){window.cantact=new B})})();(function(){function B(b){b=b.getElementsByTagName("*");for(var c={},a=0;a<b.length;++a)if(b[a].hasAttribute("user-input")){var d=b[a].getAttribute("user-input");b[a].controller?c[d]=b[a].controller.value():b[a].value?c[d]=b[a].value:b[a].firstChild&&3==b[a].firstChild.nodeType&&b[a].firstChild.nodeValue&&(c[d]=b[a].firstChild.nodeValue)}return c}function D(b,c){c=c||"";if("INPUT"==b.nodeName)b.value=c;else if("DIV"==b.nodeName)if(b.controller)b.controller.setValue(c);else if(b.firstChild&&3==b.firstChild.nodeType&&
b.firstChild.nodeValue)b.firstChild.nodeValue=c;else{var a=document.createTextNode(c);b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}}function y(b,c){for(var a=b.getElementsByTagName("*"),d=[],f=[],g=0;g<a.length;++g)if(a[g].hasAttribute("user-input")){a[g].parentNode.removeAttribute("unset");var h=a[g].getAttribute("user-input");if(c[h]){var k=d.indexOf(a[g].parentNode);0<=k&&d.splice(k,1);f[f.length]=a[g].parentNode;D(a[g],c[h])}else k=f.indexOf(a[g].parentNode),-1==k&&(d[d.length]=
a[g].parentNode),D(a[g],"")}for(g=0;g<d.length;++g)d[g].setAttribute("unset",!0)}function q(b,c){if(c)for(var a=b.getElementsByTagName("*"),d=0;d<a.length;++d)if(a[d].hasAttribute("user-input")){var f=a[d].getAttribute("user-input");c[f]&&function(a){a.setAttribute("error",!0);a.onfocus=function(){a.removeAttribute("error")}}(a[d])}}function v(b){b.controller=this;this.setValue=function(c){b.setAttribute("option",c)}}function z(b){b.controller=this;this.setValue=function(c){var a=b.getElementsByClassName("preview-data");
a&&0<a.length&&D(a[0],c.number);c?b.removeAttribute("unset"):b.setAttribute("unset",!0)}}function d(b){function c(){var c=d.run(a.value);c?a.setAttribute("card",c):a.removeAttribute("card")}var a=b,d=new function(){var a={visa:{values:[{type:0,value:4}]},mastercard:{values:[{type:1,range:{min:51,max:55}}]},discover:{values:[{type:0,value:65},{type:0,value:6011},{type:1,range:{min:644,max:649}},{type:1,range:{min:622126,max:622925}}]},amex:{values:[{type:0,value:34},{type:0,value:37}]}};this.run=function(c){for(var b in a)if(a.hasOwnProperty(b))for(var d=
a[b],e=0;e<d.values.length;++e)if(0==d.values[e].type){var g=String(d.values[e].value);if(c.substr(0,g.length)===g)return b}else if(1==d.values[e].type)for(var m=d.values[e].range.min;m<=d.values[e].range.max;++m)if(g=String(m),c.substr(0,g.length)===g)return b;return null}};a.onkeydown=function(c){var b=0<=[8,9,37,38,39,40,46].indexOf(c.keyCode),d=!isNaN(parseInt(c.key))&&16>a.value.length;b||d||c.preventDefault()};a.onkeyup=c;a.onfocus=c;a.onblue=c;a.onchange=c;a.controller=this;this.value=function(){return{type:d.run(a.value),
number:a.value}}}function b(b){var c={country:function(a){(new DropDown({},a)).addItem("Polska",!0)},county:function(a){var c="dolno\u015bl\u0105skie kujawsko-pomorskie lubelskie lubuskie \u0142\u00f3dzkie ma\u0142opolskie mazowieckie opolskie podkarpackie podlaskie pomorskie \u015bl\u0105skie \u015bwi\u0119tokrzyskie warmi\u0144sko-mazurskie wielkopolskie zachodniopomorskie".split(" ");a=new DropDown({},a);for(var b=0;b<c.length;++b)a.addItem(c[b],!0)},expiry_month:function(a){a=new DropDown({},
a);for(var c=1;12>=c;++c)a.addItem(c,!0)},expiry_year:function(a){var c=(new Date).getFullYear();a=new DropDown({},a);for(var b=c;b<=c+10;++b)a.addItem(b,!0)},card_number:function(a){new d(a)},paymentType:function(a){new v(a)},cardNumber:function(a){new z(a)}};b=b.getElementsByTagName("*");for(var a=0;a<b.length;++a)if(b[a].hasAttribute("control")){var g=b[a].getAttribute("control");c[g]&&async(c[g],[b[a]])}}function t(b){var c=this,a=document.createElement("tr"),d=document.createElement("td"),f=
new MSDivObject,g=document.createElement("td"),h=document.createElement("td"),k=document.createElement("td"),l=document.createElement("td"),n=document.createElement("td"),m=document.createElement("div");d.className="text";f.el.className="order-thumb";g.className="text";h.className="text";k.className="text";l.className="text";n.className="text";m.className="remove-btn";k.setAttribute("currency","z\u0142");l.setAttribute("currency","z\u0142");d.appendChild(f.el);a.appendChild(d);a.appendChild(g);a.appendChild(h);
a.appendChild(k);a.appendChild(l);n.appendChild(m);a.appendChild(n);f.loadImage({url:"/async/thumb/load/"+b.preview,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75});g.innerHTML=b.title;h.innerHTML=b.quantity;k.innerHTML=b.price;b.discount?(d=document.createElement("span"),f=document.createTextNode(Number(b.shipping)*(1-(b.discount||0))),d.className="discount-pin",l.appendChild(d),l.appendChild(f)):l.innerHTML=Number(b.shipping);c.el=a;c.id=function(){return b.id};c.item=
function(){return b.item};c.price=function(){return Number(b.price)};c.shipping=function(){return Number(b.shipping)};c.setDiscount=function(a){b.discount=a};m.onclick=function(){c.remove(c)};c.info=function(){return{title:b.title,quantity:Number(b.quantity),price:Number(b.price),shipping:Number(b.shipping)*(1-(b.discount||0))}};c.update=function(a){for(var c in a||{})a.hasOwnProperty(c)&&(b[c]=a[c]);h.innerHTML=b.quantity;k.innerHTML=b.price;b.discount?(a=document.createElement("span"),c=document.createTextNode(Number(b.shipping)*
(1-(b.discount||0))),a.className="discount-pin",l.innerHTML="",l.appendChild(a),l.appendChild(c)):l.innerHTML=Number(b.shipping)}}function g(){function b(a){var c=document.getElementById(a);c?c.setAttribute("ordered",!0):async(b,[a])}function c(a){var b=document.getElementById(a);b?b.removeAttribute("ordered"):async(c,[a])}function a(a){window.ajax({type:"POST",data:{id:a.id()},url:"/async/orders/remove"}).done(function(a){if(a.status&&a.removed){m=a.total;h.innerHTML=m;var b=r[a.removed];delete r[a.removed];
c(b.item());g.removeChild(b.el);for(var b=document.createDocumentFragment(),e=0;e<a.items.length;++e){var f=a.items[e];r[f.id]&&(r[f.id].update(f),g.removeChild(r[f.id].el));b.appendChild(r[f.id].el)}g.appendChild(b);0==a.items.length?d.hide():d.activate(d)}})}var d=this,f=document.getElementById("order_list_view"),g=document.getElementById("order_list_table"),h=document.getElementById("order_list_totals"),k=document.getElementById("order_list_advance"),l=document.getElementById("terms"),n=document.getElementById("terms_box"),
m=0,r={};h.setAttribute("currency","z\u0142");n.onclick=function(){l.hasAttribute("checked")?l.removeAttribute("checked"):(l.setAttribute("checked",!0),l.removeAttribute("error"))};window.events.listen("update-ordered",function(){for(var a in r)if(r.hasOwnProperty(a)){var b=document.getElementById(r[a].item());b&&b.setAttribute("ordered",!0)}});d.addOrder=function(c){window.ajax({type:"POST",data:c,url:"/async/orders/add"}).done(function(f){if(f.status){m=f.total;h.innerHTML=m;for(var l=document.createDocumentFragment(),
k=0;k<f.items.length;++k){var n=f.items[k];if(r[n.id])r[n.id].update(n),g.removeChild(r[n.id].el);else if(n.id==f.added){n.title=c.title;n.availability=c.availability;n.preview=c.preview;var p=new t(n);r[n.id]=p;p.remove=a;b(p.item())}r[n.id]&&l.appendChild(r[n.id].el)}g.appendChild(l);1==f.items.length&&d.show(!0);d.reset();d.activate(d)}})};d.clear=function(){for(var a in r)if(r.hasOwnProperty(a)){var b=r[a];delete r[a];c(b.item());g.removeChild(b.el)}};d.init=function(){window.ajax({type:"POST",
data:null,url:"/async/orders/session"}).done(function(c){if(c.status&&c.items){m=c.total;h.innerHTML=m;for(var f=document.createDocumentFragment(),l=0;l<c.items.length;++l){var k=new t(c.items[l]);r[k.id()]=k;k.remove=a;b(k.item());f.appendChild(r[k.id()].el)}g.appendChild(f);0<c.items.length&&(d.show(),d.activate(d))}})};k.onclick=function(){if(l.hasAttribute("checked")){var a=[],b;for(b in r)r.hasOwnProperty(b)&&(a[a.length]=r[b].info());d.advance(d,{items:a,total:m})}else l.setAttribute("error",
!0)};d.el=f}function p(){var b=this,c=document.getElementById("shipping_view"),a=document.getElementById("shipping_advance"),d=document.getElementById("shipping_back"),f=null;a.onclick=function(){var a=B(c);window.ajax({type:"POST",data:a,url:"/async/orders/shipping"}).done(function(a){a.status?(f.shipping=a.data,b.advance(b,f)):q(c,a.error)})};b.clear=function(){f=null};b.apply=function(a){f=a};d.onclick=function(){b.back(b)};b.el=c}function m(){function b(a){a.stopPropagation();for(a=0;a<h.length;++a)h[a].removeAttribute("checked");
this.setAttribute("checked",!0);m=this.getAttribute("option");c.expand(k,this.hasAttribute("expand"))}var c=this,a=document.getElementById("payment_view"),d=document.getElementById("payment_advance"),f=document.getElementById("payment_back"),g=document.getElementById("payment_type"),h=[],k=document.getElementById("payment_details"),l=document.getElementById("billing_details"),n=null,m=0;window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status){var c=0,d;for(d in a.options)if(a.options.hasOwnProperty(d)){var f=
document.createElement("div"),l=document.createElement("div"),k=document.createElement("div");f.className="payment-option "+d;l.className="checkbox";k.className="banner "+d;f.appendChild(l);f.appendChild(k);0==c&&f.setAttribute("checked",!0);f.setAttribute("option",c++);var l=a.options[d],n;for(n in l)l.hasOwnProperty(n)&&f.setAttribute(n,l[n]);g.appendChild(f);h[h.length]=f;f.onclick=b}}});c.apply=function(a){n=a;y(k,{forename:n.shipping.forename,surname:n.shipping.surname});y(l,n.shipping)};c.clear=
function(){n=null};d.onclick=function(){var b=B(l);if(0==m)window.ajax({type:"POST",data:b,url:"/async/orders/pay_paypal"}).done(function(a){a.status?(b=a.data,b.paymentType="Paypal",n.billing=b,c.advance(c,n)):q(l,a.error)});else if(1==m){var d=B(k),e;for(e in d)d.hasOwnProperty(e)&&(b[e]=d[e]);window.ajax({type:"POST",data:b,url:"/async/orders/pay_card"}).done(function(d){d.status?(b=d.data,b.paymentType=b.card.type,n.billing=b,c.advance(c,n)):q(a,d.error)})}};f.onclick=function(){c.back(c)};c.el=
a}function A(){function b(a){var c=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("th"),f=document.createElement("th"),g=document.createElement("th"),h=document.createElement("th");language.bind("title",e);language.bind("quantity",f);language.bind("price",g);language.bind("shipping",h);e.className="preview-label text";f.className="preview-label text";g.className="preview-label text";h.className="preview-label text";d.appendChild(e);d.appendChild(f);d.appendChild(g);
d.appendChild(h);c.appendChild(d);for(d=0;d<a.length;++d){var e=document.createElement("tr"),f=document.createElement("td"),g=document.createElement("td"),h=document.createElement("td"),k=document.createElement("td");f.innerHTML=a[d].title;g.innerHTML=a[d].quantity;h.innerHTML=a[d].price;k.innerHTML=a[d].shipping;h.setAttribute("currency","z\u0142");k.setAttribute("currency","z\u0142");f.className="text preview-data";g.className="text preview-data";h.className="text preview-data";k.className="text preview-data";
e.appendChild(f);e.appendChild(g);e.appendChild(h);e.appendChild(k);c.appendChild(e)}return c}var c=this,a=document.getElementById("done_view"),d=document.getElementById("done_advance"),f=document.getElementById("done_back"),g=document.getElementById("data_preview"),h=document.getElementById("order_summary"),k=g.getElementsByClassName("preview-block");d.onclick=function(){window.location="/async/orders/process"};f.onclick=function(){c.back(c)};c.apply=function(a){for(var c=0;c<k.length;++c)if(k[c].hasAttribute("block-type")){var d=
k[c].getAttribute("block-type");a[d]&&y(k[c],a[d])}h.innerHTML=null;h.appendChild(b(a.items));c=document.createElement("div");d=document.createElement("div");c.className="seperator text";language.bind("total",c);d.className="total-price-summary text-invert-light";d.innerHTML=a.total;d.setAttribute("currency","z\u0142");h.appendChild(c);h.appendChild(d)};c.clear=function(){h.innerHTML=null};c.el=a}function I(b,c){function a(a,c){m!=a?(a.el.style.top=getHeight(b)+200+"px",a.el.style.display="block",
a.apply&&c&&a.apply(c),async(function(){var c=[a.el,b];a.el.set={top:150};b.set={h:200+getHeight(a.el)};m&&(m.el.set={o:0},c[c.length]=m.el,window.scrollBodyTo(b));morpheus(c,{top:function(a){return a.set.top},height:function(a){return a.set.h},opacity:function(a){return a.set.o},duration:250,complete:function(){m&&m.el.removeAttribute("style");m=a}})})):morpheus(b,{height:200+getHeight(a.el)+"px",duration:250})}function d(){for(var a=0;a<l.length;++a)n[a].removeAttribute("status");0<l.length&&n[0].setAttribute("status",
0)}function f(b,c){if(b==m){var d=l.indexOf(b);d+1==l.length?k.done():0<=d&&d+1<l.length&&(n[d].setAttribute("status",1),d+=1,a(l[d],c),n[d].setAttribute("status",0))}}function g(b){b==m&&(b=l.indexOf(b),0>b-1?k.done():0<=b&&0<=b-1&&(n[b].removeAttribute("status"),--b,a(l[b]),n[b].setAttribute("status",0)))}function h(a,c){var d=0,f=0,g=getHeight(b);c?(a.style.display="block",d=getHeight(a),f=a.offsetHeight,a.style.height="0px"):(d=getHeight(a),f=a.offsetHeight);d-=(d-f)/2;a.style.opacity=c?0:1;a.set=
{h:c?f:0,m:c?null:0,o:c?1:0};b.set={h:c?d+g:g-d};morpheus([b,a],{height:function(a){return a.set.h},"margin-bottom":function(a){return a.set.m},"margin-top":function(a){return a.set.m},opacity:function(a){return a.set.o},duration:250,complete:function(){c?(a.style.height="",a.style.opacity=""):a.removeAttribute("style")}})}for(var k=this,l=c,n=document.getElementById("progress_view").getElementsByClassName("progress-step"),m=null,p=0;p<l.length;++p)l[p].reset=d,l[p].activate=a,l[p].advance=f,l[p].back=
g,l[p].expand=h;k.init=function(){for(var a=0;a<l.length;++a)l[a].init&&l[a].init()};k.clear=function(){d();for(var a=b.getElementsByTagName("*"),c=0;c<a.length;++c)a[c].hasAttribute("user-input")&&(a[c].parentNode.removeAttribute("unset"),D(a[c],""));for(a=0;a<l.length;++a)l[a].clear()}}function C(){function d(){c.set={w:0};a.set={h:0};morpheus([c,a],{width:function(a){return a.set.w},height:function(a){return a.set.h},duration:350,complete:function(){c.style="";a.style="";a.removeChild(q)}});window.scrollBodyTo(window.shop.el)}
var c=document.getElementById("order"),a=document.getElementById("order_panel"),q=document.getElementById("order_panel_inner"),f=new g,t=new p,h=new m,k=new A,l=new I(a,[f,t,h,k]);b(a);a.removeChild(q);f.show=function(b){order_panel.appendChild(q);c.style.display="inline-block";a.style.display="block";b&&window.scrollBodyTo(a)};f.hide=d;window.events.listen("order",function(a){f.addOrder(a)});l.done=function(){l.clear();d()};l.init();this.el=a}window.addEventListener("load",function(){window.orders=
new C})})();
