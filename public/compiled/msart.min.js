(function(y,C){"function"==typeof define?define(C):"undefined"!=typeof module?module.exports=C():this[y]=C()})("morpheus",function(){function y(a){var m;m=x.length;for(d&&(a=n());m--;)x[m](a);x.length&&r(y)}function C(a,d){var m={},x;if(x=a.match(w))m.rotate=e(x[1],d?d.rotate:null);if(x=a.match(G))m.scale=e(x[1],d?d.scale:null);if(x=a.match(h))m.skewx=e(x[1],d?d.skewx:null),m.skewy=e(x[3],d?d.skewy:null);if(x=a.match(B))m.translatex=e(x[1],d?d.translatex:null),m.translatey=e(x[3],d?d.translatey:null);
return m}function q(a){var d="";"rotate"in a&&(d+="rotate("+a.rotate+"deg) ");"scale"in a&&(d+="scale("+a.scale+") ");"translatex"in a&&(d+="translate("+a.translatex+"px,"+a.translatey+"px) ");"skewx"in a&&(d+="skew("+a.skewx+"deg,"+a.skewy+"deg)");return d}function u(a){var d=a.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(d?"#"+(16777216|d[1]<<16|d[2]<<8|d[3]).toString(16).slice(1):a).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function p(a){return a.replace(/-(.)/g,function(a,d){return d.toUpperCase()})}
function c(a){return"function"==typeof a}function b(a){return Math.sin(a*Math.PI/2)}function k(a,d,m,g,z,w){function I(a){a-=e;if(a>E||h){w=isFinite(w)?w:1;h?t&&d(w):d(w);var r;a:if(a=x,r=void 0,Array.prototype.indexOf)r=a.indexOf(I);else{for(r=0;r<a.length;++r)if(a[r]===I)break a;r=void 0}0<=r&&(a=x.slice(r+1),x.length=r,x=x.concat(a));return m&&m.apply(v)}isFinite(w)?d(G*g(a/E)+z):d(g(a/E))}g=c(g)?g:l.easings[g]||b;var E=a||1E3,v=this,G=w-z,e=n(),h=0,t=0;1===x.push(I)&&r(y);return{stop:function(a){h=
1;(t=a)||(m=null)}}}function f(a,d){var m=a.length,x=[],g,r;for(g=0;g<m;++g)x[g]=[a[g][0],a[g][1]];for(r=1;r<m;++r)for(g=0;g<m-r;++g)x[g][0]=(1-d)*x[g][0]+d*x[parseInt(g+1,10)][0],x[g][1]=(1-d)*x[g][1]+d*x[parseInt(g+1,10)][1];return[x[0][0],x[0][1]]}function e(a,d,m,x,g){return(m=z.exec(a))?(g=parseFloat(m[2]))&&d+("+"==m[1]?1:-1)*g:parseFloat(a)}function l(a,d){var x=a?x=isFinite(a.length)?a:[a]:[],r,z=d.complete,w=d.duration,b=d.easing,G=d.bezier,h=[],n=[],B=[],l=[],A,H;G&&(A=d.left,H=d.top,delete d.right,
delete d.bottom,delete d.left,delete d.top);for(r=x.length;r--;){h[r]={};n[r]={};B[r]={};if(G){var F=v(x[r],"left"),D=v(x[r],"top"),y=[e(c(A)?A(x[r]):A||0,parseFloat(F)),e(c(H)?H(x[r]):H||0,parseFloat(D))];l[r]=c(G)?G(x[r],y):G;l[r].push(y);l[r].unshift([parseInt(F,10),parseInt(D,10)])}for(var J in d){switch(J){case "complete":case "duration":case "easing":case "bezier":continue}var F=v(x[r],J),Q,D=c(d[J])?d[J](x[r]):d[J];"string"==typeof D&&E.test(D)&&!E.test(F)?delete d[J]:(h[r][J]="transform"==
J?C(F):"string"==typeof D&&E.test(D)?u(F).slice(1):parseFloat(F),n[r][J]="transform"==J?C(D,h[r][J]):"string"==typeof D&&"#"==D.charAt(0)?u(D).slice(1):e(D,parseFloat(F)),"string"==typeof D&&(Q=D.match(g))&&(B[r][J]=Q[1]))}}return k.apply(x,[w,function(a,g,z){for(r=x.length;r--;){G&&(z=f(l[r],a),x[r].style.left=z[0]+"px",x[r].style.top=z[1]+"px");for(var w in d){g=a;var E=B;z=h;var c=n,v=w,b=r,e=void 0;if("transform"==v){e={};E=void 0;for(E in z[b][v])e[E]=E in c[b][v]?Math.round(1E3*((c[b][v][E]-
z[b][v][E])*g+z[b][v][E]))/1E3:z[b][v][E];g=e}else if("string"==typeof z[b][v]){z=z[b][v];c=c[b][v];v=[];E=e=e=b=void 0;for(b=0;6>b;b++)e=Math.min(15,parseInt(z.charAt(b),16)),E=Math.min(15,parseInt(c.charAt(b),16)),e=Math.floor((E-e)*g+e),e=15<e?15:0>e?0:e,v[b]=e.toString(16);g="#"+v.join("")}else e=Math.round(1E3*((c[b][v]-z[b][v])*g+z[b][v]))/1E3,v in t||(e+=E[b][v]||"px"),g=e;"transform"==w?x[r].style[I]=q(g):"opacity"!=w||m?x[r].style[p(w)]=g:x[r].style.filter="alpha(opacity="+100*g+")"}}},z,
b])}var A=document,F=window,D=F.performance,H=D&&(D.now||D.webkitNow||D.msNow||D.mozNow),n=H?function(){return H.call(D)}:function(){return+new Date},d=!1,a=A.documentElement,E=/^rgb\(|#/,z=/^([+\-])=([\d\.]+)/,g=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,w=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,G=/scale\(((?:[+\-]=)?([\d\.]+))\)/,h=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,B=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,t={lineHeight:1,
zoom:1,zIndex:1,opacity:1,transform:1},I=function(){var a=A.createElement("a").style,d=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],m;for(m=0;m<d.length;m++)if(d[m]in a)return d[m]}(),m="undefined"!==typeof A.createElement("a").style.opacity,v=A.defaultView&&A.defaultView.getComputedStyle?function(a,d){d="transform"==d?I:d;d=p(d);var m=null,x=A.defaultView.getComputedStyle(a,"");x&&(m=x[d]);return a.style[d]||m}:a.currentStyle?function(a,d){d=p(d);if("opacity"==d){var m=
100;try{m=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(x){try{m=a.filters("alpha").opacity}catch(g){}}return m/100}m=a.currentStyle?a.currentStyle[d]:null;return a.style[d]||m}:function(a,d){return a.style[p(d)]},r=function(){return F.requestAnimationFrame||F.webkitRequestAnimationFrame||F.mozRequestAnimationFrame||F.msRequestAnimationFrame||F.oRequestAnimationFrame||function(a){F.setTimeout(function(){a(+new Date)},17)}}();r(function(a){d=1E12<a!=1E12<n()});var x=[];l.tween=k;l.getStyle=
v;l.bezier=f;l.transform=I;l.parseTransform=C;l.formatTransform=q;l.animationFrame=r;l.easings={};return l});(function(y){function C(c){var b=null,k=new XMLHttpRequest;k.open(c.type,c.url,!0);c.files||k.setRequestHeader("Content-type","application/json");k.onloadend=function(){200==k.status?b&&b(JSON.parse(k.responseText)):b&&b(null);k=null};c.files?k.send(c.data):k.send(c.data?JSON.stringify(c.data):null);this.done=function(c){b=c}}function q(){var c=[],b=function(b,c){return b-c},k=function(f,e,l){var A=c.length;e=null==e?0:e;l=null==l?A-1:l;var q=e+Math.floor((l-e)/2);if(0==A)return A;if(0<b(f,c[l]))return l+
1;if(0>b(f,c[e]))return e;A=b(f,c[q]);if(0==A)return q;if(0>A)return k(f,e,q-1);if(0<A)return k(f,q+1,l)};this.setCompare=function(c){c&&(b=c)};this.insert=function(b){c.splice(k(b),0,b)};this.length=function(){return c.length};this.at=function(b){return c[b]};this.grab=function(b){return c.splice(0,b)};this.data=function(){return c}}function u(c){var b=function(){var b=window.performance||{};b.now=function(){return b.now||b.webkitNow||b.msNow||b.oNow||b.mozNow||function(){return(new Date).getTime()}}();
return b.now()},k=function(){return c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.msRequestAnimationFrame||c.oRequestAnimationFrame||function(e){c.setTimeout(function(){e(b())},1E3/60)}}(),f=function(){return new function(){var b=new q,c=function(A){0<b.length()&&k(c);var f,q;f=0;for(q=b.length();f<q&&!(b.at(f).timestamp>A);++f);A=b.grab(f);f=0;for(q=A.length;f<q;++f)A[f].func.apply(null,A[f].args)};b.setCompare(function(b,c){return b.timestamp-c.timestamp});
this.addTask=function(A){b.insert(A);0<b.length()&&k(c)}}}();c.async=function(c,l,A){"Function"!=classOf(c)||l&&"Array"!=classOf(l)||f.addTask({timestamp:A?b()+A:0,func:c,args:l||[]})}}function p(c){var b={};c.events={listen:function(c,f){var e=b[c]||[];e[e.length]=f;b[c]=e},remove:function(c,f){var e=b[c]||[],l=e.indexOf(f);0<=l&&e.splice(l,1)},emit:function(k,f){var e=b[k];if(e)for(var l=0;l<e.length;++l)c.async(e[l],f)}}}y.hashCode=function(c){var b=0,k,f,e;if(0===c.length)return b;k=0;for(e=c.length;k<
e;k++)f=c.charCodeAt(k),b=(b<<5)-b+f,b|=0;return b};y.MSInputObject=function(c){var b=this;b.__get_value=null;b.__set_value=null;c=c||{};if(window.admin||c.user){if(c.multiline){b.el=document.createElement("textarea");var k=b.el.offsetHeight-b.el.clientHeight,f=0,e=b.el.clientHeight,l=function(){async(function(){var c=b.el.value.length;c<f&&(b.el.style.height="auto");var l=b.el.scrollHeight+k;0<l&&(b.el.style.height=l+"px");f=c;l!=e&&(e=l)})};b.__get_value=function(){return b.el.value};b.__set_value=
function(c){b.el.value=c;l()};b.el.addEventListener("keydown",l);b.el.addEventListener("keyup",l)}else b.el=document.createElement("input"),b.el.setAttribute("type","text"),b.__get_value=function(){return b.el.value},b.__set_value=function(c){b.el.value=c};b.el.onchange=function(){if(b.onchange)b.onchange(b)};c.placeholder&&this.el.setAttribute("placeholder",c.placeholder)}else b.el=document.createElement("div"),b.__get_value=function(){return b.el.innerHTML},b.__set_value=function(c){b.el.innerHTML=
c};c.className&&(b.el.className=c.className);c.id&&(b.el.id=c.id)};MSInputObject.prototype.value=function(){return this.__get_value()||""};MSInputObject.prototype.setValue=function(c){this.__set_value(c||"")};y.MSDivObject=function(c){this.el=c||document.createElement("div")};MSDivObject.prototype.addClass=function(c){-1==this.el.className.indexOf(c)&&(this.el.className=this.el.className.concat(" ",c))};MSDivObject.prototype.removeClass=function(c){-1<this.el.className.indexOf(c)&&(this.el.className=
this.el.className.replace(c,"").replace("  "," ").trim())};MSDivObject.prototype.setPlaceholder=function(c){if(window.admin){var b=this,k=document.createElement("span"),f=!0;b.has_placeholder=!0;k.className="placeholder";k.innerHTML=c;0==b.el.innerHTML.length&&(b.el.appendChild(k),b.addClass("placeholder-visible"));b.el.addEventListener("text-changed",function(){0==b.el.innerHTML.length?(f||(b.addClass("placeholder-visible"),f=!0),b.el.appendChild(k)):f&&(f=!1,b.removeClass("placeholder-visible"))});
b.el.addEventListener("focus",function(){f&&(b.el.removeChild(k),b.removeClass("placeholder-visible"),f=!1)});b.el.addEventListener("blur",function(){0==b.innerHTML.length&&(b.el.appendChild(k),b.addClass("placeholder-visible"),f=!0)});b.has_text=function(){return!f}}};MSDivObject.prototype.refresh=function(){(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed"))};MSDivObject.prototype.scrollable=function(){var c=this;c.track_change?Ps.update(c.el):(c.track_change=
!0,Ps.initialize(c.el,{suppressScrollX:!0}),c.el.addEventListener("text-changed",function(){Ps.update(c.el)}))};MSDivObject.prototype.setText=function(c){c&&(this.el.innerHTML=c,(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed")))};MSDivObject.prototype.getText=function(){return this.has_placeholder?this.has_text()?this.el.innerHTML:"":this.el.innerHTML};MSDivObject.prototype.textEdit=function(c){if(window.admin){var b=this;c=c||{};c.textItem=c.textItem||b;
b.el.addEventListener("click",function(){if(!b.in_edit){b.in_edit=!0;var k=c.textItem.getText(),f=c.multiline?document.createElement("textarea"):document.createElement("input");c.multiline&&c.autosize&&f.addEventListener("keydown",function(){async(function(){f&&(f.style.height=f.scrollHeight+"px")})});c.multiline||(f.type="text");f.className="inplace-text-edit";f.value=k;f.style.width=b.el.offsetWidth-(c.offsetWidth||0)+"px";f.style.height=b.el.offsetHeight-(c.offsetHeight||0)+"px";b.el.innerHTML=
"";b.el.appendChild(f);f.focus();f.onblur=function(){c.textItem.setText(f.value);f=null;b.in_edit=!1;c.textItem!=b&&(b.el.innerHTML="",b.el.appendChild(c.textItem.el),b.refresh())}}})}};MSDivObject.prototype.loadImage=function(c){var b=this,k=c.url;async(function(){b.el.style.backgroundImage="url("+k+")"})};y.FileUpload=function(c){var b=this,k=document.createElement("div"),f=document.createElement("input");c=c||{multiple:!1};c.id&&(k.id=c.id);c.className&&(k.className=c.className);f.type="file";
f.name="file";f.accept="image/*";f.multiple=c.multiple;k.appendChild(f);f.onchange=function(c){b.preview&&b.preview(c.target.files)};b.el=k};y.DropDown=function(c,b){function k(a,d){if(a.manager)a.manager.setValue(d);else if(a.firstChild&&3==a.firstChild.nodeType)a.firstChild.nodeValue=d;else{var b=document.createTextNode(d);a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)}}function f(){var a=null,d=[];this.bind=function(b){d[d.length]=b;a&&k(b,a)};this.unbind=function(a){a=d.indexOf(a);
0<=a&&d.splice(a,1)};this.setValue=function(b){if(a=b)for(b=0;b<d.length;++b)k(d[b],a)}}var e=this,l=b||document.createElement("div"),A=!c.adminOnly||window.admin,q=A?document.createElement("img"):null,p=A?document.createElement("lu"):null,H=!1,n=!1,d={},a=null,E=!1,z=function(b){var c=d[b];c&&(a&&a.unbind(l),l.setAttribute("current-data-id",b),a=c,a.bind(l),A&&H&&e.close(),e.changed&&async(e.changed,[b]))};l.controller=e;e.addItem=function(b,c){var e=new f,h=null;d[b]=e;c&&e.setValue(b);A&&(h=document.createElement("li"),
h.className="dropdown-item text-invert",h.onclick=function(){E||z(b)},p.appendChild(h),e.bind(h));a||z(b);return{controller:e,item:h}};e.addVirtual=function(){var a=document.createElement("li");a.className="dropdown-item virtual text-invert";p.appendChild(a);return a};e.removeVirtual=function(a){p.contains(a)&&p.removeChild(a)};l.className=c.className?0<l.className.length?l.className+(" dropdown-container no-select text "+c.className):"dropdown-container no-select text "+c.className:0<l.className.length?
l.className+" dropdown-container text":"dropdown-container text";A&&(q.src=c.src||"../images/down.png",l.appendChild(q),p.className="dropdown-list no-select",l.appendChild(p),l.onclick=function(){E||n||(e.beforeOpen&&e.beforeOpen(),H=!0,p.style.display="block")},l.onmouseleave=function(){E||e.close()});e.el=l;e.manual=function(){E=!0};e.auto=function(){E=!1};e.open=function(){E&&(H=!0,p.style.display="block")};e.close=function(){H&&(e.beforeClose&&e.beforeClose(),p.style.right="-200%",async(function(){p.removeAttribute("style")}))};
e.setText=function(a){k(l,a)};e.text=function(){return l.firstChild&&3==l.firstChild.nodeType?l.firstChild.nodeValue:""};e.value=function(){return l.getAttribute("current-data-id")};e.setValue=function(a){z(a)};e.lock=function(){n=!0;l.setAttribute("locked",!0)};e.unlock=function(){n=!1;l.removeAttribute("locked")}};y.classOf=function(c){return/\[object (\w+)\]/.exec(Object.prototype.toString.call(c))[1]};y.getHeight=function(c){var b;document.all?(b=parseInt(c.currentStyle.height),c=parseInt(c.currentStyle.marginTop,
10)+parseInt(c.currentStyle.marginBottom,10)):(b=parseInt(document.defaultView.getComputedStyle(c,"").getPropertyValue("height")),c=parseInt(document.defaultView.getComputedStyle(c,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(c,"").getPropertyValue("margin-bottom")));return b+c};y.browser={opera:!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),firefox:"undefined"!==typeof InstallTrigger,safari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),
ie:!!document.documentMode};y.browser.chrome=!!window.chrome&&!window.browser.opera;y.ajax=function(c){return new C(c)};y.scrollBodyTo=function(c,b){var k=document.getElementById("content-wrapper"),f=parseInt(c.offsetTop),e=parseInt(k.scrollTop);b=parseInt(b||0);if(e!=f){var l=f-e+b;morpheus.tween(500,function(b){b=e+l*b;0<=b&&b<=k.scrollHeight&&(k.scrollTop=b)})}};y.addEventListener("load",function(){new u(y);new p(y)})})(this);(function(){function y(){function q(b,c){if(b.controller)b.controller.setValue(c);else if(b.firstChild&&3==b.firstChild.nodeType&&b.firstChild.nodeValue)b.firstChild.nodeValue=c;else{var f=document.createTextNode(c);b.firstChild?b.insertBefore(f,b.firstChild):b.appendChild(f)}}var u="en",p={},c={};this.bind=function(b,c){q(c,C[u][b]);var f=p[b];f?f[f.length]=c:p[b]=[c]};this.bindInput=function(b,l){l.placeholder=C[u][b];var f=c[b];f?f[f.length]=l:c[b]=[l]};this.unbind=function(b){for(var c in p)if(p.hasOwnProperty(c)&&
0<p[c].length){var f=p[c].indexOf(b);-1!=f&&p[c].splice(f,1)}};this.unbindInput=function(b){for(var f in c)if(c.hasOwnProperty(f)&&0<c[f].length){var k=c[f].indexOf(b);-1!=k&&c[hey].splice(k,1)}};this.change=function(b){if(C[b]&&u!=b){u=b;for(var f in p)if(p.hasOwnProperty(f)&&0<p[f].length){b=p[f];for(var k=b.length,y=0;y<k;++y)q(b[y],C[u][f])}for(f in c)if(c.hasOwnProperty(f)&&0<c[f].length)for(b=c[f],k=b.length,y=0;y<k;++y)b[y].placeholder=C[u][f]}};for(var b=document.getElementsByTagName("*"),
k=0;k<b.length;++k)if(b[k].hasAttribute("lang")){var f=b[k].getAttribute("lang");this.bind(f,b[k])}else b[k].hasAttribute("placeholder-lang")&&(f=b[k].getAttribute("placeholder-lang"),this.bindInput(f,b[k]));this.change("pl")}var C={en:{about:"About",shop:"Shop",orders:"Orders",gallery:"Gallery",contact:"Contact",description:"Description",title:"Title",type:"Type",availability:"Availability",process:"Order Process",price:"Price",quantity:"Quantity",shipping:"Shipping",qandp:"Quantity & Price",payment_opt:"Payment methods",
lead:"Lead times",individual:"Individual",common:"Common",available:"Available",demand:"On-Demand",keep:"Keep in Shop",move:"Move to Gallery",remove:"Remove","delete":"Delete",save:"Save",close:"Close",order:"Order",aboutus:"About Us",office:"Our Office",contactus:"Contact Us",name:"Name",surname:"Surname",email:"E-mail",address:"Address",country:"Country",postcode:"Post Code",message:"Message"},pl:{about:"Pracownia",shop:"Sklep",orders:"Zam\u00f3wienie",order:"Zam\u00f3w",gallery:"Galeria",contact:"Kontakt",
description:"Opis",title:"Nazwa",type:"Rodzaj",availability:"Dost\u0119pno\u015b\u0107",process:"Akcja",price:"Cena",close:"Zamknij",save:"Zapisz","delete":"Kasuj",payment_opt:"Forma p\u0142atno\u015bci",lead:"Czas realizacji",quantity:"Ilo\u015b\u0107",shipping:"Transport",total:"Koszt ca\u0142kowity",checkout:"Dalej",about_us:"O nas",office:"Dane kontaktowe",about_us_value:"",send:"Wy\u015blij",personal_details:"Dane osobowe",forename:"Imi\u0119",surname:"Nazwisko",email:"Email",phone:"Numer telefonu",
shipping_address:"Adres wysy\u0142ki",company:"Nazwa firmy",address:"Ulica",city:"Miasto",county:"Wojew\u00f3dztwo",post_code:"Kod pocztowy",country:"Kraj",next:"Kontynuuj",back:"Wr\u00f3\u0107",payment_type:"Rodzaj p\u0142atno\u015bci",card_details:"Szczeg\u00f3\u0142y karty kredytowej",card_no:"Numer karty",cvv:"CVV",expiry:"Termin wa\u017cno\u015bci",billing_address:"Adres fakturowania",vat:"NIP",full_name:"Imi\u0119 i nazwisko",price_summary:"Podsumowanie",pay:"Zap\u0142a\u0107",message:"Wiadomo\u015b\u0107",
individual:"Pojedynczy",common:"Zbiorowy",advert:"Og\u0142oszenie",available:"Dost\u0119pny",demand:"Na zam\u00f3wienie",keep:"Sklep",move:"Galeria",remove:"Usu\u0144",today:"Dzisiaj",l_3_day:"3 dni",l_week:"Tydzie\u0144",l_month:"Miesi\u0105c",l_time:"Ca\u0142y czas",lead_avail:"- Realizacja zam\u00f3wienia: 1 dzie\u0144 roboczy\n- Czas dostawy: 2 - 3 dni robocze",lead_wait:"- Realizacja zam\u00f3wienia: 2 - 3 tygodnie\n- Czas dostawy: 2 - 3 dni robocze",components:"Nazwa",none:"Bez nazwy",labeled:"Oznaczona",
projects:"Projekt",category:"Kategoria",allitems:"Wszystkie",lowprice:"Cena malej\u0105co",hightprice:"Cena rosn\u0105co",iagree:"Akceptuj\u0119",terms:"Regulamin sklepu"}};window.addEventListener("load",function(){window.language=new y})})();(function(){function y(){var q=document.getElementById("main_menu"),u=document.getElementById("menu_list"),p=q.getElementsByClassName("menu_item"),c=!1,b={};q.onclick=function(){c?(c=!1,u.removeAttribute("style")):(u.style.display="block",c=!0)};for(q=0;q<p.length;++q){var k=p[q].getAttribute("scrollto");b[k]=document.getElementById(k);p[q].onclick=function(f){f.stopPropagation?f.stopPropagation():f.cancelBubble=!0;c=!1;u.removeAttribute("style");window.scrollBodyTo(b[f.target.getAttribute("scrollto")])}}}
function C(){if(window.mobile)new y;else{var q=document.getElementById("header"),u=document.getElementById("content-wrapper"),p=document.getElementById("title"),c=document.getElementById("main_menu"),b=c.getElementsByClassName("menu_item"),k=[q,u,p,c],f={},e=!1,l;for(l in b)if(b.hasOwnProperty(l)){var A=b[l].getAttribute("scrollto");f[A]=document.getElementById(A);b[l].onclick=function(b){window.scrollBodyTo(f[b.target.getAttribute("scrollto")])}}q.unset={height:160};u.unset={top:160};p.unset={height:120,
width:720,left:"50%",marginLeft:-360};c.unset={top:120,left:"50%",marginLeft:-350};q.set={height:60};u.set={top:60};p.set={height:60,width:350,left:"0%",marginLeft:0};c.set={top:15,left:"100%",marginLeft:-700};for(l in k){var b=k[l].unset,C;for(C in b)k[l].style[C]=b[C]}window.events.listen("requestHeaderHeight",function(b){b(q.offsetHeight)});window.addEventListener("resize",function(){e&&(p.style.marginLeft=(q.offsetWidth<c.offsetWidth+350?-350:0)+"px")});u.addEventListener("scroll",function(){var b=
u.scrollTop;e&&0==b?(e=!1,morpheus(k,{height:function(b){return b.unset.height},width:function(b){return b.unset.width},top:function(b){return b.unset.top},left:function(b){return b.unset.left},marginLeft:function(b){return b.unset.marginLeft},duration:350,complete:function(){window.events.emit("headerChanged",[q.unset.height])}})):!e&&0<b&&(e=!0,p.set.marginLeft=q.offsetWidth<c.offsetWidth+350?-350:0,morpheus(k,{height:function(b){return b.set.height},width:function(b){return b.set.width},top:function(b){return b.set.top},
left:function(b){return b.set.left},marginLeft:function(b){return b.set.marginLeft},duration:500,complete:function(){window.events.emit("headerChanged",[q.set.height])}}))})}}window.addEventListener("load",function(){window.header=new C})})();(function(){function y(q){var u=this,p=document.createElement("div"),c=new MSInputObject({multiline:!0,placeholder:"Description",className:"about-column-text text"}),b=window.admin?document.createElement("div"):null;p.className="about-column";c.setValue(q);p.appendChild(c.el);b&&(b.className="remove-about-column",p.appendChild(b),b.onclick=function(){u.remove&&u.remove(u)});u.el=p;u.text=function(){return c.value()}}function C(){var q=document.getElementById("about_panel"),u=document.getElementById("columns");
document.getElementById("demo_show");var p=window.admin?document.getElementById("create_about_column"):null,c=window.admin?document.getElementById("save_about_column"):null,b=window.admin?function(b){u.removeChild(b.el);k.splice(k.indexOf(b),1)}:null,k=[];window.admin&&q.setAttribute("admin",!0);p&&(p.onclick=function(){var c=new y;c.remove=b;k.push(c);u.appendChild(c.el)});c&&(c.onclick=function(){for(var b=[],c=0;c<k.length;++c)b.push(k[c].text());window.ajax({type:"POST",data:{fields:b},url:"/async/about/save"})});
window.ajax({type:"POST",url:"/async/about/load"}).done(function(c){if(c.status&&c.fields){var e=document.createDocumentFragment(),l;for(l in c.fields){var q=new y(c.fields[l]);q.remove=b;k.push(q);e.appendChild(q.el)}u.appendChild(e)}})}window.addEventListener("load",function(){window.home=new C})})();(function(){function y(d){var a=this,b=d.id,c=d.file?!0:!1,g=d.file,w=d.label,G=null,h=null,n=!1,t=null,I=!1,m=new MSDivObject;d=window.admin?document.createElement("div"):null;var v=function(a){w=a;G&&(G.innerHTML=w||"")};m.el.className="picture-thumb";d&&(d.className="picture-thumb-remove",d.onclick=function(){a.removed&&a.removed(b)},m.el.appendChild(d));window.admin&&(m.el.setAttribute("draggable",!0),m.el.ondragstart=function(a){a.dataTransfer.setData("target",b)},m.el.ondragover=function(a){a.preventDefault()},
m.el.ondrop=function(d){d.preventDefault();a.swap&&a.swap(d.dataTransfer.getData("target"),b)});m.el.onclick=function(){a.click&&a.click(a)};a.el=m.el;a.id=function(){return b};a.isTemp=function(){return c};a.file=function(){return g};a.label=function(){return w};a.setLabel=v;a.enableLabel=function(){G||(G=document.createElement("div"),G.className="picture-thumb-label header-text no-select",m.el.appendChild(G));G&&(G.innerHTML=w||"")};a.disableLabel=function(){G&&(m.el.removeChild(G),G=null)};a.data=
function(){return h};a.remove=function(){n=!0;return c};a.pack=function(){return{id:b,temp:c,file:g,label:w,data:h,removed:n}};a.onload=function(d){I&&d?async(d,[a]):t=d};a.commit=function(a){if(n&&!c)window.ajax({type:"POST",data:{id:b},url:"/async/images/delete"}).done(function(d){a()});else if(c){var d=new FormData;d.append("file",g);window.ajax({type:"POST",data:d,files:!0,url:"/async/images/save"}).done(function(d){a({id:d.id,label:w})})}else a({id:b,label:w})};a.update=function(a){b=a.id;c=
a.temp;v(a.label);g=a.file;h=a.data;n=a.removed;m.el.style.backgroundImage=c?"url("+h+")":"url(/async/thumb/load/"+b+")"};c?(d=new FileReader,d.onload=function(d){h=d.target.result;m.el.style.backgroundImage="url("+h+")";I=!0;t&&(async(t,[a]),t=null)},d.readAsDataURL(g)):(m.loadImage({url:"/async/thumb/load/"+b,color:"#e0e0e0",shadow:!0,radius:24,width:6,length:22,lines:15,speed:.75}),I=!0,t&&(async(t,[a]),t=null))}function C(){var d=this,a=document.createElement("div"),b=document.createElement("div"),
c=document.createElement("div"),g=new MSDivObject,w=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,n=null,h=null,B={},t=[],I=function(a){var d=B[a];d&&(d.remove()&&delete B[a],c.removeChild(d.el),Ps.update(c));a=t.indexOf(a);0<=a&&t.splice(a,1)},m=function(a,d){var b=B[a],m=b.pack(),c=B[d].pack();B[a]=B[d];B[d]=b;B[a].update(m);B[d].update(c);b=t.indexOf(a);m=t.indexOf(d);t[b]=d;t[m]=a},v=function(){var a=g.el.getAttribute("current");(a=B[a])&&a.setLabel(n.value())},
r=function(a){a.isTemp()?g.el.style.backgroundImage="url("+a.data()+")":g.loadImage({url:"/async/images/load/"+a.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});g.el.setAttribute("current",a.id());n&&(n.onchange=null,n.setValue(a.label()),n.onchange=v)};a.className="picture-manager";b.className="picture-container";c.className="picture-carousel";b.appendChild(c);g.el.className="picture-preview";w&&(c.appendChild(w.el),w.preview=function(a){if(a){d.beginAdd();for(var b=
null,m=0;m<a.length;++m){var c=new y({id:String(hashCode(a[m].name)),file:a[m]});b||(b=c);d.add(c)}d.endAdd();d.show(b)}});a.appendChild(g.el);a.appendChild(b);d.el=a;d.imageList=function(){return t};d.enableLabel=function(a){n||(n=new MSInputObject({className:"picture-preview-label text"}),g.el.appendChild(n.el));n.onchange=null;a?n.setValue(a):(a=g.el.getAttribute("current"),(a=B[a])&&n.setValue(a.label()));for(var d in B)B.hasOwnProperty(d)&&B[d].enableLabel();n.onchange=v};d.disableLabel=function(){n&&
(g.el.removeChild(n.el),n=null);for(var a in B)B.hasOwnProperty(a)&&B[a].disableLabel()};d.commit=function(a){var d=function(a,b,m,c,r){a==b?r(c):B[m[a]].commit(function(x){x&&c.push(x);d(a+1,b,m,c,r)})};d(0,t.length,t,[],a)};d.beginAdd=function(){null==h&&(h=document.createDocumentFragment())};d.endAdd=function(){if(h&&(c.appendChild(h),h=null,0<t.length))B[t[0]].onload(r)};d.present=function(a){(a=B[a])&&async(r,[a])};d.add=function(a){h&&!B[a.id()]&&(t.push(a.id()),B[a.id()]=a,a.removed=I,a.swap=
m,a.click=r,h.appendChild(a.el),n&&a.enableLabel())};d.show=function(a){var d=function(){if(h)async(d);else if(a)a.onload(r)};async(d)}}function q(){var d=document.createElement("table"),a=new MSInputObject({placeholder:"Price",className:"text"}),b=new MSInputObject({placeholder:"Shipping",className:"text"});language.bindInput("price",a.el);language.bindInput("shipping",b.el);var c=document.createElement("tr"),g=document.createElement("th"),w=document.createElement("th");c.className="text-invert";
language.bind("price",g);language.bind("shipping",w);c.appendChild(g);c.appendChild(w);d.appendChild(c);c=document.createElement("tr");g=document.createElement("td");w=document.createElement("td");g.appendChild(a.el);c.appendChild(g);w.appendChild(b.el);c.appendChild(w);d.appendChild(c);d.className="single-item";this.el=d;this.value=function(){return[{quantity:1,price:a.value(),shipping:b.value()}]};this.setValue=function(d){a.setValue(d[0].price);b.setValue(d[0].shipping)}}function u(){function d(a,
d,b){this.quantity=a;this.price=d;this.shipping=b}var a=document.createElement("table"),b=[],c=function(c,m,g){var r=document.createElement("tr"),x=document.createElement("td"),z=new MSInputObject({placeholder:"Quantity",className:"text"}),w=document.createElement("td"),n=new MSInputObject({placeholder:"Price",className:"text"}),h=document.createElement("td"),t=new MSInputObject({placeholder:"Shipping",className:"text"}),B=document.createElement("td"),e=document.createElement("div"),G=new d(z,n,t);
language.bindInput("quantity",z.el);language.bindInput("price",n.el);language.bindInput("shipping",t.el);e.className="remove-row";b.push(G);z.setValue(c||"");n.setValue(m||"");t.setValue(g||"");x.appendChild(z.el);r.appendChild(x);w.appendChild(n.el);r.appendChild(w);h.appendChild(t.el);r.appendChild(h);B.appendChild(e);r.appendChild(B);a.appendChild(r);e.onclick=function(d){d=b.indexOf(G);0<=d&&(b.splice(d,1),a.removeChild(r))}},g=document.createElement("tr"),w=document.createElement("th"),n=document.createElement("th"),
h=document.createElement("th"),B=document.createElement("th"),t=document.createElement("div");g.className="text-invert";language.bind("quantity",w);language.bind("price",n);language.bind("shipping",h);g.appendChild(w);g.appendChild(n);g.appendChild(h);t.className="add-new-row";B.appendChild(t);g.appendChild(B);t.onclick=function(){c()};a.appendChild(g);a.className="multi-item";this.el=a;this.value=function(){for(var a=[],d=0;d<b.length;++d)a.push({quantity:b[d].quantity.value(),price:b[d].price.value(),
shipping:b[d].shipping.value()});return a};this.setValue=function(a){for(var d=0;d<a.length;++d)c(a[d].quantity,a[d].price,a[d].shipping)}}function p(){var d=null,a=document.createElement("table"),b=document.createElement("tr"),c=document.createElement("th"),g=document.createElement("th"),n=document.createElement("th"),e=document.createElement("tr"),h=document.createElement("td"),B=document.createElement("td"),t=document.createElement("td");b.className="text-invert";language.bind("quantity",c);language.bind("price",
g);language.bind("shipping",n);b.appendChild(c);b.appendChild(g);b.appendChild(n);a.appendChild(b);e.appendChild(h);e.appendChild(B);e.appendChild(t);a.appendChild(e);B.setAttribute("currency","z\u0142");t.setAttribute("currency","z\u0142");this.el=a;this.value=function(){return d};this.setValue=function(a){if(1==a.length)h.innerHTML=a[0].quantity,B.innerHTML=a[0].price,t.innerHTML=a[0].shipping,d={quantity:a[0].quantity,price:a[0].price,shipping:a[0].shipping};else if(1<a.length){var b=new DropDown({});
b.changed=function(b){B.innerHTML=a[b].price;t.innerHTML=a[b].shipping;d={quantity:a[b].quantity,price:a[b].price,shipping:a[b].shipping}};for(var c=0;c<a.length;++c)b.addItem(c).controller.setValue(a[c].quantity);h.appendChild(b.el)}}}function c(d){var a=this,b=document.createElement("div"),c=null,g=!1,n=0;window.admin?(c=[new q,new u],d&&d.type&&(n=0<=d.type&&2>d.type?d.type:0),b.appendChild(c[n].el)):(c=new p,b.appendChild(c.el));b.className="price text advert-hide";a.el=b;window.admin&&(a.change=
function(d){b.removeChild(c[n].el);n=0<=d&&2>d?d:0;b.appendChild(c[n].el);a.changed&&a.changed(d)},a.nullValue=function(a){g=a});a.value=function(){return window.admin?g?null:{type:n,values:c[n].value()}:c.value()};a.setValue=function(d){d&&(window.admin?(a.change(d.type),c[n].setValue(d.values)):c.setValue(d.values))}}function b(){var d=this,a=!0,b=document.createElement("div"),c=new DropDown({className:"component-ctl"});b.className="text-header header-text";language.bind("projects",b);c.changed=
function(a){d.changed&&d.changed(a)};d.setValue=function(a){if(a)for(var d=0;d<a.length;++d)c.addItem(a[d].id).controller.setValue(a[d].label)};d.value=function(){return c.value()};d.text=function(){return c.text()};d.enabled=function(){return a};d.enable=function(){a=!0;b.removeAttribute("style");c.el.removeAttribute("style")};d.disable=function(){a=!1;b.style.display="none";c.el.style.display="none"};var g=document.createDocumentFragment();g.appendChild(b);g.appendChild(c.el);d.el=g}function k(){function d(d){if(e.length<
g.length){var c=document.createElement("div"),m=document.createElement("div"),v=new DropDown({className:"category-ctl"},m),r=document.createElement("div");c.className="category-item-view";r.className="remove-category-item";c.appendChild(m);c.appendChild(r);r.onclick=function(){var d=e.indexOf(v);0<=d&&(e.splice(d,1),delete h[v.id],a.removeChild(c),c=null);e.length<g.length&&(b.style.display=null)};e[e.length]=v;v.beforeOpen=function(){if(n)for(var a=0;a<n.length;++a)v.removeVirtual(n[a]);n=[];for(a=
0;a<g.length;++a)h[g[a]._id]&&h[g[a]._id]!=v||function(a,d){a.onclick=function(a){a.preventDefault();a.stopPropagation();v.setText(d.title);delete h[v.id];v.id=d._id;h[d._id]=v;v.close()};a.className="dropdown-item text-invert";a.innerHTML=d.title;n[n.length]=a}(v.addVirtual(),g[a])};v.beforeClose=function(){if(n){for(var a=0;a<n.length;++a)v.removeVirtual(n[a]);n=null}};if(d)for(m=0;m<g.length;++m){if(g[m]._id==d){h[d]=v;v.id=d;v.setText(g[m].title);break}}else for(m=0;m<g.length;++m)if(!h[g[m]._id]){h[g[m]._id]=
v;v.id=g[m]._id;v.setText(g[m].title);break}a.insertBefore(c,b);e.length==g.length&&(b.style.display="none")}}var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div"),g=[],n=null,e=[],h={},B=!1;a.className="category-list";b.className="category-item-view add-category-item";b.appendChild(c);a.appendChild(b);b.onclick=function(){d()};this.el=a;this.setValue=function(a){if(a){var b=function(){if(B)for(var c=0;c<a.length;++c)d(a[c]);else async(b)};b()}};this.value=
function(){return Object.keys(h)};window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(a){B=!0;a.status&&(g=a.categories||[],0==g.length&&(b.style.display="none"))})}function f(){function d(){this.removeAttribute("error");this.onfocus=null}var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("input"),n=document.createElement("input"),w=new MSInputObject({className:"message text",multiline:!0,user:!0});a.className="shop-item-contact-panel";
b.className="text-header header-text";c.className="name text";n.className="email text";language.bind("contact",b);language.bindInput("full_name",c);language.bindInput("email",n);language.bindInput("message",w.el);a.appendChild(b);a.appendChild(c);a.appendChild(n);a.appendChild(w.el);this.el=a;this.value=function(){return{name:c.value,email:n.value,message:w.value()}};this.error=function(a){for(var b in a)"name"==b?(c.setAttribute("error",!0),c.onfocus=d):"email"==b?(n.setAttribute("error",!0),n.onfocus=
d):"message"==b&&(w.el.setAttribute("error",!0),w.el.onfocus=d)}}function e(d){var a=this,n=document.createElement("div"),z=document.createElement("div"),g=document.createElement("div"),w=null,e=document.createElement("div"),h=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),B=window.admin?document.createElement("div"):null,t=window.admin?new DropDown({className:"type-ctl"}):{setValue:function(a){2==a&&(n.setAttribute("advert",!0),w=new f,z.appendChild(w.el),language.unbind("order",
L),language.bind("send",L))}},I=document.createElement("div"),m=new DropDown({className:"avail-ctl",adminOnly:!0}),v=window.admin?document.createElement("div"):null,r=window.admin?new DropDown({className:"action-ctl"}):null,x=window.admin?document.createElement("div"):null,l=window.admin?new DropDown({className:"component-ctl"}):{setValue:function(d){0==d?(a.disableLabel(),q.disable()):(a.enableLabel(),q.enable())}},q=window.admin?null:new b,p=window.admin?document.createElement("div"):null,A=window.admin?
new k:null,u=document.createElement("div"),H=new c({type:0}),y=document.createElement("div"),C=document.createElement("div"),D=document.createElement("div"),F=document.createElement("div"),O=document.createElement("div"),P=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),M=window.admin&&d.id()?document.createElement("div"):null,L=document.createElement("div"),N=document.createElement("div"),K={title:h,type:t,availability:m,action:r,components:l,images:q,categories:A,
price:H,descrition:P};n.className="details-container";z.className="details-view";n.appendChild(z);g.className="control-view";n.appendChild(g);e.className="text-header header-text";language.bind("title",e);language.bindInput("title",h.el);z.appendChild(e);z.appendChild(h.el);window.admin?(language.bind("individual",t.addItem(0)),language.bind("common",t.addItem(1)),language.bind("advert",t.addItem(2)),B.className="text-header header-text",language.bind("type",B),z.appendChild(B),z.appendChild(t.el)):
q.changed=function(d){a.selectImage&&a.selectImage(d)};m.changed=function(a){language.unbind(F);0==a?language.bind("lead_avail",F):language.bind("lead_wait",F)};language.bind("available",m.addItem(0));language.bind("demand",m.addItem(1));I.className="text-header header-text";language.bind("availability",I);z.appendChild(I);z.appendChild(m.el);window.admin?(language.bind("keep",r.addItem(0)),language.bind("move",r.addItem(1)),language.bind("remove",r.addItem(2)),v.className="text-header header-text",
language.bind("process",v),z.appendChild(v),z.appendChild(r.el),language.bind("components",x),x.className="text-header header-text",language.bind("none",l.addItem(0)),language.bind("labeled",l.addItem(1)),z.appendChild(x),z.appendChild(l.el),l.changed=function(d){0==d?a.disableLabel():a.enableLabel()},l.lock()):z.appendChild(q.el);window.admin&&(p.className="text-header header-text",language.bind("category",p),z.appendChild(p),z.appendChild(A.el));u.className="text-header header-text advert-hide";
language.bind("price",u);z.appendChild(u);z.appendChild(H.el);y.className="text-header header-text advert-hide";language.bind("payment_opt",y);C.className="payments advert-hide";window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status)for(var d=0;d<a.types.length;++d){var b=document.createElement("div");b.className="payment-option";b.setAttribute("type",a.types[d]);C.appendChild(b)}});z.appendChild(y);z.appendChild(C);D.className="text-header header-text advert-hide";
language.bind("lead",D);F.className="lead-time text advert-hide";z.appendChild(D);z.appendChild(F);O.className="text-header header-text";language.bind("description",O);language.bindInput("description",P.el);L.className="action-btn no-select text-invert";language.bind(window.admin?"save":"order",L);g.appendChild(L);L.onclick=function(){if(window.admin){var b={},c;for(c in K)K.hasOwnProperty(c)&&K[c]&&(b[c]=K[c].value());a.save(b)}else w?(b=w.value(),b.data={id:d.id(),preview:q.enabled()?q.value():
d.preview(),title:h.value(),component:q.enabled()?q.text():null},a.contact(b,function(a){a.status||w.error(a.error)})):(b=H.value(),b.id=d.id(),b.preview=q.enabled()?q.value():d.preview(),b.title=h.value(),b.availability=m.value(),b.component=q.enabled()?q.text():null,a.order(b))};N.className="close-btn no-select text-invert";language.bind("close",N);g.appendChild(N);N.onclick=function(){a.close()};M&&(M.className="delete-btn no-select text-invert",language.bind("delete",M),g.appendChild(M),M.onclick=
function(){a.remove()});z.appendChild(O);z.appendChild(P.el);a.el=n;a.show=function(){};a.init=function(){t.changed=function(a){H.nullValue(!1);n.removeAttribute("advert");0==a?(H.change(0),m.setValue(0),l.setValue(0),m.unlock(),r.unlock(),l.lock()):1==a?(H.change(1),m.setValue(1),r.setValue(0),m.lock(),r.lock(),l.unlock()):2==a&&(H.nullValue(!0),m.setValue(1),m.lock(),r.setValue(0),r.lock(),l.unlock(),n.setAttribute("advert",!0))}};a.setValue=function(a){for(var d in K)K.hasOwnProperty(d)&&K[d]&&
K[d].setValue(a[d])}}function l(d,a){function b(c,n,g){var m=this,v=new C,r=new e(c);r.close=function(){m.close()};r.order=function(a){m.close(function(){window.events.emit("order",[a])},{force:!0})};r.contact=function(a,d){window.ajax({type:"POST",data:a,url:"/async/contact"}).done(function(a){a.status?m.close():d(a)})};r.enableLabel=function(){v.enableLabel()};r.disableLabel=function(){v.disableLabel()};m.load=function(a){d.id()?window.ajax({type:"POST",data:{id:d.id()},url:"/async/shop/load"}).done(function(d){if(d.item){r.setValue(d.item);
v.beginAdd();for(var b in d.item.images)v.add(new y(d.item.images[b]));v.endAdd();r.init()}a&&a()}):(r.init(),a&&a())};r.selectImage=function(a){v.present(a)};m.create=function(){g.appendChild(v.el);g.appendChild(r.el)};m.destroy=function(){g.removeChild(v.el);g.removeChild(r.el)};m.show=function(){v.show();r.show()};window.admin&&(r.save=function(b){v.commit(function(n){b.id=d.id();b.images=n;window.ajax({type:"POST",data:b,url:"/async/shop/save"}).done(function(d){if(d.status){var r=null;c.id()==
d._id?c.update({title:b.title,price:b.price,preview:n[0]}):r=function(){a.reload()};m.close(r)}})})},r.remove=function(){window.ajax({type:"POST",data:{id:c.id()},url:"/async/shop/delete"}).done(function(a){a.status&&(n.removeItem(c),m.close())})})}function c(a,d){async(n.close,a?[a,d]:null)}var n=this,w=document.createElement("div"),f=document.createElement("div"),h=new b(d,a,f);h.close=c;w.className=window.admin?"shop-item-container edit":"shop-item-container";w.style.display="none";f.className=
"shop-item-view";h.create();w.appendChild(f);this.el=w;this.id=function(){return d.id()};this.item=function(){return d};this.replace=function(n,g,e){d=n;a=g;var m=new b(d,a,f);m.close=c;m.load(function(){h.destroy();m.create();h=m;e&&e()})};this.show=function(d){d=d||{};d.force?(scrollBodyTo(window.shop.el,a.el.offsetTop+w.offsetTop),morpheus(w,{marginLeft:0,duration:300,complete:function(){h.show()}})):(w.style.display="block",d=w.offsetHeight,scrollBodyTo(window.shop.el,a.el.offsetTop+w.offsetTop),
w.style.height="0px",morpheus(w,{height:d,duration:300,complete:function(){morpheus(w,{marginLeft:0,duration:300,complete:function(){h.show()}});w.style.height=null}}))};this.hide=function(b,c){c=c||{};morpheus(w,{marginLeft:"-110%",duration:300,complete:function(){c.force||scrollBodyTo(window.shop.el,a.el.offsetTop+d.position());w.style.marginLeft=null;c.inline?b&&b():morpheus(w,{height:0,duration:300,complete:function(){w.style.display="none";b&&b()}})}})};h.load()}function A(){var d=this,a=document.createElement("div"),
b=document.createElement("div"),c=document.createElement("div");a.className="shop-item-new";b.className="shop-item-internal";a.appendChild(b);c.className="shop-item-image";b.appendChild(c);d.el=a;a.onclick=function(){d.open&&d.open(d)};d.id=function(){return null};d.title=function(){return null};d.position=function(){return a.offsetTop}}function F(d){var a=this,b=document.createElement("div"),c=document.createElement("div"),n=document.createElement("div"),e=new MSDivObject,f=d.preview.id,h=document.createElement("div");
b.id=d._id;b.className=window.admin?"shop-item edit no-select":"shop-item no-select";c.className="shop-item-internal";b.appendChild(c);e.el.className="shop-item-image";c.appendChild(e.el);n.className="shop-item-title text";c.appendChild(n);h.className="shop-item-price text";c.appendChild(h);e.loadImage({url:"/async/preview/load/"+f,color:"#e0e0e0",shadow:!0,width:3});n.innerHTML=d.title;d.price?(h.innerHTML=Math.round(d.price.values[0].price/d.price.values[0].quantity),h.setAttribute("currency","z\u0142")):
(h.innerHTML=null,h.removeAttribute("currency"));a.id=function(){return b.id};a.title=function(){return n.innerHTML};a.position=function(){return b.offsetTop};a.preview=function(){return f};a.update=function(a){f=a.preview.id;e.loadImage({url:"/async/preview/load/"+f,color:"#e0e0e0",shadow:!0,width:3});n.innerHTML=a.title;a.price?(h.innerHTML=Math.round(a.price.values[0].price/a.price.values[0].quantity),h.setAttribute("currency","z\u0142")):(h.innerHTML=null,h.removeAttribute("currency"))};b.onclick=
function(){b.getAttribute("ordered")?window.scrollBodyTo(window.orders.el):a.open&&a.open(a)};if(window.admin){d.counts=d.counts||{};var l=document.createElement("div"),t=document.createElement("div"),I=document.createElement("span"),m=document.createElement("div"),v=document.createElement("span"),r=document.createElement("div"),x=document.createElement("span"),k=document.createElement("div"),q=document.createElement("span"),p=document.createElement("div"),A=document.createElement("span");l.className=
"visit-counter-container text";t.className="visit-counter";m.className="visit-counter";r.className="visit-counter";k.className="visit-counter";p.className="visit-counter";language.bind("today",t);language.bind("l_3_day",m);language.bind("l_week",r);language.bind("l_month",k);language.bind("l_time",p);I.innerHTML=d.counts.day_1||0;v.innerHTML=d.counts.day_3||0;x.innerHTML=d.counts.day_7||0;q.innerHTML=d.counts.day_28||0;A.innerHTML=d.counts.all||0;t.appendChild(I);m.appendChild(v);r.appendChild(x);
k.appendChild(q);p.appendChild(A);l.appendChild(t);l.appendChild(m);l.appendChild(r);l.appendChild(k);l.appendChild(p);c.appendChild(l)}else d=document.createElement("div"),c=document.createElement("div"),d.className="shop-item-ordered",c.className="shop-item-ordered-icon",d.appendChild(c),b.appendChild(d);a.el=b}function D(b){function a(a){async(function(){if(t){var b=f.childNodes,d=t.item().position(),c=null;f.contains(t.el)&&f.removeChild(t.el);for(var n=0;n<b.length;++n)if(d<b[n].offsetTop){c=
b[n];break}c?f.insertBefore(t.el,c):f.appendChild(t.el);a&&"Function"==classOf(a)&&a()}})}function c(b,d){if(t){window.removeEventListener("resize",a);var n=t.el;t.hide(function(){f.removeChild(n);n=null;b&&b()},d);t=null}else b&&b()}function n(b){if(t){var d=t.item().position()==b.position();t.hide(function(){t.replace(b,g,function(){d?t.show({force:!0}):a(function(){t.show()})})},{force:!0,inline:d})}else t=new l(b,g),t.close=c,a(function(){t.show()}),window.addEventListener("resize",a)}var g=this,
e=document.getElementById("shop_item_view"),f=document.createElement("div"),h=window.admin?new A:null,k=window.location.hash?window.location.hash.substring(1):null,t=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");g.createItem=function(a,b){b&&h&&h.el.nextSibling?f.insertBefore(a.el,h.el.nextSibling):f.appendChild(a.el);a.open=n};g.removeItem=function(a){f.removeChild(a.el)};e.appendChild(f);g.el=e;g.reload=function(){window.ajax({type:"POST",data:b.value(),
url:"/async/shop/list"}).done(function(a){if(a&&a.status){var b=document.createElement("div"),d=null;h&&(b.appendChild(h.el),h.open=n);if(a.items)for(var c=0;c<a.items.length;++c){var g=new F(a.items[c]);if(t&&t.item().id()==g.id()||g.id()==k)d=g,k=null;g.open=n;b.appendChild(g.el)}e.replaceChild(b,f);f=b;d?n(d):t=null}window.events.emit("update-ordered")})}}function H(){function b(a,d){var c=this,n=a.item,m=a.controller,g=document.createElement("div"),e=window.admin&&d?document.createElement("input"):
null,h=window.admin&&d?document.createElement("div"):null,f=!1,t=!1;n.manager=c;g.className="categoty-title";n.appendChild(g);c.setValue=function(a){g.innerHTML=a||""};c.value=function(){return g.innerHTML};c.id=function(){return d?d._id:null};d?(m.setValue(d.title),window.admin&&(h&&(h.className="category-remove",h.onclick=function(a){a.preventDefault();a.stopPropagation();n.parentNode.removeChild(n);t=!0;f=!1}),e&&(e.className="categoty-title header-text"),c.forceEditStart=function(){e&&(n.replaceChild(e,
g),n.appendChild(h),e.value=g.innerHTML,e.onchange=function(){t||(f=!0)})},c.forceEditEnd=function(){e&&(e.onchange=null,n.replaceChild(g,e),n.removeChild(h),g.innerHTML=e.value)},c.save=function(a){t&&c.id()?window.ajax({type:"POST",data:{id:c.id()},url:"/async/category/delete"}).done(a):f?window.ajax({type:"POST",data:{id:c.id(),title:g.innerHTML},url:"/async/category/save"}).done(a):a()})):language.bind("allitems",a)}function a(a){var b=this,d=document.createElement("div");d.className="category-add";
a.appendChild(d);b.el=a;d.onclick=function(){b.create&&b.create()}}function c(a,n){window.admin&&a.el.insertBefore(h,a.el.firstChild);new b(a.addItem(0));window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(c){var m=[];if(c.status)for(var g=0;g<c.categories.length;++g){var e=a.addItem(c.categories[g]._id),e=new b(e,c.categories[g]);window.admin&&(m[m.length]=e)}n(m)})}var n=null,g=document.getElementById("shop_navigator"),e=new DropDown({className:"category-nav",src:"../images/list.png"}),
f=null,h=null,l=1,t=new DropDown({className:"sorter-nav"}),k=t.addItem(0);k.controller.setValue("A  -  Z");k=t.addItem(1);k.controller.setValue("Z  -  A");k=t.addItem(2);language.bind("lowprice",k);k=t.addItem(3);language.bind("hightprice",k);if(window.admin){var m=[],h=document.createElement("div");h.className="shop-category-edit";h.onclick=function(v){v.preventDefault();v.stopPropagation();if(h.hasAttribute("open"))h.removeAttribute("open"),e.el.removeAttribute("edit-mode"),e.close(),e.el.removeChild(h),
f=null,function(a,b){var d=0,c=a.length,n=function(a){++d==c&&b()};if(0<c)for(var m=0;m<c;++m)a[m].forceEditEnd(),a[m].save(n);else b()}(m,function(){var a=new DropDown({className:"category-nav",src:"../images/list.png"});c(a,function(b){m=b;g.replaceChild(a.el,e.el);e=a;e.changed=function(){n&&n.reload()};e.setValue(0)})});else for(h.setAttribute("open",!0),e.el.setAttribute("edit-mode",!0),f=new a(e.addVirtual()),f.create=function(){var a=f.el.parentNode;a.removeChild(f.el);var c=e.addItem(String("000000000000000000000000"+
l++).slice(-24)),c=new b(c,{title:""});c.forceEditStart();m[m.length]=c;a.appendChild(f.el)},e.manual(),e.open(),v=0;v<m.length;++v)m[v].forceEditStart()}}g.appendChild(e.el);g.appendChild(t.el);e.changed=function(){n&&n.reload()};t.changed=function(){n&&n.reload()};this.setView=function(a){n=a};this.value=function(){var a=e.value();return{sort:t.value(),filter:0==a?null:a}};this.el=g;c(e,function(a){window.admin&&(m=a)})}function n(){var b=document.getElementById("shop_panel"),a=new H,c=new D(a);
a.setView(c);this.el=b}window.addEventListener("load",function(){window.shop=new n})})();(function(){function y(q){var u=this,p=q,c=new MSDivObject;q=window.admin?document.createElement("div"):null;c.el.className="gallery-thumb";q&&(q.className="gallery-thumb-remove",c.el.appendChild(q),q.onclick=function(){u.remove&&u.remove(u)});c.el.onclick=function(){u.click&&u.click(u)};if(window.admin){c.el.setAttribute("draggable",!0);var b=document.getElementById("content_scroll_top"),k=document.getElementById("content_scroll_bottom"),f=document.getElementById("content-wrapper"),e=!1,l=function(b){if(e){var c=
f.scrollTop;morpheus.tween(5,function(e){1==e&&async(l,[b]);e=c+b*e;0<=e&&e<=f.scrollHeight&&(f.scrollTop=e)})}};b.ondragenter=function(b){b.preventDefault();e=!0;l(-10)};b.ondragleave=function(b){b.preventDefault();e=!1};k.ondragenter=function(b){b.preventDefault();e=!0;l(10)};k.ondragleave=function(b){b.preventDefault();e=!1};c.el.ondragstart=function(c){c.dataTransfer.setData("target",p);b.setAttribute("enabled",!0);k.setAttribute("enabled",!0)};c.el.ondragend=function(c){c.preventDefault();b.removeAttribute("enabled");
k.removeAttribute("enabled")};c.el.ondragover=function(b){b.preventDefault()};c.el.ondrop=function(b){b.preventDefault();u.swap&&u.swap(b.dataTransfer.getData("target"),p)}}u.el=c.el;u.id=function(){return p};u.change=function(b){p=b;c.loadImage({url:"/async/thumb/load/"+p,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})};c.loadImage({url:"/async/thumb/load/"+p,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})}function C(){var q,u,p;function c(){var b=
k.el.childNodes,c=b.length;u=q=1;if(0<c){p=Math.floor((k.el.offsetWidth-2)/(b[0].offsetWidth+6))*Math.floor((k.el.offsetHeight-2)/(b[0].offsetHeight+6));u=Math.ceil(c/p);for(var d=Math.min(p-1,c);0<=d&&0!=b[d].style.display.length;--d)async(function(a){a.style.display=null},[b[d]]);for(d=Math.min(p,c);d<c&&!(0<b[d].style.display.length);++d)async(function(a){a.style.display="none"},[b[d]])}e.prev.setAttribute("disabled",!0);1==u?e.next.setAttribute("disabled",!0):e.next.removeAttribute("disabled");
e.data.innerHTML=q+" / "+u}document.getElementById("gallery_panel");document.getElementById("content-wrapper");var b=window.admin?new FileUpload({id:"gallery_thumb_new",className:"gallery-thumb",multiple:!0}):null,k=new MSDivObject(document.getElementById("thumbs_container")),f=new MSDivObject(document.getElementById("gallery_view").firstElementChild),e={prev:document.getElementById("gallery_prev_page"),data:document.getElementById("gallery_page_info"),next:document.getElementById("gallery_next_page")};
u=q=1;p=0;var l={},A=function(b){f.loadImage({url:"/async/images/load/"+b.id()+"?height=700",color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75})},C=function(b){window.ajax({type:"POST",data:{id:b.id()},url:"/async/gallery/delete"}).done(function(c){c.status&&(delete l[b.id()],k.el.removeChild(b.el))})},D=function(b,c){if(b!=c){var d=l[b];d.change(c);l[b]=l[c];l[c]=d;l[b].change(b);window.ajax({type:"POST",data:{one:b,two:c},url:"/async/gallery/swap"})}};window.admin||(window.addEventListener("resize",
c),e.prev.onclick=function(){if(!e.prev.hasAttribute("disabled")){for(var b=k.el.childNodes,c=b.length,d=Math.min(p*q,c);d>=p*(q-1);--d)async(function(a){a.style.display="none"},[b[d]]);--q;1==q&&e.prev.setAttribute("disabled",!0);e.next.removeAttribute("disabled");e.data.innerHTML=q+" / "+u;for(d=Math.min(p*q,c);d>=p*(q-1);--d)async(function(a){a.style.display=null},[b[d]])}},e.next.onclick=function(){if(!e.next.hasAttribute("disabled")){for(var b=k.el.childNodes,c=b.length,d=p*(q-1);d<p*q&&d<c;++d)async(function(a){a.style.display=
"none"},[b[d]]);q+=1;q==u&&e.next.setAttribute("disabled",!0);e.prev.removeAttribute("disabled");e.data.innerHTML=q+" / "+u;for(d=p*(q-1);d<p*q&&d<c;++d)async(function(a){a.style.display=null},[b[d]])}});b&&(k.el.appendChild(b.el),b.preview=function(c){for(var n=0;n<c.length;++n){var d=new FormData;d.append("file",c[n]);window.ajax({type:"POST",data:d,files:!0,url:"/async/gallery/save"}).done(function(a){a.status&&(a=new y(a.id),l[a.id()]=a,a.swap=D,a.click=A,a.remove=C,b.el.nextSibling?k.el.insertBefore(a.el,
b.el.nextSibling):k.el.appendChild(a.el),A(a))})}});window.ajax({type:"POST",url:"/async/gallery/load"}).done(function(b){if(b.status){for(var n=document.createDocumentFragment(),d=null,a=0;a<b.result.length;++a){var e=new y(b.result[a].id);l[e.id()]=e;e.swap=D;e.click=A;e.remove=C;n.appendChild(e.el);d||(d=e)}k.el.appendChild(n);d&&A(d);window.admin||c()}})}window.addEventListener("load",function(){window.gallery=new C})})();(function(){function y(){function y(){this.removeAttribute("error");this.onfocus=null}var q=document.getElementById("contact_name"),u=document.getElementById("contact_email"),p=document.getElementById("contact_message");document.getElementById("contact_send").onclick=function(){window.ajax({type:"POST",data:{name:q.value,email:u.value,message:p.value},url:"/async/contact"}).done(function(c){if(c.status)q.value="",u.value="",p.value="";else for(var b in c.error)"name"==b?(q.setAttribute("error",!0),
q.onfocus=y):"email"==b?(u.setAttribute("error",!0),u.onfocus=y):"message"==b&&(p.setAttribute("error",!0),p.onfocus=y)})}}window.addEventListener("load",function(){window.cantact=new y})})();(function(){function y(b){b=b.getElementsByTagName("*");for(var d={},a=0;a<b.length;++a)if(b[a].hasAttribute("user-input")){var c=b[a].getAttribute("user-input");b[a].controller?d[c]=b[a].controller.value():b[a].value?d[c]=b[a].value:b[a].firstChild&&3==b[a].firstChild.nodeType&&b[a].firstChild.nodeValue&&(d[c]=b[a].firstChild.nodeValue)}return d}function C(b,d){d=d||"";if("INPUT"==b.nodeName)b.value=d;else if("DIV"==b.nodeName)if(b.controller)b.controller.setValue(d);else if(b.firstChild&&3==b.firstChild.nodeType&&
b.firstChild.nodeValue)b.firstChild.nodeValue=d;else{var a=document.createTextNode(d);b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}}function q(b,d){for(var a=b.getElementsByTagName("*"),c=[],e=[],g=0;g<a.length;++g)if(a[g].hasAttribute("user-input")){a[g].parentNode.removeAttribute("unset");var f=a[g].getAttribute("user-input");if(d[f]){var l=c.indexOf(a[g].parentNode);0<=l&&c.splice(l,1);e[e.length]=a[g].parentNode;C(a[g],d[f])}else l=e.indexOf(a[g].parentNode),-1==l&&(c[c.length]=
a[g].parentNode),C(a[g],"")}for(g=0;g<c.length;++g)c[g].setAttribute("unset",!0)}function u(b,d){if(d)for(var a=b.getElementsByTagName("*"),c=0;c<a.length;++c)if(a[c].hasAttribute("user-input")){var e=a[c].getAttribute("user-input");d[e]&&function(a){a.setAttribute("error",!0);a.onfocus=function(){a.removeAttribute("error")}}(a[c])}}function p(b){b.controller=this;this.setValue=function(d){b.setAttribute("option",d)}}function c(b){b.controller=this;this.setValue=function(d){var a=b.getElementsByClassName("preview-data");
a&&0<a.length&&C(a[0],d.number);d?b.removeAttribute("unset"):b.setAttribute("unset",!0)}}function b(b){function d(){var b=c.run(a.value);b?a.setAttribute("card",b):a.removeAttribute("card")}var a=b,c=new function(){var a={visa:{values:[{type:0,value:4}]},mastercard:{values:[{type:1,range:{min:51,max:55}}]},discover:{values:[{type:0,value:65},{type:0,value:6011},{type:1,range:{min:644,max:649}},{type:1,range:{min:622126,max:622925}}]},amex:{values:[{type:0,value:34},{type:0,value:37}]}};this.run=function(b){for(var d in a)if(a.hasOwnProperty(d))for(var c=
a[d],e=0;e<c.values.length;++e)if(0==c.values[e].type){var n=String(c.values[e].value);if(b.substr(0,n.length)===n)return d}else if(1==c.values[e].type)for(var f=c.values[e].range.min;f<=c.values[e].range.max;++f)if(n=String(f),b.substr(0,n.length)===n)return d;return null}};a.onkeydown=function(b){var d=0<=[8,9,37,38,39,40,46].indexOf(b.keyCode),c=!isNaN(parseInt(b.key))&&16>a.value.length;d||c||b.preventDefault()};a.onkeyup=d;a.onfocus=d;a.onblue=d;a.onchange=d;a.controller=this;this.value=function(){return{type:c.run(a.value),
number:a.value}}}function k(e){var d={country:function(a){(new DropDown({},a)).addItem("Polska",!0)},county:function(a){var b="dolno\u015bl\u0105skie kujawsko-pomorskie lubelskie lubuskie \u0142\u00f3dzkie ma\u0142opolskie mazowieckie opolskie podkarpackie podlaskie pomorskie \u015bl\u0105skie \u015bwi\u0119tokrzyskie warmi\u0144sko-mazurskie wielkopolskie zachodniopomorskie".split(" ");a=new DropDown({},a);for(var d=0;d<b.length;++d)a.addItem(b[d],!0)},expiry_month:function(a){a=new DropDown({},
a);for(var b=1;12>=b;++b)a.addItem(b,!0)},expiry_year:function(a){var b=(new Date).getFullYear();a=new DropDown({},a);for(var d=b;d<=b+10;++d)a.addItem(d,!0)},card_number:function(a){new b(a)},paymentType:function(a){new p(a)},cardNumber:function(a){new c(a)}};e=e.getElementsByTagName("*");for(var a=0;a<e.length;++a)if(e[a].hasAttribute("control")){var f=e[a].getAttribute("control");d[f]&&async(d[f],[e[a]])}}function f(b){var d=this,a=document.createElement("tr"),c=document.createElement("td"),e=
new MSDivObject,g=document.createElement("td"),f=document.createElement("td"),l=document.createElement("td"),h=document.createElement("td"),k=document.createElement("td"),t=document.createElement("div");c.className="text";e.el.className="order-thumb";g.className="text";f.className="text";l.className="text";h.className="text";k.className="text";t.className="remove-btn";l.setAttribute("currency","z\u0142");h.setAttribute("currency","z\u0142");c.appendChild(e.el);a.appendChild(c);a.appendChild(g);a.appendChild(f);
a.appendChild(l);a.appendChild(h);k.appendChild(t);a.appendChild(k);e.loadImage({url:"/async/thumb/load/"+b.preview,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75});g.innerHTML=b.title;f.innerHTML=b.quantity;l.innerHTML=b.price;b.discount?(c=document.createElement("span"),e=document.createTextNode(Number(b.shipping)*(1-(b.discount||0))),c.className="discount-pin",h.appendChild(c),h.appendChild(e)):h.innerHTML=Number(b.shipping);d.el=a;d.id=function(){return b.id};d.item=
function(){return b.item};d.price=function(){return Number(b.price)};d.shipping=function(){return Number(b.shipping)};d.setDiscount=function(a){b.discount=a};t.onclick=function(){d.remove(d)};d.info=function(){return{title:b.title,quantity:Number(b.quantity),price:Number(b.price),shipping:Number(b.shipping)*(1-(b.discount||0))}};d.update=function(a){for(var d in a||{})a.hasOwnProperty(d)&&(b[d]=a[d]);f.innerHTML=b.quantity;l.innerHTML=b.price;b.discount?(a=document.createElement("span"),d=document.createTextNode(Number(b.shipping)*
(1-(b.discount||0))),a.className="discount-pin",h.innerHTML="",h.appendChild(a),h.appendChild(d)):h.innerHTML=Number(b.shipping)}}function e(){function b(a){var c=document.getElementById(a);c?c.setAttribute("ordered",!0):async(b,[a])}function d(a){var b=document.getElementById(a);b?b.removeAttribute("ordered"):async(d,[a])}function a(a){window.ajax({type:"POST",data:{id:a.id()},url:"/async/orders/remove"}).done(function(a){if(a.status&&a.removed){t=a.total;l.innerHTML=t;var b=p[a.removed];delete p[a.removed];
d(b.item());g.removeChild(b.el);for(var b=document.createDocumentFragment(),e=0;e<a.items.length;++e){var m=a.items[e];p[m.id]&&(p[m.id].update(m),g.removeChild(p[m.id].el));b.appendChild(p[m.id].el)}g.appendChild(b);0==a.items.length?c.hide():c.activate(c)}})}var c=this,e=document.getElementById("order_list_view"),g=document.getElementById("order_list_table"),l=document.getElementById("order_list_totals"),k=document.getElementById("order_list_advance"),h=document.getElementById("terms"),q=document.getElementById("terms_box"),
t=0,p={};l.setAttribute("currency","z\u0142");q.onclick=function(){h.hasAttribute("checked")?h.removeAttribute("checked"):(h.setAttribute("checked",!0),h.removeAttribute("error"))};window.events.listen("update-ordered",function(){for(var a in p)if(p.hasOwnProperty(a)){var b=document.getElementById(p[a].item());b&&b.setAttribute("ordered",!0)}});c.addOrder=function(d){window.ajax({type:"POST",data:d,url:"/async/orders/add"}).done(function(e){if(e.status){t=e.total;l.innerHTML=t;for(var h=document.createDocumentFragment(),
k=0;k<e.items.length;++k){var q=e.items[k];if(p[q.id])p[q.id].update(q),g.removeChild(p[q.id].el);else if(q.id==e.added){q.title=d.title;q.availability=d.availability;q.preview=d.preview;var B=new f(q);p[q.id]=B;B.remove=a;b(B.item())}p[q.id]&&h.appendChild(p[q.id].el)}g.appendChild(h);1==e.items.length&&c.show(!0);c.reset();c.activate(c)}})};c.clear=function(){for(var a in p)if(p.hasOwnProperty(a)){var b=p[a];delete p[a];d(b.item());g.removeChild(b.el)}};c.init=function(){window.ajax({type:"POST",
data:null,url:"/async/orders/session"}).done(function(d){if(d.status&&d.items){t=d.total;l.innerHTML=t;for(var e=document.createDocumentFragment(),h=0;h<d.items.length;++h){var k=new f(d.items[h]);p[k.id()]=k;k.remove=a;b(k.item());e.appendChild(p[k.id()].el)}g.appendChild(e);0<d.items.length&&(c.show(),c.activate(c))}})};k.onclick=function(){if(h.hasAttribute("checked")){var a=[],b;for(b in p)p.hasOwnProperty(b)&&(a[a.length]=p[b].info());c.advance(c,{items:a,total:t})}else h.setAttribute("error",
!0)};c.el=e}function l(){var b=this,c=document.getElementById("shipping_view"),a=document.getElementById("shipping_advance"),e=document.getElementById("shipping_back"),f=null;a.onclick=function(){var a=y(c);window.ajax({type:"POST",data:a,url:"/async/orders/shipping"}).done(function(a){a.status?(f.shipping=a.data,b.advance(b,f)):u(c,a.error)})};b.clear=function(){f=null};b.apply=function(a){f=a};e.onclick=function(){b.back(b)};b.el=c}function A(){function b(a){a.stopPropagation();for(a=0;a<l.length;++a)l[a].removeAttribute("checked");
this.setAttribute("checked",!0);t=this.getAttribute("option");c.expand(k,this.hasAttribute("expand"))}var c=this,a=document.getElementById("payment_view"),e=document.getElementById("payment_advance"),f=document.getElementById("payment_back"),g=document.getElementById("payment_type"),l=[],k=document.getElementById("payment_details"),h=document.getElementById("billing_details"),p=null,t=0;window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status){var c=0,d;for(d in a.options)if(a.options.hasOwnProperty(d)){var e=
document.createElement("div"),f=document.createElement("div"),h=document.createElement("div");e.className="payment-option "+d;f.className="checkbox";h.className="banner "+d;e.appendChild(f);e.appendChild(h);0==c&&e.setAttribute("checked",!0);e.setAttribute("option",c++);var f=a.options[d],k;for(k in f)f.hasOwnProperty(k)&&e.setAttribute(k,f[k]);g.appendChild(e);l[l.length]=e;e.onclick=b}}});c.apply=function(a){p=a;q(k,{forename:p.shipping.forename,surname:p.shipping.surname});q(h,p.shipping)};c.clear=
function(){p=null};e.onclick=function(){var b=y(h);if(0==t)window.ajax({type:"POST",data:b,url:"/async/orders/pay_paypal"}).done(function(a){a.status?(b=a.data,b.paymentType="Paypal",p.billing=b,c.advance(c,p)):u(h,a.error)});else if(1==t){var e=y(k),f;for(f in e)e.hasOwnProperty(f)&&(b[f]=e[f]);window.ajax({type:"POST",data:b,url:"/async/orders/pay_card"}).done(function(e){e.status?(b=e.data,b.paymentType=b.card.type,p.billing=b,c.advance(c,p)):u(a,e.error)})}};f.onclick=function(){c.back(c)};c.el=
a}function F(){function b(a){var c=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("th"),m=document.createElement("th"),f=document.createElement("th"),g=document.createElement("th");language.bind("title",e);language.bind("quantity",m);language.bind("price",f);language.bind("shipping",g);e.className="preview-label text";m.className="preview-label text";f.className="preview-label text";g.className="preview-label text";d.appendChild(e);d.appendChild(m);d.appendChild(f);
d.appendChild(g);c.appendChild(d);for(d=0;d<a.length;++d){var e=document.createElement("tr"),m=document.createElement("td"),f=document.createElement("td"),g=document.createElement("td"),n=document.createElement("td");m.innerHTML=a[d].title;f.innerHTML=a[d].quantity;g.innerHTML=a[d].price;n.innerHTML=a[d].shipping;g.setAttribute("currency","z\u0142");n.setAttribute("currency","z\u0142");m.className="text preview-data";f.className="text preview-data";g.className="text preview-data";n.className="text preview-data";
e.appendChild(m);e.appendChild(f);e.appendChild(g);e.appendChild(n);c.appendChild(e)}return c}var c=this,a=document.getElementById("done_view"),e=document.getElementById("done_advance"),f=document.getElementById("done_back"),g=document.getElementById("data_preview"),k=document.getElementById("order_summary"),l=g.getElementsByClassName("preview-block");e.onclick=function(){window.location="/async/orders/process"};f.onclick=function(){c.back(c)};c.apply=function(a){for(var c=0;c<l.length;++c)if(l[c].hasAttribute("block-type")){var d=
l[c].getAttribute("block-type");a[d]&&q(l[c],a[d])}k.innerHTML=null;k.appendChild(b(a.items));c=document.createElement("div");d=document.createElement("div");c.className="seperator text";language.bind("total",c);d.className="total-price-summary text-invert-light";d.innerHTML=a.total;d.setAttribute("currency","z\u0142");k.appendChild(c);k.appendChild(d)};c.clear=function(){k.innerHTML=null};c.el=a}function D(b,c){function a(a,c){q!=a?(a.el.style.top=getHeight(b)+200+"px",a.el.style.display="block",
a.apply&&c&&a.apply(c),async(function(){var c=[a.el,b];a.el.set={top:150};b.set={h:200+getHeight(a.el)};q&&(q.el.set={o:0},c[c.length]=q.el,window.scrollBodyTo(b));morpheus(c,{top:function(a){return a.set.top},height:function(a){return a.set.h},opacity:function(a){return a.set.o},duration:250,complete:function(){q&&q.el.removeAttribute("style");q=a}})})):morpheus(b,{height:200+getHeight(a.el)+"px",duration:250})}function e(){for(var a=0;a<h.length;++a)p[a].removeAttribute("status");0<h.length&&p[0].setAttribute("status",
0)}function f(b,c){if(b==q){var d=h.indexOf(b);d+1==h.length?l.done():0<=d&&d+1<h.length&&(p[d].setAttribute("status",1),d+=1,a(h[d],c),p[d].setAttribute("status",0))}}function g(b){b==q&&(b=h.indexOf(b),0>b-1?l.done():0<=b&&0<=b-1&&(p[b].removeAttribute("status"),--b,a(h[b]),p[b].setAttribute("status",0)))}function k(a,c){var d=0,e=0,f=getHeight(b);c?(a.style.display="block",d=getHeight(a),e=a.offsetHeight,a.style.height="0px"):(d=getHeight(a),e=a.offsetHeight);d-=(d-e)/2;a.style.opacity=c?0:1;a.set=
{h:c?e:0,m:c?null:0,o:c?1:0};b.set={h:c?d+f:f-d};morpheus([b,a],{height:function(a){return a.set.h},"margin-bottom":function(a){return a.set.m},"margin-top":function(a){return a.set.m},opacity:function(a){return a.set.o},duration:250,complete:function(){c?(a.style.height="",a.style.opacity=""):a.removeAttribute("style")}})}for(var l=this,h=c,p=document.getElementById("progress_view").getElementsByClassName("progress-step"),q=null,u=0;u<h.length;++u)h[u].reset=e,h[u].activate=a,h[u].advance=f,h[u].back=
g,h[u].expand=k;l.init=function(){for(var a=0;a<h.length;++a)h[a].init&&h[a].init()};l.clear=function(){e();for(var a=b.getElementsByTagName("*"),c=0;c<a.length;++c)a[c].hasAttribute("user-input")&&(a[c].parentNode.removeAttribute("unset"),C(a[c],""));for(a=0;a<h.length;++a)h[a].clear()}}function H(){function b(){c.set={w:0};a.set={h:0};morpheus([c,a],{width:function(a){return a.set.w},height:function(a){return a.set.h},duration:350,complete:function(){c.style="";a.style="";a.removeChild(f)}});window.scrollBodyTo(window.shop.el)}
var c=document.getElementById("order"),a=document.getElementById("order_panel"),f=document.getElementById("order_panel_inner"),p=new e,g=new l,q=new A,u=new F,h=new D(a,[p,g,q,u]);k(a);a.removeChild(f);p.show=function(b){order_panel.appendChild(f);c.style.display="inline-block";a.style.display="block";b&&window.scrollBodyTo(a)};p.hide=b;window.events.listen("order",function(a){p.addOrder(a)});h.done=function(){h.clear();b()};h.init();this.el=a}window.addEventListener("load",function(){window.orders=
new H})})();(function(){function y(){var y=document.getElementById("username_input"),q=document.getElementById("password_input"),u=document.getElementById("login"),p=function(){var b=4<y.value.length&&6<q.value.length;u.style.display=b?"block":"none";return b},c=function(){window.ajax({type:"POST",data:{username:y.value,password:q.value},url:"/async/user/login"}).done(function(b){b.status?window.location.href="/":(q.value="",p(),q.focus())})};y.focus();y.onkeyup=function(){p()};q.onkeyup=function(b){p()&&13==
b.keyCode&&c()}}window.addEventListener("load",function(){"/admin"==window.location.pathname&&(window.login=new y)})})();
