(function(C,z){"function"==typeof define?define(z):"undefined"!=typeof module?module.exports=z():this[C]=z()})("morpheus",function(){function C(e){var n;n=v.length;for(b&&(e=f());n--;)v[n](e);v.length&&x(C)}function z(e,b){var n={},v;if(v=e.match(h))n.rotate=d(v[1],b?b.rotate:null);if(v=e.match(I))n.scale=d(v[1],b?b.scale:null);if(v=e.match(m))n.skewx=d(v[1],b?b.skewx:null),n.skewy=d(v[3],b?b.skewy:null);if(v=e.match(t))n.translatex=d(v[1],b?b.translatex:null),n.translatey=d(v[3],b?b.translatey:null);
return n}function l(b){var e="";"rotate"in b&&(e+="rotate("+b.rotate+"deg) ");"scale"in b&&(e+="scale("+b.scale+") ");"translatex"in b&&(e+="translate("+b.translatex+"px,"+b.translatey+"px) ");"skewx"in b&&(e+="skew("+b.skewx+"deg,"+b.skewy+"deg)");return e}function u(b){var e=b.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(e?"#"+(16777216|e[1]<<16|e[2]<<8|e[3]).toString(16).slice(1):b).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function p(b){return b.replace(/-(.)/g,function(b,e){return e.toUpperCase()})}
function y(b){return"function"==typeof b}function a(b){return Math.sin(b*Math.PI/2)}function c(b,e,n,h,B,F){function A(b){b-=D;if(b>m||d){F=isFinite(F)?F:1;d?I&&e(F):e(F);var x;a:if(b=v,x=void 0,Array.prototype.indexOf)x=b.indexOf(A);else{for(x=0;x<b.length;++x)if(b[x]===A)break a;x=void 0}0<=x&&(b=v.slice(x+1),v.length=x,v=v.concat(b));return n&&n.apply(c)}isFinite(F)?e(w*h(b/m)+B):e(h(b/m))}h=y(h)?h:g.easings[h]||a;var m=b||1E3,c=this,w=F-B,D=f(),d=0,I=0;1===v.push(A)&&x(C);return{stop:function(b){d=
1;(I=b)||(n=null)}}}function q(b,e){var n=b.length,v=[],h,x;for(h=0;h<n;++h)v[h]=[b[h][0],b[h][1]];for(x=1;x<n;++x)for(h=0;h<n-x;++h)v[h][0]=(1-e)*v[h][0]+e*v[parseInt(h+1,10)][0],v[h][1]=(1-e)*v[h][1]+e*v[parseInt(h+1,10)][1];return[v[0][0],v[0][1]]}function d(b,e,n,v,h){return(n=B.exec(b))?(h=parseFloat(n[2]))&&e+("+"==n[1]?1:-1)*h:parseFloat(b)}function g(b,e){var h=b?h=isFinite(b.length)?b:[b]:[],v,x=e.complete,B=e.duration,a=e.easing,m=e.bezier,f=[],I=[],g=[],t=[],k,G;m&&(k=e.left,G=e.top,delete e.right,
delete e.bottom,delete e.left,delete e.top);for(v=h.length;v--;){f[v]={};I[v]={};g[v]={};if(m){var H=w(h[v],"left"),E=w(h[v],"top"),C=[d(y(k)?k(h[v]):k||0,parseFloat(H)),d(y(G)?G(h[v]):G||0,parseFloat(E))];t[v]=y(m)?m(h[v],C):m;t[v].push(C);t[v].unshift([parseInt(H,10),parseInt(E,10)])}for(var J in e){switch(J){case "complete":case "duration":case "easing":case "bezier":continue}var H=w(h[v],J),S,E=y(e[J])?e[J](h[v]):e[J];"string"==typeof E&&F.test(E)&&!F.test(H)?delete e[J]:(f[v][J]="transform"==
J?z(H):"string"==typeof E&&F.test(E)?u(H).slice(1):parseFloat(H),I[v][J]="transform"==J?z(E,f[v][J]):"string"==typeof E&&"#"==E.charAt(0)?u(E).slice(1):d(E,parseFloat(H)),"string"==typeof E&&(S=E.match(D))&&(g[v][J]=S[1]))}}return c.apply(h,[B,function(b,x,B){for(v=h.length;v--;){m&&(B=q(t[v],b),h[v].style.left=B[0]+"px",h[v].style.top=B[1]+"px");for(var F in e){x=b;var a=g;B=f;var c=I,w=F,d=v,D=void 0;if("transform"==w){D={};a=void 0;for(a in B[d][w])D[a]=a in c[d][w]?Math.round(1E3*((c[d][w][a]-
B[d][w][a])*x+B[d][w][a]))/1E3:B[d][w][a];x=D}else if("string"==typeof B[d][w]){B=B[d][w];c=c[d][w];w=[];a=D=D=d=void 0;for(d=0;6>d;d++)D=Math.min(15,parseInt(B.charAt(d),16)),a=Math.min(15,parseInt(c.charAt(d),16)),D=Math.floor((a-D)*x+D),D=15<D?15:0>D?0:D,w[d]=D.toString(16);x="#"+w.join("")}else D=Math.round(1E3*((c[d][w]-B[d][w])*x+B[d][w]))/1E3,w in r||(D+=a[d][w]||"px"),x=D;"transform"==F?h[v].style[A]=l(x):"opacity"!=F||n?h[v].style[p(F)]=x:h[v].style.filter="alpha(opacity="+100*x+")"}}},x,
a])}var k=document,E=window,H=E.performance,G=H&&(H.now||H.webkitNow||H.msNow||H.mozNow),f=G?function(){return G.call(H)}:function(){return+new Date},b=!1,e=k.documentElement,F=/^rgb\(|#/,B=/^([+\-])=([\d\.]+)/,D=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,h=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,I=/scale\(((?:[+\-]=)?([\d\.]+))\)/,m=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,t=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,r={lineHeight:1,
zoom:1,zIndex:1,opacity:1,transform:1},A=function(){var b=k.createElement("a").style,e=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],n;for(n=0;n<e.length;n++)if(e[n]in b)return e[n]}(),n="undefined"!==typeof k.createElement("a").style.opacity,w=k.defaultView&&k.defaultView.getComputedStyle?function(b,e){e="transform"==e?A:e;e=p(e);var n=null,v=k.defaultView.getComputedStyle(b,"");v&&(n=v[e]);return b.style[e]||n}:e.currentStyle?function(b,e){e=p(e);if("opacity"==e){var n=
100;try{n=b.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(v){try{n=b.filters("alpha").opacity}catch(h){}}return n/100}n=b.currentStyle?b.currentStyle[e]:null;return b.style[e]||n}:function(b,e){return b.style[p(e)]},x=function(){return E.requestAnimationFrame||E.webkitRequestAnimationFrame||E.mozRequestAnimationFrame||E.msRequestAnimationFrame||E.oRequestAnimationFrame||function(b){E.setTimeout(function(){b(+new Date)},17)}}();x(function(e){b=1E12<e!=1E12<f()});var v=[];g.tween=c;g.getStyle=
w;g.bezier=q;g.transform=A;g.parseTransform=z;g.formatTransform=l;g.animationFrame=x;g.easings={};return g});(function(C,z,l){function u(c,k,f,b){f=f||"width";var e;e=(k.match(d)||[])[2];var F="px"===e?1:g[e+"toPx"],B=/r?em/i;if(F||B.test(e)&&!b)c=F?c:"rem"===e?a:"fontSize"===f?c.parentNode||c:c,F=F||parseFloat(p(c,"fontSize")),c=parseFloat(k)*F;else{b=c.style;e=b[f];try{b[f]=k}catch(D){return 0}c=b[f]?parseFloat(p(c,f)):0;b[f]=e!==l?e:null}return c}function p(a,g){var f,b,e=/^top|bottom/,F=["paddingTop","paddingBottom","borderTop","borderBottom"],B=4;f=c?c(a)[g]:(b=a.style["pixel"+g.charAt(0).toUpperCase()+
g.slice(1)])?b+"px":"fontSize"===g?u(a,"1em","left",1)+"px":a.currentStyle[g];b=(f.match(d)||[])[2];if("%"===b&&q)if(e.test(g)){for(e=(b=a.parentNode||a).offsetHeight;B--;)e-=parseFloat(p(b,F[B]));f=parseFloat(f)/100*e+"px"}else f=u(a,f);else("auto"===f||b&&"px"!==b)&&c?f=0:b&&"px"!==b&&!c&&(f=u(a,f)+"px");return f}var y=z.createElement("test"),a=z.documentElement,c=(z=z.defaultView)&&z.getComputedStyle,q,d=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,g={};z=[1/25.4,1/2.54,1/72,1/6];var k="mm cm pt pc in mozmm".split(" "),
E=6;a.appendChild(y);c&&(y.style.marginTop="1%",q="1%"===c(y).marginTop);for(;E--;)g[k[E]+"toPx"]=z[E]?z[E]*g.inToPx:u(y,"1"+k[E]);a.removeChild(y);y=l;C.Length={toPx:u}})(this,this.document);(function(C){function z(a){var c=null,q=new XMLHttpRequest;q.open(a.type,a.url,!0);a.files||q.setRequestHeader("Content-type","application/json");a.cache&&q.setRequestHeader("Cache-Control","max-age=86400");q.onloadend=function(){200==q.status?c&&c(JSON.parse(q.responseText)):c&&c(null);q=null};a.files?q.send(a.data):q.send(a.data?JSON.stringify(a.data):null);this.done=function(a){c=a}}function l(a){var c=a.currentStyle||window.getComputedStyle(a);return Length.toPx(a,c.marginTop)}function u(){var a=
[],c=function(a,c){return a-c},q=function(d,g,k){var E=a.length;g=null==g?0:g;k=null==k?E-1:k;var l=g+Math.floor((k-g)/2);if(0==E)return E;if(0<c(d,a[k]))return k+1;if(0>c(d,a[g]))return g;E=c(d,a[l]);if(0==E)return l;if(0>E)return q(d,g,l-1);if(0<E)return q(d,l+1,k)};this.setCompare=function(a){a&&(c=a)};this.insert=function(c){a.splice(q(c),0,c)};this.length=function(){return a.length};this.at=function(c){return a[c]};this.grab=function(c){return a.splice(0,c)};this.data=function(){return a}}function p(a){var c=
function(){var a=window.performance||{};a.now=function(){return a.now||a.webkitNow||a.msNow||a.oNow||a.mozNow||function(){return(new Date).getTime()}}();return a.now()},q=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.msRequestAnimationFrame||a.oRequestAnimationFrame||function(d){a.setTimeout(function(){d(c())},1E3/60)}}(),d=function(){return new function(){var a=new u,c=function(d){0<a.length()&&q(c);var l,G;l=0;for(G=a.length();l<G&&!(a.at(l).timestamp>
d);++l);d=a.grab(l);l=0;for(G=d.length;l<G;++l)d[l].func.apply(null,d[l].args)};a.setCompare(function(a,c){return a.timestamp-c.timestamp});this.addTask=function(d){a.insert(d);0<a.length()&&q(c)}}}();a.async=function(a,k,q){"Function"!=classOf(a)||k&&"Array"!=classOf(k)||d.addTask({timestamp:q?c()+q:0,func:a,args:k||[]})}}function y(a){var c={};a.events={listen:function(a,d){var g=c[a]||[];g[g.length]=d;c[a]=g},remove:function(a,d){var g=c[a]||[],k=g.indexOf(d);0<=k&&g.splice(k,1)},emit:function(q,
d){var g=c[q];if(g)for(var k=0;k<g.length;++k)a.async(g[k],d)}}}C.hashCode=function(a){var c=0,q,d,g;if(0===a.length)return c;q=0;for(g=a.length;q<g;q++)d=a.charCodeAt(q),c=(c<<5)-c+d,c|=0;return c};C.MSInputObject=function(a){var c=this;c.__get_value=null;c.__set_value=null;a=a||{};if(window.admin||a.user){if(a.multiline){c.el=document.createElement("textarea");var q=c.el.offsetHeight-c.el.clientHeight,d=0,g=c.el.clientHeight,k=function(){async(function(){var a=c.el.value.length;a<d&&(c.el.style.height=
"auto");var k=c.el.scrollHeight+q;0<k&&(c.el.style.height=k+"px");d=a;k!=g&&(g=k)})};c.__get_value=function(){return c.el.value};c.__set_value=function(a){c.el.value=a;k()};c.el.addEventListener("keydown",k);c.el.addEventListener("keyup",k)}else c.el=document.createElement("input"),c.el.setAttribute("type","text"),c.__get_value=function(){return c.el.value},c.__set_value=function(a){c.el.value=a};c.el.onchange=function(){if(c.onchange)c.onchange(c)};a.placeholder&&this.el.setAttribute("placeholder",
a.placeholder)}else c.el=document.createElement("div"),c.__get_value=function(){return c.el.innerHTML},c.__set_value=function(a){c.el.innerHTML=a};a.className&&(c.el.className=a.className);a.id&&(c.el.id=a.id)};MSInputObject.prototype.value=function(){return this.__get_value()||""};MSInputObject.prototype.setValue=function(a){this.__set_value(a||"")};C.MSDivObject=function(a){this.el=a||document.createElement("div")};MSDivObject.prototype.addClass=function(a){-1==this.el.className.indexOf(a)&&(this.el.className=
this.el.className.concat(" ",a))};MSDivObject.prototype.removeClass=function(a){-1<this.el.className.indexOf(a)&&(this.el.className=this.el.className.replace(a,"").replace("  "," ").trim())};MSDivObject.prototype.setPlaceholder=function(a){if(window.admin){var c=this,q=document.createElement("span"),d=!0;c.has_placeholder=!0;q.className="placeholder";q.innerHTML=a;0==c.el.innerHTML.length&&(c.el.appendChild(q),c.addClass("placeholder-visible"));c.el.addEventListener("text-changed",function(){0==c.el.innerHTML.length?
(d||(c.addClass("placeholder-visible"),d=!0),c.el.appendChild(q)):d&&(d=!1,c.removeClass("placeholder-visible"))});c.el.addEventListener("focus",function(){d&&(c.el.removeChild(q),c.removeClass("placeholder-visible"),d=!1)});c.el.addEventListener("blur",function(){0==c.innerHTML.length&&(c.el.appendChild(q),c.addClass("placeholder-visible"),d=!0)});c.has_text=function(){return!d}}};MSDivObject.prototype.refresh=function(){(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed"))};
MSDivObject.prototype.setText=function(a){a&&(this.el.innerHTML=a,(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed")))};MSDivObject.prototype.getText=function(){return this.has_placeholder?this.has_text()?this.el.innerHTML:"":this.el.innerHTML};MSDivObject.prototype.textEdit=function(a){if(window.admin){var c=this;a=a||{};a.textItem=a.textItem||c;c.el.addEventListener("click",function(){if(!c.in_edit){c.in_edit=!0;var q=a.textItem.getText(),d=a.multiline?document.createElement("textarea"):
document.createElement("input");a.multiline&&a.autosize&&d.addEventListener("keydown",function(){async(function(){d&&(d.style.height=d.scrollHeight+"px")})});a.multiline||(d.type="text");d.className="inplace-text-edit";d.value=q;d.style.width=c.el.offsetWidth-(a.offsetWidth||0)+"px";d.style.height=c.el.offsetHeight-(a.offsetHeight||0)+"px";c.el.innerHTML="";c.el.appendChild(d);d.focus();d.onblur=function(){a.textItem.setText(d.value);d=null;c.in_edit=!1;a.textItem!=c&&(c.el.innerHTML="",c.el.appendChild(a.textItem.el),
c.refresh())}}})}};MSDivObject.prototype.loadImage=function(a){var c=this,q=a.url;async(function(){c.el.style.backgroundImage="url("+q+")"})};C.FileUpload=function(a){var c=this,q=document.createElement("div"),d=document.createElement("input");a=a||{multiple:!1};a.id&&(q.id=a.id);a.className&&(q.className=a.className);d.type="file";d.name="file";d.accept="image/*";d.multiple=a.multiple;q.appendChild(d);d.onchange=function(a){c.preview&&c.preview(a.target.files)};c.el=q};C.DropDown=function(a,c){function q(b,
e){if(b.manager)b.manager.setValue(e);else if(b.firstChild&&3==b.firstChild.nodeType)b.firstChild.nodeValue=e;else{var a=document.createTextNode(e);b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}}function d(){var b=null,e=[];this.bind=function(a){e[e.length]=a;b&&q(a,b)};this.unbind=function(b){b=e.indexOf(b);0<=b&&e.splice(b,1)};this.setValue=function(a){if(b=a)for(a=0;a<e.length;++a)q(e[a],b)}}var g=this,k=c||document.createElement("div"),l=!a.adminOnly||window.admin,p=l?document.createElement("img"):
null,G=l?document.createElement("lu"):null,f=!1,b=!1,e={},F=null,B=!1,D=function(b){var a=e[b];a&&(F&&F.unbind(k),k.setAttribute("current-data-id",b),F=a,F.bind(k),l&&f&&g.close(),g.changed&&async(g.changed,[b]))};k.controller=g;g.addItem=function(b,a){var c=new d,f=null;e[b]=c;a&&c.setValue(b);l&&(f=document.createElement("li"),f.className="dropdown-item text-invert",f.onclick=function(){B||D(b)},G.appendChild(f),c.bind(f));F||D(b);return{controller:c,item:f}};g.addVirtual=function(){var b=document.createElement("li");
b.className="dropdown-item virtual text-invert";G.appendChild(b);return b};g.removeVirtual=function(b){G.contains(b)&&G.removeChild(b)};k.className=a.className?0<k.className.length?k.className+(" dropdown-container no-select text "+a.className):"dropdown-container no-select text "+a.className:0<k.className.length?k.className+" dropdown-container text":"dropdown-container text";l&&(p.src=a.src||"../images/down.png",k.appendChild(p),G.className="dropdown-list no-select",k.appendChild(G),k.onclick=function(){B||
b||(g.beforeOpen&&g.beforeOpen(),f=!0,G.style.display="block")},k.onmouseleave=function(){B||g.close()});g.el=k;g.manual=function(){B=!0};g.auto=function(){B=!1};g.open=function(){B&&(f=!0,G.style.display="block")};g.close=function(){f&&(g.beforeClose&&g.beforeClose(),G.style.right="-200%",async(function(){G.removeAttribute("style")}))};g.setText=function(b){q(k,b)};g.text=function(){return k.firstChild&&3==k.firstChild.nodeType?k.firstChild.nodeValue:""};g.value=function(){return k.getAttribute("current-data-id")};
g.setValue=function(b){D(b)};g.lock=function(){b=!0;k.setAttribute("locked",!0)};g.unlock=function(){b=!1;k.removeAttribute("locked")}};C.classOf=function(a){return/\[object (\w+)\]/.exec(Object.prototype.toString.call(a))[1]};C.getHeight=function(a){var c;document.all?(c=parseInt(a.currentStyle.height),a=parseInt(a.currentStyle.marginTop,10)+parseInt(a.currentStyle.marginBottom,10)):(c=parseInt(document.defaultView.getComputedStyle(a,"").getPropertyValue("height")),a=parseInt(document.defaultView.getComputedStyle(a,
"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(a,"").getPropertyValue("margin-bottom")));return c+a};C.browser={opera:!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),firefox:"undefined"!==typeof InstallTrigger,safari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),ie:!!document.documentMode};C.browser.chrome=!!window.chrome&&!window.browser.opera;C.ajax=function(a){return new z(a)};C.scrollBodyTo=function(a){var c=document.getElementById("content-wrapper"),
q=parseInt(a.offsetTop-l(a)),d=parseInt(c.scrollTop);for(a=a.parentNode;a&&a!=c;)q+=parseInt(a.offsetTop-l(a)),a=a.parentNode;if(d!=q){var g=q-d;morpheus.tween(500,function(a){a=d+g*a;0<=a&&a<=c.scrollHeight&&(c.scrollTop=a)})}};C.addEventListener("load",function(){new p(C);new y(C)})})(this);(function(){function C(){function l(a,c){if(a.controller)a.controller.setValue(c);else if(a.firstChild&&3==a.firstChild.nodeType&&a.firstChild.nodeValue)a.firstChild.nodeValue=c;else{var k=document.createTextNode(c);a.firstChild?a.insertBefore(k,a.firstChild):a.appendChild(k)}}var u="en",p={},y={};this.bind=function(a,c){l(c,z[u][a]);var k=p[a];k?k[k.length]=c:p[a]=[c]};this.bindInput=function(a,c){c.placeholder=z[u][a];var k=y[a];k?k[k.length]=c:y[a]=[c]};this.unbind=function(a){for(var c in p)if(p.hasOwnProperty(c)&&
0<p[c].length){var k=p[c].indexOf(a);-1!=k&&p[c].splice(k,1)}};this.unbindInput=function(a){for(var c in y)if(y.hasOwnProperty(c)&&0<y[c].length){var k=y[c].indexOf(a);-1!=k&&y[hey].splice(k,1)}};this.change=function(a){if(z[a]&&u!=a){u=a;for(var c in p)if(p.hasOwnProperty(c)&&0<p[c].length){a=p[c];for(var k=a.length,q=0;q<k;++q)l(a[q],z[u][c])}for(c in y)if(y.hasOwnProperty(c)&&0<y[c].length)for(a=y[c],k=a.length,q=0;q<k;++q)a[q].placeholder=z[u][c]}};for(var a=document.getElementsByTagName("*"),
c=0;c<a.length;++c)if(a[c].hasAttribute("lang")){var q=a[c].getAttribute("lang");this.bind(q,a[c])}else a[c].hasAttribute("placeholder-lang")&&(q=a[c].getAttribute("placeholder-lang"),this.bindInput(q,a[c]));this.change("pl")}var z={en:{about:"About",shop:"Shop",orders:"Orders",gallery:"Gallery",contact:"Contact",description:"Description",title:"Title",type:"Type",availability:"Availability",process:"Order Process",price:"Price",quantity:"Quantity",shipping:"Shipping",qandp:"Quantity & Price",payment_opt:"Payment methods",
lead:"Lead times",individual:"Individual",common:"Common",available:"Available",demand:"On-Demand",keep:"Keep in Shop",move:"Move to Gallery",remove:"Remove","delete":"Delete",save:"Save",close:"Close",order:"Order",aboutus:"About Us",office:"Our Office",contactus:"Contact Us",name:"Name",surname:"Surname",email:"E-mail",address:"Address",country:"Country",postcode:"Post Code",message:"Message"},pl:{about:"Pracownia",shop:"Sklep",orders:"Zam\u00f3wienie",order:"Zam\u00f3w",gallery:"Galeria",contact:"Kontakt",
description:"Opis",title:"Nazwa",type:"Rodzaj",availability:"Dost\u0119pno\u015b\u0107",process:"Akcja",price:"Cena",close:"Zamknij",save:"Zapisz","delete":"Kasuj",payment_opt:"Forma p\u0142atno\u015bci",lead:"Czas realizacji",quantity:"Ilo\u015b\u0107",shipping:"Transport",total:"Koszt ca\u0142kowity",checkout:"Dalej",about_us:"O nas",office:"Dane kontaktowe",about_us_value:"",send:"Wy\u015blij",personal_details:"Dane osobowe",forename:"Imi\u0119",surname:"Nazwisko",email:"Email",phone:"Numer telefonu",
shipping_address:"Adres wysy\u0142ki",company:"Nazwa firmy",address:"Ulica",city:"Miasto",county:"Wojew\u00f3dztwo",post_code:"Kod pocztowy",country:"Kraj",next:"Kontynuuj",back:"Wr\u00f3\u0107",payment_type:"Rodzaj p\u0142atno\u015bci",card_details:"Szczeg\u00f3\u0142y karty kredytowej",card_no:"Numer karty",cvv:"CVV",expiry:"Termin wa\u017cno\u015bci",billing_address:"Adres fakturowania",vat:"NIP",full_name:"Imi\u0119 i nazwisko",price_summary:"Podsumowanie",pay:"Zap\u0142a\u0107",message:"Wiadomo\u015b\u0107",
individual:"Pojedynczy",common:"Zbiorowy",advert:"Og\u0142oszenie",available:"Dost\u0119pny",demand:"Na zam\u00f3wienie",keep:"Sklep",move:"Galeria",remove:"Usu\u0144",today:"Dzisiaj",l_3_day:"3 dni",l_week:"Tydzie\u0144",l_month:"Miesi\u0105c",l_time:"Ca\u0142y czas",lead_avail:"- Realizacja zam\u00f3wienia: 1 dzie\u0144 roboczy\n- Czas dostawy: 2 - 3 dni robocze",lead_wait:"- Realizacja zam\u00f3wienia: 2 - 3 tygodnie\n- Czas dostawy: 2 - 3 dni robocze",components:"Nazwa",none:"Bez nazwy",labeled:"Oznaczona",
projects:"Projekt",category:"Kategoria",allitems:"Wszystkie",lowprice:"Cena malej\u0105co",hightprice:"Cena rosn\u0105co",iagree:"Akceptuj\u0119",terms:"Regulamin sklepu"}};window.addEventListener("load",function(){window.language=new C})})();(function(){function C(){var l=document.getElementById("main_menu"),u=document.getElementById("menu_list"),p=l.getElementsByClassName("menu_item"),y=!1,a={};l.onclick=function(){y?(y=!1,u.removeAttribute("style")):(u.style.display="block",y=!0)};for(l=0;l<p.length;++l){var c=p[l].getAttribute("scrollto");a[c]=document.getElementById(c);p[l].onclick=function(c){c.stopPropagation?c.stopPropagation():c.cancelBubble=!0;y=!1;u.removeAttribute("style");window.scrollBodyTo(a[c.target.getAttribute("scrollto")])}}}
function z(){if(window.mobile)new C;else{var l=document.getElementById("header"),u=document.getElementById("content-wrapper"),p=document.getElementById("title"),y=document.getElementById("main_menu"),a=y.getElementsByClassName("menu_item"),c=[l,u,p,y],q={},d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var k=a[g].getAttribute("scrollto");q[k]=document.getElementById(k);a[g].onclick=function(a){window.scrollBodyTo(q[a.target.getAttribute("scrollto")])}}l.unset={height:160};u.unset={top:160};p.unset={height:120,
width:720,left:"50%",marginLeft:-360};y.unset={top:120,left:"50%",marginLeft:-350};l.set={height:60};u.set={top:60};p.set={height:60,width:350,left:"0%",marginLeft:0};y.set={top:15,left:"100%",marginLeft:-700};for(g in c){var a=c[g].unset,E;for(E in a)c[g].style[E]=a[E]}window.events.listen("requestHeaderHeight",function(a){a(l.offsetHeight)});window.addEventListener("resize",function(){d&&(p.style.marginLeft=(l.offsetWidth<y.offsetWidth+350?-350:0)+"px")});u.addEventListener("scroll",function(){var a=
u.scrollTop;d&&0==a?(d=!1,morpheus(c,{height:function(a){return a.unset.height},width:function(a){return a.unset.width},top:function(a){return a.unset.top},left:function(a){return a.unset.left},marginLeft:function(a){return a.unset.marginLeft},duration:350,complete:function(){window.events.emit("headerChanged",[l.unset.height])}})):!d&&0<a&&(d=!0,p.set.marginLeft=l.offsetWidth<y.offsetWidth+350?-350:0,morpheus(c,{height:function(a){return a.set.height},width:function(a){return a.set.width},top:function(a){return a.set.top},
left:function(a){return a.set.left},marginLeft:function(a){return a.set.marginLeft},duration:500,complete:function(){window.events.emit("headerChanged",[l.set.height])}}))})}}window.addEventListener("load",function(){window.header=new z})})();(function(){function C(l){var u=this,p=document.createElement("div"),y=new MSInputObject({multiline:!0,placeholder:"Description",className:"about-column-text text"}),a=window.admin?document.createElement("div"):null;p.className="about-column";y.setValue(l);p.appendChild(y.el);a&&(a.className="remove-about-column",p.appendChild(a),a.onclick=function(){u.remove&&u.remove(u)});u.el=p;u.text=function(){return y.value()}}function z(){var l=document.getElementById("about_panel"),u=document.getElementById("columns");
document.getElementById("demo_show");var p=window.admin?document.getElementById("create_about_column"):null,y=window.admin?document.getElementById("save_about_column"):null,a=window.admin?function(a){u.removeChild(a.el);c.splice(c.indexOf(a),1)}:null,c=[];window.admin&&l.setAttribute("admin",!0);p&&(p.onclick=function(){var l=new C;l.remove=a;c.push(l);u.appendChild(l.el)});y&&(y.onclick=function(){for(var a=[],d=0;d<c.length;++d)a.push(c[d].text());window.ajax({type:"POST",data:{fields:a},url:"/async/about/save"})});
window.ajax({type:"POST",url:"/async/about/load"}).done(function(l){if(l.status&&l.fields){var d=document.createDocumentFragment(),g;for(g in l.fields){var k=new C(l.fields[g]);k.remove=a;c.push(k);d.appendChild(k.el)}u.appendChild(d)}})}window.addEventListener("load",function(){window.home=new z})})();(function(){function C(b){var e=this,a=b.id,c=b.file?!0:!1,D=b.file,h=b.label,f=null,m=null,d=!1,r=null,A=!1,n=new MSDivObject;b=window.admin?document.createElement("div"):null;var w=function(b){h=b;f&&(f.innerHTML=h||"")};n.el.className="picture-thumb";b&&(b.className="picture-thumb-remove",b.onclick=function(){e.removed&&e.removed(a)},n.el.appendChild(b));window.admin&&(n.el.setAttribute("draggable",!0),n.el.ondragstart=function(b){b.dataTransfer.setData("target",a)},n.el.ondragover=function(b){b.preventDefault()},
n.el.ondrop=function(b){b.preventDefault();e.swap&&e.swap(b.dataTransfer.getData("target"),a)});n.el.onclick=function(){e.click&&e.click(e)};e.el=n.el;e.id=function(){return a};e.isTemp=function(){return c};e.file=function(){return D};e.label=function(){return h};e.setLabel=w;e.enableLabel=function(){f||(f=document.createElement("div"),f.className="picture-thumb-label header-text no-select",n.el.appendChild(f));f&&(f.innerHTML=h||"")};e.disableLabel=function(){f&&(n.el.removeChild(f),f=null)};e.data=
function(){return m};e.remove=function(){d=!0;return c};e.pack=function(){return{id:a,temp:c,file:D,label:h,data:m,removed:d}};e.onload=function(b){A&&b?async(b,[e]):r=b};e.commit=function(b){if(d&&!c)window.ajax({type:"POST",data:{id:a},url:"/async/images/delete"}).done(function(a){b()});else if(c){var e=new FormData;e.append("file",D);window.ajax({type:"POST",data:e,files:!0,url:"/async/images/save"}).done(function(a){b({id:a.id,label:h})})}else b({id:a,label:h})};e.update=function(b){a=b.id;c=
b.temp;w(b.label);D=b.file;m=b.data;d=b.removed;n.el.style.backgroundImage=c?"url("+m+")":"url(/async/thumb/load/"+a+")"};c?(b=new FileReader,b.onload=function(b){m=b.target.result;n.el.style.backgroundImage="url("+m+")";A=!0;r&&(async(r,[e]),r=null)},b.readAsDataURL(D)):(n.loadImage({url:"/async/thumb/load/"+a,color:"#e0e0e0",shadow:!0,radius:24,width:6,length:22,lines:15,speed:.75}),A=!0,r&&(async(r,[e]),r=null))}function z(){var b=this,a=document.createElement("div"),c=document.createElement("div"),
B=document.createElement("div"),f=new MSDivObject,h=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,d=null,m=null,t={},r=[],A=function(b){var a=t[b];a&&(a.remove()&&delete t[b],B.removeChild(a.el));b=r.indexOf(b);0<=b&&r.splice(b,1)},n=function(b,a){var e=t[b],n=e.pack(),c=t[a].pack();t[b]=t[a];t[a]=e;t[b].update(n);t[a].update(c);e=r.indexOf(b);n=r.indexOf(a);r[e]=a;r[n]=b},w=function(){var b=f.el.getAttribute("current");(b=t[b])&&b.setLabel(d.value())},x=function(b){b.isTemp()?
f.el.style.backgroundImage="url("+b.data()+")":f.loadImage({url:"/async/images/load/"+b.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});scrollBodyTo(a);f.el.setAttribute("current",b.id());d&&(d.onchange=null,d.setValue(b.label()),d.onchange=w)};a.className="picture-manager";c.className="picture-container";B.className="picture-carousel";c.appendChild(B);f.el.className="picture-preview";h&&(B.appendChild(h.el),h.preview=function(a){if(a){b.beginAdd();for(var e=null,n=
0;n<a.length;++n){var c=new C({id:String(hashCode(a[n].name)),file:a[n]});e||(e=c);b.add(c)}b.endAdd();b.show(e)}});a.appendChild(f.el);a.appendChild(c);b.el=a;b.imageList=function(){return r};b.enableLabel=function(b){d||(d=new MSInputObject({className:"picture-preview-label text"}),f.el.appendChild(d.el));d.onchange=null;b?d.setValue(b):(b=f.el.getAttribute("current"),(b=t[b])&&d.setValue(b.label()));for(var a in t)t.hasOwnProperty(a)&&t[a].enableLabel();d.onchange=w};b.disableLabel=function(){d&&
(f.el.removeChild(d.el),d=null);for(var b in t)t.hasOwnProperty(b)&&t[b].disableLabel()};b.commit=function(b){var a=function(b,e,n,c,v){b==e?v(c):t[n[b]].commit(function(h){h&&c.push(h);a(b+1,e,n,c,v)})};a(0,r.length,r,[],b)};b.beginAdd=function(){null==m&&(m=document.createDocumentFragment())};b.endAdd=function(){if(m&&(B.appendChild(m),m=null,0<r.length))t[r[0]].onload(x)};b.present=function(b){(b=t[b])&&async(x,[b])};b.add=function(b){m&&!t[b.id()]&&(r.push(b.id()),t[b.id()]=b,b.removed=A,b.swap=
n,b.click=x,m.appendChild(b.el),d&&b.enableLabel())};b.show=function(b){var a=function(){if(m)async(a);else if(b)b.onload(x)};async(a)}}function l(){var b=document.createElement("table"),a=new MSInputObject({placeholder:"Price",className:"text"}),c=new MSInputObject({placeholder:"Shipping",className:"text"});language.bindInput("price",a.el);language.bindInput("shipping",c.el);var f=document.createElement("tr"),D=document.createElement("th"),h=document.createElement("th");f.className="text-invert";
language.bind("price",D);language.bind("shipping",h);f.appendChild(D);f.appendChild(h);b.appendChild(f);f=document.createElement("tr");D=document.createElement("td");h=document.createElement("td");D.appendChild(a.el);f.appendChild(D);h.appendChild(c.el);f.appendChild(h);b.appendChild(f);b.className="single-item";this.el=b;this.value=function(){return[{quantity:1,price:a.value(),shipping:c.value()}]};this.setValue=function(b){a.setValue(b[0].price);c.setValue(b[0].shipping)}}function u(){function b(b,
a,e){this.quantity=b;this.price=a;this.shipping=e}var a=document.createElement("table"),c=[],f=function(f,n,h){var B=document.createElement("tr"),v=document.createElement("td"),d=new MSInputObject({placeholder:"Quantity",className:"text"}),D=document.createElement("td"),m=new MSInputObject({placeholder:"Price",className:"text"}),r=document.createElement("td"),t=new MSInputObject({placeholder:"Shipping",className:"text"}),k=document.createElement("td"),I=document.createElement("div"),l=new b(d,m,t);
language.bindInput("quantity",d.el);language.bindInput("price",m.el);language.bindInput("shipping",t.el);I.className="remove-row";c.push(l);d.setValue(f||"");m.setValue(n||"");t.setValue(h||"");v.appendChild(d.el);B.appendChild(v);D.appendChild(m.el);B.appendChild(D);r.appendChild(t.el);B.appendChild(r);k.appendChild(I);B.appendChild(k);a.appendChild(B);I.onclick=function(b){b=c.indexOf(l);0<=b&&(c.splice(b,1),a.removeChild(B))}},D=document.createElement("tr"),h=document.createElement("th"),d=document.createElement("th"),
m=document.createElement("th"),t=document.createElement("th"),r=document.createElement("div");D.className="text-invert";language.bind("quantity",h);language.bind("price",d);language.bind("shipping",m);D.appendChild(h);D.appendChild(d);D.appendChild(m);r.className="add-new-row";t.appendChild(r);D.appendChild(t);r.onclick=function(){f()};a.appendChild(D);a.className="multi-item";this.el=a;this.value=function(){for(var b=[],a=0;a<c.length;++a)b.push({quantity:c[a].quantity.value(),price:c[a].price.value(),
shipping:c[a].shipping.value()});return b};this.setValue=function(b){for(var a=0;a<b.length;++a)f(b[a].quantity,b[a].price,b[a].shipping)}}function p(){var b=null,a=document.createElement("table"),c=document.createElement("tr"),f=document.createElement("th"),d=document.createElement("th"),h=document.createElement("th"),k=document.createElement("tr"),m=document.createElement("td"),t=document.createElement("td"),r=document.createElement("td");c.className="text-invert";language.bind("quantity",f);language.bind("price",
d);language.bind("shipping",h);c.appendChild(f);c.appendChild(d);c.appendChild(h);a.appendChild(c);k.appendChild(m);k.appendChild(t);k.appendChild(r);a.appendChild(k);t.setAttribute("currency","z\u0142");r.setAttribute("currency","z\u0142");this.el=a;this.value=function(){return b};this.setValue=function(a){if(1==a.length)m.innerHTML=a[0].quantity,t.innerHTML=a[0].price,r.innerHTML=a[0].shipping,b={quantity:a[0].quantity,price:a[0].price,shipping:a[0].shipping};else if(1<a.length){var e=new DropDown({});
e.changed=function(e){t.innerHTML=a[e].price;r.innerHTML=a[e].shipping;b={quantity:a[e].quantity,price:a[e].price,shipping:a[e].shipping}};for(var c=0;c<a.length;++c)e.addItem(c).controller.setValue(a[c].quantity);m.appendChild(e.el)}}}function y(b){var a=this,c=document.createElement("div"),f=null,d=!1,h=0;window.admin?(f=[new l,new u],b&&b.type&&(h=0<=b.type&&2>b.type?b.type:0),c.appendChild(f[h].el)):(f=new p,c.appendChild(f.el));c.className="price text advert-hide";a.el=c;window.admin&&(a.change=
function(b){c.removeChild(f[h].el);h=0<=b&&2>b?b:0;c.appendChild(f[h].el);a.changed&&a.changed(b)},a.nullValue=function(b){d=b});a.value=function(){return window.admin?d?null:{type:h,values:f[h].value()}:f.value()};a.setValue=function(b){b&&(window.admin?(a.change(b.type),f[h].setValue(b.values)):f.setValue(b.values))}}function a(){var b=this,a=!0,c=document.createElement("div"),f=new DropDown({className:"component-ctl"});c.className="text-header header-text";language.bind("projects",c);f.changed=
function(a){b.changed&&b.changed(a)};b.setValue=function(b){if(b)for(var a=0;a<b.length;++a)f.addItem(b[a].id).controller.setValue(b[a].label)};b.value=function(){return f.value()};b.text=function(){return f.text()};b.enabled=function(){return a};b.enable=function(){a=!0;c.removeAttribute("style");f.el.removeAttribute("style")};b.disable=function(){a=!1;c.style.display="none";f.el.style.display="none"};var d=document.createDocumentFragment();d.appendChild(c);d.appendChild(f.el);b.el=d}function c(){function b(b){if(k.length<
d.length){var f=document.createElement("div"),n=document.createElement("div"),w=new DropDown({className:"category-ctl"},n),B=document.createElement("div");f.className="category-item-view";B.className="remove-category-item";f.appendChild(n);f.appendChild(B);B.onclick=function(){var b=k.indexOf(w);0<=b&&(k.splice(b,1),delete m[w.id],a.removeChild(f),f=null);k.length<d.length&&(c.style.display=null)};k[k.length]=w;w.beforeOpen=function(){if(h)for(var b=0;b<h.length;++b)w.removeVirtual(h[b]);h=[];for(b=
0;b<d.length;++b)m[d[b]._id]&&m[d[b]._id]!=w||function(b,a){b.onclick=function(b){b.preventDefault();b.stopPropagation();w.setText(a.title);delete m[w.id];w.id=a._id;m[a._id]=w;w.close()};b.className="dropdown-item text-invert";b.innerHTML=a.title;h[h.length]=b}(w.addVirtual(),d[b])};w.beforeClose=function(){if(h){for(var b=0;b<h.length;++b)w.removeVirtual(h[b]);h=null}};if(b)for(n=0;n<d.length;++n){if(d[n]._id==b){m[b]=w;w.id=b;w.setText(d[n].title);break}}else for(n=0;n<d.length;++n)if(!m[d[n]._id]){m[d[n]._id]=
w;w.id=d[n]._id;w.setText(d[n].title);break}a.insertBefore(f,c);k.length==d.length&&(c.style.display="none")}}var a=document.createElement("div"),c=document.createElement("div"),f=document.createElement("div"),d=[],h=null,k=[],m={},t=!1;a.className="category-list";c.className="category-item-view add-category-item";c.appendChild(f);a.appendChild(c);c.onclick=function(){b()};this.el=a;this.setValue=function(a){if(a){var e=function(){if(t)for(var c=0;c<a.length;++c)b(a[c]);else async(e)};e()}};this.value=
function(){return Object.keys(m)};window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(b){t=!0;b.status&&(d=b.categories||[],0==d.length&&(c.style.display="none"))})}function q(){function b(){this.removeAttribute("error");this.onfocus=null}var a=document.createElement("div"),c=document.createElement("div"),f=document.createElement("input"),d=document.createElement("input"),h=new MSInputObject({className:"message text",multiline:!0,user:!0});a.className="shop-item-contact-panel";
c.className="text-header header-text";f.className="name text";d.className="email text";language.bind("contact",c);language.bindInput("full_name",f);language.bindInput("email",d);language.bindInput("message",h.el);a.appendChild(c);a.appendChild(f);a.appendChild(d);a.appendChild(h.el);this.el=a;this.value=function(){return{name:f.value,email:d.value,message:h.value()}};this.error=function(a){for(var e in a)"name"==e?(f.setAttribute("error",!0),f.onfocus=b):"email"==e?(d.setAttribute("error",!0),d.onfocus=
b):"message"==e&&(h.el.setAttribute("error",!0),h.el.onfocus=b)}}function d(b){var e=this,f=document.createElement("div"),d=document.createElement("div"),k=document.createElement("div"),h=null,l=document.createElement("div"),m=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),t=window.admin?document.createElement("div"):null,r=window.admin?new DropDown({className:"type-ctl"}):{setValue:function(b){2==b&&(f.setAttribute("advert",!0),h=new q,d.appendChild(h.el),language.unbind("order",
L),language.bind("send",L))}},A=document.createElement("div"),n=new DropDown({className:"avail-ctl",adminOnly:!0}),w=window.admin?document.createElement("div"):null,x=window.admin?new DropDown({className:"action-ctl"}):null,v=window.admin?document.createElement("div"):null,g=window.admin?new DropDown({className:"component-ctl"}):{setValue:function(b){0==b?(e.disableLabel(),p.disable()):(e.enableLabel(),p.enable())}},p=window.admin?null:new a,u=window.admin?document.createElement("div"):null,G=window.admin?
new c:null,E=document.createElement("div"),z=new y({type:0}),C=document.createElement("div"),H=document.createElement("div"),R=document.createElement("div"),N=document.createElement("div"),P=document.createElement("div"),Q=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),M=window.admin&&b.id()?document.createElement("div"):null,L=document.createElement("div"),O=document.createElement("div"),K={title:m,type:r,availability:n,action:x,components:g,images:p,categories:G,
price:z,descrition:Q};f.className="details-container";d.className="details-view";f.appendChild(d);k.className="control-view";f.appendChild(k);l.className="text-header header-text";language.bind("title",l);language.bindInput("title",m.el);d.appendChild(l);d.appendChild(m.el);window.admin?(language.bind("individual",r.addItem(0)),language.bind("common",r.addItem(1)),language.bind("advert",r.addItem(2)),t.className="text-header header-text",language.bind("type",t),d.appendChild(t),d.appendChild(r.el)):
p.changed=function(b){e.selectImage&&e.selectImage(b)};n.changed=function(b){language.unbind(N);0==b?language.bind("lead_avail",N):language.bind("lead_wait",N)};language.bind("available",n.addItem(0));language.bind("demand",n.addItem(1));A.className="text-header header-text";language.bind("availability",A);d.appendChild(A);d.appendChild(n.el);window.admin?(language.bind("keep",x.addItem(0)),language.bind("move",x.addItem(1)),language.bind("remove",x.addItem(2)),w.className="text-header header-text",
language.bind("process",w),d.appendChild(w),d.appendChild(x.el),language.bind("components",v),v.className="text-header header-text",language.bind("none",g.addItem(0)),language.bind("labeled",g.addItem(1)),d.appendChild(v),d.appendChild(g.el),g.changed=function(b){0==b?e.disableLabel():e.enableLabel()},g.lock()):d.appendChild(p.el);window.admin&&(u.className="text-header header-text",language.bind("category",u),d.appendChild(u),d.appendChild(G.el));E.className="text-header header-text advert-hide";
language.bind("price",E);d.appendChild(E);d.appendChild(z.el);C.className="text-header header-text advert-hide";language.bind("payment_opt",C);H.className="payments advert-hide";window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(b){if(b.status)for(var a=0;a<b.types.length;++a){var e=document.createElement("div");e.className="payment-option";e.setAttribute("type",b.types[a]);H.appendChild(e)}});d.appendChild(C);d.appendChild(H);R.className="text-header header-text advert-hide";
language.bind("lead",R);N.className="lead-time text advert-hide";d.appendChild(R);d.appendChild(N);P.className="text-header header-text";language.bind("description",P);language.bindInput("description",Q.el);L.className="action-btn no-select text-invert";language.bind(window.admin?"save":"order",L);k.appendChild(L);L.onclick=function(){if(window.admin){var a={},c;for(c in K)K.hasOwnProperty(c)&&K[c]&&(a[c]=K[c].value());e.save(a)}else h?(a=h.value(),a.data={id:b.id(),preview:p.enabled()?p.value():
b.preview(),title:m.value(),component:p.enabled()?p.text():null},e.contact(a,function(b){b.status||h.error(b.error)})):(a=z.value()||{},a.id=b.id(),a.preview=p.enabled()?p.value():b.preview(),a.title=m.value(),a.availability=n.value(),a.component=p.enabled()?p.text():null,e.order(a))};O.className="close-btn no-select text-invert";language.bind("close",O);k.appendChild(O);O.onclick=function(){e.close()};M&&(M.className="delete-btn no-select text-invert",language.bind("delete",M),k.appendChild(M),M.onclick=
function(){e.remove()});d.appendChild(P);d.appendChild(Q.el);r.changed=function(b){2==b&&(z.nullValue(!0),n.setValue(1),n.lock(),x.setValue(0),x.lock(),g.unlock(),f.setAttribute("advert",!0))};e.el=f;e.show=function(){};e.init=function(){r.changed=function(b){z.nullValue(!1);f.removeAttribute("advert");0==b?(z.change(0),n.setValue(0),g.setValue(0),n.unlock(),x.unlock(),g.lock()):1==b?(z.change(1),n.setValue(1),x.setValue(0),n.lock(),x.lock(),g.unlock()):2==b&&(z.nullValue(!0),n.setValue(1),n.lock(),
x.setValue(0),x.lock(),g.unlock(),f.setAttribute("advert",!0))}};e.setValue=function(b){for(var a in K)K.hasOwnProperty(a)&&K[a]&&K[a].setValue(b[a])}}function g(b,a){function c(f,h,m){var n=this,w=new z,x=new d(f);x.close=function(){n.close()};x.order=function(b){n.close(function(){window.events.emit("order",[b])},{force:!0})};x.contact=function(b,a){window.ajax({type:"POST",data:b,url:"/async/contact"}).done(function(b){b.status?n.close():a(b)})};x.enableLabel=function(){w.enableLabel()};x.disableLabel=
function(){w.disableLabel()};n.load=function(a){b.id()?window.ajax({type:"POST",data:{id:b.id()},url:"/async/shop/load"}).done(function(b){if(b.item){x.setValue(b.item);w.beginAdd();for(var c in b.item.images)w.add(new C(b.item.images[c]));w.endAdd();x.init()}a&&a()}):(x.init(),a&&a())};x.selectImage=function(b){w.present(b)};n.create=function(){m.appendChild(w.el);m.appendChild(x.el)};n.destroy=function(){m.removeChild(w.el);m.removeChild(x.el)};n.show=function(){w.show();x.show()};window.admin&&
(x.save=function(c){w.commit(function(d){c.id=b.id();c.images=d;window.ajax({type:"POST",data:c,url:"/async/shop/save"}).done(function(b){if(b.status){var h=null;f.id()==b._id?f.update({title:c.title,price:c.price,preview:d[0]}):h=function(){a.reload()};n.close(h)}})})},x.remove=function(){window.ajax({type:"POST",data:{id:f.id()},url:"/async/shop/delete"}).done(function(b){b.status&&(h.removeItem(f),n.close())})})}function f(b,a){async(k.close,b?[b,a]:null)}var k=this,h=document.createElement("div"),
g=document.createElement("div"),m=new c(b,a,g);m.close=f;h.className=window.admin?"shop-item-container edit":"shop-item-container";h.style.display="none";g.className="shop-item-view";m.create();h.appendChild(g);this.el=h;this.id=function(){return b.id()};this.item=function(){return b};this.replace=function(d,h,k){b=d;a=h;var n=new c(b,a,g);n.close=f;n.load(function(){m.destroy();n.create();m=n;k&&k()})};this.show=function(b){b=b||{};b.force?(scrollBodyTo(h),morpheus(h,{marginLeft:0,duration:300,complete:function(){m.show()}})):
(h.style.display="block",b=h.offsetHeight,scrollBodyTo(h),h.style.height="0px",morpheus(h,{height:b,duration:300,complete:function(){morpheus(h,{marginLeft:0,duration:300,complete:function(){m.show()}});h.style.height=null}}))};this.hide=function(a,c){c=c||{};morpheus(h,{marginLeft:"-110%",duration:300,complete:function(){c.force||scrollBodyTo(b.el);h.style.marginLeft=null;c.inline?a&&a():morpheus(h,{height:0,duration:300,complete:function(){h.style.display="none";a&&a()}})}})};m.load()}function k(){var b=
this,a=document.createElement("div"),c=document.createElement("div"),f=document.createElement("div");a.className="shop-item-new";c.className="shop-item-internal";a.appendChild(c);f.className="shop-item-image";c.appendChild(f);b.el=a;a.onclick=function(){b.open&&b.open(b)};b.id=function(){return null};b.title=function(){return null};b.position=function(){return a.offsetTop}}function E(b){var a=this,c=document.createElement("div"),f=document.createElement("div"),d=document.createElement("div"),h=new MSDivObject,
k=b.preview.id,m=document.createElement("div");c.id=b._id;c.className=window.admin?"shop-item edit no-select":"shop-item no-select";f.className="shop-item-internal";c.appendChild(f);h.el.className="shop-item-image";f.appendChild(h.el);d.className="shop-item-title text";f.appendChild(d);m.className="shop-item-price text";f.appendChild(m);h.loadImage({url:"/async/preview/load/"+k,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=b.title;b.price?(m.innerHTML=Math.round(b.price.values[0].price/b.price.values[0].quantity),
m.setAttribute("currency","z\u0142")):(m.innerHTML=null,m.removeAttribute("currency"));a.id=function(){return c.id};a.title=function(){return d.innerHTML};a.position=function(){return c.offsetTop};a.preview=function(){return k};a.update=function(b){k=b.preview.id;h.loadImage({url:"/async/preview/load/"+k,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=b.title;b.price?(m.innerHTML=Math.round(b.price.values[0].price/b.price.values[0].quantity),m.setAttribute("currency","z\u0142")):(m.innerHTML=null,
m.removeAttribute("currency"))};c.onclick=function(){c.getAttribute("ordered")?window.scrollBodyTo(window.orders.el):a.open&&a.open(a)};if(window.admin){b.counts=b.counts||{};var g=document.createElement("div"),r=document.createElement("div"),A=document.createElement("span"),n=document.createElement("div"),w=document.createElement("span"),x=document.createElement("div"),v=document.createElement("span"),l=document.createElement("div"),p=document.createElement("span"),q=document.createElement("div"),
u=document.createElement("span");g.className="visit-counter-container text";r.className="visit-counter";n.className="visit-counter";x.className="visit-counter";l.className="visit-counter";q.className="visit-counter";language.bind("today",r);language.bind("l_3_day",n);language.bind("l_week",x);language.bind("l_month",l);language.bind("l_time",q);A.innerHTML=b.counts.day_1||0;w.innerHTML=b.counts.day_3||0;v.innerHTML=b.counts.day_7||0;p.innerHTML=b.counts.day_28||0;u.innerHTML=b.counts.all||0;r.appendChild(A);
n.appendChild(w);x.appendChild(v);l.appendChild(p);q.appendChild(u);g.appendChild(r);g.appendChild(n);g.appendChild(x);g.appendChild(l);g.appendChild(q);f.appendChild(g)}else b=document.createElement("div"),f=document.createElement("div"),b.className="shop-item-ordered",f.className="shop-item-ordered-icon",b.appendChild(f),c.appendChild(b);a.el=c}function H(b){function a(b){async(function(){if(r){var a=l.childNodes,c=r.item().position(),e=null;l.contains(r.el)&&l.removeChild(r.el);for(var f=0;f<a.length;++f)if(c<
a[f].offsetTop){e=a[f];break}e?l.insertBefore(r.el,e):l.appendChild(r.el);b&&"Function"==classOf(b)&&b()}})}function c(b,f){if(r){window.removeEventListener("resize",a);var d=r.el;r.hide(function(){l.removeChild(d);d=null;b&&b()},f);r=null}else b&&b()}function f(b){if(r){var n=r.item().position()==b.position();r.hide(function(){r.replace(b,d,function(){n?r.show({force:!0}):a(function(){r.show()})})},{force:!0,inline:n})}else r=new g(b,d),r.close=c,a(function(){r.show()}),window.addEventListener("resize",
a)}var d=this,h=document.getElementById("shop_item_view"),l=document.createElement("div"),m=window.admin?new k:null,t=window.location.hash?window.location.hash.substring(1):null,r=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");d.createItem=function(b,a){a&&m&&m.el.nextSibling?l.insertBefore(b.el,m.el.nextSibling):l.appendChild(b.el);b.open=f};d.removeItem=function(b){l.removeChild(b.el)};h.appendChild(l);d.el=h;d.reload=function(){window.ajax({type:"POST",
data:b.value(),url:"/async/shop/list"}).done(function(b){if(b&&b.status){var a=document.createElement("div"),c=null;m&&(a.appendChild(m.el),m.open=f);if(b.items)for(var e=0;e<b.items.length;++e){var d=new E(b.items[e]);if(r&&r.item().id()==d.id()||d.id()==t)c=d,t=null;d.open=f;a.appendChild(d.el)}h.replaceChild(a,l);l=a;c?f(c):r=null}window.events.emit("update-ordered")})}}function G(){function b(b,a){var c=this,e=b.item,f=b.controller,d=document.createElement("div"),n=window.admin&&a?document.createElement("input"):
null,h=window.admin&&a?document.createElement("div"):null,k=!1,m=!1;e.manager=c;d.className="categoty-title";e.appendChild(d);c.setValue=function(b){d.innerHTML=b||""};c.value=function(){return d.innerHTML};c.id=function(){return a?a._id:null};a?(f.setValue(a.title),window.admin&&(h&&(h.className="category-remove",h.onclick=function(b){b.preventDefault();b.stopPropagation();e.parentNode.removeChild(e);m=!0;k=!1}),n&&(n.className="categoty-title header-text"),c.forceEditStart=function(){n&&(e.replaceChild(n,
d),e.appendChild(h),n.value=d.innerHTML,n.onchange=function(){m||(k=!0)})},c.forceEditEnd=function(){n&&(n.onchange=null,e.replaceChild(d,n),e.removeChild(h),d.innerHTML=n.value)},c.save=function(b){m&&c.id()?window.ajax({type:"POST",data:{id:c.id()},url:"/async/category/delete"}).done(b):k?window.ajax({type:"POST",data:{id:c.id(),title:d.innerHTML},url:"/async/category/save"}).done(b):b()})):language.bind("allitems",b)}function a(b){var c=this,e=document.createElement("div");e.className="category-add";
b.appendChild(e);c.el=b;e.onclick=function(){c.create&&c.create()}}function c(a,e){window.admin&&a.el.insertBefore(m,a.el.firstChild);new b(a.addItem(0));window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(c){var f=[];if(c.status)for(var d=0;d<c.categories.length;++d){var n=a.addItem(c.categories[d]._id),n=new b(n,c.categories[d]);window.admin&&(f[f.length]=n)}e(f)})}var f=null,d=document.getElementById("shop_navigator"),h=new DropDown({className:"category-nav",src:"../images/list.png"}),
k=null,m=null,l=1,g=new DropDown({className:"sorter-nav"}),A=g.addItem(0);A.controller.setValue("A  -  Z");A=g.addItem(1);A.controller.setValue("Z  -  A");A=g.addItem(2);language.bind("lowprice",A);A=g.addItem(3);language.bind("hightprice",A);if(window.admin){var n=[],m=document.createElement("div");m.className="shop-category-edit";m.onclick=function(w){w.preventDefault();w.stopPropagation();if(m.hasAttribute("open"))m.removeAttribute("open"),h.el.removeAttribute("edit-mode"),h.close(),h.el.removeChild(m),
k=null,function(b,a){var c=0,e=b.length,f=function(b){++c==e&&a()};if(0<e)for(var d=0;d<e;++d)b[d].forceEditEnd(),b[d].save(f);else a()}(n,function(){var b=new DropDown({className:"category-nav",src:"../images/list.png"});c(b,function(a){n=a;d.replaceChild(b.el,h.el);h=b;h.changed=function(){f&&f.reload()};h.setValue(0)})});else for(m.setAttribute("open",!0),h.el.setAttribute("edit-mode",!0),k=new a(h.addVirtual()),k.create=function(){var a=k.el.parentNode;a.removeChild(k.el);var c=h.addItem(String("000000000000000000000000"+
l++).slice(-24)),c=new b(c,{title:""});c.forceEditStart();n[n.length]=c;a.appendChild(k.el)},h.manual(),h.open(),w=0;w<n.length;++w)n[w].forceEditStart()}}d.appendChild(h.el);d.appendChild(g.el);h.changed=function(){f&&f.reload()};g.changed=function(){f&&f.reload()};this.setView=function(b){f=b};this.value=function(){var b=h.value();return{sort:g.value(),filter:0==b?null:b}};this.el=d;c(h,function(b){window.admin&&(n=b)})}function f(){var b=document.getElementById("shop_panel"),a=new G,c=new H(a);
a.setView(c);this.el=b}window.addEventListener("load",function(){window.shop=new f})})();(function(){function C(l){var u=this,p=l,y=new MSDivObject;l=window.admin?document.createElement("div"):null;y.el.className="gallery-thumb";l&&(l.className="gallery-thumb-remove",y.el.appendChild(l),l.onclick=function(){u.remove&&u.remove(u)});y.el.onclick=function(){u.click&&u.click(u)};if(window.admin){y.el.setAttribute("draggable",!0);var a=document.getElementById("content_scroll_top"),c=document.getElementById("content_scroll_bottom"),q=document.getElementById("content-wrapper"),d=!1,g=function(a){if(d){var c=
q.scrollTop;morpheus.tween(5,function(d){1==d&&async(g,[a]);d=c+a*d;0<=d&&d<=q.scrollHeight&&(q.scrollTop=d)})}};a.ondragenter=function(a){a.preventDefault();d=!0;g(-10)};a.ondragleave=function(a){a.preventDefault();d=!1};c.ondragenter=function(a){a.preventDefault();d=!0;g(10)};c.ondragleave=function(a){a.preventDefault();d=!1};y.el.ondragstart=function(d){d.dataTransfer.setData("target",p);a.setAttribute("enabled",!0);c.setAttribute("enabled",!0)};y.el.ondragend=function(d){d.preventDefault();a.removeAttribute("enabled");
c.removeAttribute("enabled")};y.el.ondragover=function(a){a.preventDefault()};y.el.ondrop=function(a){a.preventDefault();u.swap&&u.swap(a.dataTransfer.getData("target"),p)}}u.el=y.el;u.id=function(){return p};u.change=function(a){p=a;y.loadImage({url:"/async/thumb/load/"+p,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})};y.loadImage({url:"/async/thumb/load/"+p,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})}function z(){var l,u,p;function y(){var a=
c.el.childNodes,f=a.length;u=l=1;if(0<f){var b;for(b=0;b<f&&0!=a[b].style.display.length;++b);p=Math.floor((c.el.offsetWidth-2)/(a[b].offsetWidth+6))*Math.floor((c.el.offsetHeight-2)/(a[b].offsetHeight+6));u=Math.ceil(f/p);for(b=Math.min(p,f)-1;0<=b;--b)0!=a[b].style.display.length&&async(function(b){b.style.display=null},[a[b]]);for(b=Math.min(p,f);b<f;++b)0<a[b].style.display.length||async(function(b){b.style.display="none"},[a[b]])}d.prev.setAttribute("disabled",!0);1==u?d.next.setAttribute("disabled",
!0):d.next.removeAttribute("disabled");d.data.innerHTML=l+" / "+u}document.getElementById("gallery_panel");document.getElementById("content-wrapper");var a=window.admin?new FileUpload({id:"gallery_thumb_new",className:"gallery-thumb",multiple:!0}):null,c=new MSDivObject(document.getElementById("thumbs_container")),q=new MSDivObject(document.getElementById("gallery_view").firstElementChild),d={prev:document.getElementById("gallery_prev_page"),data:document.getElementById("gallery_page_info"),next:document.getElementById("gallery_next_page")};
u=l=1;p=0;var g={},k=function(a){q.loadImage({url:"/async/images/load/"+a.id()+"?height=700",color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75})},z=function(a){window.ajax({type:"POST",data:{id:a.id()},url:"/async/gallery/delete"}).done(function(f){f.status&&(delete g[a.id()],c.el.removeChild(a.el))})},H=function(a,c){if(a!=c){var b=g[a];b.change(c);g[a]=g[c];g[c]=b;g[a].change(a);window.ajax({type:"POST",data:{one:a,two:c},url:"/async/gallery/swap"})}};window.admin||(window.addEventListener("resize",
y),d.prev.onclick=function(){if(!d.prev.hasAttribute("disabled")){for(var a=c.el.childNodes,f=a.length,b=Math.min(p*l,f)-1;b>=p*(l-1);--b)async(function(b){b.style.display="none"},[a[b]]);--l;1==l&&d.prev.setAttribute("disabled",!0);d.next.removeAttribute("disabled");d.data.innerHTML=l+" / "+u;for(b=Math.min(p*l,f)-1;b>=p*(l-1);--b)async(function(b){b.style.display=null},[a[b]])}},d.next.onclick=function(){if(!d.next.hasAttribute("disabled")){for(var a=c.el.childNodes,f=a.length,b=p*(l-1);b<p*l&&
b<f;++b)async(function(b){b.style.display="none"},[a[b]]);l+=1;l==u&&d.next.setAttribute("disabled",!0);d.prev.removeAttribute("disabled");d.data.innerHTML=l+" / "+u;for(b=p*(l-1);b<p*l&&b<f;++b)async(function(b){b.style.display=null},[a[b]])}});a&&(c.el.appendChild(a.el),a.preview=function(d){for(var f=0;f<d.length;++f){var b=new FormData;b.append("file",d[f]);window.ajax({type:"POST",data:b,files:!0,url:"/async/gallery/save"}).done(function(b){b.status&&(b=new C(b.id),g[b.id()]=b,b.swap=H,b.click=
k,b.remove=z,a.el.nextSibling?c.el.insertBefore(b.el,a.el.nextSibling):c.el.appendChild(b.el),k(b))})}});window.ajax({type:"POST",url:"/async/gallery/load"}).done(function(a){if(a.status){for(var f=document.createDocumentFragment(),b=null,e=0;e<a.result.length;++e){var d=new C(a.result[e].id);g[d.id()]=d;d.swap=H;d.click=k;d.remove=z;f.appendChild(d.el);b||(b=d)}c.el.appendChild(f);b&&k(b);window.admin||y()}})}window.addEventListener("load",function(){window.gallery=new z})})();(function(){function C(){function z(){this.removeAttribute("error");this.onfocus=null}var l=document.getElementById("contact_name"),u=document.getElementById("contact_email"),p=document.getElementById("contact_message");document.getElementById("contact_send").onclick=function(){window.ajax({type:"POST",data:{name:l.value,email:u.value,message:p.value},url:"/async/contact"}).done(function(y){if(y.status)l.value="",u.value="",p.value="";else for(var a in y.error)"name"==a?(l.setAttribute("error",!0),
l.onfocus=z):"email"==a?(u.setAttribute("error",!0),u.onfocus=z):"message"==a&&(p.setAttribute("error",!0),p.onfocus=z)})}}window.addEventListener("load",function(){window.cantact=new C})})();(function(){function C(a){a=a.getElementsByTagName("*");for(var b={},c=0;c<a.length;++c)if(a[c].hasAttribute("user-input")){var d=a[c].getAttribute("user-input");a[c].controller?b[d]=a[c].controller.value():a[c].value?b[d]=a[c].value:a[c].firstChild&&3==a[c].firstChild.nodeType&&a[c].firstChild.nodeValue&&(b[d]=a[c].firstChild.nodeValue)}return b}function z(a,b){b=b||"";if("INPUT"==a.nodeName)a.value=b;else if("DIV"==a.nodeName)if(a.controller)a.controller.setValue(b);else if(a.firstChild&&3==a.firstChild.nodeType&&
a.firstChild.nodeValue)a.firstChild.nodeValue=b;else{var c=document.createTextNode(b);a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}}function l(a,b){for(var c=a.getElementsByTagName("*"),d=[],k=[],g=0;g<c.length;++g)if(c[g].hasAttribute("user-input")){c[g].parentNode.removeAttribute("unset");var h=c[g].getAttribute("user-input");if(b[h]){var l=d.indexOf(c[g].parentNode);0<=l&&d.splice(l,1);k[k.length]=c[g].parentNode;z(c[g],b[h])}else l=k.indexOf(c[g].parentNode),-1==l&&(d[d.length]=
c[g].parentNode),z(c[g],"")}for(g=0;g<d.length;++g)d[g].setAttribute("unset",!0)}function u(a,b){if(b)for(var c=a.getElementsByTagName("*"),d=0;d<c.length;++d)if(c[d].hasAttribute("user-input")){var g=c[d].getAttribute("user-input");b[g]&&function(b){b.setAttribute("error",!0);b.onfocus=function(){b.removeAttribute("error")}}(c[d])}}function p(a){a.controller=this;this.setValue=function(b){a.setAttribute("option",b)}}function y(a){a.controller=this;this.setValue=function(b){var c=a.getElementsByClassName("preview-data");
c&&0<c.length&&z(c[0],b.number);b?a.removeAttribute("unset"):a.setAttribute("unset",!0)}}function a(a){function b(){var b=d.run(c.value);b?c.setAttribute("card",b):c.removeAttribute("card")}var c=a,d=new function(){var b={visa:{values:[{type:0,value:4}]},mastercard:{values:[{type:1,range:{min:51,max:55}}]},discover:{values:[{type:0,value:65},{type:0,value:6011},{type:1,range:{min:644,max:649}},{type:1,range:{min:622126,max:622925}}]},amex:{values:[{type:0,value:34},{type:0,value:37}]}};this.run=function(a){for(var c in b)if(b.hasOwnProperty(c))for(var d=
b[c],f=0;f<d.values.length;++f)if(0==d.values[f].type){var e=String(d.values[f].value);if(a.substr(0,e.length)===e)return c}else if(1==d.values[f].type)for(var g=d.values[f].range.min;g<=d.values[f].range.max;++g)if(e=String(g),a.substr(0,e.length)===e)return c;return null}};c.onkeydown=function(b){var a=0<=[8,9,37,38,39,40,46].indexOf(b.keyCode),d=!isNaN(parseInt(b.key))&&16>c.value.length;a||d||b.preventDefault()};c.onkeyup=b;c.onfocus=b;c.onblue=b;c.onchange=b;c.controller=this;this.value=function(){return{type:d.run(c.value),
number:c.value}}}function c(c){var b={country:function(b){(new DropDown({},b)).addItem("Polska",!0)},county:function(b){var a="dolno\u015bl\u0105skie kujawsko-pomorskie lubelskie lubuskie \u0142\u00f3dzkie ma\u0142opolskie mazowieckie opolskie podkarpackie podlaskie pomorskie \u015bl\u0105skie \u015bwi\u0119tokrzyskie warmi\u0144sko-mazurskie wielkopolskie zachodniopomorskie".split(" ");b=new DropDown({},b);for(var c=0;c<a.length;++c)b.addItem(a[c],!0)},expiry_month:function(b){b=new DropDown({},
b);for(var a=1;12>=a;++a)b.addItem(a,!0)},expiry_year:function(b){var a=(new Date).getFullYear();b=new DropDown({},b);for(var c=a;c<=a+10;++c)b.addItem(c,!0)},card_number:function(b){new a(b)},paymentType:function(b){new p(b)},cardNumber:function(b){new y(b)}};c=c.getElementsByTagName("*");for(var d=0;d<c.length;++d)if(c[d].hasAttribute("control")){var g=c[d].getAttribute("control");b[g]&&async(b[g],[c[d]])}}function q(a){var b=this,c=document.createElement("tr"),d=document.createElement("td"),g=
new MSDivObject,k=document.createElement("td"),h=document.createElement("td"),l=document.createElement("td"),m=document.createElement("td"),t=document.createElement("td"),r=document.createElement("div");d.className="text";g.el.className="order-thumb";k.className="text";h.className="text";l.className="text";m.className="text";t.className="text";r.className="remove-btn";l.setAttribute("currency","z\u0142");m.setAttribute("currency","z\u0142");d.appendChild(g.el);c.appendChild(d);c.appendChild(k);c.appendChild(h);
c.appendChild(l);c.appendChild(m);t.appendChild(r);c.appendChild(t);g.loadImage({url:"/async/thumb/load/"+a.preview,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75});k.innerHTML=a.title;h.innerHTML=a.quantity;l.innerHTML=a.price;a.discount?(d=document.createElement("span"),g=document.createTextNode(Number(a.shipping)*(1-(a.discount||0))),d.className="discount-pin",m.appendChild(d),m.appendChild(g)):m.innerHTML=Number(a.shipping);b.el=c;b.id=function(){return a.id};b.item=
function(){return a.item};b.price=function(){return Number(a.price)};b.shipping=function(){return Number(a.shipping)};b.setDiscount=function(b){a.discount=b};r.onclick=function(){b.remove(b)};b.info=function(){return{title:a.title,quantity:Number(a.quantity),price:Number(a.price),shipping:Number(a.shipping)*(1-(a.discount||0))}};b.update=function(b){for(var c in b||{})b.hasOwnProperty(c)&&(a[c]=b[c]);h.innerHTML=a.quantity;l.innerHTML=a.price;a.discount?(b=document.createElement("span"),c=document.createTextNode(Number(a.shipping)*
(1-(a.discount||0))),b.className="discount-pin",m.innerHTML="",m.appendChild(b),m.appendChild(c)):m.innerHTML=Number(a.shipping)}}function d(){function a(b){var c=document.getElementById(b);c?c.setAttribute("ordered",!0):async(a,[b])}function b(a){var c=document.getElementById(a);c?c.removeAttribute("ordered"):async(b,[a])}function c(a){window.ajax({type:"POST",data:{id:a.id()},url:"/async/orders/remove"}).done(function(a){if(a.status&&a.removed){r=a.total;h.innerHTML=r;var c=A[a.removed];delete A[a.removed];
b(c.item());k.removeChild(c.el);for(var c=document.createDocumentFragment(),e=0;e<a.items.length;++e){var n=a.items[e];A[n.id]&&(A[n.id].update(n),k.removeChild(A[n.id].el));c.appendChild(A[n.id].el)}k.appendChild(c);0==a.items.length?d.hide():d.activate(d)}})}var d=this,g=document.getElementById("order_list_view"),k=document.getElementById("order_list_table"),h=document.getElementById("order_list_totals"),l=document.getElementById("order_list_advance"),m=document.getElementById("terms"),t=document.getElementById("terms_box"),
r=0,A={};h.setAttribute("currency","z\u0142");t.onclick=function(){m.hasAttribute("checked")?m.removeAttribute("checked"):(m.setAttribute("checked",!0),m.removeAttribute("error"))};window.events.listen("update-ordered",function(){for(var a in A)if(A.hasOwnProperty(a)){var b=document.getElementById(A[a].item());b&&b.setAttribute("ordered",!0)}});d.addOrder=function(b){window.ajax({type:"POST",data:b,url:"/async/orders/add"}).done(function(g){if(g.status){r=g.total;h.innerHTML=r;for(var m=document.createDocumentFragment(),
l=0;l<g.items.length;++l){var t=g.items[l];if(A[t.id])A[t.id].update(t),k.removeChild(A[t.id].el);else if(t.id==g.added){t.title=b.title;t.availability=b.availability;t.preview=b.preview;var p=new q(t);A[t.id]=p;p.remove=c;a(p.item())}A[t.id]&&m.appendChild(A[t.id].el)}k.appendChild(m);1==g.items.length&&d.show(!0);d.reset();d.activate(d)}})};d.clear=function(){for(var a in A)if(A.hasOwnProperty(a)){var c=A[a];delete A[a];b(c.item());k.removeChild(c.el)}};d.init=function(){window.ajax({type:"POST",
data:null,url:"/async/orders/session"}).done(function(b){if(b.status&&b.items){r=b.total;h.innerHTML=r;for(var g=document.createDocumentFragment(),m=0;m<b.items.length;++m){var l=new q(b.items[m]);A[l.id()]=l;l.remove=c;a(l.item());g.appendChild(A[l.id()].el)}k.appendChild(g);0<b.items.length&&(d.show(),d.activate(d))}})};l.onclick=function(){if(m.hasAttribute("checked")){var b=[],a;for(a in A)A.hasOwnProperty(a)&&(b[b.length]=A[a].info());d.advance(d,{items:b,total:r})}else m.setAttribute("error",
!0)};d.el=g}function g(){var a=this,b=document.getElementById("shipping_view"),c=document.getElementById("shipping_advance"),d=document.getElementById("shipping_back"),g=null;c.onclick=function(){var c=C(b);window.ajax({type:"POST",data:c,url:"/async/orders/shipping"}).done(function(c){c.status?(g.shipping=c.data,a.advance(a,g)):u(b,c.error)})};a.clear=function(){g=null};a.apply=function(a){g=a};d.onclick=function(){a.back(a)};a.el=b}function k(){function a(c){c.stopPropagation();for(c=0;c<h.length;++c)h[c].removeAttribute("checked");
this.setAttribute("checked",!0);r=this.getAttribute("option");b.expand(p,this.hasAttribute("expand"))}var b=this,c=document.getElementById("payment_view"),d=document.getElementById("payment_advance"),g=document.getElementById("payment_back"),k=document.getElementById("payment_type"),h=[],p=document.getElementById("payment_details"),m=document.getElementById("billing_details"),t=null,r=0;window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(b){if(b.status){var c=0,d;for(d in b.options)if(b.options.hasOwnProperty(d)){var e=
document.createElement("div"),g=document.createElement("div"),m=document.createElement("div");e.className="payment-option "+d;g.className="checkbox";m.className="banner "+d;e.appendChild(g);e.appendChild(m);0==c&&e.setAttribute("checked",!0);e.setAttribute("option",c++);var g=b.options[d],l;for(l in g)g.hasOwnProperty(l)&&e.setAttribute(l,g[l]);k.appendChild(e);h[h.length]=e;e.onclick=a}}});b.apply=function(a){t=a;l(p,{forename:t.shipping.forename,surname:t.shipping.surname});l(m,t.shipping)};b.clear=
function(){t=null};d.onclick=function(){var a=C(m);if(0==r)window.ajax({type:"POST",data:a,url:"/async/orders/pay_paypal"}).done(function(c){c.status?(a=c.data,a.paymentType="Paypal",t.billing=a,b.advance(b,t)):u(m,c.error)});else if(1==r){var d=C(p),f;for(f in d)d.hasOwnProperty(f)&&(a[f]=d[f]);window.ajax({type:"POST",data:a,url:"/async/orders/pay_card"}).done(function(d){d.status?(a=d.data,a.paymentType=a.card.type,t.billing=a,b.advance(b,t)):u(c,d.error)})}};g.onclick=function(){b.back(b)};b.el=
c}function E(){function a(b){var c=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("th"),f=document.createElement("th"),g=document.createElement("th"),h=document.createElement("th");language.bind("title",e);language.bind("quantity",f);language.bind("price",g);language.bind("shipping",h);e.className="preview-label text";f.className="preview-label text";g.className="preview-label text";h.className="preview-label text";d.appendChild(e);d.appendChild(f);d.appendChild(g);
d.appendChild(h);c.appendChild(d);for(d=0;d<b.length;++d){var e=document.createElement("tr"),f=document.createElement("td"),g=document.createElement("td"),h=document.createElement("td"),k=document.createElement("td");f.innerHTML=b[d].title;g.innerHTML=b[d].quantity;h.innerHTML=b[d].price;k.innerHTML=b[d].shipping;h.setAttribute("currency","z\u0142");k.setAttribute("currency","z\u0142");f.className="text preview-data";g.className="text preview-data";h.className="text preview-data";k.className="text preview-data";
e.appendChild(f);e.appendChild(g);e.appendChild(h);e.appendChild(k);c.appendChild(e)}return c}var b=this,c=document.getElementById("done_view"),d=document.getElementById("done_advance"),g=document.getElementById("done_back"),k=document.getElementById("data_preview"),h=document.getElementById("order_summary"),p=k.getElementsByClassName("preview-block");d.onclick=function(){window.location="/async/orders/process"};g.onclick=function(){b.back(b)};b.apply=function(b){for(var c=0;c<p.length;++c)if(p[c].hasAttribute("block-type")){var d=
p[c].getAttribute("block-type");b[d]&&l(p[c],b[d])}h.innerHTML=null;h.appendChild(a(b.items));c=document.createElement("div");d=document.createElement("div");c.className="seperator text";language.bind("total",c);d.className="total-price-summary text-invert-light";d.innerHTML=b.total;d.setAttribute("currency","z\u0142");h.appendChild(c);h.appendChild(d)};b.clear=function(){h.innerHTML=null};b.el=c}function H(a,b){function c(b,d){r!=b?(b.el.style.top=getHeight(a)+200+"px",b.el.style.display="block",
b.apply&&d&&b.apply(d),async(function(){var c=[b.el,a];b.el.set={top:150};a.set={h:200+getHeight(b.el)};r&&(r.el.set={o:0},c[c.length]=r.el,window.scrollBodyTo(a));morpheus(c,{top:function(a){return a.set.top},height:function(a){return a.set.h},opacity:function(a){return a.set.o},duration:250,complete:function(){r&&r.el.removeAttribute("style");r=b}})})):morpheus(a,{height:200+getHeight(b.el)+"px",duration:250})}function d(){for(var a=0;a<m.length;++a)p[a].removeAttribute("status");0<m.length&&p[0].setAttribute("status",
0)}function g(a,b){if(a==r){var d=m.indexOf(a);d+1==m.length?l.done():0<=d&&d+1<m.length&&(p[d].setAttribute("status",1),d+=1,c(m[d],b),p[d].setAttribute("status",0))}}function k(a){a==r&&(a=m.indexOf(a),0>a-1?l.done():0<=a&&0<=a-1&&(p[a].removeAttribute("status"),--a,c(m[a]),p[a].setAttribute("status",0)))}function h(b,c){var d=0,e=0,g=getHeight(a);c?(b.style.display="block",d=getHeight(b),e=b.offsetHeight,b.style.height="0px"):(d=getHeight(b),e=b.offsetHeight);d-=(d-e)/2;b.style.opacity=c?0:1;b.set=
{h:c?e:0,m:c?null:0,o:c?1:0};a.set={h:c?d+g:g-d};morpheus([a,b],{height:function(a){return a.set.h},"margin-bottom":function(a){return a.set.m},"margin-top":function(a){return a.set.m},opacity:function(a){return a.set.o},duration:250,complete:function(){c?(b.style.height="",b.style.opacity=""):b.removeAttribute("style")}})}for(var l=this,m=b,p=document.getElementById("progress_view").getElementsByClassName("progress-step"),r=null,q=0;q<m.length;++q)m[q].reset=d,m[q].activate=c,m[q].advance=g,m[q].back=
k,m[q].expand=h;l.init=function(){for(var a=0;a<m.length;++a)m[a].init&&m[a].init()};l.clear=function(){d();for(var b=a.getElementsByTagName("*"),c=0;c<b.length;++c)b[c].hasAttribute("user-input")&&(b[c].parentNode.removeAttribute("unset"),z(b[c],""));for(b=0;b<m.length;++b)m[b].clear()}}function G(){function a(){b.set={w:0};e.set={h:0};morpheus([b,e],{width:function(a){return a.set.w},height:function(a){return a.set.h},duration:350,complete:function(){b.style="";e.style="";e.removeChild(l)}});window.scrollBodyTo(window.shop.el)}
var b=document.getElementById("order"),e=document.getElementById("order_panel"),l=document.getElementById("order_panel_inner"),p=new d,q=new g,h=new k,u=new E,m=new H(e,[p,q,h,u]);c(e);e.removeChild(l);p.show=function(a){order_panel.appendChild(l);b.style.display="inline-block";e.style.display="block";a&&window.scrollBodyTo(e)};p.hide=a;window.events.listen("order",function(a){p.addOrder(a)});m.done=function(){m.clear();a()};m.init();this.el=e}window.addEventListener("load",function(){window.orders=
new G})})();(function(){function C(){var z=document.getElementById("username_input"),l=document.getElementById("password_input"),u=document.getElementById("login"),p=function(){var a=4<z.value.length&&6<l.value.length;u.style.display=a?"block":"none";return a},y=function(){window.ajax({type:"POST",data:{username:z.value,password:l.value},url:"/async/user/login"}).done(function(a){a.status?window.location.href="/":(l.value="",p(),l.focus())})};z.focus();z.onkeyup=function(){p()};l.onkeyup=function(a){p()&&13==
a.keyCode&&y()}}window.addEventListener("load",function(){"/admin"==window.location.pathname&&(window.login=new C)})})();
