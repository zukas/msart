(function(C,D){"function"==typeof define?define(D):"undefined"!=typeof module?module.exports=D():this[C]=D()})("morpheus",function(){function C(a){var q;q=H.length;for(c&&(a=e());q--;)H[q](a);H.length&&B(C)}function D(a,c){var q={},z;if(z=a.match(f))q.rotate=g(z[1],c?c.rotate:null);if(z=a.match(k))q.scale=g(z[1],c?c.scale:null);if(z=a.match(l))q.skewx=g(z[1],c?c.skewx:null),q.skewy=g(z[3],c?c.skewy:null);if(z=a.match(u))q.translatex=g(z[1],c?c.translatex:null),q.translatey=g(z[3],c?c.translatey:null);
return q}function x(a){var c="";"rotate"in a&&(c+="rotate("+a.rotate+"deg) ");"scale"in a&&(c+="scale("+a.scale+") ");"translatex"in a&&(c+="translate("+a.translatex+"px,"+a.translatey+"px) ");"skewx"in a&&(c+="skew("+a.skewx+"deg,"+a.skewy+"deg)");return c}function t(a){var c=a.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(c?"#"+(16777216|c[1]<<16|c[2]<<8|c[3]).toString(16).slice(1):a).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function v(a){return a.replace(/-(.)/g,function(a,c){return c.toUpperCase()})}
function y(a){return"function"==typeof a}function d(a){return Math.sin(a*Math.PI/2)}function b(a,c,q,z,h,f){function k(a){a-=u;if(a>G||p){f=isFinite(f)?f:1;p?w&&c(f):c(f);var e;a:if(a=H,e=void 0,Array.prototype.indexOf)e=a.indexOf(k);else{for(e=0;e<a.length;++e)if(a[e]===k)break a;e=void 0}0<=e&&(a=H.slice(e+1),H.length=e,H=H.concat(a));return q&&q.apply(F)}isFinite(f)?c(l*z(a/G)+h):c(z(a/G))}z=y(z)?z:m.easings[z]||d;var G=a||1E3,F=this,l=f-h,u=e(),p=0,w=0;1===H.push(k)&&B(C);return{stop:function(a){p=
1;(w=a)||(q=null)}}}function r(a,c){var q=a.length,z=[],e,f;for(e=0;e<q;++e)z[e]=[a[e][0],a[e][1]];for(f=1;f<q;++f)for(e=0;e<q-f;++e)z[e][0]=(1-c)*z[e][0]+c*z[parseInt(e+1,10)][0],z[e][1]=(1-c)*z[e][1]+c*z[parseInt(e+1,10)][1];return[z[0][0],z[0][1]]}function g(a,c,q,z,e){return(q=h.exec(a))?(e=parseFloat(q[2]))&&c+("+"==q[1]?1:-1)*e:parseFloat(a)}function m(a,c){var e=a?e=isFinite(a.length)?a:[a]:[],f,h=c.complete,k=c.duration,B=c.easing,l=c.bezier,u=[],H=[],E=[],d=[],m,n;l&&(m=c.left,n=c.top,delete c.right,
delete c.bottom,delete c.left,delete c.top);for(f=e.length;f--;){u[f]={};H[f]={};E[f]={};if(l){var I=F(e[f],"left"),A=F(e[f],"top"),C=[g(y(m)?m(e[f]):m||0,parseFloat(I)),g(y(n)?n(e[f]):n||0,parseFloat(A))];d[f]=y(l)?l(e[f],C):l;d[f].push(C);d[f].unshift([parseInt(I,10),parseInt(A,10)])}for(var J in c){switch(J){case "complete":case "duration":case "easing":case "bezier":continue}var I=F(e[f],J),R,A=y(c[J])?c[J](e[f]):c[J];"string"==typeof A&&G.test(A)&&!G.test(I)?delete c[J]:(u[f][J]="transform"==
J?D(I):"string"==typeof A&&G.test(A)?t(I).slice(1):parseFloat(I),H[f][J]="transform"==J?D(A,u[f][J]):"string"==typeof A&&"#"==A.charAt(0)?t(A).slice(1):g(A,parseFloat(I)),"string"==typeof A&&(R=A.match(w))&&(E[f][J]=R[1]))}}return b.apply(e,[k,function(a,h,k){for(f=e.length;f--;){l&&(k=r(d[f],a),e[f].style.left=k[0]+"px",e[f].style.top=k[1]+"px");for(var G in c){h=a;var B=E;k=u;var F=H,w=G,b=f,g=void 0;if("transform"==w){g={};B=void 0;for(B in k[b][w])g[B]=B in F[b][w]?Math.round(1E3*((F[b][w][B]-
k[b][w][B])*h+k[b][w][B]))/1E3:k[b][w][B];h=g}else if("string"==typeof k[b][w]){k=k[b][w];F=F[b][w];w=[];B=g=g=b=void 0;for(b=0;6>b;b++)g=Math.min(15,parseInt(k.charAt(b),16)),B=Math.min(15,parseInt(F.charAt(b),16)),g=Math.floor((B-g)*h+g),g=15<g?15:0>g?0:g,w[b]=g.toString(16);h="#"+w.join("")}else g=Math.round(1E3*((F[b][w]-k[b][w])*h+k[b][w]))/1E3,w in p||(g+=B[b][w]||"px"),h=g;"transform"==G?e[f].style[z]=x(h):"opacity"!=G||q?e[f].style[v(G)]=h:e[f].style.filter="alpha(opacity="+100*h+")"}}},h,
B])}var n=document,A=window,I=A.performance,E=I&&(I.now||I.webkitNow||I.msNow||I.mozNow),e=E?function(){return E.call(I)}:function(){return+new Date},c=!1,a=n.documentElement,G=/^rgb\(|#/,h=/^([+\-])=([\d\.]+)/,w=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,f=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,k=/scale\(((?:[+\-]=)?([\d\.]+))\)/,l=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,u=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,p={lineHeight:1,
zoom:1,zIndex:1,opacity:1,transform:1},z=function(){var a=n.createElement("a").style,c=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],q;for(q=0;q<c.length;q++)if(c[q]in a)return c[q]}(),q="undefined"!==typeof n.createElement("a").style.opacity,F=n.defaultView&&n.defaultView.getComputedStyle?function(a,c){c="transform"==c?z:c;c=v(c);var q=null,e=n.defaultView.getComputedStyle(a,"");e&&(q=e[c]);return a.style[c]||q}:a.currentStyle?function(a,c){c=v(c);if("opacity"==c){var q=
100;try{q=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(e){try{q=a.filters("alpha").opacity}catch(z){}}return q/100}q=a.currentStyle?a.currentStyle[c]:null;return a.style[c]||q}:function(a,c){return a.style[v(c)]},B=function(){return A.requestAnimationFrame||A.webkitRequestAnimationFrame||A.mozRequestAnimationFrame||A.msRequestAnimationFrame||A.oRequestAnimationFrame||function(a){A.setTimeout(function(){a(+new Date)},17)}}();B(function(a){c=1E12<a!=1E12<e()});var H=[];m.tween=b;m.getStyle=
F;m.bezier=r;m.transform=z;m.parseTransform=D;m.formatTransform=x;m.animationFrame=B;m.easings={};return m});(function(C,D,x){function t(b,E,e,c){e=e||"width";var a;a=(E.match(g)||[])[2];var G="px"===a?1:m[a+"toPx"],h=/r?em/i;if(G||h.test(a)&&!c)b=G?b:"rem"===a?d:"fontSize"===e?b.parentNode||b:b,G=G||parseFloat(v(b,"fontSize")),b=parseFloat(E)*G;else{c=b.style;a=c[e];try{c[e]=E}catch(w){return 0}b=c[e]?parseFloat(v(b,e)):0;c[e]=a!==x?a:null}return b}function v(d,E){var e,c,a=/^top|bottom/,G=["paddingTop","paddingBottom","borderTop","borderBottom"],h=4;e=b?b(d)[E]:(c=d.style["pixel"+E.charAt(0).toUpperCase()+
E.slice(1)])?c+"px":"fontSize"===E?t(d,"1em","left",1)+"px":d.currentStyle[E];c=(e.match(g)||[])[2];if("%"===c&&r)if(a.test(E)){for(a=(c=d.parentNode||d).offsetHeight;h--;)a-=parseFloat(v(c,G[h]));e=parseFloat(e)/100*a+"px"}else e=t(d,e);else("auto"===e||c&&"px"!==c)&&b?e=0:c&&"px"!==c&&!b&&(e=t(d,e)+"px");return e}var y=D.createElement("test"),d=D.documentElement,b=(D=D.defaultView)&&D.getComputedStyle,r,g=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,m={};D=[1/25.4,1/2.54,1/72,1/6];var n="mm cm pt pc in mozmm".split(" "),
A=6;d.appendChild(y);b&&(y.style.marginTop="1%",r="1%"===b(y).marginTop);for(;A--;)m[n[A]+"toPx"]=D[A]?D[A]*m.inToPx:t(y,"1"+n[A]);d.removeChild(y);y=x;C.Length={toPx:t}})(this,this.document);(function(C){function D(d){var b=null,r=new XMLHttpRequest;r.open(d.type,d.url,!0);d.files||r.setRequestHeader("Content-type","application/json");d.cache&&r.setRequestHeader("Cache-Control","max-age=86400");r.onloadend=function(){200==r.status?b&&b(JSON.parse(r.responseText)):b&&b(null);r=null};d.files?r.send(d.data):r.send(d.data?JSON.stringify(d.data):null);this.done=function(d){b=d}}function x(d){var b=d.currentStyle||window.getComputedStyle(d);return Length.toPx(d,b.marginTop)}function t(){var d=
[],b=function(b,d){return b-d},r=function(g,m,n){var A=d.length;m=null==m?0:m;n=null==n?A-1:n;var t=m+Math.floor((n-m)/2);if(0==A)return A;if(0<b(g,d[n]))return n+1;if(0>b(g,d[m]))return m;A=b(g,d[t]);if(0==A)return t;if(0>A)return r(g,m,t-1);if(0<A)return r(g,t+1,n)};this.setCompare=function(d){d&&(b=d)};this.insert=function(b){d.splice(r(b),0,b)};this.length=function(){return d.length};this.at=function(b){return d[b]};this.grab=function(b){return d.splice(0,b)};this.data=function(){return d}}function v(d){var b=
function(){var b=window.performance||{};b.now=function(){return b.now||b.webkitNow||b.msNow||b.oNow||b.mozNow||function(){return(new Date).getTime()}}();return b.now()},r=function(){return d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.msRequestAnimationFrame||d.oRequestAnimationFrame||function(g){d.setTimeout(function(){g(b())},1E3/60)}}(),g=function(){return new function(){var b=new t,d=function(g){0<b.length()&&r(d);var t,E;t=0;for(E=b.length();t<E&&!(b.at(t).timestamp>
g);++t);g=b.grab(t);t=0;for(E=g.length;t<E;++t)g[t].func.apply(null,g[t].args)};b.setCompare(function(b,d){return b.timestamp-d.timestamp});this.addTask=function(g){b.insert(g);0<b.length()&&r(d)}}}();d.async=function(d,n,r){"Function"!=classOf(d)||n&&"Array"!=classOf(n)||g.addTask({timestamp:r?b()+r:0,func:d,args:n||[]})}}function y(d){var b={};d.events={listen:function(d,g){var m=b[d]||[];m[m.length]=g;b[d]=m},remove:function(d,g){var m=b[d]||[],n=m.indexOf(g);0<=n&&m.splice(n,1)},emit:function(r,
g){var m=b[r];if(m)for(var n=0;n<m.length;++n)d.async(m[n],g)}}}C.hashCode=function(d){var b=0,r,g,m;if(0===d.length)return b;r=0;for(m=d.length;r<m;r++)g=d.charCodeAt(r),b=(b<<5)-b+g,b|=0;return b};C.DropInsertManager=function(){function d(){m.setAttribute("position",0);m.parentNode&&m.parentNode.removeChild(m)}var b=this,r=null,g=null,m=document.createElement("div");m.className="drop-point";m.ondragover=function(b){b.preventDefault()};m.ondrop=function(d){d.preventDefault();null!=r&&null!=g&&r!=
g&&(d=m.getAttribute("position"),1==d&&b.insertBefore?b.insertBefore(r,g):2==d&&b.insertAfter&&b.insertAfter(r,g))};b.beginMove=function(b){r=b};b.hoverTarget=function(b,t){if(b==r)d(),g=null;else{b!=g&&(d(),g=b,g.el.appendChild(m));var v=g.el.offsetWidth,E=v/2,v=v-t,e=m.getAttribute("position");v>E&&1!=e?m.setAttribute("position",1):v<E&&2!=e&&m.setAttribute("position",2)}};b.endMove=d};C.MSInputObject=function(d){var b=this;b.__get_value=null;b.__set_value=null;d=d||{};if(window.admin||d.user){if(d.multiline){b.el=
document.createElement("textarea");var r=b.el.offsetHeight-b.el.clientHeight,g=0,m=b.el.clientHeight,n=function(){async(function(){var d=b.el.value.length;d<g&&(b.el.style.height="auto");var n=b.el.scrollHeight+r;0<n&&(b.el.style.height=n+"px");g=d;n!=m&&(m=n)})};b.__get_value=function(){return b.el.value};b.__set_value=function(d){b.el.value=d;n()};b.el.addEventListener("keydown",n);b.el.addEventListener("keyup",n)}else b.el=document.createElement("input"),b.el.setAttribute("type","text"),b.__get_value=
function(){return b.el.value},b.__set_value=function(d){b.el.value=d};b.el.onchange=function(){if(b.onchange)b.onchange(b)};d.placeholder&&this.el.setAttribute("placeholder",d.placeholder)}else b.el=document.createElement("div"),b.__get_value=function(){return b.el.innerHTML},b.__set_value=function(d){b.el.innerHTML=d};d.className&&(b.el.className=d.className);d.id&&(b.el.id=d.id)};MSInputObject.prototype.value=function(){return this.__get_value()||""};MSInputObject.prototype.setValue=function(d){this.__set_value(d||
"")};C.MSDivObject=function(d){this.el=d||document.createElement("div")};MSDivObject.prototype.addClass=function(d){-1==this.el.className.indexOf(d)&&(this.el.className=this.el.className.concat(" ",d))};MSDivObject.prototype.removeClass=function(d){-1<this.el.className.indexOf(d)&&(this.el.className=this.el.className.replace(d,"").replace("  "," ").trim())};MSDivObject.prototype.setPlaceholder=function(d){if(window.admin){var b=this,r=document.createElement("span"),g=!0;b.has_placeholder=!0;r.className=
"placeholder";r.innerHTML=d;0==b.el.innerHTML.length&&(b.el.appendChild(r),b.addClass("placeholder-visible"));b.el.addEventListener("text-changed",function(){0==b.el.innerHTML.length?(g||(b.addClass("placeholder-visible"),g=!0),b.el.appendChild(r)):g&&(g=!1,b.removeClass("placeholder-visible"))});b.el.addEventListener("focus",function(){g&&(b.el.removeChild(r),b.removeClass("placeholder-visible"),g=!1)});b.el.addEventListener("blur",function(){0==b.innerHTML.length&&(b.el.appendChild(r),b.addClass("placeholder-visible"),
g=!0)});b.has_text=function(){return!g}}};MSDivObject.prototype.refresh=function(){(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed"))};MSDivObject.prototype.setText=function(d){d&&(this.el.innerHTML=d,(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed")))};MSDivObject.prototype.getText=function(){return this.has_placeholder?this.has_text()?this.el.innerHTML:"":this.el.innerHTML};MSDivObject.prototype.textEdit=function(d){if(window.admin){var b=
this;d=d||{};d.textItem=d.textItem||b;b.el.addEventListener("click",function(){if(!b.in_edit){b.in_edit=!0;var r=d.textItem.getText(),g=d.multiline?document.createElement("textarea"):document.createElement("input");d.multiline&&d.autosize&&g.addEventListener("keydown",function(){async(function(){g&&(g.style.height=g.scrollHeight+"px")})});d.multiline||(g.type="text");g.className="inplace-text-edit";g.value=r;g.style.width=b.el.offsetWidth-(d.offsetWidth||0)+"px";g.style.height=b.el.offsetHeight-(d.offsetHeight||
0)+"px";b.el.innerHTML="";b.el.appendChild(g);g.focus();g.onblur=function(){d.textItem.setText(g.value);g=null;b.in_edit=!1;d.textItem!=b&&(b.el.innerHTML="",b.el.appendChild(d.textItem.el),b.refresh())}}})}};MSDivObject.prototype.loadImage=function(d){var b=this,r=d.url;async(function(){b.el.style.backgroundImage="url("+r+")"})};C.FileUpload=function(d){var b=this,r=document.createElement("div"),g=document.createElement("input");d=d||{multiple:!1};d.id&&(r.id=d.id);d.className&&(r.className=d.className);
g.type="file";g.name="file";g.accept="image/*";g.multiple=d.multiple;r.appendChild(g);g.onchange=function(d){b.preview&&b.preview(d.target.files)};b.el=r};C.DropDown=function(d,b){function r(a,c){if(a.manager)a.manager.setValue(c);else if(a.firstChild&&3==a.firstChild.nodeType)a.firstChild.nodeValue=c;else{var e=document.createTextNode(c);a.firstChild?a.insertBefore(e,a.firstChild):a.appendChild(e)}}function g(){var a=null,c=[];this.bind=function(e){c[c.length]=e;a&&r(e,a)};this.unbind=function(a){a=
c.indexOf(a);0<=a&&c.splice(a,1)};this.setValue=function(e){if(a=e)for(e=0;e<c.length;++e)r(c[e],a)}}var m=this,n=b||document.createElement("div"),t=!d.adminOnly||window.admin,v=t?document.createElement("img"):null,E=t?document.createElement("lu"):null,e=!1,c=!1,a={},G=null,h=!1,w=function(c){var h=a[c];h&&(G&&G.unbind(n),n.setAttribute("current-data-id",c),G=h,G.bind(n),t&&e&&m.close(),m.changed&&async(m.changed,[c]))};n.controller=m;m.addItem=function(c,e){var b=new g,u=null;a[c]=b;e&&b.setValue(c);
t&&(u=document.createElement("li"),u.className="dropdown-item text-invert",u.onclick=function(){h||w(c)},E.appendChild(u),b.bind(u));G||w(c);return{controller:b,item:u}};m.addVirtual=function(){var a=document.createElement("li");a.className="dropdown-item virtual text-invert";E.appendChild(a);return a};m.removeVirtual=function(a){E.contains(a)&&E.removeChild(a)};n.className=d.className?0<n.className.length?n.className+(" dropdown-container no-select text "+d.className):"dropdown-container no-select text "+
d.className:0<n.className.length?n.className+" dropdown-container text":"dropdown-container text";t&&(v.src=d.src||"../images/down.png",n.appendChild(v),E.className="dropdown-list no-select",n.appendChild(E),n.onclick=function(){h||c||(m.beforeOpen&&m.beforeOpen(),e=!0,E.style.display="block")},n.onmouseleave=function(){h||m.close()});m.el=n;m.manual=function(){h=!0};m.auto=function(){h=!1};m.open=function(){h&&(e=!0,E.style.display="block")};m.close=function(){e&&(m.beforeClose&&m.beforeClose(),
E.style.right="-200%",async(function(){E.removeAttribute("style")}))};m.setText=function(a){r(n,a)};m.text=function(){return n.firstChild&&3==n.firstChild.nodeType?n.firstChild.nodeValue:""};m.value=function(){return n.getAttribute("current-data-id")};m.setValue=function(a){w(a)};m.lock=function(){c=!0;n.setAttribute("locked",!0)};m.unlock=function(){c=!1;n.removeAttribute("locked")}};C.classOf=function(d){return/\[object (\w+)\]/.exec(Object.prototype.toString.call(d))[1]};C.getHeight=function(d){var b;
document.all?(b=parseInt(d.currentStyle.height),d=parseInt(d.currentStyle.marginTop,10)+parseInt(d.currentStyle.marginBottom,10)):(b=parseInt(document.defaultView.getComputedStyle(d,"").getPropertyValue("height")),d=parseInt(document.defaultView.getComputedStyle(d,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(d,"").getPropertyValue("margin-bottom")));return b+d};C.browser={opera:!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),firefox:"undefined"!==typeof InstallTrigger,
safari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),ie:!!document.documentMode};C.browser.chrome=!!window.chrome&&!window.browser.opera;C.ajax=function(d){return new D(d)};C.scrollBodyTo=function(d){var b=document.getElementById("content-wrapper"),r=parseInt(d.offsetTop-x(d)),g=parseInt(b.scrollTop);for(d=d.parentNode;d&&d!=b;)r+=parseInt(d.offsetTop-x(d)),d=d.parentNode;if(g!=r){var m=r-g;morpheus.tween(500,function(d){d=g+m*d;0<=d&&d<=b.scrollHeight&&(b.scrollTop=
d)})}};C.addEventListener("load",function(){new v(C);new y(C)})})(this);(function(){function C(){function x(b,d){if(b.controller)b.controller.setValue(d);else if(b.firstChild&&3==b.firstChild.nodeType&&b.firstChild.nodeValue)b.firstChild.nodeValue=d;else{var n=document.createTextNode(d);b.firstChild?b.insertBefore(n,b.firstChild):b.appendChild(n)}}var t="en",v={},y={};this.bind=function(b,d){x(d,D[t][b]);var n=v[b];n?n[n.length]=d:v[b]=[d]};this.bindInput=function(b,d){d.placeholder=D[t][b];var n=y[b];n?n[n.length]=d:y[b]=[d]};this.unbind=function(b){for(var d in v)if(v.hasOwnProperty(d)&&
0<v[d].length){var n=v[d].indexOf(b);-1!=n&&v[d].splice(n,1)}};this.unbindInput=function(b){for(var d in y)if(y.hasOwnProperty(d)&&0<y[d].length){var n=y[d].indexOf(b);-1!=n&&y[hey].splice(n,1)}};this.change=function(b){if(D[b]&&t!=b){t=b;for(var d in v)if(v.hasOwnProperty(d)&&0<v[d].length){b=v[d];for(var n=b.length,r=0;r<n;++r)x(b[r],D[t][d])}for(d in y)if(y.hasOwnProperty(d)&&0<y[d].length)for(b=y[d],n=b.length,r=0;r<n;++r)b[r].placeholder=D[t][d]}};for(var d=document.getElementsByTagName("*"),
b=0;b<d.length;++b)if(d[b].hasAttribute("lang")){var r=d[b].getAttribute("lang");this.bind(r,d[b])}else d[b].hasAttribute("placeholder-lang")&&(r=d[b].getAttribute("placeholder-lang"),this.bindInput(r,d[b]));this.change("pl")}var D={en:{about:"About",shop:"Shop",orders:"Orders",gallery:"Gallery",contact:"Contact",description:"Description",title:"Title",type:"Type",availability:"Availability",process:"Order Process",price:"Price",quantity:"Quantity",shipping:"Shipping",qandp:"Quantity & Price",payment_opt:"Payment methods",
lead:"Lead times",individual:"Individual",common:"Common",available:"Available",demand:"On-Demand",keep:"Keep in Shop",move:"Move to Gallery",remove:"Remove","delete":"Delete",save:"Save",close:"Close",order:"Order",aboutus:"About Us",office:"Our Office",contactus:"Contact Us",name:"Name",surname:"Surname",email:"E-mail",address:"Address",country:"Country",postcode:"Post Code",message:"Message"},pl:{about:"Pracownia",shop:"Sklep",orders:"Zam\u00f3wienie",order:"Zam\u00f3w",gallery:"Galeria",contact:"Kontakt",
description:"Opis",title:"Nazwa",type:"Rodzaj",availability:"Dost\u0119pno\u015b\u0107",process:"Akcja",price:"Cena",close:"Zamknij",save:"Zapisz","delete":"Kasuj",payment_opt:"Forma p\u0142atno\u015bci",lead:"Czas realizacji",quantity:"Ilo\u015b\u0107",shipping:"Transport",total:"Koszt ca\u0142kowity",checkout:"Dalej",about_us:"O nas",office:"Dane kontaktowe",about_us_value:"",send:"Wy\u015blij",personal_details:"Dane osobowe",forename:"Imi\u0119",surname:"Nazwisko",email:"Email",phone:"Numer telefonu",
shipping_address:"Adres wysy\u0142ki",company:"Nazwa firmy",address:"Ulica",city:"Miasto",county:"Wojew\u00f3dztwo",post_code:"Kod pocztowy",country:"Kraj",next:"Kontynuuj",back:"Wr\u00f3\u0107",payment_type:"Rodzaj p\u0142atno\u015bci",card_details:"Szczeg\u00f3\u0142y karty kredytowej",card_no:"Numer karty",cvv:"CVV",expiry:"Termin wa\u017cno\u015bci",billing_address:"Adres fakturowania",vat:"NIP",full_name:"Imi\u0119 i nazwisko",price_summary:"Podsumowanie",pay:"Zap\u0142a\u0107",message:"Wiadomo\u015b\u0107",
individual:"Pojedynczy",common:"Zbiorowy",advert:"Og\u0142oszenie",available:"Dost\u0119pny",demand:"Na zam\u00f3wienie",keep:"Sklep",move:"Galeria",remove:"Usu\u0144",today:"Dzisiaj",l_3_day:"3 dni",l_week:"Tydzie\u0144",l_month:"Miesi\u0105c",l_time:"Ca\u0142y czas",lead_avail:"- Realizacja zam\u00f3wienia: 1 dzie\u0144 roboczy\n- Czas dostawy: 2 - 3 dni robocze",lead_wait:"- Realizacja zam\u00f3wienia: 2 - 3 tygodnie\n- Czas dostawy: 2 - 3 dni robocze",components:"Nazwa",none:"Bez nazwy",labeled:"Oznaczona",
projects:"Projekt",category:"Kategoria",allitems:"Wszystkie",lowprice:"Cena malej\u0105co",hightprice:"Cena rosn\u0105co",iagree:"Akceptuj\u0119",terms:"Regulamin sklepu",workshop:"Warsztaty",duration:"Czas trwania",timetable:"Terminy zaj\u0119\u0107",location:"Lokalizacja"}};window.addEventListener("load",function(){window.language=new C})})();(function(){function C(){var x=document.getElementById("main_menu"),t=document.getElementById("menu_list"),v=x.getElementsByClassName("menu_item"),y=!1,d={};x.onclick=function(){y?(y=!1,t.removeAttribute("style")):(t.style.display="block",y=!0)};for(x=0;x<v.length;++x){var b=v[x].getAttribute("scrollto");d[b]=document.getElementById(b);v[x].onclick=function(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0;y=!1;t.removeAttribute("style");window.scrollBodyTo(d[b.target.getAttribute("scrollto")])}}}
function D(){if(window.mobile)new C;else{var x=document.getElementById("header"),t=document.getElementById("content-wrapper"),v=document.getElementById("title"),y=document.getElementById("main_menu"),d=y.getElementsByClassName("menu_item"),b=[x,t,v,y],r={},g=!1,m;for(m in d)if(d.hasOwnProperty(m)){var n=d[m].getAttribute("scrollto");r[n]=document.getElementById(n);d[m].onclick=function(b){window.scrollBodyTo(r[b.target.getAttribute("scrollto")])}}x.unset={height:160};t.unset={top:160};v.unset={height:120,
width:720,left:"50%",marginLeft:-360};y.unset={top:120,left:"50%",marginLeft:-350};x.set={height:60};t.set={top:60};v.set={height:60,width:350,left:"0%",marginLeft:0};y.set={top:15,left:"100%",marginLeft:-700};for(m in b){var d=b[m].unset,A;for(A in d)b[m].style[A]=d[A]}window.events.listen("requestHeaderHeight",function(b){b(x.offsetHeight)});window.addEventListener("resize",function(){g&&(v.style.marginLeft=(x.offsetWidth<y.offsetWidth+350?-350:0)+"px")});t.addEventListener("scroll",function(){var d=
t.scrollTop;g&&0==d?(g=!1,morpheus(b,{height:function(b){return b.unset.height},width:function(b){return b.unset.width},top:function(b){return b.unset.top},left:function(b){return b.unset.left},marginLeft:function(b){return b.unset.marginLeft},duration:350,complete:function(){window.events.emit("headerChanged",[x.unset.height])}})):!g&&0<d&&(g=!0,v.set.marginLeft=x.offsetWidth<y.offsetWidth+350?-350:0,morpheus(b,{height:function(b){return b.set.height},width:function(b){return b.set.width},top:function(b){return b.set.top},
left:function(b){return b.set.left},marginLeft:function(b){return b.set.marginLeft},duration:500,complete:function(){window.events.emit("headerChanged",[x.set.height])}}))})}}window.addEventListener("load",function(){window.header=new D})})();(function(){function C(x){var t=this,v=document.createElement("div"),y=new MSInputObject({multiline:!0,placeholder:"Description",className:"about-column-text text"}),d=window.admin?document.createElement("div"):null;v.className="about-column";y.setValue(x);v.appendChild(y.el);d&&(d.className="remove-about-column",v.appendChild(d),d.onclick=function(){t.remove&&t.remove(t)});t.el=v;t.text=function(){return y.value()}}function D(){var x=document.getElementById("about_panel"),t=document.getElementById("columns");
document.getElementById("demo_show");var v=window.admin?document.getElementById("create_about_column"):null,y=window.admin?document.getElementById("save_about_column"):null,d=window.admin?function(d){t.removeChild(d.el);b.splice(b.indexOf(d),1)}:null,b=[];window.admin&&x.setAttribute("admin",!0);v&&(v.onclick=function(){var r=new C;r.remove=d;b.push(r);t.appendChild(r.el)});y&&(y.onclick=function(){for(var d=[],g=0;g<b.length;++g)d.push(b[g].text());window.ajax({type:"POST",data:{fields:d},url:"/async/about/save"})});
window.ajax({type:"POST",url:"/async/about/load"}).done(function(r){if(r.status&&r.fields){var g=document.createDocumentFragment(),m;for(m in r.fields){var n=new C(r.fields[m]);n.remove=d;b.push(n);g.appendChild(n.el)}t.appendChild(g)}})}window.addEventListener("load",function(){window.home=new D})})();(function(){function C(b){var e=this,c=b.id,a=b.file?!0:!1,d=b.file,h=null,w=!1,f=null,k=!1,l=new MSDivObject;b=window.admin?document.createElement("div"):null;l.el.className="picture-thumb";b&&(b.className="picture-thumb-remove",b.onclick=function(){e.removed&&e.removed(c)},l.el.appendChild(b));window.admin&&(l.el.setAttribute("draggable",!0),l.el.ondragstart=function(a){e.beginMove&&(a.dataTransfer.setData("target",c),e.beginMove(e))},l.el.ondragover=function(a){a.preventDefault();e.hoverTarget&&
"picture-thumb"==a.target.className&&e.hoverTarget(e,a.layerX)},l.el.ondragend=function(a){a.preventDefault();e.endMove&&e.endMove(e)});l.el.onclick=function(){e.click&&e.click(e)};e.el=l.el;e.id=function(){return c};e.isTemp=function(){return a};e.file=function(){return d};e.data=function(){return h};e.remove=function(){w=!0;return a};e.pack=function(){return{id:c,temp:a,file:d,data:h,removed:w}};e.onload=function(a){k&&a?async(a,[e]):f=a};e.commit=function(e){if(w&&!a)window.ajax({type:"POST",data:{id:c},
url:"/async/images/delete"}).done(function(a){e()});else if(a){var b=new FormData;b.append("file",d);window.ajax({type:"POST",data:b,files:!0,url:"/async/images/save"}).done(function(a){e(a.id)})}else e(c)};e.update=function(e){c=e.id;a=e.temp;d=e.file;h=e.data;w=e.removed;l.el.style.backgroundImage=a?"url("+h+")":"url(/async/thumb/load/"+c+")"};a?(b=new FileReader,b.onload=function(a){h=a.target.result;l.el.style.backgroundImage="url("+h+")";k=!0;f&&(async(f,[e]),f=null)},b.readAsDataURL(d)):(l.loadImage({url:"/async/thumb/load/"+
c,color:"#e0e0e0",shadow:!0,radius:24,width:6,length:22,lines:15,speed:.75}),k=!0,f&&(async(f,[e]),f=null))}function D(){var b=this,e=document.createElement("div"),c=document.createElement("div"),a=document.createElement("div"),d=new MSDivObject,h=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,w=null,f={},k=[],l=window.admin?new DropInsertManager:null,u=function(c){var b=f[c];b&&(b.remove()&&delete f[c],a.removeChild(b.el));c=k.indexOf(c);0<=c&&k.splice(c,1)},p=function(a){a.isTemp()?
d.el.style.backgroundImage="url("+a.data()+")":d.loadImage({url:"/async/images/load/"+a.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});d.el.hasAttribute("current")&&scrollBodyTo(e);d.el.setAttribute("current",a.id())};window.admin&&(l.insertBefore=function(c,b){var e=k.indexOf(c.id()),d=null;0<=e&&(k.splice(e,1),d=k.indexOf(b.id()),0<=d&&(k.splice(d,0,c.id()),a.removeChild(c.el),a.insertBefore(c.el,b.el)))},l.insertAfter=function(c,b){var e=k.indexOf(c.id()),d=null;
0<=e&&(k.splice(e,1),d=k.indexOf(b.id()),0<=d&&(k.splice(d+1,0,c.id()),a.removeChild(c.el),(e=b.el.nextElementSibling)?a.insertBefore(c.el,e):a.appendChild(c.el)))});e.className="picture-manager";c.className="picture-container";a.className="picture-carousel";c.appendChild(a);d.el.className="picture-preview";h&&(a.appendChild(h.el),h.preview=function(a){if(a){b.beginAdd();for(var c=null,e=0;e<a.length;++e){var d=new C({id:String(hashCode(a[e].name)),file:a[e]});c||(c=d);b.add(d)}b.endAdd();b.show(c)}});
e.appendChild(d.el);e.appendChild(c);b.el=e;b.imageList=function(){return k};b.commit=function(a){var c=function(a,e,b,d,h){a==e?h(d):f[b[a]].commit(function(z){z&&d.push(z);c(a+1,e,b,d,h)})};c(0,k.length,k,[],a)};b.beginAdd=function(){null==w&&(w=document.createDocumentFragment())};b.endAdd=function(){if(w&&(a.appendChild(w),w=null,0<k.length))f[k[0]].onload(p)};b.present=function(a){(a=f[a])&&async(p,[a])};b.add=function(a){w&&!f[a.id()]&&(k.push(a.id()),f[a.id()]=a,a.removed=u,a.click=p,window.admin&&
(a.beginMove=l.beginMove,a.hoverTarget=l.hoverTarget,a.endMove=l.endMove),w.appendChild(a.el))};b.show=function(a){var c=function(){if(w)async(c);else if(a)a.onload(p)};async(c)}}function x(){var b=document.createElement("table"),e=new MSInputObject({placeholder:"Duration",className:"text"}),c=new MSInputObject({placeholder:"Price",className:"text"});language.bindInput("duration",e.el);language.bindInput("price",c.el);var a=document.createElement("tr"),d=document.createElement("th"),h=document.createElement("th");
a.className="text-invert";language.bind("duration",d);language.bind("price",h);a.appendChild(d);a.appendChild(h);b.appendChild(a);a=document.createElement("tr");d=document.createElement("td");h=document.createElement("td");d.appendChild(e.el);a.appendChild(d);h.appendChild(c.el);a.appendChild(h);b.appendChild(a);b.className="single-item";this.el=b;this.value=function(){return{duration:e.value(),price:c.value()}};this.setValue=function(a){e.setValue(a.duration);c.setValue(a.price)}}function t(){var b=
document.createElement("table"),e=document.createElement("tr"),c=document.createElement("th"),a=document.createElement("th"),d=document.createElement("tr"),h=document.createElement("td"),w=document.createElement("td");e.className="text-invert";language.bind("duration",c);language.bind("price",a);e.appendChild(c);e.appendChild(a);b.appendChild(e);d.appendChild(h);d.appendChild(w);b.appendChild(d);h.setAttribute("currency","godz.");w.setAttribute("currency","z\u0142");this.el=b;this.value=function(){return current};
this.setValue=function(a){h.innerHTML=a.duration;w.innerHTML=a.price}}function v(b){b=document.createElement("div");var e=window.admin?new x:new t;b.appendChild(e.el);b.className="price text advert-hide";this.el=b;this.value=function(){return e.value()};this.setValue=function(c){c&&e.setValue(c)}}function y(){function b(){this.removeAttribute("error");this.onfocus=null}var e=document.createElement("div"),c=document.createElement("div"),a=document.createElement("input"),d=document.createElement("input"),
h=new MSInputObject({className:"message text",multiline:!0,user:!0});e.className="workshop-item-contact-panel";c.className="text-header header-text";a.className="name text";d.className="email text";language.bind("contact",c);language.bindInput("full_name",a);language.bindInput("email",d);language.bindInput("message",h.el);e.appendChild(c);e.appendChild(a);e.appendChild(d);e.appendChild(h.el);this.el=e;this.value=function(){return{name:a.value,email:d.value,message:h.value()}};this.error=function(c){for(var e in c)"name"==
e?(a.setAttribute("error",!0),a.onfocus=b):"email"==e?(d.setAttribute("error",!0),d.onfocus=b):"message"==e&&(h.el.setAttribute("error",!0),h.el.onfocus=b)}}function d(){function b(a){var c=this,e=document.createElement("div"),d=window.admin?document.createElement("input"):document.createElement("div"),h=window.admin?new Flatpickr(d,{locale:Flatpickr.l10ns.pl,enableTime:!0,minDate:new Date,time_24hr:!0,dateFormat:"F j, Y H:i",onChange:function(a){1==a.length&&(f=a[0])}}):null,q=window.admin?document.createElement("div"):
null,f=a;e.className="timetable-element";d.className="timetable-element-input text-invert";e.appendChild(d);window.admin?(q.className="timetable-element-remove",e.appendChild(q),h.setDate(f),q.onclick=function(){c.remove(c)}):(a=Flatpickr.l10ns.pl.months.longhand[f.getMonth()]+" "+f.getDate()+", "+f.getFullYear()+" "+f.getHours()+":"+(10>f.getMinutes()?"0"+f.getMinutes():f.getMinutes()),d.innerHTML=a);c.value=function(){return f.valueOf()};c.el=e}var e=this,c=document.createElement("div"),a=window.admin?
document.createElement("div"):null,d=window.admin?document.createElement("input"):null,h=window.admin?new Flatpickr(d,{locale:Flatpickr.l10ns.pl,enableTime:!0,minDate:new Date,time_24hr:!0,dateFormat:"F j, Y H:i",onClose:function(a){h.clear();h.jumpToDate(new Date);1==a.length&&e.createTimetable(a[0])}}):null,w=[],f=window.admin?function(a){c.removeChild(a.el);a=w.indexOf(a);0<=a&&w.splice(a,1)}:null;c.className="timetable-list";window.admin&&(a.className="timetable-add",a.appendChild(d),c.appendChild(a));
e.createTimetable=function(e){e=new b(e);w[w.length]=e;window.admin?(e.remove=f,c.insertBefore(e.el,a)):c.appendChild(e.el)};e.value=function(){for(var a=[],c=w.length,b=0;b<c;b++)a[b]=w[b].value();return a};e.setValue=function(a){for(var c=a?a.length:0,b=0;b<c;b++)e.createTimetable(new Date(a[b]))};e.el=c}function b(){function b(c,e){var f=e?!0:!1,k=window.admin?document.createElement("input"):null,l=document.createElement("div"),u=document.createElement("div"),p=window.admin?document.createElement("div"):
null,z=document.createElement("div"),q=document.createElement("a");if(window.maps){var F=new google.maps.Map(c,{center:{lat:52.160418,lng:21.02214},zoom:19,mapTypeControl:!1,fullscreenControl:!1}),B=new google.maps.Marker({map:F}),H=window.admin?new google.maps.places.Autocomplete(k):null,g=new google.maps.places.PlacesService(F);l.className="location-info";u.className="name text-invert";z.className="address text";q.className="website text";q.target="_blank";window.admin&&(k.className="location-input text",
p.className="save",p.setAttribute("checked",0),p.onclick=function(){if(0==parseInt(p.getAttribute("checked"))){var a=B.getPlace();a&&(d=a.placeId,k.setAttribute("disabled",1),p.setAttribute("checked",1))}else d=null,k.removeAttribute("disabled"),p.setAttribute("checked",0)},l.appendChild(k),u.appendChild(p),H.bindTo("bounds",F),H.addListener("place_changed",function(){var a=H.getPlace();a.geometry&&(F.setCenter(a.geometry.location),B.setPlace({placeId:a.place_id,location:a.geometry.location}),B.setVisible(!0),
F.setZoom(17),u.innerHTML=a.name,u.appendChild(p),z.innerHTML=a.formatted_address,q.innerHTML=a.website,q.href=a.website)}));l.appendChild(u);l.appendChild(z);l.appendChild(q);F.controls[google.maps.ControlPosition.TOP_LEFT].push(l);g.getDetails({placeId:e||"ChIJGZKqLO0yGUcRDo5fRhYCJ1I"},function(a,c){c==google.maps.places.PlacesServiceStatus.OK&&(B.setPlace({placeId:a.place_id,location:a.geometry.location}),B.setVisible(!0),F.setZoom(19),F.setCenter(a.geometry.location),u.innerHTML=a.name,window.admin&&
u.appendChild(p),z.innerHTML=a.formatted_address,q.innerHTML=a.website,q.href=a.website,window.admin&&f&&(k.setAttribute("disabled",1),p.setAttribute("checked",1)))})}this.update=function(){window.maps&&google.maps.event.trigger(a,"resize")}}var e=document.createElement("div"),c=document.createElement("div"),a=null,d=null;e.className="location-control";c.className="location-map";e.appendChild(c);this.el=e;this.show=function(){window.maps&&async(function(){c.style.width=e.offsetWidth+"px";c.style.height=
e.offsetHeight+"px";a=new b(c,d);window.addEventListener("resize",function(){c.style.width=e.offsetWidth+"px";c.style.height=e.offsetHeight+"px";a.update()})})};this.value=function(){return d};this.setValue=function(a){d=a}}function r(g){var e=this,c=document.createElement("div"),a=document.createElement("div"),G=document.createElement("div"),h=null,w=document.createElement("div"),f=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),k=document.createElement("div"),l=new v({type:0}),
u=document.createElement("div"),p=new d,z=document.createElement("div"),q=new b,F=document.createElement("div"),B=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),H=window.admin&&g.id()?document.createElement("div"):null,n=document.createElement("div"),m=document.createElement("div"),r={title:f,price:l,timetable:p,location:q,descrition:B};c.className="details-container";a.className="details-view";c.appendChild(a);G.className="control-view";c.appendChild(G);w.className=
"text-header header-text";language.bind("title",w);language.bindInput("title",f.el);a.appendChild(w);a.appendChild(f.el);k.className="text-header header-text";language.bind("price",k);a.appendChild(k);a.appendChild(l.el);u.className="text-header header-text";language.bind("timetable",u);a.appendChild(u);a.appendChild(p.el);z.className="text-header header-text";language.bind("location",z);a.appendChild(z);a.appendChild(q.el);F.className="text-header header-text";language.bind("description",F);language.bindInput("description",
B.el);a.appendChild(F);a.appendChild(B.el);window.admin||(h=new y,a.appendChild(h.el));n.className="action-btn no-select text-invert";language.bind(window.admin?"save":"send",n);G.appendChild(n);n.onclick=function(){if(window.admin){var a={},c;for(c in r)r.hasOwnProperty(c)&&r[c]&&(a[c]=r[c].value());e.save(a)}else a=h.value(),a.data={id:g.id(),preview:g.preview(),title:f.value()},e.contact(a,function(a){a.status||h.error(a.error)})};m.className="close-btn no-select text-invert";language.bind("close",
m);G.appendChild(m);m.onclick=function(){e.close()};H&&(H.className="delete-btn no-select text-invert",language.bind("delete",H),G.appendChild(H),H.onclick=function(){e.remove()});e.el=c;e.show=function(){q.show()};e.init=function(){};e.setValue=function(a){for(var c in r)r.hasOwnProperty(c)&&r[c]&&r[c].setValue(a[c])}}function g(b,e){function c(a,c){var d=this,h=new D,f=new r(a);f.close=function(){d.close()};f.order=function(a){d.close(function(){window.events.emit("order",[a])},{force:!0})};f.contact=
function(a,c){window.ajax({type:"POST",data:a,url:"/async/contact"}).done(function(a){a.status?d.close():c(a)})};d.load=function(a){b.id()?window.ajax({type:"POST",data:{id:b.id()},url:"/async/workshop/load"}).done(function(c){if(c.workshop){f.setValue(c.workshop);h.beginAdd();for(var b in c.workshop.images)h.add(new C({id:c.workshop.images[b]}));h.endAdd();f.init()}a&&a()}):(f.init(),a&&a())};f.selectImage=function(a){h.present(a)};d.create=function(){c.appendChild(h.el);c.appendChild(f.el)};d.destroy=
function(){c.removeChild(h.el);c.removeChild(f.el)};d.show=function(){h.show();f.show()};window.admin&&(f.save=function(c){h.commit(function(h){c.id=b.id();c.images=h;window.ajax({type:"POST",data:c,url:"/async/workshop/save"}).done(function(b){if(b.status){var f=null;a.id()==b._id?a.update({title:c.title,price:c.price,preview:h[0]}):f=function(){e.reload()};d.close(f)}})})},f.remove=function(){window.ajax({type:"POST",data:{id:a.id()},url:"/async/workshop/delete"}).done(function(c){c.status&&(e.removeItem(a),
d.close())})})}function a(a,c){async(d.close,a?[a,c]:null)}var d=this,h=document.createElement("div"),w=document.createElement("div"),f=new c(b,w);f.close=a;h.className=window.admin?"workshop-item-container edit":"workshop-item-container";h.style.display="none";w.className="workshop-item-view";f.create();h.appendChild(w);this.el=h;this.id=function(){return b.id()};this.item=function(){return b};this.replace=function(e,d){b=e;var h=new c(b,w);h.close=a;h.load(function(){f.destroy();h.create();f=h;
d&&d()})};this.show=function(a){a=a||{};a.force?(scrollBodyTo(h),morpheus(h,{marginLeft:0,duration:300,complete:function(){async(f.show)}})):(h.style.display="block",a=h.offsetHeight,scrollBodyTo(h),h.style.height="0px",morpheus(h,{height:a,duration:300,complete:function(){morpheus(h,{marginLeft:0,duration:300,complete:function(){async(f.show)}});h.style.height=null}}))};this.hide=function(a,c){c=c||{};morpheus(h,{marginLeft:"-110%",duration:300,complete:function(){c.force||scrollBodyTo(b.el);h.style.marginLeft=
null;c.inline?a&&a():morpheus(h,{height:0,duration:300,complete:function(){h.style.display="none";a&&a()}})}})};f.load()}function m(){var b=this,e=document.createElement("div"),c=document.createElement("div"),a=document.createElement("div");e.className="workshop-item-new";c.className="workshop-item-internal";e.appendChild(c);a.className="workshop-item-image";c.appendChild(a);b.el=e;e.onclick=function(){b.open&&b.open(b)};b.id=function(){return null};b.title=function(){return null};b.position=function(){return e.offsetTop}}
function n(b){var e=this,c=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),h=new MSDivObject,w=b.preview,f=document.createElement("div");c.id=b._id;c.className=window.admin?"workshop-item edit no-select":"workshop-item no-select";a.className="workshop-item-internal";c.appendChild(a);h.el.className="workshop-item-image";a.appendChild(h.el);d.className="workshop-item-title text";a.appendChild(d);f.className="workshop-item-price text";a.appendChild(f);h.loadImage({url:"/async/preview/load/"+
w,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=b.title;b.price?(f.innerHTML=Math.round(b.price.price),f.setAttribute("currency","z\u0142")):(f.innerHTML=null,f.removeAttribute("currency"));e.id=function(){return c.id};e.title=function(){return d.innerHTML};e.position=function(){return c.offsetTop};e.preview=function(){return w};e.update=function(a){w=a.preview;h.loadImage({url:"/async/preview/load/"+w,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=a.title;a.price?(f.innerHTML=Math.round(a.price.price),
f.setAttribute("currency","z\u0142")):(f.innerHTML=null,f.removeAttribute("currency"))};c.onclick=function(){e.open(e)};if(window.admin){b.counts=b.counts||{};var k=document.createElement("div"),l=document.createElement("div"),u=document.createElement("span"),p=document.createElement("div"),z=document.createElement("span"),q=document.createElement("div"),F=document.createElement("span"),B=document.createElement("div"),H=document.createElement("span"),g=document.createElement("div"),n=document.createElement("span");
k.className="visit-counter-container text";l.className="visit-counter";p.className="visit-counter";q.className="visit-counter";B.className="visit-counter";g.className="visit-counter";language.bind("today",l);language.bind("l_3_day",p);language.bind("l_week",q);language.bind("l_month",B);language.bind("l_time",g);u.innerHTML=b.counts.day_1||0;z.innerHTML=b.counts.day_3||0;F.innerHTML=b.counts.day_7||0;H.innerHTML=b.counts.day_28||0;n.innerHTML=b.counts.all||0;l.appendChild(u);p.appendChild(z);q.appendChild(F);
B.appendChild(H);g.appendChild(n);k.appendChild(l);k.appendChild(p);k.appendChild(q);k.appendChild(B);k.appendChild(g);a.appendChild(k)}e.el=c}function A(b){function e(a){async(function(){if(u){var c=f.childNodes,b=u.item().position(),e=null;f.contains(u.el)&&f.removeChild(u.el);for(var d=0;d<c.length;++d)if(b<c[d].offsetTop){e=c[d];break}e?f.insertBefore(u.el,e):f.appendChild(u.el);a&&"Function"==classOf(a)&&a()}})}function c(a,c){if(u){window.removeEventListener("resize",e);var b=u.el;u.hide(function(){f.removeChild(b);
b=null;a&&a()},c);u=null}else a&&a()}function a(a){if(u){var b=u.item().position()==a.position();u.hide(function(){u.replace(a,function(){b?u.show({force:!0}):e(function(){u.show()})})},{force:!0,inline:b})}else u=new g(a,h),u.close=c,e(function(){u.show()}),window.addEventListener("resize",e)}function d(){window.ajax({type:"POST",data:{},url:"/async/workshop/list"}).done(function(c){if(c&&c.status){var b=document.createElement("div"),e=null;k&&(b.appendChild(k.el),k.open=a);if(c.workshops)for(var d=
0;d<c.workshops.length;++d){var h=new n(c.workshops[d]);if(u&&u.item().id()==h.id()||h.id()==l)e=h,l=null;h.open=a;b.appendChild(h.el)}w.replaceChild(b,f);f=b;e?a(e):u=null}})}var h=this,w=document.getElementById("workshop_item_view"),f=document.createElement("div"),k=window.admin?new m:null,l=window.location.hash?window.location.hash.substring(1):null,u=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");h.createItem=function(c,b){b&&k&&k.el.nextSibling?
f.insertBefore(c.el,k.el.nextSibling):f.appendChild(c.el);c.open=a};h.removeItem=function(a){f.removeChild(a.el)};w.appendChild(f);h.el=w;h.reload=d;d()}function I(){var b=document.getElementById("workshop_panel");new A(b);this.el=b}window.addEventListener("load",function(){window.workshops=new I})})();(function(){function C(c){var a=this,b=c.id,e=c.file?!0:!1,d=c.file,f=c.label,k=null,l=null,u=!1,p=null,z=!1,q=new MSDivObject;c=window.admin?document.createElement("div"):null;var F=function(a){f=a;k&&(k.innerHTML=f||"")};q.el.className="picture-thumb";c&&(c.className="picture-thumb-remove",c.onclick=function(){a.removed&&a.removed(b)},q.el.appendChild(c));window.admin&&(q.el.setAttribute("draggable",!0),q.el.ondragstart=function(c){a.beginMove&&(c.dataTransfer.setData("target",b),a.beginMove(a))},
q.el.ondragover=function(c){c.preventDefault();a.hoverTarget&&"picture-thumb"==c.target.className&&a.hoverTarget(a,c.layerX)},q.el.ondragend=function(c){c.preventDefault();a.endMove&&a.endMove(a)});q.el.onclick=function(){a.click&&a.click(a)};a.el=q.el;a.id=function(){return b};a.isTemp=function(){return e};a.file=function(){return d};a.label=function(){return f};a.setLabel=F;a.enableLabel=function(){k||(k=document.createElement("div"),k.className="picture-thumb-label header-text no-select",q.el.appendChild(k));
k&&(k.innerHTML=f||"")};a.disableLabel=function(){k&&(q.el.removeChild(k),k=null)};a.data=function(){return l};a.remove=function(){u=!0;return e};a.pack=function(){return{id:b,temp:e,file:d,label:f,data:l,removed:u}};a.onload=function(c){z&&c?async(c,[a]):p=c};a.commit=function(a){if(u&&!e)window.ajax({type:"POST",data:{id:b},url:"/async/images/delete"}).done(function(c){a()});else if(e){var c=new FormData;c.append("file",d);window.ajax({type:"POST",data:c,files:!0,url:"/async/images/save"}).done(function(c){a({id:c.id,
label:f})})}else a({id:b,label:f})};a.update=function(a){b=a.id;e=a.temp;F(a.label);d=a.file;l=a.data;u=a.removed;q.el.style.backgroundImage=e?"url("+l+")":"url(/async/thumb/load/"+b+")"};e?(c=new FileReader,c.onload=function(c){l=c.target.result;q.el.style.backgroundImage="url("+l+")";z=!0;p&&(async(p,[a]),p=null)},c.readAsDataURL(d)):(q.loadImage({url:"/async/thumb/load/"+b,color:"#e0e0e0",shadow:!0,radius:24,width:6,length:22,lines:15,speed:.75}),z=!0,p&&(async(p,[a]),p=null))}function D(){var c=
this,a=document.createElement("div"),b=document.createElement("div"),e=document.createElement("div"),d=new MSDivObject,f=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,k=null,l=null,u={},p=[],z=window.admin?new DropInsertManager:null,q=function(a){var c=u[a];c&&(c.remove()&&delete u[a],e.removeChild(c.el));a=p.indexOf(a);0<=a&&p.splice(a,1)},F=function(){var a=d.el.getAttribute("current");(a=u[a])&&a.setLabel(k.value())},B=function(c){c.isTemp()?d.el.style.backgroundImage=
"url("+c.data()+")":d.loadImage({url:"/async/images/load/"+c.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});scrollBodyTo(a);d.el.setAttribute("current",c.id());k&&(k.onchange=null,k.setValue(c.label()),k.onchange=F)};window.admin&&(z.insertBefore=function(a,c){var b=p.indexOf(a.id()),d=null;0<=b&&(p.splice(b,1),d=p.indexOf(c.id()),0<=d&&(p.splice(d,0,a.id()),e.removeChild(a.el),e.insertBefore(a.el,c.el)))},z.insertAfter=function(a,c){var b=p.indexOf(a.id()),d=null;
0<=b&&(p.splice(b,1),d=p.indexOf(c.id()),0<=d&&(p.splice(d+1,0,a.id()),e.removeChild(a.el),(b=c.el.nextElementSibling)?e.insertBefore(a.el,b):e.appendChild(a.el)))});a.className="picture-manager";b.className="picture-container";e.className="picture-carousel";b.appendChild(e);d.el.className="picture-preview";f&&(e.appendChild(f.el),f.preview=function(a){if(a){c.beginAdd();for(var b=null,e=0;e<a.length;++e){var d=new C({id:String(hashCode(a[e].name)),file:a[e]});b||(b=d);c.add(d)}c.endAdd();c.show(b)}});
a.appendChild(d.el);a.appendChild(b);c.el=a;c.imageList=function(){return p};c.enableLabel=function(a){k||(k=new MSInputObject({className:"picture-preview-label text"}),d.el.appendChild(k.el));k.onchange=null;a?k.setValue(a):(a=d.el.getAttribute("current"),(a=u[a])&&k.setValue(a.label()));for(var c in u)u.hasOwnProperty(c)&&u[c].enableLabel();k.onchange=F};c.disableLabel=function(){k&&(d.el.removeChild(k.el),k=null);for(var a in u)u.hasOwnProperty(a)&&u[a].disableLabel()};c.commit=function(a){var c=
function(a,b,e,d,q){a==b?q(d):u[e[a]].commit(function(h){h&&d.push(h);c(a+1,b,e,d,q)})};c(0,p.length,p,[],a)};c.beginAdd=function(){null==l&&(l=document.createDocumentFragment())};c.endAdd=function(){if(l&&(e.appendChild(l),l=null,0<p.length))u[p[0]].onload(B)};c.present=function(a){(a=u[a])&&async(B,[a])};c.add=function(a){l&&!u[a.id()]&&(p.push(a.id()),u[a.id()]=a,a.removed=q,a.click=B,window.admin&&(a.beginMove=z.beginMove,a.hoverTarget=z.hoverTarget,a.endMove=z.endMove),l.appendChild(a.el),k&&
a.enableLabel())};c.show=function(a){var c=function(){if(l)async(c);else if(a)a.onload(B)};async(c)}}function x(){var c=document.createElement("table"),a=new MSInputObject({placeholder:"Price",className:"text"}),b=new MSInputObject({placeholder:"Shipping",className:"text"});language.bindInput("price",a.el);language.bindInput("shipping",b.el);var e=document.createElement("tr"),d=document.createElement("th"),f=document.createElement("th");e.className="text-invert";language.bind("price",d);language.bind("shipping",
f);e.appendChild(d);e.appendChild(f);c.appendChild(e);e=document.createElement("tr");d=document.createElement("td");f=document.createElement("td");d.appendChild(a.el);e.appendChild(d);f.appendChild(b.el);e.appendChild(f);c.appendChild(e);c.className="single-item";this.el=c;this.value=function(){return[{quantity:1,price:a.value(),shipping:b.value()}]};this.setValue=function(c){a.setValue(c[0].price);b.setValue(c[0].shipping)}}function t(){function c(a,c,b){this.quantity=a;this.price=c;this.shipping=
b}var a=document.createElement("table"),b=[],e=function(e,d,f){var h=document.createElement("tr"),k=document.createElement("td"),w=new MSInputObject({placeholder:"Quantity",className:"text"}),l=document.createElement("td"),p=new MSInputObject({placeholder:"Price",className:"text"}),u=document.createElement("td"),g=new MSInputObject({placeholder:"Shipping",className:"text"}),n=document.createElement("td"),m=document.createElement("div"),r=new c(w,p,g);language.bindInput("quantity",w.el);language.bindInput("price",
p.el);language.bindInput("shipping",g.el);m.className="remove-row";b.push(r);w.setValue(e||"");p.setValue(d||"");g.setValue(f||"");k.appendChild(w.el);h.appendChild(k);l.appendChild(p.el);h.appendChild(l);u.appendChild(g.el);h.appendChild(u);n.appendChild(m);h.appendChild(n);a.appendChild(h);m.onclick=function(c){c=b.indexOf(r);0<=c&&(b.splice(c,1),a.removeChild(h))}},d=document.createElement("tr"),f=document.createElement("th"),k=document.createElement("th"),l=document.createElement("th"),u=document.createElement("th"),
p=document.createElement("div");d.className="text-invert";language.bind("quantity",f);language.bind("price",k);language.bind("shipping",l);d.appendChild(f);d.appendChild(k);d.appendChild(l);p.className="add-new-row";u.appendChild(p);d.appendChild(u);p.onclick=function(){e()};a.appendChild(d);a.className="multi-item";this.el=a;this.value=function(){for(var a=[],c=0;c<b.length;++c)a.push({quantity:b[c].quantity.value(),price:b[c].price.value(),shipping:b[c].shipping.value()});return a};this.setValue=
function(a){for(var c=0;c<a.length;++c)e(a[c].quantity,a[c].price,a[c].shipping)}}function v(){var c=null,a=document.createElement("table"),b=document.createElement("tr"),e=document.createElement("th"),d=document.createElement("th"),f=document.createElement("th"),k=document.createElement("tr"),l=document.createElement("td"),u=document.createElement("td"),p=document.createElement("td");b.className="text-invert";language.bind("quantity",e);language.bind("price",d);language.bind("shipping",f);b.appendChild(e);
b.appendChild(d);b.appendChild(f);a.appendChild(b);k.appendChild(l);k.appendChild(u);k.appendChild(p);a.appendChild(k);u.setAttribute("currency","z\u0142");p.setAttribute("currency","z\u0142");this.el=a;this.value=function(){return c};this.setValue=function(a){if(1==a.length)l.innerHTML=a[0].quantity,u.innerHTML=a[0].price,p.innerHTML=a[0].shipping,c={quantity:a[0].quantity,price:a[0].price,shipping:a[0].shipping};else if(1<a.length){var b=new DropDown({});b.changed=function(b){u.innerHTML=a[b].price;
p.innerHTML=a[b].shipping;c={quantity:a[b].quantity,price:a[b].price,shipping:a[b].shipping}};for(var e=0;e<a.length;++e)b.addItem(e).controller.setValue(a[e].quantity);l.appendChild(b.el)}}}function y(c){var a=this,b=document.createElement("div"),e=null,d=!1,f=0;window.admin?(e=[new x,new t],c&&c.type&&(f=0<=c.type&&2>c.type?c.type:0),b.appendChild(e[f].el)):(e=new v,b.appendChild(e.el));b.className="price text advert-hide";a.el=b;window.admin&&(a.change=function(c){b.removeChild(e[f].el);f=0<=c&&
2>c?c:0;b.appendChild(e[f].el);a.changed&&a.changed(c)},a.nullValue=function(a){d=a});a.value=function(){return window.admin?d?null:{type:f,values:e[f].value()}:e.value()};a.setValue=function(c){c&&(window.admin?(a.change(c.type),e[f].setValue(c.values)):e.setValue(c.values))}}function d(){var c=this,a=!0,b=document.createElement("div"),e=new DropDown({className:"component-ctl"});b.className="text-header header-text";language.bind("projects",b);e.changed=function(a){c.changed&&c.changed(a)};c.setValue=
function(a){if(a)for(var c=0;c<a.length;++c)e.addItem(a[c].id).controller.setValue(a[c].label)};c.value=function(){return e.value()};c.text=function(){return e.text()};c.enabled=function(){return a};c.enable=function(){a=!0;b.removeAttribute("style");e.el.removeAttribute("style")};c.disable=function(){a=!1;b.style.display="none";e.el.style.display="none"};var d=document.createDocumentFragment();d.appendChild(b);d.appendChild(e.el);c.el=d}function b(){function c(c){if(k.length<d.length){var e=document.createElement("div"),
q=document.createElement("div"),h=new DropDown({className:"category-ctl"},q),u=document.createElement("div");e.className="category-item-view";u.className="remove-category-item";e.appendChild(q);e.appendChild(u);u.onclick=function(){var c=k.indexOf(h);0<=c&&(k.splice(c,1),delete l[h.id],a.removeChild(e),e=null);k.length<d.length&&(b.style.display=null)};k[k.length]=h;h.beforeOpen=function(){if(f)for(var a=0;a<f.length;++a)h.removeVirtual(f[a]);f=[];for(a=0;a<d.length;++a)l[d[a]._id]&&l[d[a]._id]!=
h||function(a,c){a.onclick=function(a){a.preventDefault();a.stopPropagation();h.setText(c.title);delete l[h.id];h.id=c._id;l[c._id]=h;h.close()};a.className="dropdown-item text-invert";a.innerHTML=c.title;f[f.length]=a}(h.addVirtual(),d[a])};h.beforeClose=function(){if(f){for(var a=0;a<f.length;++a)h.removeVirtual(f[a]);f=null}};if(c)for(q=0;q<d.length;++q){if(d[q]._id==c){l[c]=h;h.id=c;h.setText(d[q].title);break}}else for(q=0;q<d.length;++q)if(!l[d[q]._id]){l[d[q]._id]=h;h.id=d[q]._id;h.setText(d[q].title);
break}a.insertBefore(e,b);k.length==d.length&&(b.style.display="none")}}var a=document.createElement("div"),b=document.createElement("div"),e=document.createElement("div"),d=[],f=null,k=[],l={},u=!1;a.className="category-list";b.className="category-item-view add-category-item";b.appendChild(e);a.appendChild(b);b.onclick=function(){c()};this.el=a;this.setValue=function(a){if(a){var b=function(){if(u)for(var e=0;e<a.length;++e)c(a[e]);else async(b)};b()}};this.value=function(){return Object.keys(l)};
window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(a){u=!0;a.status&&(d=a.categories||[],0==d.length&&(b.style.display="none"))})}function r(){function c(){this.removeAttribute("error");this.onfocus=null}var a=document.createElement("div"),b=document.createElement("div"),e=document.createElement("input"),d=document.createElement("input"),f=new MSInputObject({className:"message text",multiline:!0,user:!0});a.className="shop-item-contact-panel";b.className="text-header header-text";
e.className="name text";d.className="email text";language.bind("contact",b);language.bindInput("full_name",e);language.bindInput("email",d);language.bindInput("message",f.el);a.appendChild(b);a.appendChild(e);a.appendChild(d);a.appendChild(f.el);this.el=a;this.value=function(){return{name:e.value,email:d.value,message:f.value()}};this.error=function(a){for(var b in a)"name"==b?(e.setAttribute("error",!0),e.onfocus=c):"email"==b?(d.setAttribute("error",!0),d.onfocus=c):"message"==b&&(f.el.setAttribute("error",
!0),f.el.onfocus=c)}}function g(c){var a=this,e=document.createElement("div"),h=document.createElement("div"),g=document.createElement("div"),f=null,k=document.createElement("div"),l=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),u=window.admin?document.createElement("div"):null,p=window.admin?new DropDown({className:"type-ctl"}):{setValue:function(a){2==a&&(e.setAttribute("advert",!0),f=new r,h.appendChild(f.el),language.unbind("order",L),language.bind("send",L))}},
z=document.createElement("div"),q=new DropDown({className:"avail-ctl",adminOnly:!0}),F=window.admin?document.createElement("div"):null,B=window.admin?new DropDown({className:"action-ctl"}):null,n=window.admin?document.createElement("div"):null,m=window.admin?new DropDown({className:"component-ctl"}):{setValue:function(c){0==c?(a.disableLabel(),t.disable()):(a.enableLabel(),t.enable())}},t=window.admin?null:new d,v=window.admin?document.createElement("div"):null,E=window.admin?new b:null,x=document.createElement("div"),
A=new y({type:0}),C=document.createElement("div"),D=document.createElement("div"),I=document.createElement("div"),N=document.createElement("div"),P=document.createElement("div"),Q=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),M=window.admin&&c.id()?document.createElement("div"):null,L=document.createElement("div"),O=document.createElement("div"),K={title:l,type:p,availability:q,action:B,components:m,images:t,categories:E,price:A,descrition:Q};e.className="details-container";
h.className="details-view";e.appendChild(h);g.className="control-view";e.appendChild(g);k.className="text-header header-text";language.bind("title",k);language.bindInput("title",l.el);h.appendChild(k);h.appendChild(l.el);window.admin?(language.bind("individual",p.addItem(0)),language.bind("common",p.addItem(1)),language.bind("advert",p.addItem(2)),u.className="text-header header-text",language.bind("type",u),h.appendChild(u),h.appendChild(p.el)):t.changed=function(c){a.selectImage&&a.selectImage(c)};
q.changed=function(a){language.unbind(N);0==a?language.bind("lead_avail",N):language.bind("lead_wait",N)};language.bind("available",q.addItem(0));language.bind("demand",q.addItem(1));z.className="text-header header-text";language.bind("availability",z);h.appendChild(z);h.appendChild(q.el);window.admin?(language.bind("keep",B.addItem(0)),language.bind("move",B.addItem(1)),language.bind("remove",B.addItem(2)),F.className="text-header header-text",language.bind("process",F),h.appendChild(F),h.appendChild(B.el),
language.bind("components",n),n.className="text-header header-text",language.bind("none",m.addItem(0)),language.bind("labeled",m.addItem(1)),h.appendChild(n),h.appendChild(m.el),m.changed=function(c){0==c?a.disableLabel():a.enableLabel()},m.lock()):h.appendChild(t.el);window.admin&&(v.className="text-header header-text",language.bind("category",v),h.appendChild(v),h.appendChild(E.el));x.className="text-header header-text advert-hide";language.bind("price",x);h.appendChild(x);h.appendChild(A.el);C.className=
"text-header header-text advert-hide";language.bind("payment_opt",C);D.className="payments advert-hide";window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status)for(var c=0;c<a.types.length;++c){var b=document.createElement("div");b.className="payment-option";b.setAttribute("type",a.types[c]);D.appendChild(b)}});h.appendChild(C);h.appendChild(D);I.className="text-header header-text advert-hide";language.bind("lead",I);N.className="lead-time text advert-hide";h.appendChild(I);
h.appendChild(N);P.className="text-header header-text";language.bind("description",P);language.bindInput("description",Q.el);L.className="action-btn no-select text-invert";language.bind(window.admin?"save":"order",L);g.appendChild(L);L.onclick=function(){if(window.admin){var b={},e;for(e in K)K.hasOwnProperty(e)&&K[e]&&(b[e]=K[e].value());a.save(b)}else f?(b=f.value(),b.data={id:c.id(),preview:t.enabled()?t.value():c.preview(),title:l.value(),component:t.enabled()?t.text():null},a.contact(b,function(a){a.status||
f.error(a.error)})):(b=A.value()||{},b.id=c.id(),b.preview=t.enabled()?t.value():c.preview(),b.title=l.value(),b.availability=q.value(),b.component=t.enabled()?t.text():null,a.order(b))};O.className="close-btn no-select text-invert";language.bind("close",O);g.appendChild(O);O.onclick=function(){a.close()};M&&(M.className="delete-btn no-select text-invert",language.bind("delete",M),g.appendChild(M),M.onclick=function(){a.remove()});h.appendChild(P);h.appendChild(Q.el);p.changed=function(a){2==a&&(A.nullValue(!0),
q.setValue(1),q.lock(),B.setValue(0),B.lock(),m.unlock(),e.setAttribute("advert",!0))};a.el=e;a.show=function(){};a.init=function(){p.changed=function(a){A.nullValue(!1);e.removeAttribute("advert");0==a?(A.change(0),q.setValue(0),m.setValue(0),q.unlock(),B.unlock(),m.lock()):1==a?(A.change(1),q.setValue(1),B.setValue(0),q.lock(),B.lock(),m.unlock()):2==a&&(A.nullValue(!0),q.setValue(1),q.lock(),B.setValue(0),B.lock(),m.unlock(),e.setAttribute("advert",!0))}};a.setValue=function(a){for(var c in K)K.hasOwnProperty(c)&&
K[c]&&K[c].setValue(a[c])}}function m(c,a){function b(e,d,f){var h=this,l=new D,k=new g(e);k.close=function(){h.close()};k.order=function(a){h.close(function(){window.events.emit("order",[a])},{force:!0})};k.contact=function(a,c){window.ajax({type:"POST",data:a,url:"/async/contact"}).done(function(a){a.status?h.close():c(a)})};k.enableLabel=function(){l.enableLabel()};k.disableLabel=function(){l.disableLabel()};h.load=function(a){c.id()?window.ajax({type:"POST",data:{id:c.id()},url:"/async/shop/load"}).done(function(c){if(c.item){k.setValue(c.item);
l.beginAdd();for(var b in c.item.images)l.add(new C(c.item.images[b]));l.endAdd();k.init()}a&&a()}):(k.init(),a&&a())};k.selectImage=function(a){l.present(a)};h.create=function(){f.appendChild(l.el);f.appendChild(k.el)};h.destroy=function(){f.removeChild(l.el);f.removeChild(k.el)};h.show=function(){l.show();k.show()};window.admin&&(k.save=function(b){l.commit(function(d){b.id=c.id();b.images=d;window.ajax({type:"POST",data:b,url:"/async/shop/save"}).done(function(c){if(c.status){var f=null;e.id()==
c._id?e.update({title:b.title,price:b.price,preview:d[0]}):f=function(){a.reload()};h.close(f)}})})},k.remove=function(){window.ajax({type:"POST",data:{id:e.id()},url:"/async/shop/delete"}).done(function(a){a.status&&(d.removeItem(e),h.close())})})}function e(a,c){async(d.close,a?[a,c]:null)}var d=this,f=document.createElement("div"),k=document.createElement("div"),l=new b(c,a,k);l.close=e;f.className=window.admin?"shop-item-container edit":"shop-item-container";f.style.display="none";k.className=
"shop-item-view";l.create();f.appendChild(k);this.el=f;this.id=function(){return c.id()};this.item=function(){return c};this.replace=function(d,f,z){c=d;a=f;var q=new b(c,a,k);q.close=e;q.load(function(){l.destroy();q.create();l=q;z&&z()})};this.show=function(a){a=a||{};a.force?(scrollBodyTo(f),morpheus(f,{marginLeft:0,duration:300,complete:function(){l.show()}})):(f.style.display="block",a=f.offsetHeight,scrollBodyTo(f),f.style.height="0px",morpheus(f,{height:a,duration:300,complete:function(){morpheus(f,
{marginLeft:0,duration:300,complete:function(){l.show()}});f.style.height=null}}))};this.hide=function(a,b){b=b||{};morpheus(f,{marginLeft:"-110%",duration:300,complete:function(){b.force||scrollBodyTo(c.el);f.style.marginLeft=null;b.inline?a&&a():morpheus(f,{height:0,duration:300,complete:function(){f.style.display="none";a&&a()}})}})};l.load()}function n(){var c=this,a=document.createElement("div"),b=document.createElement("div"),e=document.createElement("div");a.className="shop-item-new";b.className=
"shop-item-internal";a.appendChild(b);e.className="shop-item-image";b.appendChild(e);c.el=a;a.onclick=function(){c.open&&c.open(c)};c.id=function(){return null};c.title=function(){return null};c.position=function(){return a.offsetTop}}function A(c){var a=this,b=document.createElement("div"),e=document.createElement("div"),d=document.createElement("div"),f=new MSDivObject,k=c.preview.id,l=document.createElement("div");b.id=c._id;b.className=window.admin?"shop-item edit no-select":"shop-item no-select";
e.className="shop-item-internal";b.appendChild(e);f.el.className="shop-item-image";e.appendChild(f.el);d.className="shop-item-title text";e.appendChild(d);l.className="shop-item-price text";e.appendChild(l);f.loadImage({url:"/async/preview/load/"+k,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=c.title;c.price?(l.innerHTML=Math.round(c.price.values[0].price/c.price.values[0].quantity),l.setAttribute("currency","z\u0142")):(l.innerHTML=null,l.removeAttribute("currency"));a.id=function(){return b.id};
a.title=function(){return d.innerHTML};a.position=function(){return b.offsetTop};a.preview=function(){return k};a.update=function(a){k=a.preview.id;f.loadImage({url:"/async/preview/load/"+k,color:"#e0e0e0",shadow:!0,width:3});d.innerHTML=a.title;a.price?(l.innerHTML=Math.round(a.price.values[0].price/a.price.values[0].quantity),l.setAttribute("currency","z\u0142")):(l.innerHTML=null,l.removeAttribute("currency"))};b.onclick=function(){b.getAttribute("ordered")?window.scrollBodyTo(window.orders.el):
a.open&&a.open(a)};if(window.admin){c.counts=c.counts||{};var g=document.createElement("div"),p=document.createElement("div"),z=document.createElement("span"),q=document.createElement("div"),F=document.createElement("span"),B=document.createElement("div"),n=document.createElement("span"),m=document.createElement("div"),t=document.createElement("span"),r=document.createElement("div"),v=document.createElement("span");g.className="visit-counter-container text";p.className="visit-counter";q.className=
"visit-counter";B.className="visit-counter";m.className="visit-counter";r.className="visit-counter";language.bind("today",p);language.bind("l_3_day",q);language.bind("l_week",B);language.bind("l_month",m);language.bind("l_time",r);z.innerHTML=c.counts.day_1||0;F.innerHTML=c.counts.day_3||0;n.innerHTML=c.counts.day_7||0;t.innerHTML=c.counts.day_28||0;v.innerHTML=c.counts.all||0;p.appendChild(z);q.appendChild(F);B.appendChild(n);m.appendChild(t);r.appendChild(v);g.appendChild(p);g.appendChild(q);g.appendChild(B);
g.appendChild(m);g.appendChild(r);e.appendChild(g)}else c=document.createElement("div"),e=document.createElement("div"),c.className="shop-item-ordered",e.className="shop-item-ordered-icon",c.appendChild(e),b.appendChild(c);a.el=b}function I(c){function a(a){async(function(){if(p){var c=k.childNodes,b=p.item().position(),e=null;k.contains(p.el)&&k.removeChild(p.el);for(var d=0;d<c.length;++d)if(b<c[d].offsetTop){e=c[d];break}e?k.insertBefore(p.el,e):k.appendChild(p.el);a&&"Function"==classOf(a)&&a()}})}
function b(c,e){if(p){window.removeEventListener("resize",a);var d=p.el;p.hide(function(){k.removeChild(d);d=null;c&&c()},e);p=null}else c&&c()}function e(c){if(p){var f=p.item().position()==c.position();p.hide(function(){p.replace(c,d,function(){f?p.show({force:!0}):a(function(){p.show()})})},{force:!0,inline:f})}else p=new m(c,d),p.close=b,a(function(){p.show()}),window.addEventListener("resize",a)}var d=this,f=document.getElementById("shop_item_view"),k=document.createElement("div"),l=window.admin?
new n:null,g=window.location.hash?window.location.hash.substring(1):null,p=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");d.createItem=function(a,c){c&&l&&l.el.nextSibling?k.insertBefore(a.el,l.el.nextSibling):k.appendChild(a.el);a.open=e};d.removeItem=function(a){k.removeChild(a.el)};f.appendChild(k);d.el=f;d.reload=function(){window.ajax({type:"POST",data:c.value(),url:"/async/shop/list"}).done(function(a){if(a&&a.status){var c=document.createElement("div"),
b=null;l&&(c.appendChild(l.el),l.open=e);if(a.items)for(var d=0;d<a.items.length;++d){var n=new A(a.items[d]);if(p&&p.item().id()==n.id()||n.id()==g)b=n,g=null;n.open=e;c.appendChild(n.el)}f.replaceChild(c,k);k=c;b?e(b):p=null}window.events.emit("update-ordered")})}}function E(){function c(a,c){var b=this,e=a.item,d=a.controller,f=document.createElement("div"),h=window.admin&&c?document.createElement("input"):null,q=window.admin&&c?document.createElement("div"):null,k=!1,l=!1;e.manager=b;f.className=
"categoty-title";e.appendChild(f);b.setValue=function(a){f.innerHTML=a||""};b.value=function(){return f.innerHTML};b.id=function(){return c?c._id:null};c?(d.setValue(c.title),window.admin&&(q&&(q.className="category-remove",q.onclick=function(a){a.preventDefault();a.stopPropagation();e.parentNode.removeChild(e);l=!0;k=!1}),h&&(h.className="categoty-title header-text"),b.forceEditStart=function(){h&&(e.replaceChild(h,f),e.appendChild(q),h.value=f.innerHTML,h.onchange=function(){l||(k=!0)})},b.forceEditEnd=
function(){h&&(h.onchange=null,e.replaceChild(f,h),e.removeChild(q),f.innerHTML=h.value)},b.save=function(a){l&&b.id()?window.ajax({type:"POST",data:{id:b.id()},url:"/async/category/delete"}).done(a):k?window.ajax({type:"POST",data:{id:b.id(),title:f.innerHTML},url:"/async/category/save"}).done(a):a()})):language.bind("allitems",a)}function a(a){var c=this,b=document.createElement("div");b.className="category-add";a.appendChild(b);c.el=a;b.onclick=function(){c.create&&c.create()}}function b(a,e){window.admin&&
a.el.insertBefore(l,a.el.firstChild);new c(a.addItem(0));window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(b){var d=[];if(b.status)for(var f=0;f<b.categories.length;++f){var h=a.addItem(b.categories[f]._id),h=new c(h,b.categories[f]);window.admin&&(d[d.length]=h)}e(d)})}var e=null,d=document.getElementById("shop_navigator"),f=new DropDown({className:"category-nav",src:"../images/list.png"}),k=null,l=null,g=1,p=new DropDown({className:"sorter-nav"}),n=p.addItem(0);n.controller.setValue("A  -  Z");
n=p.addItem(1);n.controller.setValue("Z  -  A");n=p.addItem(2);language.bind("lowprice",n);n=p.addItem(3);language.bind("hightprice",n);if(window.admin){var q=[],l=document.createElement("div");l.className="shop-category-edit";l.onclick=function(p){p.preventDefault();p.stopPropagation();if(l.hasAttribute("open"))l.removeAttribute("open"),f.el.removeAttribute("edit-mode"),f.close(),f.el.removeChild(l),k=null,function(a,c){var b=0,e=a.length,d=function(a){++b==e&&c()};if(0<e)for(var f=0;f<e;++f)a[f].forceEditEnd(),
a[f].save(d);else c()}(q,function(){var a=new DropDown({className:"category-nav",src:"../images/list.png"});b(a,function(c){q=c;d.replaceChild(a.el,f.el);f=a;f.changed=function(){e&&e.reload()};f.setValue(0)})});else for(l.setAttribute("open",!0),f.el.setAttribute("edit-mode",!0),k=new a(f.addVirtual()),k.create=function(){var a=k.el.parentNode;a.removeChild(k.el);var b=f.addItem(String("000000000000000000000000"+g++).slice(-24)),b=new c(b,{title:""});b.forceEditStart();q[q.length]=b;a.appendChild(k.el)},
f.manual(),f.open(),p=0;p<q.length;++p)q[p].forceEditStart()}}d.appendChild(f.el);d.appendChild(p.el);f.changed=function(){e&&e.reload()};p.changed=function(){e&&e.reload()};this.setView=function(a){e=a};this.value=function(){var a=f.value();return{sort:p.value(),filter:0==a?null:a}};this.el=d;b(f,function(a){window.admin&&(q=a)})}function e(){var c=document.getElementById("shop_panel"),a=new E,b=new I(a);a.setView(b);this.el=c}window.addEventListener("load",function(){window.shop=new e})})();(function(){function C(x){var t=this,v=x,y=new MSDivObject;x=window.admin?document.createElement("div"):null;y.el.className="gallery-thumb";x&&(x.className="gallery-thumb-remove",y.el.appendChild(x),x.onclick=function(){t.remove&&t.remove(t)});y.el.onclick=function(){t.click&&t.click(t)};if(window.admin){y.el.setAttribute("draggable",!0);var d=document.getElementById("content_scroll_top"),b=document.getElementById("content_scroll_bottom"),r=document.getElementById("content-wrapper"),g=!1,m=function(b){if(g){var d=
r.scrollTop;morpheus.tween(5,function(g){1==g&&async(m,[b]);g=d+b*g;0<=g&&g<=r.scrollHeight&&(r.scrollTop=g)})}};d.ondragenter=function(b){b.preventDefault();g=!0;m(-10)};d.ondragleave=function(b){b.preventDefault();g=!1};b.ondragenter=function(b){b.preventDefault();g=!0;m(10)};b.ondragleave=function(b){b.preventDefault();g=!1};y.el.ondragstart=function(g){g.dataTransfer.setData("target",v);d.setAttribute("enabled",!0);b.setAttribute("enabled",!0);t.beginMove&&(g.dataTransfer.setData("target",v),
t.beginMove(t))};y.el.ondragend=function(g){g.preventDefault();d.removeAttribute("enabled");b.removeAttribute("enabled");t.endMove&&t.endMove(t)};y.el.ondragover=function(b){b.preventDefault();t.hoverTarget&&"gallery-thumb"==b.target.className&&t.hoverTarget(t,b.layerX)}}t.el=y.el;t.id=function(){return v};t.change=function(b){v=b;y.loadImage({url:"/async/thumb/load/"+v,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})};y.loadImage({url:"/async/thumb/load/"+v,color:"#e0e0e0",
shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})}function D(){var x,t,v;function y(){var d=b.el.childNodes,e=d.length;t=x=1;if(0<e){var c;for(c=0;c<e&&0!=d[c].style.display.length;++c);v=Math.floor((b.el.offsetWidth-2)/(d[c].offsetWidth+6))*Math.floor((b.el.offsetHeight-2)/(d[c].offsetHeight+6));t=Math.ceil(e/v);for(c=Math.min(v,e)-1;0<=c;--c)0!=d[c].style.display.length&&async(function(a){a.style.display=null},[d[c]]);for(c=Math.min(v,e);c<e;++c)0<d[c].style.display.length||async(function(a){a.style.display=
"none"},[d[c]])}g.prev.setAttribute("disabled",!0);1==t?g.next.setAttribute("disabled",!0):g.next.removeAttribute("disabled");g.data.innerHTML=x+" / "+t}document.getElementById("gallery_panel");document.getElementById("content-wrapper");var d=window.admin?new FileUpload({id:"gallery_thumb_new",className:"gallery-thumb",multiple:!0}):null,b=new MSDivObject(document.getElementById("thumbs_container")),r=new MSDivObject(document.getElementById("gallery_view").firstElementChild),g={prev:document.getElementById("gallery_prev_page"),
data:document.getElementById("gallery_page_info"),next:document.getElementById("gallery_next_page")};t=x=1;v=0;var m={},n=window.admin?new DropInsertManager:null,A=function(b){r.loadImage({url:"/async/images/load/"+b.id()+"?height=700",color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75})},D=function(d){window.ajax({type:"POST",data:{id:d.id()},url:"/async/gallery/delete"}).done(function(e){e.status&&(delete m[d.id()],b.el.removeChild(d.el))})};window.admin?(n.insertBefore=function(d,
e){window.ajax({type:"POST",data:{source:d.id(),target:e.id(),offset:0},url:"/async/gallery/move"}).done(function(c){c.status&&(b.el.removeChild(d.el),b.el.insertBefore(d.el,e.el))})},n.insertAfter=function(d,e){window.ajax({type:"POST",data:{source:d.id(),target:e.id(),offset:1},url:"/async/gallery/move"}).done(function(c){c.status&&(b.el.removeChild(d.el),(c=e.el.nextElementSibling)?b.el.insertBefore(d.el,c):b.el.appendChild(d.el))})}):(window.addEventListener("resize",y),g.prev.onclick=function(){if(!g.prev.hasAttribute("disabled")){for(var d=
b.el.childNodes,e=d.length,c=Math.min(v*x,e)-1;c>=v*(x-1);--c)async(function(a){a.style.display="none"},[d[c]]);--x;1==x&&g.prev.setAttribute("disabled",!0);g.next.removeAttribute("disabled");g.data.innerHTML=x+" / "+t;for(c=Math.min(v*x,e)-1;c>=v*(x-1);--c)async(function(a){a.style.display=null},[d[c]])}},g.next.onclick=function(){if(!g.next.hasAttribute("disabled")){for(var d=b.el.childNodes,e=d.length,c=v*(x-1);c<v*x&&c<e;++c)async(function(a){a.style.display="none"},[d[c]]);x+=1;x==t&&g.next.setAttribute("disabled",
!0);g.prev.removeAttribute("disabled");g.data.innerHTML=x+" / "+t;for(c=v*(x-1);c<v*x&&c<e;++c)async(function(a){a.style.display=null},[d[c]])}});d&&(b.el.appendChild(d.el),d.preview=function(g){for(var e=0;e<g.length;++e){var c=new FormData;c.append("file",g[e]);window.ajax({type:"POST",data:c,files:!0,url:"/async/gallery/save"}).done(function(a){a.status&&(a=new C(a.id),m[a.id()]=a,a.click=A,a.remove=D,window.admin&&(a.beginMove=n.beginMove,a.hoverTarget=n.hoverTarget,a.endMove=n.endMove),d.el.nextSibling?
b.el.insertBefore(a.el,d.el.nextSibling):b.el.appendChild(a.el),A(a))})}});window.ajax({type:"POST",url:"/async/gallery/load"}).done(function(d){if(d.status){for(var e=document.createDocumentFragment(),c=null,a=0;a<d.result.length;++a){var g=new C(d.result[a].id);m[g.id()]=g;g.click=A;g.remove=D;window.admin&&(g.beginMove=n.beginMove,g.hoverTarget=n.hoverTarget,g.endMove=n.endMove);e.appendChild(g.el);c||(c=g)}b.el.appendChild(e);c&&A(c);window.admin||y()}})}window.addEventListener("load",function(){window.gallery=
new D})})();(function(){function C(){function C(){this.removeAttribute("error");this.onfocus=null}var x=document.getElementById("contact_name"),t=document.getElementById("contact_email"),v=document.getElementById("contact_message");document.getElementById("contact_send").onclick=function(){window.ajax({type:"POST",data:{name:x.value,email:t.value,message:v.value},url:"/async/contact"}).done(function(y){if(y.status)x.value="",t.value="",v.value="";else for(var d in y.error)"name"==d?(x.setAttribute("error",!0),
x.onfocus=C):"email"==d?(t.setAttribute("error",!0),t.onfocus=C):"message"==d&&(v.setAttribute("error",!0),v.onfocus=C)})}}window.addEventListener("load",function(){window.cantact=new C})})();(function(){function C(b){b=b.getElementsByTagName("*");for(var c={},a=0;a<b.length;++a)if(b[a].hasAttribute("user-input")){var d=b[a].getAttribute("user-input");b[a].controller?c[d]=b[a].controller.value():b[a].value?c[d]=b[a].value:b[a].firstChild&&3==b[a].firstChild.nodeType&&b[a].firstChild.nodeValue&&(c[d]=b[a].firstChild.nodeValue)}return c}function D(b,c){c=c||"";if("INPUT"==b.nodeName)b.value=c;else if("DIV"==b.nodeName)if(b.controller)b.controller.setValue(c);else if(b.firstChild&&3==b.firstChild.nodeType&&
b.firstChild.nodeValue)b.firstChild.nodeValue=c;else{var a=document.createTextNode(c);b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}}function x(b,c){for(var a=b.getElementsByTagName("*"),d=[],h=[],g=0;g<a.length;++g)if(a[g].hasAttribute("user-input")){a[g].parentNode.removeAttribute("unset");var f=a[g].getAttribute("user-input");if(c[f]){var k=d.indexOf(a[g].parentNode);0<=k&&d.splice(k,1);h[h.length]=a[g].parentNode;D(a[g],c[f])}else k=h.indexOf(a[g].parentNode),-1==k&&(d[d.length]=
a[g].parentNode),D(a[g],"")}for(g=0;g<d.length;++g)d[g].setAttribute("unset",!0)}function t(b,c){if(c)for(var a=b.getElementsByTagName("*"),d=0;d<a.length;++d)if(a[d].hasAttribute("user-input")){var h=a[d].getAttribute("user-input");c[h]&&function(a){a.setAttribute("error",!0);a.onfocus=function(){a.removeAttribute("error")}}(a[d])}}function v(b){b.controller=this;this.setValue=function(c){b.setAttribute("option",c)}}function y(b){b.controller=this;this.setValue=function(c){var a=b.getElementsByClassName("preview-data");
a&&0<a.length&&D(a[0],c.number);c?b.removeAttribute("unset"):b.setAttribute("unset",!0)}}function d(b){function c(){var b=d.run(a.value);b?a.setAttribute("card",b):a.removeAttribute("card")}var a=b,d=new function(){var a={visa:{values:[{type:0,value:4}]},mastercard:{values:[{type:1,range:{min:51,max:55}}]},discover:{values:[{type:0,value:65},{type:0,value:6011},{type:1,range:{min:644,max:649}},{type:1,range:{min:622126,max:622925}}]},amex:{values:[{type:0,value:34},{type:0,value:37}]}};this.run=function(b){for(var c in a)if(a.hasOwnProperty(c))for(var d=
a[c],e=0;e<d.values.length;++e)if(0==d.values[e].type){var g=String(d.values[e].value);if(b.substr(0,g.length)===g)return c}else if(1==d.values[e].type)for(var p=d.values[e].range.min;p<=d.values[e].range.max;++p)if(g=String(p),b.substr(0,g.length)===g)return c;return null}};a.onkeydown=function(b){var c=0<=[8,9,37,38,39,40,46].indexOf(b.keyCode),d=!isNaN(parseInt(b.key))&&16>a.value.length;c||d||b.preventDefault()};a.onkeyup=c;a.onfocus=c;a.onblue=c;a.onchange=c;a.controller=this;this.value=function(){return{type:d.run(a.value),
number:a.value}}}function b(b){var c={country:function(a){(new DropDown({},a)).addItem("Polska",!0)},county:function(a){var b="dolno\u015bl\u0105skie kujawsko-pomorskie lubelskie lubuskie \u0142\u00f3dzkie ma\u0142opolskie mazowieckie opolskie podkarpackie podlaskie pomorskie \u015bl\u0105skie \u015bwi\u0119tokrzyskie warmi\u0144sko-mazurskie wielkopolskie zachodniopomorskie".split(" ");a=new DropDown({},a);for(var c=0;c<b.length;++c)a.addItem(b[c],!0)},expiry_month:function(a){a=new DropDown({},
a);for(var b=1;12>=b;++b)a.addItem(b,!0)},expiry_year:function(a){var b=(new Date).getFullYear();a=new DropDown({},a);for(var c=b;c<=b+10;++c)a.addItem(c,!0)},card_number:function(a){new d(a)},paymentType:function(a){new v(a)},cardNumber:function(a){new y(a)}};b=b.getElementsByTagName("*");for(var a=0;a<b.length;++a)if(b[a].hasAttribute("control")){var g=b[a].getAttribute("control");c[g]&&async(c[g],[b[a]])}}function r(b){var c=this,a=document.createElement("tr"),d=document.createElement("td"),h=
new MSDivObject,g=document.createElement("td"),f=document.createElement("td"),k=document.createElement("td"),l=document.createElement("td"),u=document.createElement("td"),p=document.createElement("div");d.className="text";h.el.className="order-thumb";g.className="text";f.className="text";k.className="text";l.className="text";u.className="text";p.className="remove-btn";k.setAttribute("currency","z\u0142");l.setAttribute("currency","z\u0142");d.appendChild(h.el);a.appendChild(d);a.appendChild(g);a.appendChild(f);
a.appendChild(k);a.appendChild(l);u.appendChild(p);a.appendChild(u);h.loadImage({url:"/async/thumb/load/"+b.preview,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75});g.innerHTML=b.title;f.innerHTML=b.quantity;k.innerHTML=b.price;b.discount?(d=document.createElement("span"),h=document.createTextNode(Number(b.shipping)*(1-(b.discount||0))),d.className="discount-pin",l.appendChild(d),l.appendChild(h)):l.innerHTML=Number(b.shipping);c.el=a;c.id=function(){return b.id};c.item=
function(){return b.item};c.price=function(){return Number(b.price)};c.shipping=function(){return Number(b.shipping)};c.setDiscount=function(a){b.discount=a};p.onclick=function(){c.remove(c)};c.info=function(){return{title:b.title,quantity:Number(b.quantity),price:Number(b.price),shipping:Number(b.shipping)*(1-(b.discount||0))}};c.update=function(a){for(var c in a||{})a.hasOwnProperty(c)&&(b[c]=a[c]);f.innerHTML=b.quantity;k.innerHTML=b.price;b.discount?(a=document.createElement("span"),c=document.createTextNode(Number(b.shipping)*
(1-(b.discount||0))),a.className="discount-pin",l.innerHTML="",l.appendChild(a),l.appendChild(c)):l.innerHTML=Number(b.shipping)}}function g(){function b(a){var c=document.getElementById(a);c?c.setAttribute("ordered",!0):async(b,[a])}function c(a){var b=document.getElementById(a);b?b.removeAttribute("ordered"):async(c,[a])}function a(a){window.ajax({type:"POST",data:{id:a.id()},url:"/async/orders/remove"}).done(function(a){if(a.status&&a.removed){p=a.total;f.innerHTML=p;var b=m[a.removed];delete m[a.removed];
c(b.item());n.removeChild(b.el);for(var b=document.createDocumentFragment(),e=0;e<a.items.length;++e){var g=a.items[e];m[g.id]&&(m[g.id].update(g),n.removeChild(m[g.id].el));b.appendChild(m[g.id].el)}n.appendChild(b);0==a.items.length?d.hide():d.activate(d)}})}var d=this,g=document.getElementById("order_list_view"),n=document.getElementById("order_list_table"),f=document.getElementById("order_list_totals"),k=document.getElementById("order_list_advance"),l=document.getElementById("terms"),u=document.getElementById("terms_box"),
p=0,m={};f.setAttribute("currency","z\u0142");u.onclick=function(){l.hasAttribute("checked")?l.removeAttribute("checked"):(l.setAttribute("checked",!0),l.removeAttribute("error"))};window.events.listen("update-ordered",function(){for(var a in m)if(m.hasOwnProperty(a)){var b=document.getElementById(m[a].item());b&&b.setAttribute("ordered",!0)}});d.addOrder=function(c){window.ajax({type:"POST",data:c,url:"/async/orders/add"}).done(function(g){if(g.status){p=g.total;f.innerHTML=p;for(var h=document.createDocumentFragment(),
k=0;k<g.items.length;++k){var l=g.items[k];if(m[l.id])m[l.id].update(l),n.removeChild(m[l.id].el);else if(l.id==g.added){l.title=c.title;l.availability=c.availability;l.preview=c.preview;var u=new r(l);m[l.id]=u;u.remove=a;b(u.item())}m[l.id]&&h.appendChild(m[l.id].el)}n.appendChild(h);1==g.items.length&&d.show(!0);d.reset();d.activate(d)}})};d.clear=function(){for(var a in m)if(m.hasOwnProperty(a)){var b=m[a];delete m[a];c(b.item());n.removeChild(b.el)}};d.init=function(){window.ajax({type:"POST",
data:null,url:"/async/orders/session"}).done(function(c){if(c.status&&c.items){p=c.total;f.innerHTML=p;for(var g=document.createDocumentFragment(),h=0;h<c.items.length;++h){var l=new r(c.items[h]);m[l.id()]=l;l.remove=a;b(l.item());g.appendChild(m[l.id()].el)}n.appendChild(g);0<c.items.length&&(d.show(),d.activate(d))}})};k.onclick=function(){if(l.hasAttribute("checked")){var a=[],b;for(b in m)m.hasOwnProperty(b)&&(a[a.length]=m[b].info());d.advance(d,{items:a,total:p})}else l.setAttribute("error",
!0)};d.el=g}function m(){var b=this,c=document.getElementById("shipping_view"),a=document.getElementById("shipping_advance"),d=document.getElementById("shipping_back"),g=null;a.onclick=function(){var a=C(c);window.ajax({type:"POST",data:a,url:"/async/orders/shipping"}).done(function(a){a.status?(g.shipping=a.data,b.advance(b,g)):t(c,a.error)})};b.clear=function(){g=null};b.apply=function(a){g=a};d.onclick=function(){b.back(b)};b.el=c}function n(){function b(a){a.stopPropagation();for(a=0;a<f.length;++a)f[a].removeAttribute("checked");
this.setAttribute("checked",!0);p=this.getAttribute("option");c.expand(k,this.hasAttribute("expand"))}var c=this,a=document.getElementById("payment_view"),d=document.getElementById("payment_advance"),g=document.getElementById("payment_back"),m=document.getElementById("payment_type"),f=[],k=document.getElementById("payment_details"),l=document.getElementById("billing_details"),n=null,p=0;window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status){var c=0,d;for(d in a.options)if(a.options.hasOwnProperty(d)){var g=
document.createElement("div"),h=document.createElement("div"),l=document.createElement("div");g.className="payment-option "+d;h.className="checkbox";l.className="banner "+d;g.appendChild(h);g.appendChild(l);0==c&&g.setAttribute("checked",!0);g.setAttribute("option",c++);var h=a.options[d],k;for(k in h)h.hasOwnProperty(k)&&g.setAttribute(k,h[k]);m.appendChild(g);f[f.length]=g;g.onclick=b}}});c.apply=function(a){n=a;x(k,{forename:n.shipping.forename,surname:n.shipping.surname});x(l,n.shipping)};c.clear=
function(){n=null};d.onclick=function(){var b=C(l);if(0==p)window.ajax({type:"POST",data:b,url:"/async/orders/pay_paypal"}).done(function(a){a.status?(b=a.data,b.paymentType="Paypal",n.billing=b,c.advance(c,n)):t(l,a.error)});else if(1==p){var d=C(k),e;for(e in d)d.hasOwnProperty(e)&&(b[e]=d[e]);window.ajax({type:"POST",data:b,url:"/async/orders/pay_card"}).done(function(d){d.status?(b=d.data,b.paymentType=b.card.type,n.billing=b,c.advance(c,n)):t(a,d.error)})}};g.onclick=function(){c.back(c)};c.el=
a}function A(){function b(a){var c=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("th"),f=document.createElement("th"),g=document.createElement("th"),h=document.createElement("th");language.bind("title",e);language.bind("quantity",f);language.bind("price",g);language.bind("shipping",h);e.className="preview-label text";f.className="preview-label text";g.className="preview-label text";h.className="preview-label text";d.appendChild(e);d.appendChild(f);d.appendChild(g);
d.appendChild(h);c.appendChild(d);for(d=0;d<a.length;++d){var e=document.createElement("tr"),f=document.createElement("td"),g=document.createElement("td"),h=document.createElement("td"),k=document.createElement("td");f.innerHTML=a[d].title;g.innerHTML=a[d].quantity;h.innerHTML=a[d].price;k.innerHTML=a[d].shipping;h.setAttribute("currency","z\u0142");k.setAttribute("currency","z\u0142");f.className="text preview-data";g.className="text preview-data";h.className="text preview-data";k.className="text preview-data";
e.appendChild(f);e.appendChild(g);e.appendChild(h);e.appendChild(k);c.appendChild(e)}return c}var c=this,a=document.getElementById("done_view"),d=document.getElementById("done_advance"),g=document.getElementById("done_back"),m=document.getElementById("data_preview"),f=document.getElementById("order_summary"),k=m.getElementsByClassName("preview-block");d.onclick=function(){window.location="/async/orders/process"};g.onclick=function(){c.back(c)};c.apply=function(a){for(var c=0;c<k.length;++c)if(k[c].hasAttribute("block-type")){var d=
k[c].getAttribute("block-type");a[d]&&x(k[c],a[d])}f.innerHTML=null;f.appendChild(b(a.items));c=document.createElement("div");d=document.createElement("div");c.className="seperator text";language.bind("total",c);d.className="total-price-summary text-invert-light";d.innerHTML=a.total;d.setAttribute("currency","z\u0142");f.appendChild(c);f.appendChild(d)};c.clear=function(){f.innerHTML=null};c.el=a}function I(b,c){function a(a,c){p!=a?(a.el.style.top=getHeight(b)+200+"px",a.el.style.display="block",
a.apply&&c&&a.apply(c),async(function(){var c=[a.el,b];a.el.set={top:150};b.set={h:200+getHeight(a.el)};p&&(p.el.set={o:0},c[c.length]=p.el,window.scrollBodyTo(b));morpheus(c,{top:function(a){return a.set.top},height:function(a){return a.set.h},opacity:function(a){return a.set.o},duration:250,complete:function(){p&&p.el.removeAttribute("style");p=a}})})):morpheus(b,{height:200+getHeight(a.el)+"px",duration:250})}function d(){for(var a=0;a<l.length;++a)n[a].removeAttribute("status");0<l.length&&n[0].setAttribute("status",
0)}function g(b,c){if(b==p){var d=l.indexOf(b);d+1==l.length?k.done():0<=d&&d+1<l.length&&(n[d].setAttribute("status",1),d+=1,a(l[d],c),n[d].setAttribute("status",0))}}function m(b){b==p&&(b=l.indexOf(b),0>b-1?k.done():0<=b&&0<=b-1&&(n[b].removeAttribute("status"),--b,a(l[b]),n[b].setAttribute("status",0)))}function f(a,c){var d=0,f=0,g=getHeight(b);c?(a.style.display="block",d=getHeight(a),f=a.offsetHeight,a.style.height="0px"):(d=getHeight(a),f=a.offsetHeight);d-=(d-f)/2;a.style.opacity=c?0:1;a.set=
{h:c?f:0,m:c?null:0,o:c?1:0};b.set={h:c?d+g:g-d};morpheus([b,a],{height:function(a){return a.set.h},"margin-bottom":function(a){return a.set.m},"margin-top":function(a){return a.set.m},opacity:function(a){return a.set.o},duration:250,complete:function(){c?(a.style.height="",a.style.opacity=""):a.removeAttribute("style")}})}for(var k=this,l=c,n=document.getElementById("progress_view").getElementsByClassName("progress-step"),p=null,r=0;r<l.length;++r)l[r].reset=d,l[r].activate=a,l[r].advance=g,l[r].back=
m,l[r].expand=f;k.init=function(){for(var a=0;a<l.length;++a)l[a].init&&l[a].init()};k.clear=function(){d();for(var a=b.getElementsByTagName("*"),c=0;c<a.length;++c)a[c].hasAttribute("user-input")&&(a[c].parentNode.removeAttribute("unset"),D(a[c],""));for(a=0;a<l.length;++a)l[a].clear()}}function E(){function d(){c.set={w:0};a.set={h:0};morpheus([c,a],{width:function(a){return a.set.w},height:function(a){return a.set.h},duration:350,complete:function(){c.style="";a.style="";a.removeChild(r)}});window.scrollBodyTo(window.shop.el)}
var c=document.getElementById("order"),a=document.getElementById("order_panel"),r=document.getElementById("order_panel_inner"),h=new g,t=new m,f=new n,k=new A,l=new I(a,[h,t,f,k]);b(a);a.removeChild(r);h.show=function(b){order_panel.appendChild(r);c.style.display="inline-block";a.style.display="block";b&&window.scrollBodyTo(a)};h.hide=d;window.events.listen("order",function(a){h.addOrder(a)});l.done=function(){l.clear();d()};l.init();this.el=a}window.addEventListener("load",function(){window.orders=
new E})})();
