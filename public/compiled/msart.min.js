(function(D,B){"function"==typeof define?define(B):"undefined"!=typeof module?module.exports=B():this[D]=B()})("morpheus",function(){function D(c){var g;g=I.length;for(a&&(c=e());g--;)I[g](c);I.length&&H(D)}function B(a,c){var u={},k;if(k=a.match(g))u.rotate=l(k[1],c?c.rotate:null);if(k=a.match(q))u.scale=l(k[1],c?c.scale:null);if(k=a.match(f))u.skewx=l(k[1],c?c.skewx:null),u.skewy=l(k[3],c?c.skewy:null);if(k=a.match(y))u.translatex=l(k[1],c?c.translatex:null),u.translatey=l(k[3],c?c.translatey:null);
return u}function v(a){var c="";"rotate"in a&&(c+="rotate("+a.rotate+"deg) ");"scale"in a&&(c+="scale("+a.scale+") ");"translatex"in a&&(c+="translate("+a.translatex+"px,"+a.translatey+"px) ");"skewx"in a&&(c+="skew("+a.skewx+"deg,"+a.skewy+"deg)");return c}function w(a){var c=a.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(c?"#"+(16777216|c[1]<<16|c[2]<<8|c[3]).toString(16).slice(1):a).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function x(a){return a.replace(/-(.)/g,function(a,c){return c.toUpperCase()})}
function z(a){return"function"==typeof a}function d(a){return Math.sin(a*Math.PI/2)}function b(a,c,u,g,k,f){function h(a){a-=F;if(a>C||q){f=isFinite(f)?f:1;q?y&&c(f):c(f);var e;a:if(a=I,e=void 0,Array.prototype.indexOf)e=a.indexOf(h);else{for(e=0;e<a.length;++e)if(a[e]===h)break a;e=void 0}0<=e&&(a=I.slice(e+1),I.length=e,I=I.concat(a));return u&&u.apply(p)}isFinite(f)?c(r*g(a/C)+k):c(g(a/C))}g=z(g)?g:n.easings[g]||d;var C=a||1E3,p=this,r=f-k,F=e(),q=0,y=0;1===I.push(h)&&H(D);return{stop:function(a){q=
1;(y=a)||(u=null)}}}function t(a,c){var u=a.length,g=[],f,k;for(f=0;f<u;++f)g[f]=[a[f][0],a[f][1]];for(k=1;k<u;++k)for(f=0;f<u-k;++f)g[f][0]=(1-c)*g[f][0]+c*g[parseInt(f+1,10)][0],g[f][1]=(1-c)*g[f][1]+c*g[parseInt(f+1,10)][1];return[g[0][0],g[0][1]]}function l(a,c,g,u,f){return(g=h.exec(a))?(f=parseFloat(g[2]))&&c+("+"==g[1]?1:-1)*f:parseFloat(a)}function n(a,c){var g=a?g=isFinite(a.length)?a:[a]:[],f,h=c.complete,e=c.duration,I=c.easing,q=c.bezier,y=[],H=[],d=[],G=[],A,n;q&&(A=c.left,n=c.top,delete c.right,
delete c.bottom,delete c.left,delete c.top);for(f=g.length;f--;){y[f]={};H[f]={};d[f]={};if(q){var m=F(g[f],"left"),E=F(g[f],"top"),D=[l(z(A)?A(g[f]):A||0,parseFloat(m)),l(z(n)?n(g[f]):n||0,parseFloat(E))];G[f]=z(q)?q(g[f],D):q;G[f].push(D);G[f].unshift([parseInt(m,10),parseInt(E,10)])}for(var J in c){switch(J){case "complete":case "duration":case "easing":case "bezier":continue}var m=F(g[f],J),Q,E=z(c[J])?c[J](g[f]):c[J];"string"==typeof E&&k.test(E)&&!k.test(m)?delete c[J]:(y[f][J]="transform"==
J?B(m):"string"==typeof E&&k.test(E)?w(m).slice(1):parseFloat(m),H[f][J]="transform"==J?B(E,y[f][J]):"string"==typeof E&&"#"==E.charAt(0)?w(E).slice(1):l(E,parseFloat(m)),"string"==typeof E&&(Q=E.match(r))&&(d[f][J]=Q[1]))}}return b.apply(g,[e,function(a,k,h){for(f=g.length;f--;){q&&(h=t(G[f],a),g[f].style.left=h[0]+"px",g[f].style.top=h[1]+"px");for(var e in c){k=a;var r=d;h=y;var I=H,F=e,b=f,A=void 0;if("transform"==F){A={};r=void 0;for(r in h[b][F])A[r]=r in I[b][F]?Math.round(1E3*((I[b][F][r]-
h[b][F][r])*k+h[b][F][r]))/1E3:h[b][F][r];k=A}else if("string"==typeof h[b][F]){h=h[b][F];I=I[b][F];F=[];r=A=A=b=void 0;for(b=0;6>b;b++)A=Math.min(15,parseInt(h.charAt(b),16)),r=Math.min(15,parseInt(I.charAt(b),16)),A=Math.floor((r-A)*k+A),A=15<A?15:0>A?0:A,F[b]=A.toString(16);k="#"+F.join("")}else A=Math.round(1E3*((I[b][F]-h[b][F])*k+h[b][F]))/1E3,F in p||(A+=r[b][F]||"px"),k=A;"transform"==e?g[f].style[C]=v(k):"opacity"!=e||u?g[f].style[x(e)]=k:g[f].style.filter="alpha(opacity="+100*k+")"}}},h,
I])}var m=document,E=window,A=E.performance,G=A&&(A.now||A.webkitNow||A.msNow||A.mozNow),e=G?function(){return G.call(A)}:function(){return+new Date},a=!1,c=m.documentElement,k=/^rgb\(|#/,h=/^([+\-])=([\d\.]+)/,r=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,g=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,q=/scale\(((?:[+\-]=)?([\d\.]+))\)/,f=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,y=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,p={lineHeight:1,
zoom:1,zIndex:1,opacity:1,transform:1},C=function(){var a=m.createElement("a").style,c=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],g;for(g=0;g<c.length;g++)if(c[g]in a)return c[g]}(),u="undefined"!==typeof m.createElement("a").style.opacity,F=m.defaultView&&m.defaultView.getComputedStyle?function(a,c){c="transform"==c?C:c;c=x(c);var g=null,f=m.defaultView.getComputedStyle(a,"");f&&(g=f[c]);return a.style[c]||g}:c.currentStyle?function(a,c){c=x(c);if("opacity"==c){var g=
100;try{g=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(f){try{g=a.filters("alpha").opacity}catch(u){}}return g/100}g=a.currentStyle?a.currentStyle[c]:null;return a.style[c]||g}:function(a,c){return a.style[x(c)]},H=function(){return E.requestAnimationFrame||E.webkitRequestAnimationFrame||E.mozRequestAnimationFrame||E.msRequestAnimationFrame||E.oRequestAnimationFrame||function(a){E.setTimeout(function(){a(+new Date)},17)}}();H(function(c){a=1E12<c!=1E12<e()});var I=[];n.tween=b;n.getStyle=
F;n.bezier=t;n.transform=C;n.parseTransform=B;n.formatTransform=v;n.animationFrame=H;n.easings={};return n});(function(D,B,v){function w(b,G,e,a){e=e||"width";var c;c=(G.match(l)||[])[2];var k="px"===c?1:n[c+"toPx"],h=/r?em/i;if(k||h.test(c)&&!a)b=k?b:"rem"===c?d:"fontSize"===e?b.parentNode||b:b,k=k||parseFloat(x(b,"fontSize")),b=parseFloat(G)*k;else{a=b.style;c=a[e];try{a[e]=G}catch(r){return 0}b=a[e]?parseFloat(x(b,e)):0;a[e]=c!==v?c:null}return b}function x(d,G){var e,a,c=/^top|bottom/,k=["paddingTop","paddingBottom","borderTop","borderBottom"],h=4;e=b?b(d)[G]:(a=d.style["pixel"+G.charAt(0).toUpperCase()+
G.slice(1)])?a+"px":"fontSize"===G?w(d,"1em","left",1)+"px":d.currentStyle[G];a=(e.match(l)||[])[2];if("%"===a&&t)if(c.test(G)){for(c=(a=d.parentNode||d).offsetHeight;h--;)c-=parseFloat(x(a,k[h]));e=parseFloat(e)/100*c+"px"}else e=w(d,e);else("auto"===e||a&&"px"!==a)&&b?e=0:a&&"px"!==a&&!b&&(e=w(d,e)+"px");return e}var z=B.createElement("test"),d=B.documentElement,b=(B=B.defaultView)&&B.getComputedStyle,t,l=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,n={};B=[1/25.4,1/2.54,1/72,1/6];var m="mm cm pt pc in mozmm".split(" "),
E=6;d.appendChild(z);b&&(z.style.marginTop="1%",t="1%"===b(z).marginTop);for(;E--;)n[m[E]+"toPx"]=B[E]?B[E]*n.inToPx:w(z,"1"+m[E]);d.removeChild(z);z=v;D.Length={toPx:w}})(this,this.document);(function(D){function B(d){var b=null,t=new XMLHttpRequest;t.open(d.type,d.url,!0);d.files||t.setRequestHeader("Content-type","application/json");d.cache&&t.setRequestHeader("Cache-Control","max-age=86400");t.onloadend=function(){200==t.status?b&&b(JSON.parse(t.responseText)):b&&b(null);t=null};d.files?t.send(d.data):t.send(d.data?JSON.stringify(d.data):null);this.done=function(d){b=d}}function v(d){var b=d.currentStyle||window.getComputedStyle(d);return Length.toPx(d,b.marginTop)}function w(){var d=
[],b=function(b,d){return b-d},t=function(l,n,m){var E=d.length;n=null==n?0:n;m=null==m?E-1:m;var A=n+Math.floor((m-n)/2);if(0==E)return E;if(0<b(l,d[m]))return m+1;if(0>b(l,d[n]))return n;E=b(l,d[A]);if(0==E)return A;if(0>E)return t(l,n,A-1);if(0<E)return t(l,A+1,m)};this.setCompare=function(d){d&&(b=d)};this.insert=function(b){d.splice(t(b),0,b)};this.length=function(){return d.length};this.at=function(b){return d[b]};this.grab=function(b){return d.splice(0,b)};this.data=function(){return d}}function x(d){var b=
function(){var b=window.performance||{};b.now=function(){return b.now||b.webkitNow||b.msNow||b.oNow||b.mozNow||function(){return(new Date).getTime()}}();return b.now()},t=function(){return d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.msRequestAnimationFrame||d.oRequestAnimationFrame||function(n){d.setTimeout(function(){n(b())},1E3/60)}}(),l=function(){return new function(){var b=new w,d=function(l){0<b.length()&&t(d);var A,G;A=0;for(G=b.length();A<G&&!(b.at(A).timestamp>
l);++A);l=b.grab(A);A=0;for(G=l.length;A<G;++A)l[A].func.apply(null,l[A].args)};b.setCompare(function(b,d){return b.timestamp-d.timestamp});this.addTask=function(l){b.insert(l);0<b.length()&&t(d)}}}();d.async=function(d,m,t){"Function"!=classOf(d)||m&&"Array"!=classOf(m)||l.addTask({timestamp:t?b()+t:0,func:d,args:m||[]})}}function z(d){var b={};d.events={listen:function(d,l){var n=b[d]||[];n[n.length]=l;b[d]=n},remove:function(d,l){var n=b[d]||[],m=n.indexOf(l);0<=m&&n.splice(m,1)},emit:function(t,
l){var n=b[t];if(n)for(var m=0;m<n.length;++m)d.async(n[m],l)}}}D.hashCode=function(d){var b=0,t,l,n;if(0===d.length)return b;t=0;for(n=d.length;t<n;t++)l=d.charCodeAt(t),b=(b<<5)-b+l,b|=0;return b};D.MSInputObject=function(d){var b=this;b.__get_value=null;b.__set_value=null;d=d||{};if(window.admin||d.user){if(d.multiline){b.el=document.createElement("textarea");var t=b.el.offsetHeight-b.el.clientHeight,l=0,n=b.el.clientHeight,m=function(){async(function(){var d=b.el.value.length;d<l&&(b.el.style.height=
"auto");var A=b.el.scrollHeight+t;0<A&&(b.el.style.height=A+"px");l=d;A!=n&&(n=A)})};b.__get_value=function(){return b.el.value};b.__set_value=function(d){b.el.value=d;m()};b.el.addEventListener("keydown",m);b.el.addEventListener("keyup",m)}else b.el=document.createElement("input"),b.el.setAttribute("type","text"),b.__get_value=function(){return b.el.value},b.__set_value=function(d){b.el.value=d};b.el.onchange=function(){if(b.onchange)b.onchange(b)};d.placeholder&&this.el.setAttribute("placeholder",
d.placeholder)}else b.el=document.createElement("div"),b.__get_value=function(){return b.el.innerHTML},b.__set_value=function(d){b.el.innerHTML=d};d.className&&(b.el.className=d.className);d.id&&(b.el.id=d.id)};MSInputObject.prototype.value=function(){return this.__get_value()||""};MSInputObject.prototype.setValue=function(d){this.__set_value(d||"")};D.MSDivObject=function(d){this.el=d||document.createElement("div")};MSDivObject.prototype.addClass=function(d){-1==this.el.className.indexOf(d)&&(this.el.className=
this.el.className.concat(" ",d))};MSDivObject.prototype.removeClass=function(d){-1<this.el.className.indexOf(d)&&(this.el.className=this.el.className.replace(d,"").replace("  "," ").trim())};MSDivObject.prototype.setPlaceholder=function(d){if(window.admin){var b=this,t=document.createElement("span"),l=!0;b.has_placeholder=!0;t.className="placeholder";t.innerHTML=d;0==b.el.innerHTML.length&&(b.el.appendChild(t),b.addClass("placeholder-visible"));b.el.addEventListener("text-changed",function(){0==b.el.innerHTML.length?
(l||(b.addClass("placeholder-visible"),l=!0),b.el.appendChild(t)):l&&(l=!1,b.removeClass("placeholder-visible"))});b.el.addEventListener("focus",function(){l&&(b.el.removeChild(t),b.removeClass("placeholder-visible"),l=!1)});b.el.addEventListener("blur",function(){0==b.innerHTML.length&&(b.el.appendChild(t),b.addClass("placeholder-visible"),l=!0)});b.has_text=function(){return!l}}};MSDivObject.prototype.refresh=function(){(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed"))};
MSDivObject.prototype.setText=function(d){d&&(this.el.innerHTML=d,(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed")))};MSDivObject.prototype.getText=function(){return this.has_placeholder?this.has_text()?this.el.innerHTML:"":this.el.innerHTML};MSDivObject.prototype.textEdit=function(d){if(window.admin){var b=this;d=d||{};d.textItem=d.textItem||b;b.el.addEventListener("click",function(){if(!b.in_edit){b.in_edit=!0;var t=d.textItem.getText(),l=d.multiline?document.createElement("textarea"):
document.createElement("input");d.multiline&&d.autosize&&l.addEventListener("keydown",function(){async(function(){l&&(l.style.height=l.scrollHeight+"px")})});d.multiline||(l.type="text");l.className="inplace-text-edit";l.value=t;l.style.width=b.el.offsetWidth-(d.offsetWidth||0)+"px";l.style.height=b.el.offsetHeight-(d.offsetHeight||0)+"px";b.el.innerHTML="";b.el.appendChild(l);l.focus();l.onblur=function(){d.textItem.setText(l.value);l=null;b.in_edit=!1;d.textItem!=b&&(b.el.innerHTML="",b.el.appendChild(d.textItem.el),
b.refresh())}}})}};MSDivObject.prototype.loadImage=function(d){var b=this,t=d.url;async(function(){b.el.style.backgroundImage="url("+t+")"})};D.FileUpload=function(d){var b=this,t=document.createElement("div"),l=document.createElement("input");d=d||{multiple:!1};d.id&&(t.id=d.id);d.className&&(t.className=d.className);l.type="file";l.name="file";l.accept="image/*";l.multiple=d.multiple;t.appendChild(l);l.onchange=function(d){b.preview&&b.preview(d.target.files)};b.el=t};D.DropDown=function(d,b){function t(a,
c){if(a.manager)a.manager.setValue(c);else if(a.firstChild&&3==a.firstChild.nodeType)a.firstChild.nodeValue=c;else{var f=document.createTextNode(c);a.firstChild?a.insertBefore(f,a.firstChild):a.appendChild(f)}}function l(){var a=null,c=[];this.bind=function(f){c[c.length]=f;a&&t(f,a)};this.unbind=function(a){a=c.indexOf(a);0<=a&&c.splice(a,1)};this.setValue=function(f){if(a=f)for(f=0;f<c.length;++f)t(c[f],a)}}var n=this,m=b||document.createElement("div"),v=!d.adminOnly||window.admin,A=v?document.createElement("img"):
null,G=v?document.createElement("lu"):null,e=!1,a=!1,c={},k=null,h=!1,r=function(a){var h=c[a];h&&(k&&k.unbind(m),m.setAttribute("current-data-id",a),k=h,k.bind(m),v&&e&&n.close(),n.changed&&async(n.changed,[a]))};m.controller=n;n.addItem=function(a,e){var f=new l,b=null;c[a]=f;e&&f.setValue(a);v&&(b=document.createElement("li"),b.className="dropdown-item text-invert",b.onclick=function(){h||r(a)},G.appendChild(b),f.bind(b));k||r(a);return{controller:f,item:b}};n.addVirtual=function(){var a=document.createElement("li");
a.className="dropdown-item virtual text-invert";G.appendChild(a);return a};n.removeVirtual=function(a){G.contains(a)&&G.removeChild(a)};m.className=d.className?0<m.className.length?m.className+(" dropdown-container no-select text "+d.className):"dropdown-container no-select text "+d.className:0<m.className.length?m.className+" dropdown-container text":"dropdown-container text";v&&(A.src=d.src||"../images/down.png",m.appendChild(A),G.className="dropdown-list no-select",m.appendChild(G),m.onclick=function(){h||
a||(n.beforeOpen&&n.beforeOpen(),e=!0,G.style.display="block")},m.onmouseleave=function(){h||n.close()});n.el=m;n.manual=function(){h=!0};n.auto=function(){h=!1};n.open=function(){h&&(e=!0,G.style.display="block")};n.close=function(){e&&(n.beforeClose&&n.beforeClose(),G.style.right="-200%",async(function(){G.removeAttribute("style")}))};n.setText=function(a){t(m,a)};n.text=function(){return m.firstChild&&3==m.firstChild.nodeType?m.firstChild.nodeValue:""};n.value=function(){return m.getAttribute("current-data-id")};
n.setValue=function(a){r(a)};n.lock=function(){a=!0;m.setAttribute("locked",!0)};n.unlock=function(){a=!1;m.removeAttribute("locked")}};D.classOf=function(d){return/\[object (\w+)\]/.exec(Object.prototype.toString.call(d))[1]};D.getHeight=function(d){var b;document.all?(b=parseInt(d.currentStyle.height),d=parseInt(d.currentStyle.marginTop,10)+parseInt(d.currentStyle.marginBottom,10)):(b=parseInt(document.defaultView.getComputedStyle(d,"").getPropertyValue("height")),d=parseInt(document.defaultView.getComputedStyle(d,
"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(d,"").getPropertyValue("margin-bottom")));return b+d};D.browser={opera:!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),firefox:"undefined"!==typeof InstallTrigger,safari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),ie:!!document.documentMode};D.browser.chrome=!!window.chrome&&!window.browser.opera;D.ajax=function(d){return new B(d)};D.scrollBodyTo=function(d){var b=document.getElementById("content-wrapper"),
t=parseInt(d.offsetTop-v(d)),l=parseInt(b.scrollTop);for(d=d.parentNode;d&&d!=b;)t+=parseInt(d.offsetTop-v(d)),d=d.parentNode;if(l!=t){var n=t-l;morpheus.tween(500,function(d){d=l+n*d;0<=d&&d<=b.scrollHeight&&(b.scrollTop=d)})}};D.addEventListener("load",function(){new x(D);new z(D)})})(this);(function(){function D(){function v(b,d){if(b.controller)b.controller.setValue(d);else if(b.firstChild&&3==b.firstChild.nodeType&&b.firstChild.nodeValue)b.firstChild.nodeValue=d;else{var m=document.createTextNode(d);b.firstChild?b.insertBefore(m,b.firstChild):b.appendChild(m)}}var w="en",x={},z={};this.bind=function(b,d){v(d,B[w][b]);var m=x[b];m?m[m.length]=d:x[b]=[d]};this.bindInput=function(b,d){d.placeholder=B[w][b];var m=z[b];m?m[m.length]=d:z[b]=[d]};this.unbind=function(b){for(var d in x)if(x.hasOwnProperty(d)&&
0<x[d].length){var m=x[d].indexOf(b);-1!=m&&x[d].splice(m,1)}};this.unbindInput=function(b){for(var d in z)if(z.hasOwnProperty(d)&&0<z[d].length){var m=z[d].indexOf(b);-1!=m&&z[hey].splice(m,1)}};this.change=function(b){if(B[b]&&w!=b){w=b;for(var d in x)if(x.hasOwnProperty(d)&&0<x[d].length){b=x[d];for(var m=b.length,t=0;t<m;++t)v(b[t],B[w][d])}for(d in z)if(z.hasOwnProperty(d)&&0<z[d].length)for(b=z[d],m=b.length,t=0;t<m;++t)b[t].placeholder=B[w][d]}};for(var d=document.getElementsByTagName("*"),
b=0;b<d.length;++b)if(d[b].hasAttribute("lang")){var t=d[b].getAttribute("lang");this.bind(t,d[b])}else d[b].hasAttribute("placeholder-lang")&&(t=d[b].getAttribute("placeholder-lang"),this.bindInput(t,d[b]));this.change("pl")}var B={en:{about:"About",shop:"Shop",orders:"Orders",gallery:"Gallery",contact:"Contact",description:"Description",title:"Title",type:"Type",availability:"Availability",process:"Order Process",price:"Price",quantity:"Quantity",shipping:"Shipping",qandp:"Quantity & Price",payment_opt:"Payment methods",
lead:"Lead times",individual:"Individual",common:"Common",available:"Available",demand:"On-Demand",keep:"Keep in Shop",move:"Move to Gallery",remove:"Remove","delete":"Delete",save:"Save",close:"Close",order:"Order",aboutus:"About Us",office:"Our Office",contactus:"Contact Us",name:"Name",surname:"Surname",email:"E-mail",address:"Address",country:"Country",postcode:"Post Code",message:"Message"},pl:{about:"Pracownia",shop:"Sklep",orders:"Zam\u00f3wienie",order:"Zam\u00f3w",gallery:"Galeria",contact:"Kontakt",
description:"Opis",title:"Nazwa",type:"Rodzaj",availability:"Dost\u0119pno\u015b\u0107",process:"Akcja",price:"Cena",close:"Zamknij",save:"Zapisz","delete":"Kasuj",payment_opt:"Forma p\u0142atno\u015bci",lead:"Czas realizacji",quantity:"Ilo\u015b\u0107",shipping:"Transport",total:"Koszt ca\u0142kowity",checkout:"Dalej",about_us:"O nas",office:"Dane kontaktowe",about_us_value:"",send:"Wy\u015blij",personal_details:"Dane osobowe",forename:"Imi\u0119",surname:"Nazwisko",email:"Email",phone:"Numer telefonu",
shipping_address:"Adres wysy\u0142ki",company:"Nazwa firmy",address:"Ulica",city:"Miasto",county:"Wojew\u00f3dztwo",post_code:"Kod pocztowy",country:"Kraj",next:"Kontynuuj",back:"Wr\u00f3\u0107",payment_type:"Rodzaj p\u0142atno\u015bci",card_details:"Szczeg\u00f3\u0142y karty kredytowej",card_no:"Numer karty",cvv:"CVV",expiry:"Termin wa\u017cno\u015bci",billing_address:"Adres fakturowania",vat:"NIP",full_name:"Imi\u0119 i nazwisko",price_summary:"Podsumowanie",pay:"Zap\u0142a\u0107",message:"Wiadomo\u015b\u0107",
individual:"Pojedynczy",common:"Zbiorowy",advert:"Og\u0142oszenie",available:"Dost\u0119pny",demand:"Na zam\u00f3wienie",keep:"Sklep",move:"Galeria",remove:"Usu\u0144",today:"Dzisiaj",l_3_day:"3 dni",l_week:"Tydzie\u0144",l_month:"Miesi\u0105c",l_time:"Ca\u0142y czas",lead_avail:"- Realizacja zam\u00f3wienia: 1 dzie\u0144 roboczy\n- Czas dostawy: 2 - 3 dni robocze",lead_wait:"- Realizacja zam\u00f3wienia: 2 - 3 tygodnie\n- Czas dostawy: 2 - 3 dni robocze",components:"Nazwa",none:"Bez nazwy",labeled:"Oznaczona",
projects:"Projekt",category:"Kategoria",allitems:"Wszystkie",lowprice:"Cena malej\u0105co",hightprice:"Cena rosn\u0105co",iagree:"Akceptuj\u0119",terms:"Regulamin sklepu",workshop:"Warsztaty",duration:"Czas trwania",timetable:"Terminy zaj\u0119\u0107"}};window.addEventListener("load",function(){window.language=new D})})();(function(){function D(){var v=document.getElementById("main_menu"),w=document.getElementById("menu_list"),x=v.getElementsByClassName("menu_item"),z=!1,d={};v.onclick=function(){z?(z=!1,w.removeAttribute("style")):(w.style.display="block",z=!0)};for(v=0;v<x.length;++v){var b=x[v].getAttribute("scrollto");d[b]=document.getElementById(b);x[v].onclick=function(b){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0;z=!1;w.removeAttribute("style");window.scrollBodyTo(d[b.target.getAttribute("scrollto")])}}}
function B(){if(window.mobile)new D;else{var v=document.getElementById("header"),w=document.getElementById("content-wrapper"),x=document.getElementById("title"),z=document.getElementById("main_menu"),d=z.getElementsByClassName("menu_item"),b=[v,w,x,z],t={},l=!1,n;for(n in d)if(d.hasOwnProperty(n)){var m=d[n].getAttribute("scrollto");t[m]=document.getElementById(m);d[n].onclick=function(b){window.scrollBodyTo(t[b.target.getAttribute("scrollto")])}}v.unset={height:160};w.unset={top:160};x.unset={height:120,
width:720,left:"50%",marginLeft:-360};z.unset={top:120,left:"50%",marginLeft:-350};v.set={height:60};w.set={top:60};x.set={height:60,width:350,left:"0%",marginLeft:0};z.set={top:15,left:"100%",marginLeft:-700};for(n in b){var d=b[n].unset,E;for(E in d)b[n].style[E]=d[E]}window.events.listen("requestHeaderHeight",function(b){b(v.offsetHeight)});window.addEventListener("resize",function(){l&&(x.style.marginLeft=(v.offsetWidth<z.offsetWidth+350?-350:0)+"px")});w.addEventListener("scroll",function(){var d=
w.scrollTop;l&&0==d?(l=!1,morpheus(b,{height:function(b){return b.unset.height},width:function(b){return b.unset.width},top:function(b){return b.unset.top},left:function(b){return b.unset.left},marginLeft:function(b){return b.unset.marginLeft},duration:350,complete:function(){window.events.emit("headerChanged",[v.unset.height])}})):!l&&0<d&&(l=!0,x.set.marginLeft=v.offsetWidth<z.offsetWidth+350?-350:0,morpheus(b,{height:function(b){return b.set.height},width:function(b){return b.set.width},top:function(b){return b.set.top},
left:function(b){return b.set.left},marginLeft:function(b){return b.set.marginLeft},duration:500,complete:function(){window.events.emit("headerChanged",[v.set.height])}}))})}}window.addEventListener("load",function(){window.header=new B})})();(function(){function D(v){var w=this,x=document.createElement("div"),z=new MSInputObject({multiline:!0,placeholder:"Description",className:"about-column-text text"}),d=window.admin?document.createElement("div"):null;x.className="about-column";z.setValue(v);x.appendChild(z.el);d&&(d.className="remove-about-column",x.appendChild(d),d.onclick=function(){w.remove&&w.remove(w)});w.el=x;w.text=function(){return z.value()}}function B(){var v=document.getElementById("about_panel"),w=document.getElementById("columns");
document.getElementById("demo_show");var x=window.admin?document.getElementById("create_about_column"):null,z=window.admin?document.getElementById("save_about_column"):null,d=window.admin?function(d){w.removeChild(d.el);b.splice(b.indexOf(d),1)}:null,b=[];window.admin&&v.setAttribute("admin",!0);x&&(x.onclick=function(){var t=new D;t.remove=d;b.push(t);w.appendChild(t.el)});z&&(z.onclick=function(){for(var d=[],l=0;l<b.length;++l)d.push(b[l].text());window.ajax({type:"POST",data:{fields:d},url:"/async/about/save"})});
window.ajax({type:"POST",url:"/async/about/load"}).done(function(t){if(t.status&&t.fields){var l=document.createDocumentFragment(),n;for(n in t.fields){var m=new D(t.fields[n]);m.remove=d;b.push(m);l.appendChild(m.el)}w.appendChild(l)}})}window.addEventListener("load",function(){window.home=new B})})();(function(){function D(b){var d=this,e=b.id,a=b.file?!0:!1,c=b.file,k=null,h=!1,r=null,g=!1,q=new MSDivObject;b=window.admin?document.createElement("div"):null;q.el.className="picture-thumb";b&&(b.className="picture-thumb-remove",b.onclick=function(){d.removed&&d.removed(e)},q.el.appendChild(b));window.admin&&(q.el.setAttribute("draggable",!0),q.el.ondragstart=function(a){a.dataTransfer.setData("target",e)},q.el.ondragover=function(a){a.preventDefault()},q.el.ondrop=function(a){a.preventDefault();
d.swap&&d.swap(a.dataTransfer.getData("target"),e)});q.el.onclick=function(){d.click&&d.click(d)};d.el=q.el;d.id=function(){return e};d.isTemp=function(){return a};d.file=function(){return c};d.data=function(){return k};d.remove=function(){h=!0;return a};d.pack=function(){return{id:e,temp:a,file:c,data:k,removed:h}};d.onload=function(a){g&&a?async(a,[d]):r=a};d.commit=function(b){if(h&&!a)window.ajax({type:"POST",data:{id:e},url:"/async/images/delete"}).done(function(a){b()});else if(a){var g=new FormData;
g.append("file",c);window.ajax({type:"POST",data:g,files:!0,url:"/async/images/save"}).done(function(a){b(a.id)})}else b(e)};d.update=function(b){e=b.id;a=b.temp;c=b.file;k=b.data;h=b.removed;q.el.style.backgroundImage=a?"url("+k+")":"url(/async/thumb/load/"+e+")"};a?(b=new FileReader,b.onload=function(a){k=a.target.result;q.el.style.backgroundImage="url("+k+")";g=!0;r&&(async(r,[d]),r=null)},b.readAsDataURL(c)):(q.loadImage({url:"/async/thumb/load/"+e,color:"#e0e0e0",shadow:!0,radius:24,width:6,
length:22,lines:15,speed:.75}),g=!0,r&&(async(r,[d]),r=null))}function B(){var b=this,d=document.createElement("div"),e=document.createElement("div"),a=document.createElement("div"),c=new MSDivObject,k=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,h=null,r={},g=[],q=function(c){var b=r[c];b&&(b.remove()&&delete r[c],a.removeChild(b.el));c=g.indexOf(c);0<=c&&g.splice(c,1)},f=function(a,c){var b=r[a],d=b.pack(),f=r[c].pack();r[a]=r[c];r[c]=b;r[a].update(d);r[c].update(f);
b=g.indexOf(a);d=g.indexOf(c);g[b]=c;g[d]=a},y=function(a){a.isTemp()?c.el.style.backgroundImage="url("+a.data()+")":c.loadImage({url:"/async/images/load/"+a.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});scrollBodyTo(d);c.el.setAttribute("current",a.id())};d.className="picture-manager";e.className="picture-container";a.className="picture-carousel";e.appendChild(a);c.el.className="picture-preview";k&&(a.appendChild(k.el),k.preview=function(a){if(a){b.beginAdd();for(var c=
null,d=0;d<a.length;++d){var g=new D({id:String(hashCode(a[d].name)),file:a[d]});c||(c=g);b.add(g)}b.endAdd();b.show(c)}});d.appendChild(c.el);d.appendChild(e);b.el=d;b.imageList=function(){return g};b.commit=function(a){var c=function(a,b,d,g,f){a==b?f(g):r[d[a]].commit(function(k){k&&g.push(k);c(a+1,b,d,g,f)})};c(0,g.length,g,[],a)};b.beginAdd=function(){null==h&&(h=document.createDocumentFragment())};b.endAdd=function(){if(h&&(a.appendChild(h),h=null,0<g.length))r[g[0]].onload(y)};b.present=function(a){(a=
r[a])&&async(y,[a])};b.add=function(a){h&&!r[a.id()]&&(g.push(a.id()),r[a.id()]=a,a.removed=q,a.swap=f,a.click=y,h.appendChild(a.el))};b.show=function(a){var c=function(){if(h)async(c);else if(a)a.onload(y)};async(c)}}function v(){var b=document.createElement("table"),d=new MSInputObject({placeholder:"Duration",className:"text"}),e=new MSInputObject({placeholder:"Price",className:"text"});language.bindInput("duration",d.el);language.bindInput("price",e.el);var a=document.createElement("tr"),c=document.createElement("th"),
k=document.createElement("th");a.className="text-invert";language.bind("duration",c);language.bind("price",k);a.appendChild(c);a.appendChild(k);b.appendChild(a);a=document.createElement("tr");c=document.createElement("td");k=document.createElement("td");c.appendChild(d.el);a.appendChild(c);k.appendChild(e.el);a.appendChild(k);b.appendChild(a);b.className="single-item";this.el=b;this.value=function(){return{duration:d.value(),price:e.value()}};this.setValue=function(a){d.setValue(a.duration);e.setValue(a.price)}}
function w(){var b=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("th"),a=document.createElement("th"),c=document.createElement("tr"),k=document.createElement("td"),h=document.createElement("td");d.className="text-invert";language.bind("duration",e);language.bind("price",a);d.appendChild(e);d.appendChild(a);b.appendChild(d);c.appendChild(k);c.appendChild(h);b.appendChild(c);k.setAttribute("currency","godz.");h.setAttribute("currency","z\u0142");this.el=b;this.value=
function(){return current};this.setValue=function(a){k.innerHTML=a.duration;h.innerHTML=a.price}}function x(b){b=document.createElement("div");var d=window.admin?new v:new w;b.appendChild(d.el);b.className="price text advert-hide";this.el=b;this.value=function(){return d.value()};this.setValue=function(b){b&&d.setValue(b)}}function z(){function b(){this.removeAttribute("error");this.onfocus=null}var d=document.createElement("div"),e=document.createElement("div"),a=document.createElement("input"),
c=document.createElement("input"),k=new MSInputObject({className:"message text",multiline:!0,user:!0});d.className="workshop-item-contact-panel";e.className="text-header header-text";a.className="name text";c.className="email text";language.bind("contact",e);language.bindInput("full_name",a);language.bindInput("email",c);language.bindInput("message",k.el);d.appendChild(e);d.appendChild(a);d.appendChild(c);d.appendChild(k.el);this.el=d;this.value=function(){return{name:a.value,email:c.value,message:k.value()}};
this.error=function(d){for(var e in d)"name"==e?(a.setAttribute("error",!0),a.onfocus=b):"email"==e?(c.setAttribute("error",!0),c.onfocus=b):"message"==e&&(k.el.setAttribute("error",!0),k.el.onfocus=b)}}function d(){function b(a){var c=this,d=document.createElement("div"),k=window.admin?document.createElement("input"):document.createElement("div"),h=window.admin?new Flatpickr(k,{locale:Flatpickr.l10ns.pl,enableTime:!0,minDate:new Date,time_24hr:!0,dateFormat:"F j, Y H:i",onChange:function(a){1==a.length&&
(u=a[0])}}):null,e=window.admin?document.createElement("div"):null,u=a;d.className="timetable-element";k.className="timetable-element-input text-invert";d.appendChild(k);window.admin?(e.className="timetable-element-remove",d.appendChild(e),h.setDate(u),e.onclick=function(){c.remove(c)}):(a=Flatpickr.l10ns.pl.months.longhand[u.getMonth()]+" "+u.getDate()+", "+u.getFullYear()+" "+u.getHours()+":"+(10>u.getMinutes()?"0"+u.getMinutes():u.getMinutes()),k.innerHTML=a);c.value=function(){return u.valueOf()};
c.el=d}var d=this,e=document.createElement("div"),a=window.admin?document.createElement("div"):null,c=window.admin?document.createElement("input"):null,k=window.admin?new Flatpickr(c,{locale:Flatpickr.l10ns.pl,enableTime:!0,minDate:new Date,time_24hr:!0,dateFormat:"F j, Y H:i",onClose:function(a){k.clear();k.jumpToDate(new Date);1==a.length&&d.createTimetable(a[0])}}):null,h=[],r=window.admin?function(a){e.removeChild(a.el);a=h.indexOf(a);0<=a&&h.splice(a,1)}:null;e.className="timetable-list";window.admin&&
(a.className="timetable-add",a.appendChild(c),e.appendChild(a));d.createTimetable=function(c){c=new b(c);h[h.length]=c;window.admin?(c.remove=r,e.insertBefore(c.el,a)):e.appendChild(c.el)};d.value=function(){for(var a=[],c=h.length,b=0;b<c;b++)a[b]=h[b].value();return a};d.setValue=function(a){for(var c=a?a.length:0,b=0;b<c;b++)d.createTimetable(new Date(a[b]))};d.el=e}function b(b){var m=this,e=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div"),k=null,h=
document.createElement("div"),r=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),g=document.createElement("div"),q=new x({type:0}),f=document.createElement("div"),y=new d,p=document.createElement("div"),C=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),u=window.admin&&b.id()?document.createElement("div"):null,F=document.createElement("div"),H=document.createElement("div"),I={title:r,price:q,timetable:y,descrition:C};e.className="details-container";
a.className="details-view";e.appendChild(a);c.className="control-view";e.appendChild(c);h.className="text-header header-text";language.bind("title",h);language.bindInput("title",r.el);a.appendChild(h);a.appendChild(r.el);g.className="text-header header-text";language.bind("price",g);a.appendChild(g);a.appendChild(q.el);f.className="text-header header-text";language.bind("timetable",f);a.appendChild(f);a.appendChild(y.el);p.className="text-header header-text";language.bind("description",p);language.bindInput("description",
C.el);a.appendChild(p);a.appendChild(C.el);window.admin||(k=new z,a.appendChild(k.el));F.className="action-btn no-select text-invert";language.bind(window.admin?"save":"send",F);c.appendChild(F);F.onclick=function(){if(window.admin){var a={},c;for(c in I)I.hasOwnProperty(c)&&I[c]&&(a[c]=I[c].value());m.save(a)}else a=k.value(),a.data={id:b.id(),preview:b.preview(),title:r.value()},m.contact(a,function(a){a.status||k.error(a.error)})};H.className="close-btn no-select text-invert";language.bind("close",
H);c.appendChild(H);H.onclick=function(){m.close()};u&&(u.className="delete-btn no-select text-invert",language.bind("delete",u),c.appendChild(u),u.onclick=function(){m.remove()});m.el=e;m.show=function(){};m.init=function(){};m.setValue=function(a){for(var c in I)I.hasOwnProperty(c)&&I[c]&&I[c].setValue(a[c])}}function t(d,m){function e(a,c){var k=this,h=new B,e=new b(a);e.close=function(){k.close()};e.order=function(a){k.close(function(){window.events.emit("order",[a])},{force:!0})};e.contact=function(a,
c){window.ajax({type:"POST",data:a,url:"/async/contact"}).done(function(a){a.status?k.close():c(a)})};k.load=function(a){d.id()?window.ajax({type:"POST",data:{id:d.id()},url:"/async/workshop/load"}).done(function(c){if(c.workshop){e.setValue(c.workshop);h.beginAdd();for(var b in c.workshop.images)h.add(new D({id:c.workshop.images[b]}));h.endAdd();e.init()}a&&a()}):(e.init(),a&&a())};e.selectImage=function(a){h.present(a)};k.create=function(){c.appendChild(h.el);c.appendChild(e.el)};k.destroy=function(){c.removeChild(h.el);
c.removeChild(e.el)};k.show=function(){h.show();e.show()};window.admin&&(e.save=function(c){h.commit(function(b){c.id=d.id();c.images=b;console.log(c);window.ajax({type:"POST",data:c,url:"/async/workshop/save"}).done(function(d){console.log(d);if(d.status){var h=null;a.id()==d._id?a.update({title:c.title,price:c.price,preview:b[0]}):h=function(){m.reload()};k.close(h)}})})},e.remove=function(){window.ajax({type:"POST",data:{id:a.id()},url:"/async/workshop/delete"}).done(function(c){c.status&&(m.removeItem(a),
k.close())})})}function a(a,b){async(c.close,a?[a,b]:null)}var c=this,k=document.createElement("div"),h=document.createElement("div"),r=new e(d,h);r.close=a;k.className=window.admin?"workshop-item-container edit":"workshop-item-container";k.style.display="none";h.className="workshop-item-view";r.create();k.appendChild(h);this.el=k;this.id=function(){return d.id()};this.item=function(){return d};this.replace=function(c,b){d=c;var k=new e(d,h);k.close=a;k.load(function(){r.destroy();k.create();r=k;
b&&b()})};this.show=function(a){a=a||{};a.force?(scrollBodyTo(k),morpheus(k,{marginLeft:0,duration:300,complete:function(){r.show()}})):(k.style.display="block",a=k.offsetHeight,scrollBodyTo(k),k.style.height="0px",morpheus(k,{height:a,duration:300,complete:function(){morpheus(k,{marginLeft:0,duration:300,complete:function(){r.show()}});k.style.height=null}}))};this.hide=function(a,c){c=c||{};morpheus(k,{marginLeft:"-110%",duration:300,complete:function(){c.force||scrollBodyTo(d.el);k.style.marginLeft=
null;c.inline?a&&a():morpheus(k,{height:0,duration:300,complete:function(){k.style.display="none";a&&a()}})}})};r.load()}function l(){var b=this,d=document.createElement("div"),e=document.createElement("div"),a=document.createElement("div");d.className="workshop-item-new";e.className="workshop-item-internal";d.appendChild(e);a.className="workshop-item-image";e.appendChild(a);b.el=d;d.onclick=function(){b.open&&b.open(b)};b.id=function(){return null};b.title=function(){return null};b.position=function(){return d.offsetTop}}
function n(b){var d=this,e=document.createElement("div"),a=document.createElement("div"),c=document.createElement("div"),k=new MSDivObject,h=b.preview,r=document.createElement("div");e.id=b._id;e.className=window.admin?"workshop-item edit no-select":"workshop-item no-select";a.className="workshop-item-internal";e.appendChild(a);k.el.className="workshop-item-image";a.appendChild(k.el);c.className="workshop-item-title text";a.appendChild(c);r.className="workshop-item-price text";a.appendChild(r);k.loadImage({url:"/async/preview/load/"+
h,color:"#e0e0e0",shadow:!0,width:3});c.innerHTML=b.title;b.price?(r.innerHTML=Math.round(b.price.price),r.setAttribute("currency","z\u0142")):(r.innerHTML=null,r.removeAttribute("currency"));d.id=function(){return e.id};d.title=function(){return c.innerHTML};d.position=function(){return e.offsetTop};d.preview=function(){return h};d.update=function(a){h=a.preview;k.loadImage({url:"/async/preview/load/"+h,color:"#e0e0e0",shadow:!0,width:3});c.innerHTML=a.title;a.price?(r.innerHTML=Math.round(a.price.price),
r.setAttribute("currency","z\u0142")):(r.innerHTML=null,r.removeAttribute("currency"))};e.onclick=function(){d.open(d)};if(window.admin){b.counts=b.counts||{};var g=document.createElement("div"),q=document.createElement("div"),f=document.createElement("span"),y=document.createElement("div"),p=document.createElement("span"),C=document.createElement("div"),u=document.createElement("span"),F=document.createElement("div"),H=document.createElement("span"),I=document.createElement("div"),m=document.createElement("span");
g.className="visit-counter-container text";q.className="visit-counter";y.className="visit-counter";C.className="visit-counter";F.className="visit-counter";I.className="visit-counter";language.bind("today",q);language.bind("l_3_day",y);language.bind("l_week",C);language.bind("l_month",F);language.bind("l_time",I);f.innerHTML=b.counts.day_1||0;p.innerHTML=b.counts.day_3||0;u.innerHTML=b.counts.day_7||0;H.innerHTML=b.counts.day_28||0;m.innerHTML=b.counts.all||0;q.appendChild(f);y.appendChild(p);C.appendChild(u);
F.appendChild(H);I.appendChild(m);g.appendChild(q);g.appendChild(y);g.appendChild(C);g.appendChild(F);g.appendChild(I);a.appendChild(g)}d.el=e}function m(b){function d(a){async(function(){if(f){var c=r.childNodes,b=f.item().position(),d=null;r.contains(f.el)&&r.removeChild(f.el);for(var k=0;k<c.length;++k)if(b<c[k].offsetTop){d=c[k];break}d?r.insertBefore(f.el,d):r.appendChild(f.el);a&&"Function"==classOf(a)&&a()}})}function e(a,c){if(f){window.removeEventListener("resize",d);var b=f.el;f.hide(function(){r.removeChild(b);
b=null;a&&a()},c);f=null}else a&&a()}function a(a){if(f){var c=f.item().position()==a.position();f.hide(function(){f.replace(a,function(){c?f.show({force:!0}):d(function(){f.show()})})},{force:!0,inline:c})}else f=new t(a,k),f.close=e,d(function(){f.show()}),window.addEventListener("resize",d)}function c(){window.ajax({type:"POST",data:{},url:"/async/workshop/list"}).done(function(c){console.log(c);if(c&&c.status){var b=document.createElement("div"),d=null;g&&(b.appendChild(g.el),g.open=a);if(c.workshops)for(var k=
0;k<c.workshops.length;++k){var e=new n(c.workshops[k]);if(f&&f.item().id()==e.id()||e.id()==q)d=e,q=null;e.open=a;b.appendChild(e.el)}h.replaceChild(b,r);r=b;d?a(d):f=null}})}var k=this,h=document.getElementById("workshop_item_view"),r=document.createElement("div"),g=window.admin?new l:null,q=window.location.hash?window.location.hash.substring(1):null,f=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");k.createItem=function(c,b){b&&g&&g.el.nextSibling?
r.insertBefore(c.el,g.el.nextSibling):r.appendChild(c.el);c.open=a};k.removeItem=function(a){r.removeChild(a.el)};h.appendChild(r);k.el=h;k.reload=c;c()}function E(){var b=document.getElementById("workshop_panel");new m(b);this.el=b}window.addEventListener("load",function(){window.workshops=new E})})();(function(){function D(a){var c=this,b=a.id,d=a.file?!0:!1,e=a.file,g=a.label,q=null,f=null,y=!1,p=null,C=!1,u=new MSDivObject;a=window.admin?document.createElement("div"):null;var F=function(a){g=a;q&&(q.innerHTML=g||"")};u.el.className="picture-thumb";a&&(a.className="picture-thumb-remove",a.onclick=function(){c.removed&&c.removed(b)},u.el.appendChild(a));window.admin&&(u.el.setAttribute("draggable",!0),u.el.ondragstart=function(a){a.dataTransfer.setData("target",b)},u.el.ondragover=function(a){a.preventDefault()},
u.el.ondrop=function(a){a.preventDefault();c.swap&&c.swap(a.dataTransfer.getData("target"),b)});u.el.onclick=function(){c.click&&c.click(c)};c.el=u.el;c.id=function(){return b};c.isTemp=function(){return d};c.file=function(){return e};c.label=function(){return g};c.setLabel=F;c.enableLabel=function(){q||(q=document.createElement("div"),q.className="picture-thumb-label header-text no-select",u.el.appendChild(q));q&&(q.innerHTML=g||"")};c.disableLabel=function(){q&&(u.el.removeChild(q),q=null)};c.data=
function(){return f};c.remove=function(){y=!0;return d};c.pack=function(){return{id:b,temp:d,file:e,label:g,data:f,removed:y}};c.onload=function(a){C&&a?async(a,[c]):p=a};c.commit=function(a){if(y&&!d)window.ajax({type:"POST",data:{id:b},url:"/async/images/delete"}).done(function(c){a()});else if(d){var c=new FormData;c.append("file",e);window.ajax({type:"POST",data:c,files:!0,url:"/async/images/save"}).done(function(c){a({id:c.id,label:g})})}else a({id:b,label:g})};c.update=function(a){b=a.id;d=
a.temp;F(a.label);e=a.file;f=a.data;y=a.removed;u.el.style.backgroundImage=d?"url("+f+")":"url(/async/thumb/load/"+b+")"};d?(a=new FileReader,a.onload=function(a){f=a.target.result;u.el.style.backgroundImage="url("+f+")";C=!0;p&&(async(p,[c]),p=null)},a.readAsDataURL(e)):(u.loadImage({url:"/async/thumb/load/"+b,color:"#e0e0e0",shadow:!0,radius:24,width:6,length:22,lines:15,speed:.75}),C=!0,p&&(async(p,[c]),p=null))}function B(){var a=this,c=document.createElement("div"),b=document.createElement("div"),
d=document.createElement("div"),e=new MSDivObject,g=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,q=null,f=null,y={},p=[],C=function(a){var c=y[a];c&&(c.remove()&&delete y[a],d.removeChild(c.el));a=p.indexOf(a);0<=a&&p.splice(a,1)},u=function(a,c){var b=y[a],d=b.pack(),k=y[c].pack();y[a]=y[c];y[c]=b;y[a].update(d);y[c].update(k);b=p.indexOf(a);d=p.indexOf(c);p[b]=c;p[d]=a},F=function(){var a=e.el.getAttribute("current");(a=y[a])&&a.setLabel(q.value())},H=function(a){a.isTemp()?
e.el.style.backgroundImage="url("+a.data()+")":e.loadImage({url:"/async/images/load/"+a.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});scrollBodyTo(c);e.el.setAttribute("current",a.id());q&&(q.onchange=null,q.setValue(a.label()),q.onchange=F)};c.className="picture-manager";b.className="picture-container";d.className="picture-carousel";b.appendChild(d);e.el.className="picture-preview";g&&(d.appendChild(g.el),g.preview=function(c){if(c){a.beginAdd();for(var b=null,d=
0;d<c.length;++d){var k=new D({id:String(hashCode(c[d].name)),file:c[d]});b||(b=k);a.add(k)}a.endAdd();a.show(b)}});c.appendChild(e.el);c.appendChild(b);a.el=c;a.imageList=function(){return p};a.enableLabel=function(a){q||(q=new MSInputObject({className:"picture-preview-label text"}),e.el.appendChild(q.el));q.onchange=null;a?q.setValue(a):(a=e.el.getAttribute("current"),(a=y[a])&&q.setValue(a.label()));for(var c in y)y.hasOwnProperty(c)&&y[c].enableLabel();q.onchange=F};a.disableLabel=function(){q&&
(e.el.removeChild(q.el),q=null);for(var a in y)y.hasOwnProperty(a)&&y[a].disableLabel()};a.commit=function(a){var c=function(a,b,d,k,e){a==b?e(k):y[d[a]].commit(function(u){u&&k.push(u);c(a+1,b,d,k,e)})};c(0,p.length,p,[],a)};a.beginAdd=function(){null==f&&(f=document.createDocumentFragment())};a.endAdd=function(){if(f&&(d.appendChild(f),f=null,0<p.length))y[p[0]].onload(H)};a.present=function(a){(a=y[a])&&async(H,[a])};a.add=function(a){f&&!y[a.id()]&&(p.push(a.id()),y[a.id()]=a,a.removed=C,a.swap=
u,a.click=H,f.appendChild(a.el),q&&a.enableLabel())};a.show=function(a){var c=function(){if(f)async(c);else if(a)a.onload(H)};async(c)}}function v(){var a=document.createElement("table"),c=new MSInputObject({placeholder:"Price",className:"text"}),b=new MSInputObject({placeholder:"Shipping",className:"text"});language.bindInput("price",c.el);language.bindInput("shipping",b.el);var d=document.createElement("tr"),e=document.createElement("th"),g=document.createElement("th");d.className="text-invert";
language.bind("price",e);language.bind("shipping",g);d.appendChild(e);d.appendChild(g);a.appendChild(d);d=document.createElement("tr");e=document.createElement("td");g=document.createElement("td");e.appendChild(c.el);d.appendChild(e);g.appendChild(b.el);d.appendChild(g);a.appendChild(d);a.className="single-item";this.el=a;this.value=function(){return[{quantity:1,price:c.value(),shipping:b.value()}]};this.setValue=function(a){c.setValue(a[0].price);b.setValue(a[0].shipping)}}function w(){function a(a,
c,b){this.quantity=a;this.price=c;this.shipping=b}var c=document.createElement("table"),b=[],d=function(d,e,g){var f=document.createElement("tr"),h=document.createElement("td"),r=new MSInputObject({placeholder:"Quantity",className:"text"}),q=document.createElement("td"),p=new MSInputObject({placeholder:"Price",className:"text"}),y=document.createElement("td"),m=new MSInputObject({placeholder:"Shipping",className:"text"}),l=document.createElement("td"),n=document.createElement("div"),t=new a(r,p,m);
language.bindInput("quantity",r.el);language.bindInput("price",p.el);language.bindInput("shipping",m.el);n.className="remove-row";b.push(t);r.setValue(d||"");p.setValue(e||"");m.setValue(g||"");h.appendChild(r.el);f.appendChild(h);q.appendChild(p.el);f.appendChild(q);y.appendChild(m.el);f.appendChild(y);l.appendChild(n);f.appendChild(l);c.appendChild(f);n.onclick=function(a){a=b.indexOf(t);0<=a&&(b.splice(a,1),c.removeChild(f))}},e=document.createElement("tr"),g=document.createElement("th"),q=document.createElement("th"),
f=document.createElement("th"),y=document.createElement("th"),p=document.createElement("div");e.className="text-invert";language.bind("quantity",g);language.bind("price",q);language.bind("shipping",f);e.appendChild(g);e.appendChild(q);e.appendChild(f);p.className="add-new-row";y.appendChild(p);e.appendChild(y);p.onclick=function(){d()};c.appendChild(e);c.className="multi-item";this.el=c;this.value=function(){for(var a=[],c=0;c<b.length;++c)a.push({quantity:b[c].quantity.value(),price:b[c].price.value(),
shipping:b[c].shipping.value()});return a};this.setValue=function(a){for(var c=0;c<a.length;++c)d(a[c].quantity,a[c].price,a[c].shipping)}}function x(){var a=null,c=document.createElement("table"),b=document.createElement("tr"),d=document.createElement("th"),e=document.createElement("th"),g=document.createElement("th"),q=document.createElement("tr"),f=document.createElement("td"),y=document.createElement("td"),p=document.createElement("td");b.className="text-invert";language.bind("quantity",d);language.bind("price",
e);language.bind("shipping",g);b.appendChild(d);b.appendChild(e);b.appendChild(g);c.appendChild(b);q.appendChild(f);q.appendChild(y);q.appendChild(p);c.appendChild(q);y.setAttribute("currency","z\u0142");p.setAttribute("currency","z\u0142");this.el=c;this.value=function(){return a};this.setValue=function(c){if(1==c.length)f.innerHTML=c[0].quantity,y.innerHTML=c[0].price,p.innerHTML=c[0].shipping,a={quantity:c[0].quantity,price:c[0].price,shipping:c[0].shipping};else if(1<c.length){var b=new DropDown({});
b.changed=function(b){y.innerHTML=c[b].price;p.innerHTML=c[b].shipping;a={quantity:c[b].quantity,price:c[b].price,shipping:c[b].shipping}};for(var d=0;d<c.length;++d)b.addItem(d).controller.setValue(c[d].quantity);f.appendChild(b.el)}}}function z(a){var c=this,b=document.createElement("div"),d=null,e=!1,g=0;window.admin?(d=[new v,new w],a&&a.type&&(g=0<=a.type&&2>a.type?a.type:0),b.appendChild(d[g].el)):(d=new x,b.appendChild(d.el));b.className="price text advert-hide";c.el=b;window.admin&&(c.change=
function(a){b.removeChild(d[g].el);g=0<=a&&2>a?a:0;b.appendChild(d[g].el);c.changed&&c.changed(a)},c.nullValue=function(a){e=a});c.value=function(){return window.admin?e?null:{type:g,values:d[g].value()}:d.value()};c.setValue=function(a){a&&(window.admin?(c.change(a.type),d[g].setValue(a.values)):d.setValue(a.values))}}function d(){var a=this,c=!0,b=document.createElement("div"),d=new DropDown({className:"component-ctl"});b.className="text-header header-text";language.bind("projects",b);d.changed=
function(c){a.changed&&a.changed(c)};a.setValue=function(a){if(a)for(var c=0;c<a.length;++c)d.addItem(a[c].id).controller.setValue(a[c].label)};a.value=function(){return d.value()};a.text=function(){return d.text()};a.enabled=function(){return c};a.enable=function(){c=!0;b.removeAttribute("style");d.el.removeAttribute("style")};a.disable=function(){c=!1;b.style.display="none";d.el.style.display="none"};var e=document.createDocumentFragment();e.appendChild(b);e.appendChild(d.el);a.el=e}function b(){function a(a){if(q.length<
e.length){var d=document.createElement("div"),u=document.createElement("div"),h=new DropDown({className:"category-ctl"},u),y=document.createElement("div");d.className="category-item-view";y.className="remove-category-item";d.appendChild(u);d.appendChild(y);y.onclick=function(){var a=q.indexOf(h);0<=a&&(q.splice(a,1),delete f[h.id],c.removeChild(d),d=null);q.length<e.length&&(b.style.display=null)};q[q.length]=h;h.beforeOpen=function(){if(g)for(var a=0;a<g.length;++a)h.removeVirtual(g[a]);g=[];for(a=
0;a<e.length;++a)f[e[a]._id]&&f[e[a]._id]!=h||function(a,c){a.onclick=function(a){a.preventDefault();a.stopPropagation();h.setText(c.title);delete f[h.id];h.id=c._id;f[c._id]=h;h.close()};a.className="dropdown-item text-invert";a.innerHTML=c.title;g[g.length]=a}(h.addVirtual(),e[a])};h.beforeClose=function(){if(g){for(var a=0;a<g.length;++a)h.removeVirtual(g[a]);g=null}};if(a)for(u=0;u<e.length;++u){if(e[u]._id==a){f[a]=h;h.id=a;h.setText(e[u].title);break}}else for(u=0;u<e.length;++u)if(!f[e[u]._id]){f[e[u]._id]=
h;h.id=e[u]._id;h.setText(e[u].title);break}c.insertBefore(d,b);q.length==e.length&&(b.style.display="none")}}var c=document.createElement("div"),b=document.createElement("div"),d=document.createElement("div"),e=[],g=null,q=[],f={},y=!1;c.className="category-list";b.className="category-item-view add-category-item";b.appendChild(d);c.appendChild(b);b.onclick=function(){a()};this.el=c;this.setValue=function(c){if(c){var b=function(){if(y)for(var d=0;d<c.length;++d)a(c[d]);else async(b)};b()}};this.value=
function(){return Object.keys(f)};window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(a){y=!0;a.status&&(e=a.categories||[],0==e.length&&(b.style.display="none"))})}function t(){function a(){this.removeAttribute("error");this.onfocus=null}var c=document.createElement("div"),b=document.createElement("div"),d=document.createElement("input"),e=document.createElement("input"),g=new MSInputObject({className:"message text",multiline:!0,user:!0});c.className="shop-item-contact-panel";
b.className="text-header header-text";d.className="name text";e.className="email text";language.bind("contact",b);language.bindInput("full_name",d);language.bindInput("email",e);language.bindInput("message",g.el);c.appendChild(b);c.appendChild(d);c.appendChild(e);c.appendChild(g.el);this.el=c;this.value=function(){return{name:d.value,email:e.value,message:g.value()}};this.error=function(c){for(var b in c)"name"==b?(d.setAttribute("error",!0),d.onfocus=a):"email"==b?(e.setAttribute("error",!0),e.onfocus=
a):"message"==b&&(g.el.setAttribute("error",!0),g.el.onfocus=a)}}function l(a){var c=this,e=document.createElement("div"),h=document.createElement("div"),r=document.createElement("div"),g=null,q=document.createElement("div"),f=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),y=window.admin?document.createElement("div"):null,p=window.admin?new DropDown({className:"type-ctl"}):{setValue:function(a){2==a&&(e.setAttribute("advert",!0),g=new t,h.appendChild(g.el),language.unbind("order",
L),language.bind("send",L))}},C=document.createElement("div"),u=new DropDown({className:"avail-ctl",adminOnly:!0}),F=window.admin?document.createElement("div"):null,H=window.admin?new DropDown({className:"action-ctl"}):null,m=window.admin?document.createElement("div"):null,l=window.admin?new DropDown({className:"component-ctl"}):{setValue:function(a){0==a?(c.disableLabel(),n.disable()):(c.enableLabel(),n.enable())}},n=window.admin?null:new d,v=window.admin?document.createElement("div"):null,x=window.admin?
new b:null,G=document.createElement("div"),w=new z({type:0}),A=document.createElement("div"),E=document.createElement("div"),D=document.createElement("div"),B=document.createElement("div"),O=document.createElement("div"),P=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),M=window.admin&&a.id()?document.createElement("div"):null,L=document.createElement("div"),N=document.createElement("div"),K={title:f,type:p,availability:u,action:H,components:l,images:n,categories:x,
price:w,descrition:P};e.className="details-container";h.className="details-view";e.appendChild(h);r.className="control-view";e.appendChild(r);q.className="text-header header-text";language.bind("title",q);language.bindInput("title",f.el);h.appendChild(q);h.appendChild(f.el);window.admin?(language.bind("individual",p.addItem(0)),language.bind("common",p.addItem(1)),language.bind("advert",p.addItem(2)),y.className="text-header header-text",language.bind("type",y),h.appendChild(y),h.appendChild(p.el)):
n.changed=function(a){c.selectImage&&c.selectImage(a)};u.changed=function(a){language.unbind(B);0==a?language.bind("lead_avail",B):language.bind("lead_wait",B)};language.bind("available",u.addItem(0));language.bind("demand",u.addItem(1));C.className="text-header header-text";language.bind("availability",C);h.appendChild(C);h.appendChild(u.el);window.admin?(language.bind("keep",H.addItem(0)),language.bind("move",H.addItem(1)),language.bind("remove",H.addItem(2)),F.className="text-header header-text",
language.bind("process",F),h.appendChild(F),h.appendChild(H.el),language.bind("components",m),m.className="text-header header-text",language.bind("none",l.addItem(0)),language.bind("labeled",l.addItem(1)),h.appendChild(m),h.appendChild(l.el),l.changed=function(a){0==a?c.disableLabel():c.enableLabel()},l.lock()):h.appendChild(n.el);window.admin&&(v.className="text-header header-text",language.bind("category",v),h.appendChild(v),h.appendChild(x.el));G.className="text-header header-text advert-hide";
language.bind("price",G);h.appendChild(G);h.appendChild(w.el);A.className="text-header header-text advert-hide";language.bind("payment_opt",A);E.className="payments advert-hide";window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status)for(var c=0;c<a.types.length;++c){var b=document.createElement("div");b.className="payment-option";b.setAttribute("type",a.types[c]);E.appendChild(b)}});h.appendChild(A);h.appendChild(E);D.className="text-header header-text advert-hide";
language.bind("lead",D);B.className="lead-time text advert-hide";h.appendChild(D);h.appendChild(B);O.className="text-header header-text";language.bind("description",O);language.bindInput("description",P.el);L.className="action-btn no-select text-invert";language.bind(window.admin?"save":"order",L);r.appendChild(L);L.onclick=function(){if(window.admin){var b={},d;for(d in K)K.hasOwnProperty(d)&&K[d]&&(b[d]=K[d].value());c.save(b)}else g?(b=g.value(),b.data={id:a.id(),preview:n.enabled()?n.value():
a.preview(),title:f.value(),component:n.enabled()?n.text():null},c.contact(b,function(a){a.status||g.error(a.error)})):(b=w.value()||{},b.id=a.id(),b.preview=n.enabled()?n.value():a.preview(),b.title=f.value(),b.availability=u.value(),b.component=n.enabled()?n.text():null,c.order(b))};N.className="close-btn no-select text-invert";language.bind("close",N);r.appendChild(N);N.onclick=function(){c.close()};M&&(M.className="delete-btn no-select text-invert",language.bind("delete",M),r.appendChild(M),M.onclick=
function(){c.remove()});h.appendChild(O);h.appendChild(P.el);p.changed=function(a){2==a&&(w.nullValue(!0),u.setValue(1),u.lock(),H.setValue(0),H.lock(),l.unlock(),e.setAttribute("advert",!0))};c.el=e;c.show=function(){};c.init=function(){p.changed=function(a){w.nullValue(!1);e.removeAttribute("advert");0==a?(w.change(0),u.setValue(0),l.setValue(0),u.unlock(),H.unlock(),l.lock()):1==a?(w.change(1),u.setValue(1),H.setValue(0),u.lock(),H.lock(),l.unlock()):2==a&&(w.nullValue(!0),u.setValue(1),u.lock(),
H.setValue(0),H.lock(),l.unlock(),e.setAttribute("advert",!0))}};c.setValue=function(a){for(var c in K)K.hasOwnProperty(c)&&K[c]&&K[c].setValue(a[c])}}function n(a,c){function b(d,e,f){var g=this,k=new B,h=new l(d);h.close=function(){g.close()};h.order=function(a){g.close(function(){window.events.emit("order",[a])},{force:!0})};h.contact=function(a,c){window.ajax({type:"POST",data:a,url:"/async/contact"}).done(function(a){a.status?g.close():c(a)})};h.enableLabel=function(){k.enableLabel()};h.disableLabel=
function(){k.disableLabel()};g.load=function(c){a.id()?window.ajax({type:"POST",data:{id:a.id()},url:"/async/shop/load"}).done(function(a){if(a.item){h.setValue(a.item);k.beginAdd();for(var b in a.item.images)k.add(new D(a.item.images[b]));k.endAdd();h.init()}c&&c()}):(h.init(),c&&c())};h.selectImage=function(a){k.present(a)};g.create=function(){f.appendChild(k.el);f.appendChild(h.el)};g.destroy=function(){f.removeChild(k.el);f.removeChild(h.el)};g.show=function(){k.show();h.show()};window.admin&&
(h.save=function(b){k.commit(function(e){b.id=a.id();b.images=e;window.ajax({type:"POST",data:b,url:"/async/shop/save"}).done(function(a){if(a.status){var f=null;d.id()==a._id?d.update({title:b.title,price:b.price,preview:e[0]}):f=function(){c.reload()};g.close(f)}})})},h.remove=function(){window.ajax({type:"POST",data:{id:d.id()},url:"/async/shop/delete"}).done(function(a){a.status&&(e.removeItem(d),g.close())})})}function d(a,c){async(e.close,a?[a,c]:null)}var e=this,g=document.createElement("div"),
q=document.createElement("div"),f=new b(a,c,q);f.close=d;g.className=window.admin?"shop-item-container edit":"shop-item-container";g.style.display="none";q.className="shop-item-view";f.create();g.appendChild(q);this.el=g;this.id=function(){return a.id()};this.item=function(){return a};this.replace=function(e,g,r){a=e;c=g;var u=new b(a,c,q);u.close=d;u.load(function(){f.destroy();u.create();f=u;r&&r()})};this.show=function(a){a=a||{};a.force?(scrollBodyTo(g),morpheus(g,{marginLeft:0,duration:300,complete:function(){f.show()}})):
(g.style.display="block",a=g.offsetHeight,scrollBodyTo(g),g.style.height="0px",morpheus(g,{height:a,duration:300,complete:function(){morpheus(g,{marginLeft:0,duration:300,complete:function(){f.show()}});g.style.height=null}}))};this.hide=function(c,b){b=b||{};morpheus(g,{marginLeft:"-110%",duration:300,complete:function(){b.force||scrollBodyTo(a.el);g.style.marginLeft=null;b.inline?c&&c():morpheus(g,{height:0,duration:300,complete:function(){g.style.display="none";c&&c()}})}})};f.load()}function m(){var a=
this,c=document.createElement("div"),b=document.createElement("div"),d=document.createElement("div");c.className="shop-item-new";b.className="shop-item-internal";c.appendChild(b);d.className="shop-item-image";b.appendChild(d);a.el=c;c.onclick=function(){a.open&&a.open(a)};a.id=function(){return null};a.title=function(){return null};a.position=function(){return c.offsetTop}}function E(a){var c=this,b=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),g=new MSDivObject,
q=a.preview.id,f=document.createElement("div");b.id=a._id;b.className=window.admin?"shop-item edit no-select":"shop-item no-select";d.className="shop-item-internal";b.appendChild(d);g.el.className="shop-item-image";d.appendChild(g.el);e.className="shop-item-title text";d.appendChild(e);f.className="shop-item-price text";d.appendChild(f);g.loadImage({url:"/async/preview/load/"+q,color:"#e0e0e0",shadow:!0,width:3});e.innerHTML=a.title;a.price?(f.innerHTML=Math.round(a.price.values[0].price/a.price.values[0].quantity),
f.setAttribute("currency","z\u0142")):(f.innerHTML=null,f.removeAttribute("currency"));c.id=function(){return b.id};c.title=function(){return e.innerHTML};c.position=function(){return b.offsetTop};c.preview=function(){return q};c.update=function(a){q=a.preview.id;g.loadImage({url:"/async/preview/load/"+q,color:"#e0e0e0",shadow:!0,width:3});e.innerHTML=a.title;a.price?(f.innerHTML=Math.round(a.price.values[0].price/a.price.values[0].quantity),f.setAttribute("currency","z\u0142")):(f.innerHTML=null,
f.removeAttribute("currency"))};b.onclick=function(){b.getAttribute("ordered")?window.scrollBodyTo(window.orders.el):c.open&&c.open(c)};if(window.admin){a.counts=a.counts||{};var m=document.createElement("div"),p=document.createElement("div"),C=document.createElement("span"),u=document.createElement("div"),F=document.createElement("span"),l=document.createElement("div"),n=document.createElement("span"),t=document.createElement("div"),v=document.createElement("span"),w=document.createElement("div"),
x=document.createElement("span");m.className="visit-counter-container text";p.className="visit-counter";u.className="visit-counter";l.className="visit-counter";t.className="visit-counter";w.className="visit-counter";language.bind("today",p);language.bind("l_3_day",u);language.bind("l_week",l);language.bind("l_month",t);language.bind("l_time",w);C.innerHTML=a.counts.day_1||0;F.innerHTML=a.counts.day_3||0;n.innerHTML=a.counts.day_7||0;v.innerHTML=a.counts.day_28||0;x.innerHTML=a.counts.all||0;p.appendChild(C);
u.appendChild(F);l.appendChild(n);t.appendChild(v);w.appendChild(x);m.appendChild(p);m.appendChild(u);m.appendChild(l);m.appendChild(t);m.appendChild(w);d.appendChild(m)}else a=document.createElement("div"),d=document.createElement("div"),a.className="shop-item-ordered",d.className="shop-item-ordered-icon",a.appendChild(d),b.appendChild(a);c.el=b}function A(a){function c(a){async(function(){if(p){var c=q.childNodes,b=p.item().position(),d=null;q.contains(p.el)&&q.removeChild(p.el);for(var e=0;e<c.length;++e)if(b<
c[e].offsetTop){d=c[e];break}d?q.insertBefore(p.el,d):q.appendChild(p.el);a&&"Function"==classOf(a)&&a()}})}function b(a,d){if(p){window.removeEventListener("resize",c);var e=p.el;p.hide(function(){q.removeChild(e);e=null;a&&a()},d);p=null}else a&&a()}function d(a){if(p){var f=p.item().position()==a.position();p.hide(function(){p.replace(a,e,function(){f?p.show({force:!0}):c(function(){p.show()})})},{force:!0,inline:f})}else p=new n(a,e),p.close=b,c(function(){p.show()}),window.addEventListener("resize",
c)}var e=this,g=document.getElementById("shop_item_view"),q=document.createElement("div"),f=window.admin?new m:null,l=window.location.hash?window.location.hash.substring(1):null,p=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");e.createItem=function(a,c){c&&f&&f.el.nextSibling?q.insertBefore(a.el,f.el.nextSibling):q.appendChild(a.el);a.open=d};e.removeItem=function(a){q.removeChild(a.el)};g.appendChild(q);e.el=g;e.reload=function(){window.ajax({type:"POST",
data:a.value(),url:"/async/shop/list"}).done(function(a){if(a&&a.status){var c=document.createElement("div"),b=null;f&&(c.appendChild(f.el),f.open=d);if(a.items)for(var e=0;e<a.items.length;++e){var k=new E(a.items[e]);if(p&&p.item().id()==k.id()||k.id()==l)b=k,l=null;k.open=d;c.appendChild(k.el)}g.replaceChild(c,q);q=c;b?d(b):p=null}window.events.emit("update-ordered")})}}function G(){function a(a,c){var b=this,d=a.item,e=a.controller,f=document.createElement("div"),g=window.admin&&c?document.createElement("input"):
null,k=window.admin&&c?document.createElement("div"):null,h=!1,u=!1;d.manager=b;f.className="categoty-title";d.appendChild(f);b.setValue=function(a){f.innerHTML=a||""};b.value=function(){return f.innerHTML};b.id=function(){return c?c._id:null};c?(e.setValue(c.title),window.admin&&(k&&(k.className="category-remove",k.onclick=function(a){a.preventDefault();a.stopPropagation();d.parentNode.removeChild(d);u=!0;h=!1}),g&&(g.className="categoty-title header-text"),b.forceEditStart=function(){g&&(d.replaceChild(g,
f),d.appendChild(k),g.value=f.innerHTML,g.onchange=function(){u||(h=!0)})},b.forceEditEnd=function(){g&&(g.onchange=null,d.replaceChild(f,g),d.removeChild(k),f.innerHTML=g.value)},b.save=function(a){u&&b.id()?window.ajax({type:"POST",data:{id:b.id()},url:"/async/category/delete"}).done(a):h?window.ajax({type:"POST",data:{id:b.id(),title:f.innerHTML},url:"/async/category/save"}).done(a):a()})):language.bind("allitems",a)}function c(a){var c=this,b=document.createElement("div");b.className="category-add";
a.appendChild(b);c.el=a;b.onclick=function(){c.create&&c.create()}}function b(c,d){window.admin&&c.el.insertBefore(f,c.el.firstChild);new a(c.addItem(0));window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(b){var e=[];if(b.status)for(var f=0;f<b.categories.length;++f){var g=c.addItem(b.categories[f]._id),g=new a(g,b.categories[f]);window.admin&&(e[e.length]=g)}d(e)})}var d=null,e=document.getElementById("shop_navigator"),g=new DropDown({className:"category-nav",src:"../images/list.png"}),
m=null,f=null,l=1,p=new DropDown({className:"sorter-nav"}),n=p.addItem(0);n.controller.setValue("A  -  Z");n=p.addItem(1);n.controller.setValue("Z  -  A");n=p.addItem(2);language.bind("lowprice",n);n=p.addItem(3);language.bind("hightprice",n);if(window.admin){var u=[],f=document.createElement("div");f.className="shop-category-edit";f.onclick=function(p){p.preventDefault();p.stopPropagation();if(f.hasAttribute("open"))f.removeAttribute("open"),g.el.removeAttribute("edit-mode"),g.close(),g.el.removeChild(f),
m=null,function(a,c){var b=0,d=a.length,e=function(a){++b==d&&c()};if(0<d)for(var f=0;f<d;++f)a[f].forceEditEnd(),a[f].save(e);else c()}(u,function(){var a=new DropDown({className:"category-nav",src:"../images/list.png"});b(a,function(c){u=c;e.replaceChild(a.el,g.el);g=a;g.changed=function(){d&&d.reload()};g.setValue(0)})});else for(f.setAttribute("open",!0),g.el.setAttribute("edit-mode",!0),m=new c(g.addVirtual()),m.create=function(){var c=m.el.parentNode;c.removeChild(m.el);var b=g.addItem(String("000000000000000000000000"+
l++).slice(-24)),b=new a(b,{title:""});b.forceEditStart();u[u.length]=b;c.appendChild(m.el)},g.manual(),g.open(),p=0;p<u.length;++p)u[p].forceEditStart()}}e.appendChild(g.el);e.appendChild(p.el);g.changed=function(){d&&d.reload()};p.changed=function(){d&&d.reload()};this.setView=function(a){d=a};this.value=function(){var a=g.value();return{sort:p.value(),filter:0==a?null:a}};this.el=e;b(g,function(a){window.admin&&(u=a)})}function e(){var a=document.getElementById("shop_panel"),c=new G,b=new A(c);
c.setView(b);this.el=a}window.addEventListener("load",function(){window.shop=new e})})();(function(){function D(v){var w=this,x=v,z=new MSDivObject;v=window.admin?document.createElement("div"):null;z.el.className="gallery-thumb";v&&(v.className="gallery-thumb-remove",z.el.appendChild(v),v.onclick=function(){w.remove&&w.remove(w)});z.el.onclick=function(){w.click&&w.click(w)};if(window.admin){z.el.setAttribute("draggable",!0);var d=document.getElementById("content_scroll_top"),b=document.getElementById("content_scroll_bottom"),t=document.getElementById("content-wrapper"),l=!1,n=function(b){if(l){var d=
t.scrollTop;morpheus.tween(5,function(l){1==l&&async(n,[b]);l=d+b*l;0<=l&&l<=t.scrollHeight&&(t.scrollTop=l)})}};d.ondragenter=function(b){b.preventDefault();l=!0;n(-10)};d.ondragleave=function(b){b.preventDefault();l=!1};b.ondragenter=function(b){b.preventDefault();l=!0;n(10)};b.ondragleave=function(b){b.preventDefault();l=!1};z.el.ondragstart=function(m){m.dataTransfer.setData("target",x);d.setAttribute("enabled",!0);b.setAttribute("enabled",!0)};z.el.ondragend=function(m){m.preventDefault();d.removeAttribute("enabled");
b.removeAttribute("enabled")};z.el.ondragover=function(b){b.preventDefault()};z.el.ondrop=function(b){b.preventDefault();w.swap&&w.swap(b.dataTransfer.getData("target"),x)}}w.el=z.el;w.id=function(){return x};w.change=function(b){x=b;z.loadImage({url:"/async/thumb/load/"+x,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})};z.loadImage({url:"/async/thumb/load/"+x,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})}function B(){var v,w,x;function z(){var d=
b.el.childNodes,e=d.length;w=v=1;if(0<e){var a;for(a=0;a<e&&0!=d[a].style.display.length;++a);x=Math.floor((b.el.offsetWidth-2)/(d[a].offsetWidth+6))*Math.floor((b.el.offsetHeight-2)/(d[a].offsetHeight+6));w=Math.ceil(e/x);for(a=Math.min(x,e)-1;0<=a;--a)0!=d[a].style.display.length&&async(function(a){a.style.display=null},[d[a]]);for(a=Math.min(x,e);a<e;++a)0<d[a].style.display.length||async(function(a){a.style.display="none"},[d[a]])}l.prev.setAttribute("disabled",!0);1==w?l.next.setAttribute("disabled",
!0):l.next.removeAttribute("disabled");l.data.innerHTML=v+" / "+w}document.getElementById("gallery_panel");document.getElementById("content-wrapper");var d=window.admin?new FileUpload({id:"gallery_thumb_new",className:"gallery-thumb",multiple:!0}):null,b=new MSDivObject(document.getElementById("thumbs_container")),t=new MSDivObject(document.getElementById("gallery_view").firstElementChild),l={prev:document.getElementById("gallery_prev_page"),data:document.getElementById("gallery_page_info"),next:document.getElementById("gallery_next_page")};
w=v=1;x=0;var n={},m=function(b){t.loadImage({url:"/async/images/load/"+b.id()+"?height=700",color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75})},B=function(d){window.ajax({type:"POST",data:{id:d.id()},url:"/async/gallery/delete"}).done(function(e){e.status&&(delete n[d.id()],b.el.removeChild(d.el))})},A=function(b,d){if(b!=d){var a=n[b];a.change(d);n[b]=n[d];n[d]=a;n[b].change(b);window.ajax({type:"POST",data:{one:b,two:d},url:"/async/gallery/swap"})}};window.admin||(window.addEventListener("resize",
z),l.prev.onclick=function(){if(!l.prev.hasAttribute("disabled")){for(var d=b.el.childNodes,e=d.length,a=Math.min(x*v,e)-1;a>=x*(v-1);--a)async(function(a){a.style.display="none"},[d[a]]);--v;1==v&&l.prev.setAttribute("disabled",!0);l.next.removeAttribute("disabled");l.data.innerHTML=v+" / "+w;for(a=Math.min(x*v,e)-1;a>=x*(v-1);--a)async(function(a){a.style.display=null},[d[a]])}},l.next.onclick=function(){if(!l.next.hasAttribute("disabled")){for(var d=b.el.childNodes,e=d.length,a=x*(v-1);a<x*v&&
a<e;++a)async(function(a){a.style.display="none"},[d[a]]);v+=1;v==w&&l.next.setAttribute("disabled",!0);l.prev.removeAttribute("disabled");l.data.innerHTML=v+" / "+w;for(a=x*(v-1);a<x*v&&a<e;++a)async(function(a){a.style.display=null},[d[a]])}});d&&(b.el.appendChild(d.el),d.preview=function(l){for(var e=0;e<l.length;++e){var a=new FormData;a.append("file",l[e]);window.ajax({type:"POST",data:a,files:!0,url:"/async/gallery/save"}).done(function(a){a.status&&(a=new D(a.id),n[a.id()]=a,a.swap=A,a.click=
m,a.remove=B,d.el.nextSibling?b.el.insertBefore(a.el,d.el.nextSibling):b.el.appendChild(a.el),m(a))})}});window.ajax({type:"POST",url:"/async/gallery/load"}).done(function(d){if(d.status){for(var e=document.createDocumentFragment(),a=null,c=0;c<d.result.length;++c){var k=new D(d.result[c].id);n[k.id()]=k;k.swap=A;k.click=m;k.remove=B;e.appendChild(k.el);a||(a=k)}b.el.appendChild(e);a&&m(a);window.admin||z()}})}window.addEventListener("load",function(){window.gallery=new B})})();(function(){function D(){function B(){this.removeAttribute("error");this.onfocus=null}var v=document.getElementById("contact_name"),w=document.getElementById("contact_email"),x=document.getElementById("contact_message");document.getElementById("contact_send").onclick=function(){window.ajax({type:"POST",data:{name:v.value,email:w.value,message:x.value},url:"/async/contact"}).done(function(z){if(z.status)v.value="",w.value="",x.value="";else for(var d in z.error)"name"==d?(v.setAttribute("error",!0),
v.onfocus=B):"email"==d?(w.setAttribute("error",!0),w.onfocus=B):"message"==d&&(x.setAttribute("error",!0),x.onfocus=B)})}}window.addEventListener("load",function(){window.cantact=new D})})();(function(){function D(b){b=b.getElementsByTagName("*");for(var a={},c=0;c<b.length;++c)if(b[c].hasAttribute("user-input")){var d=b[c].getAttribute("user-input");b[c].controller?a[d]=b[c].controller.value():b[c].value?a[d]=b[c].value:b[c].firstChild&&3==b[c].firstChild.nodeType&&b[c].firstChild.nodeValue&&(a[d]=b[c].firstChild.nodeValue)}return a}function B(b,a){a=a||"";if("INPUT"==b.nodeName)b.value=a;else if("DIV"==b.nodeName)if(b.controller)b.controller.setValue(a);else if(b.firstChild&&3==b.firstChild.nodeType&&
b.firstChild.nodeValue)b.firstChild.nodeValue=a;else{var c=document.createTextNode(a);b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)}}function v(b,a){for(var c=b.getElementsByTagName("*"),d=[],h=[],r=0;r<c.length;++r)if(c[r].hasAttribute("user-input")){c[r].parentNode.removeAttribute("unset");var g=c[r].getAttribute("user-input");if(a[g]){var l=d.indexOf(c[r].parentNode);0<=l&&d.splice(l,1);h[h.length]=c[r].parentNode;B(c[r],a[g])}else l=h.indexOf(c[r].parentNode),-1==l&&(d[d.length]=
c[r].parentNode),B(c[r],"")}for(r=0;r<d.length;++r)d[r].setAttribute("unset",!0)}function w(b,a){if(a)for(var c=b.getElementsByTagName("*"),d=0;d<c.length;++d)if(c[d].hasAttribute("user-input")){var h=c[d].getAttribute("user-input");a[h]&&function(a){a.setAttribute("error",!0);a.onfocus=function(){a.removeAttribute("error")}}(c[d])}}function x(b){b.controller=this;this.setValue=function(a){b.setAttribute("option",a)}}function z(b){b.controller=this;this.setValue=function(a){var c=b.getElementsByClassName("preview-data");
c&&0<c.length&&B(c[0],a.number);a?b.removeAttribute("unset"):b.setAttribute("unset",!0)}}function d(b){function a(){var a=d.run(c.value);a?c.setAttribute("card",a):c.removeAttribute("card")}var c=b,d=new function(){var a={visa:{values:[{type:0,value:4}]},mastercard:{values:[{type:1,range:{min:51,max:55}}]},discover:{values:[{type:0,value:65},{type:0,value:6011},{type:1,range:{min:644,max:649}},{type:1,range:{min:622126,max:622925}}]},amex:{values:[{type:0,value:34},{type:0,value:37}]}};this.run=function(b){for(var c in a)if(a.hasOwnProperty(c))for(var d=
a[c],e=0;e<d.values.length;++e)if(0==d.values[e].type){var k=String(d.values[e].value);if(b.substr(0,k.length)===k)return c}else if(1==d.values[e].type)for(var l=d.values[e].range.min;l<=d.values[e].range.max;++l)if(k=String(l),b.substr(0,k.length)===k)return c;return null}};c.onkeydown=function(a){var b=0<=[8,9,37,38,39,40,46].indexOf(a.keyCode),d=!isNaN(parseInt(a.key))&&16>c.value.length;b||d||a.preventDefault()};c.onkeyup=a;c.onfocus=a;c.onblue=a;c.onchange=a;c.controller=this;this.value=function(){return{type:d.run(c.value),
number:c.value}}}function b(b){var a={country:function(a){(new DropDown({},a)).addItem("Polska",!0)},county:function(a){var b="dolno\u015bl\u0105skie kujawsko-pomorskie lubelskie lubuskie \u0142\u00f3dzkie ma\u0142opolskie mazowieckie opolskie podkarpackie podlaskie pomorskie \u015bl\u0105skie \u015bwi\u0119tokrzyskie warmi\u0144sko-mazurskie wielkopolskie zachodniopomorskie".split(" ");a=new DropDown({},a);for(var c=0;c<b.length;++c)a.addItem(b[c],!0)},expiry_month:function(a){a=new DropDown({},
a);for(var b=1;12>=b;++b)a.addItem(b,!0)},expiry_year:function(a){var b=(new Date).getFullYear();a=new DropDown({},a);for(var c=b;c<=b+10;++c)a.addItem(c,!0)},card_number:function(a){new d(a)},paymentType:function(a){new x(a)},cardNumber:function(a){new z(a)}};b=b.getElementsByTagName("*");for(var c=0;c<b.length;++c)if(b[c].hasAttribute("control")){var k=b[c].getAttribute("control");a[k]&&async(a[k],[b[c]])}}function t(b){var a=this,c=document.createElement("tr"),d=document.createElement("td"),h=
new MSDivObject,l=document.createElement("td"),g=document.createElement("td"),m=document.createElement("td"),f=document.createElement("td"),n=document.createElement("td"),p=document.createElement("div");d.className="text";h.el.className="order-thumb";l.className="text";g.className="text";m.className="text";f.className="text";n.className="text";p.className="remove-btn";m.setAttribute("currency","z\u0142");f.setAttribute("currency","z\u0142");d.appendChild(h.el);c.appendChild(d);c.appendChild(l);c.appendChild(g);
c.appendChild(m);c.appendChild(f);n.appendChild(p);c.appendChild(n);h.loadImage({url:"/async/thumb/load/"+b.preview,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75});l.innerHTML=b.title;g.innerHTML=b.quantity;m.innerHTML=b.price;b.discount?(d=document.createElement("span"),h=document.createTextNode(Number(b.shipping)*(1-(b.discount||0))),d.className="discount-pin",f.appendChild(d),f.appendChild(h)):f.innerHTML=Number(b.shipping);a.el=c;a.id=function(){return b.id};a.item=
function(){return b.item};a.price=function(){return Number(b.price)};a.shipping=function(){return Number(b.shipping)};a.setDiscount=function(a){b.discount=a};p.onclick=function(){a.remove(a)};a.info=function(){return{title:b.title,quantity:Number(b.quantity),price:Number(b.price),shipping:Number(b.shipping)*(1-(b.discount||0))}};a.update=function(a){for(var c in a||{})a.hasOwnProperty(c)&&(b[c]=a[c]);g.innerHTML=b.quantity;m.innerHTML=b.price;b.discount?(a=document.createElement("span"),c=document.createTextNode(Number(b.shipping)*
(1-(b.discount||0))),a.className="discount-pin",f.innerHTML="",f.appendChild(a),f.appendChild(c)):f.innerHTML=Number(b.shipping)}}function l(){function b(a){var c=document.getElementById(a);c?c.setAttribute("ordered",!0):async(b,[a])}function a(b){var c=document.getElementById(b);c?c.removeAttribute("ordered"):async(a,[b])}function c(b){window.ajax({type:"POST",data:{id:b.id()},url:"/async/orders/remove"}).done(function(b){if(b.status&&b.removed){p=b.total;g.innerHTML=p;var c=C[b.removed];delete C[b.removed];
a(c.item());l.removeChild(c.el);for(var c=document.createDocumentFragment(),e=0;e<b.items.length;++e){var f=b.items[e];C[f.id]&&(C[f.id].update(f),l.removeChild(C[f.id].el));c.appendChild(C[f.id].el)}l.appendChild(c);0==b.items.length?d.hide():d.activate(d)}})}var d=this,h=document.getElementById("order_list_view"),l=document.getElementById("order_list_table"),g=document.getElementById("order_list_totals"),m=document.getElementById("order_list_advance"),f=document.getElementById("terms"),n=document.getElementById("terms_box"),
p=0,C={};g.setAttribute("currency","z\u0142");n.onclick=function(){f.hasAttribute("checked")?f.removeAttribute("checked"):(f.setAttribute("checked",!0),f.removeAttribute("error"))};window.events.listen("update-ordered",function(){for(var a in C)if(C.hasOwnProperty(a)){var b=document.getElementById(C[a].item());b&&b.setAttribute("ordered",!0)}});d.addOrder=function(a){window.ajax({type:"POST",data:a,url:"/async/orders/add"}).done(function(f){if(f.status){p=f.total;g.innerHTML=p;for(var h=document.createDocumentFragment(),
m=0;m<f.items.length;++m){var n=f.items[m];if(C[n.id])C[n.id].update(n),l.removeChild(C[n.id].el);else if(n.id==f.added){n.title=a.title;n.availability=a.availability;n.preview=a.preview;var q=new t(n);C[n.id]=q;q.remove=c;b(q.item())}C[n.id]&&h.appendChild(C[n.id].el)}l.appendChild(h);1==f.items.length&&d.show(!0);d.reset();d.activate(d)}})};d.clear=function(){for(var b in C)if(C.hasOwnProperty(b)){var c=C[b];delete C[b];a(c.item());l.removeChild(c.el)}};d.init=function(){window.ajax({type:"POST",
data:null,url:"/async/orders/session"}).done(function(a){if(a.status&&a.items){p=a.total;g.innerHTML=p;for(var f=document.createDocumentFragment(),h=0;h<a.items.length;++h){var m=new t(a.items[h]);C[m.id()]=m;m.remove=c;b(m.item());f.appendChild(C[m.id()].el)}l.appendChild(f);0<a.items.length&&(d.show(),d.activate(d))}})};m.onclick=function(){if(f.hasAttribute("checked")){var a=[],b;for(b in C)C.hasOwnProperty(b)&&(a[a.length]=C[b].info());d.advance(d,{items:a,total:p})}else f.setAttribute("error",
!0)};d.el=h}function n(){var b=this,a=document.getElementById("shipping_view"),c=document.getElementById("shipping_advance"),d=document.getElementById("shipping_back"),h=null;c.onclick=function(){var c=D(a);window.ajax({type:"POST",data:c,url:"/async/orders/shipping"}).done(function(c){c.status?(h.shipping=c.data,b.advance(b,h)):w(a,c.error)})};b.clear=function(){h=null};b.apply=function(a){h=a};d.onclick=function(){b.back(b)};b.el=a}function m(){function b(c){c.stopPropagation();for(c=0;c<g.length;++c)g[c].removeAttribute("checked");
this.setAttribute("checked",!0);p=this.getAttribute("option");a.expand(m,this.hasAttribute("expand"))}var a=this,c=document.getElementById("payment_view"),d=document.getElementById("payment_advance"),h=document.getElementById("payment_back"),l=document.getElementById("payment_type"),g=[],m=document.getElementById("payment_details"),f=document.getElementById("billing_details"),n=null,p=0;window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status){var c=0,d;for(d in a.options)if(a.options.hasOwnProperty(d)){var f=
document.createElement("div"),k=document.createElement("div"),h=document.createElement("div");f.className="payment-option "+d;k.className="checkbox";h.className="banner "+d;f.appendChild(k);f.appendChild(h);0==c&&f.setAttribute("checked",!0);f.setAttribute("option",c++);var k=a.options[d],m;for(m in k)k.hasOwnProperty(m)&&f.setAttribute(m,k[m]);l.appendChild(f);g[g.length]=f;f.onclick=b}}});a.apply=function(a){n=a;v(m,{forename:n.shipping.forename,surname:n.shipping.surname});v(f,n.shipping)};a.clear=
function(){n=null};d.onclick=function(){var b=D(f);if(0==p)window.ajax({type:"POST",data:b,url:"/async/orders/pay_paypal"}).done(function(c){c.status?(b=c.data,b.paymentType="Paypal",n.billing=b,a.advance(a,n)):w(f,c.error)});else if(1==p){var d=D(m),e;for(e in d)d.hasOwnProperty(e)&&(b[e]=d[e]);window.ajax({type:"POST",data:b,url:"/async/orders/pay_card"}).done(function(d){d.status?(b=d.data,b.paymentType=b.card.type,n.billing=b,a.advance(a,n)):w(c,d.error)})}};h.onclick=function(){a.back(a)};a.el=
c}function E(){function b(a){var c=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("th"),g=document.createElement("th"),k=document.createElement("th"),h=document.createElement("th");language.bind("title",e);language.bind("quantity",g);language.bind("price",k);language.bind("shipping",h);e.className="preview-label text";g.className="preview-label text";k.className="preview-label text";h.className="preview-label text";d.appendChild(e);d.appendChild(g);d.appendChild(k);
d.appendChild(h);c.appendChild(d);for(d=0;d<a.length;++d){var e=document.createElement("tr"),g=document.createElement("td"),k=document.createElement("td"),h=document.createElement("td"),l=document.createElement("td");g.innerHTML=a[d].title;k.innerHTML=a[d].quantity;h.innerHTML=a[d].price;l.innerHTML=a[d].shipping;h.setAttribute("currency","z\u0142");l.setAttribute("currency","z\u0142");g.className="text preview-data";k.className="text preview-data";h.className="text preview-data";l.className="text preview-data";
e.appendChild(g);e.appendChild(k);e.appendChild(h);e.appendChild(l);c.appendChild(e)}return c}var a=this,c=document.getElementById("done_view"),d=document.getElementById("done_advance"),h=document.getElementById("done_back"),l=document.getElementById("data_preview"),g=document.getElementById("order_summary"),m=l.getElementsByClassName("preview-block");d.onclick=function(){window.location="/async/orders/process"};h.onclick=function(){a.back(a)};a.apply=function(a){for(var c=0;c<m.length;++c)if(m[c].hasAttribute("block-type")){var d=
m[c].getAttribute("block-type");a[d]&&v(m[c],a[d])}g.innerHTML=null;g.appendChild(b(a.items));c=document.createElement("div");d=document.createElement("div");c.className="seperator text";language.bind("total",c);d.className="total-price-summary text-invert-light";d.innerHTML=a.total;d.setAttribute("currency","z\u0142");g.appendChild(c);g.appendChild(d)};a.clear=function(){g.innerHTML=null};a.el=c}function A(b,a){function c(a,c){p!=a?(a.el.style.top=getHeight(b)+200+"px",a.el.style.display="block",
a.apply&&c&&a.apply(c),async(function(){var c=[a.el,b];a.el.set={top:150};b.set={h:200+getHeight(a.el)};p&&(p.el.set={o:0},c[c.length]=p.el,window.scrollBodyTo(b));morpheus(c,{top:function(a){return a.set.top},height:function(a){return a.set.h},opacity:function(a){return a.set.o},duration:250,complete:function(){p&&p.el.removeAttribute("style");p=a}})})):morpheus(b,{height:200+getHeight(a.el)+"px",duration:250})}function d(){for(var a=0;a<f.length;++a)n[a].removeAttribute("status");0<f.length&&n[0].setAttribute("status",
0)}function h(a,b){if(a==p){var d=f.indexOf(a);d+1==f.length?m.done():0<=d&&d+1<f.length&&(n[d].setAttribute("status",1),d+=1,c(f[d],b),n[d].setAttribute("status",0))}}function l(a){a==p&&(a=f.indexOf(a),0>a-1?m.done():0<=a&&0<=a-1&&(n[a].removeAttribute("status"),--a,c(f[a]),n[a].setAttribute("status",0)))}function g(a,c){var d=0,f=0,g=getHeight(b);c?(a.style.display="block",d=getHeight(a),f=a.offsetHeight,a.style.height="0px"):(d=getHeight(a),f=a.offsetHeight);d-=(d-f)/2;a.style.opacity=c?0:1;a.set=
{h:c?f:0,m:c?null:0,o:c?1:0};b.set={h:c?d+g:g-d};morpheus([b,a],{height:function(a){return a.set.h},"margin-bottom":function(a){return a.set.m},"margin-top":function(a){return a.set.m},opacity:function(a){return a.set.o},duration:250,complete:function(){c?(a.style.height="",a.style.opacity=""):a.removeAttribute("style")}})}for(var m=this,f=a,n=document.getElementById("progress_view").getElementsByClassName("progress-step"),p=null,t=0;t<f.length;++t)f[t].reset=d,f[t].activate=c,f[t].advance=h,f[t].back=
l,f[t].expand=g;m.init=function(){for(var a=0;a<f.length;++a)f[a].init&&f[a].init()};m.clear=function(){d();for(var a=b.getElementsByTagName("*"),c=0;c<a.length;++c)a[c].hasAttribute("user-input")&&(a[c].parentNode.removeAttribute("unset"),B(a[c],""));for(a=0;a<f.length;++a)f[a].clear()}}function G(){function d(){a.set={w:0};c.set={h:0};morpheus([a,c],{width:function(a){return a.set.w},height:function(a){return a.set.h},duration:350,complete:function(){a.style="";c.style="";c.removeChild(k)}});window.scrollBodyTo(window.shop.el)}
var a=document.getElementById("order"),c=document.getElementById("order_panel"),k=document.getElementById("order_panel_inner"),h=new l,r=new n,g=new m,q=new E,f=new A(c,[h,r,g,q]);b(c);c.removeChild(k);h.show=function(b){order_panel.appendChild(k);a.style.display="inline-block";c.style.display="block";b&&window.scrollBodyTo(c)};h.hide=d;window.events.listen("order",function(a){h.addOrder(a)});f.done=function(){f.clear();d()};f.init();this.el=c}window.addEventListener("load",function(){window.orders=
new G})})();(function(){function D(){var B=document.getElementById("username_input"),v=document.getElementById("password_input"),w=document.getElementById("login"),x=function(){var d=4<B.value.length&&6<v.value.length;w.style.display=d?"block":"none";return d},z=function(){window.ajax({type:"POST",data:{username:B.value,password:v.value},url:"/async/user/login"}).done(function(d){d.status?window.location.href="/":(v.value="",x(),v.focus())})};B.focus();B.onkeyup=function(){x()};v.onkeyup=function(d){x()&&13==
d.keyCode&&z()}}window.addEventListener("load",function(){"/admin"==window.location.pathname&&(window.login=new D)})})();
