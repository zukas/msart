(function(y,C){"function"==typeof define?define(C):"undefined"!=typeof module?module.exports=C():this[y]=C()})("morpheus",function(){function y(a){var k;k=x.length;for(d&&(a=m());k--;)x[k](a);x.length&&r(y)}function C(a,d){var k={},x;if(x=a.match(u))k.rotate=e(x[1],d?d.rotate:null);if(x=a.match(F))k.scale=e(x[1],d?d.scale:null);if(x=a.match(h))k.skewx=e(x[1],d?d.skewx:null),k.skewy=e(x[3],d?d.skewy:null);if(x=a.match(B))k.translatex=e(x[1],d?d.translatex:null),k.translatey=e(x[3],d?d.translatey:null);
return k}function l(a){var d="";"rotate"in a&&(d+="rotate("+a.rotate+"deg) ");"scale"in a&&(d+="scale("+a.scale+") ");"translatex"in a&&(d+="translate("+a.translatex+"px,"+a.translatey+"px) ");"skewx"in a&&(d+="skew("+a.skewx+"deg,"+a.skewy+"deg)");return d}function v(a){var d=a.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(d?"#"+(16777216|d[1]<<16|d[2]<<8|d[3]).toString(16).slice(1):a).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function q(a){return a.replace(/-(.)/g,function(a,d){return d.toUpperCase()})}
function b(a){return"function"==typeof a}function c(a){return Math.sin(a*Math.PI/2)}function p(a,d,k,g,z,u){function I(a){a-=e;if(a>H||h){u=isFinite(u)?u:1;h?t&&d(u):d(u);var r;a:if(a=x,r=void 0,Array.prototype.indexOf)r=a.indexOf(I);else{for(r=0;r<a.length;++r)if(a[r]===I)break a;r=void 0}0<=r&&(a=x.slice(r+1),x.length=r,x=x.concat(a));return k&&k.apply(w)}isFinite(u)?d(F*g(a/H)+z):d(g(a/H))}g=b(g)?g:n.easings[g]||c;var H=a||1E3,w=this,F=u-z,e=m(),h=0,t=0;1===x.push(I)&&r(y);return{stop:function(a){h=
1;(t=a)||(k=null)}}}function f(a,d){var k=a.length,x=[],g,r;for(g=0;g<k;++g)x[g]=[a[g][0],a[g][1]];for(r=1;r<k;++r)for(g=0;g<k-r;++g)x[g][0]=(1-d)*x[g][0]+d*x[parseInt(g+1,10)][0],x[g][1]=(1-d)*x[g][1]+d*x[parseInt(g+1,10)][1];return[x[0][0],x[0][1]]}function e(a,d,k,x,g){return(k=z.exec(a))?(g=parseFloat(k[2]))&&d+("+"==k[1]?1:-1)*g:parseFloat(a)}function n(a,d){var x=a?x=isFinite(a.length)?a:[a]:[],r,z=d.complete,u=d.duration,c=d.easing,F=d.bezier,h=[],m=[],B=[],n=[],A,G;F&&(A=d.left,G=d.top,delete d.right,
delete d.bottom,delete d.left,delete d.top);for(r=x.length;r--;){h[r]={};m[r]={};B[r]={};if(F){var E=w(x[r],"left"),D=w(x[r],"top"),y=[e(b(A)?A(x[r]):A||0,parseFloat(E)),e(b(G)?G(x[r]):G||0,parseFloat(D))];n[r]=b(F)?F(x[r],y):F;n[r].push(y);n[r].unshift([parseInt(E,10),parseInt(D,10)])}for(var J in d){switch(J){case "complete":case "duration":case "easing":case "bezier":continue}var E=w(x[r],J),Q,D=b(d[J])?d[J](x[r]):d[J];"string"==typeof D&&H.test(D)&&!H.test(E)?delete d[J]:(h[r][J]="transform"==
J?C(E):"string"==typeof D&&H.test(D)?v(E).slice(1):parseFloat(E),m[r][J]="transform"==J?C(D,h[r][J]):"string"==typeof D&&"#"==D.charAt(0)?v(D).slice(1):e(D,parseFloat(E)),"string"==typeof D&&(Q=D.match(g))&&(B[r][J]=Q[1]))}}return p.apply(x,[u,function(a,g,z){for(r=x.length;r--;){F&&(z=f(n[r],a),x[r].style.left=z[0]+"px",x[r].style.top=z[1]+"px");for(var u in d){g=a;var b=B;z=h;var H=m,w=u,c=r,e=void 0;if("transform"==w){e={};b=void 0;for(b in z[c][w])e[b]=b in H[c][w]?Math.round(1E3*((H[c][w][b]-
z[c][w][b])*g+z[c][w][b]))/1E3:z[c][w][b];g=e}else if("string"==typeof z[c][w]){z=z[c][w];H=H[c][w];w=[];b=e=e=c=void 0;for(c=0;6>c;c++)e=Math.min(15,parseInt(z.charAt(c),16)),b=Math.min(15,parseInt(H.charAt(c),16)),e=Math.floor((b-e)*g+e),e=15<e?15:0>e?0:e,w[c]=e.toString(16);g="#"+w.join("")}else e=Math.round(1E3*((H[c][w]-z[c][w])*g+z[c][w]))/1E3,w in t||(e+=b[c][w]||"px"),g=e;"transform"==u?x[r].style[I]=l(g):"opacity"!=u||k?x[r].style[q(u)]=g:x[r].style.filter="alpha(opacity="+100*g+")"}}},z,
c])}var A=document,E=window,D=E.performance,G=D&&(D.now||D.webkitNow||D.msNow||D.mozNow),m=G?function(){return G.call(D)}:function(){return+new Date},d=!1,a=A.documentElement,H=/^rgb\(|#/,z=/^([+\-])=([\d\.]+)/,g=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,u=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,F=/scale\(((?:[+\-]=)?([\d\.]+))\)/,h=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,B=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,t={lineHeight:1,
zoom:1,zIndex:1,opacity:1,transform:1},I=function(){var a=A.createElement("a").style,d=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],k;for(k=0;k<d.length;k++)if(d[k]in a)return d[k]}(),k="undefined"!==typeof A.createElement("a").style.opacity,w=A.defaultView&&A.defaultView.getComputedStyle?function(a,d){d="transform"==d?I:d;d=q(d);var k=null,x=A.defaultView.getComputedStyle(a,"");x&&(k=x[d]);return a.style[d]||k}:a.currentStyle?function(a,d){d=q(d);if("opacity"==d){var k=
100;try{k=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(x){try{k=a.filters("alpha").opacity}catch(g){}}return k/100}k=a.currentStyle?a.currentStyle[d]:null;return a.style[d]||k}:function(a,d){return a.style[q(d)]},r=function(){return E.requestAnimationFrame||E.webkitRequestAnimationFrame||E.mozRequestAnimationFrame||E.msRequestAnimationFrame||E.oRequestAnimationFrame||function(a){E.setTimeout(function(){a(+new Date)},17)}}();r(function(a){d=1E12<a!=1E12<m()});var x=[];n.tween=p;n.getStyle=
w;n.bezier=f;n.transform=I;n.parseTransform=C;n.formatTransform=l;n.animationFrame=r;n.easings={};return n});(function(y){function C(b){var c=null,p=new XMLHttpRequest;p.open(b.type,b.url,!0);b.files||p.setRequestHeader("Content-type","application/json");b.cache&&p.setRequestHeader("Cache-Control","max-age=86400");p.onloadend=function(){200==p.status?c&&c(JSON.parse(p.responseText)):c&&c(null);p=null};b.files?p.send(b.data):p.send(b.data?JSON.stringify(b.data):null);this.done=function(b){c=b}}function l(){var b=[],c=function(b,c){return b-c},p=function(f,e,n){var A=b.length;e=null==e?0:e;n=null==n?A-1:n;
var l=e+Math.floor((n-e)/2);if(0==A)return A;if(0<c(f,b[n]))return n+1;if(0>c(f,b[e]))return e;A=c(f,b[l]);if(0==A)return l;if(0>A)return p(f,e,l-1);if(0<A)return p(f,l+1,n)};this.setCompare=function(b){b&&(c=b)};this.insert=function(c){b.splice(p(c),0,c)};this.length=function(){return b.length};this.at=function(c){return b[c]};this.grab=function(c){return b.splice(0,c)};this.data=function(){return b}}function v(b){var c=function(){var c=window.performance||{};c.now=function(){return c.now||c.webkitNow||
c.msNow||c.oNow||c.mozNow||function(){return(new Date).getTime()}}();return c.now()},p=function(){return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.msRequestAnimationFrame||b.oRequestAnimationFrame||function(e){b.setTimeout(function(){e(c())},1E3/60)}}(),f=function(){return new function(){var c=new l,b=function(A){0<c.length()&&p(b);var f,l;f=0;for(l=c.length();f<l&&!(c.at(f).timestamp>A);++f);A=c.grab(f);f=0;for(l=A.length;f<l;++f)A[f].func.apply(null,A[f].args)};
c.setCompare(function(c,b){return c.timestamp-b.timestamp});this.addTask=function(A){c.insert(A);0<c.length()&&p(b)}}}();b.async=function(b,n,A){"Function"!=classOf(b)||n&&"Array"!=classOf(n)||f.addTask({timestamp:A?c()+A:0,func:b,args:n||[]})}}function q(b){var c={};b.events={listen:function(b,f){var e=c[b]||[];e[e.length]=f;c[b]=e},remove:function(b,f){var e=c[b]||[],n=e.indexOf(f);0<=n&&e.splice(n,1)},emit:function(p,f){var e=c[p];if(e)for(var n=0;n<e.length;++n)b.async(e[n],f)}}}y.hashCode=function(b){var c=
0,p,f,e;if(0===b.length)return c;p=0;for(e=b.length;p<e;p++)f=b.charCodeAt(p),c=(c<<5)-c+f,c|=0;return c};y.MSInputObject=function(b){var c=this;c.__get_value=null;c.__set_value=null;b=b||{};if(window.admin||b.user){if(b.multiline){c.el=document.createElement("textarea");var p=c.el.offsetHeight-c.el.clientHeight,f=0,e=c.el.clientHeight,n=function(){async(function(){var b=c.el.value.length;b<f&&(c.el.style.height="auto");var n=c.el.scrollHeight+p;0<n&&(c.el.style.height=n+"px");f=b;n!=e&&(e=n)})};
c.__get_value=function(){return c.el.value};c.__set_value=function(b){c.el.value=b;n()};c.el.addEventListener("keydown",n);c.el.addEventListener("keyup",n)}else c.el=document.createElement("input"),c.el.setAttribute("type","text"),c.__get_value=function(){return c.el.value},c.__set_value=function(b){c.el.value=b};c.el.onchange=function(){if(c.onchange)c.onchange(c)};b.placeholder&&this.el.setAttribute("placeholder",b.placeholder)}else c.el=document.createElement("div"),c.__get_value=function(){return c.el.innerHTML},
c.__set_value=function(b){c.el.innerHTML=b};b.className&&(c.el.className=b.className);b.id&&(c.el.id=b.id)};MSInputObject.prototype.value=function(){return this.__get_value()||""};MSInputObject.prototype.setValue=function(b){this.__set_value(b||"")};y.MSDivObject=function(b){this.el=b||document.createElement("div")};MSDivObject.prototype.addClass=function(b){-1==this.el.className.indexOf(b)&&(this.el.className=this.el.className.concat(" ",b))};MSDivObject.prototype.removeClass=function(b){-1<this.el.className.indexOf(b)&&
(this.el.className=this.el.className.replace(b,"").replace("  "," ").trim())};MSDivObject.prototype.setPlaceholder=function(b){if(window.admin){var c=this,p=document.createElement("span"),f=!0;c.has_placeholder=!0;p.className="placeholder";p.innerHTML=b;0==c.el.innerHTML.length&&(c.el.appendChild(p),c.addClass("placeholder-visible"));c.el.addEventListener("text-changed",function(){0==c.el.innerHTML.length?(f||(c.addClass("placeholder-visible"),f=!0),c.el.appendChild(p)):f&&(f=!1,c.removeClass("placeholder-visible"))});
c.el.addEventListener("focus",function(){f&&(c.el.removeChild(p),c.removeClass("placeholder-visible"),f=!1)});c.el.addEventListener("blur",function(){0==c.innerHTML.length&&(c.el.appendChild(p),c.addClass("placeholder-visible"),f=!0)});c.has_text=function(){return!f}}};MSDivObject.prototype.refresh=function(){(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed"))};MSDivObject.prototype.scrollable=function(){var b=this;b.track_change?Ps.update(b.el):(b.track_change=
!0,Ps.initialize(b.el,{suppressScrollX:!0}),b.el.addEventListener("text-changed",function(){Ps.update(b.el)}))};MSDivObject.prototype.setText=function(b){b&&(this.el.innerHTML=b,(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed")))};MSDivObject.prototype.getText=function(){return this.has_placeholder?this.has_text()?this.el.innerHTML:"":this.el.innerHTML};MSDivObject.prototype.textEdit=function(b){if(window.admin){var c=this;b=b||{};b.textItem=b.textItem||c;
c.el.addEventListener("click",function(){if(!c.in_edit){c.in_edit=!0;var p=b.textItem.getText(),f=b.multiline?document.createElement("textarea"):document.createElement("input");b.multiline&&b.autosize&&f.addEventListener("keydown",function(){async(function(){f&&(f.style.height=f.scrollHeight+"px")})});b.multiline||(f.type="text");f.className="inplace-text-edit";f.value=p;f.style.width=c.el.offsetWidth-(b.offsetWidth||0)+"px";f.style.height=c.el.offsetHeight-(b.offsetHeight||0)+"px";c.el.innerHTML=
"";c.el.appendChild(f);f.focus();f.onblur=function(){b.textItem.setText(f.value);f=null;c.in_edit=!1;b.textItem!=c&&(c.el.innerHTML="",c.el.appendChild(b.textItem.el),c.refresh())}}})}};MSDivObject.prototype.loadImage=function(b){var c=this,p=b.url;async(function(){c.el.style.backgroundImage="url("+p+")"})};y.FileUpload=function(b){var c=this,p=document.createElement("div"),f=document.createElement("input");b=b||{multiple:!1};b.id&&(p.id=b.id);b.className&&(p.className=b.className);f.type="file";
f.name="file";f.accept="image/*";f.multiple=b.multiple;p.appendChild(f);f.onchange=function(b){c.preview&&c.preview(b.target.files)};c.el=p};y.DropDown=function(b,c){function p(a,d){if(a.manager)a.manager.setValue(d);else if(a.firstChild&&3==a.firstChild.nodeType)a.firstChild.nodeValue=d;else{var b=document.createTextNode(d);a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)}}function f(){var a=null,d=[];this.bind=function(b){d[d.length]=b;a&&p(b,a)};this.unbind=function(a){a=d.indexOf(a);
0<=a&&d.splice(a,1)};this.setValue=function(b){if(a=b)for(b=0;b<d.length;++b)p(d[b],a)}}var e=this,n=c||document.createElement("div"),A=!b.adminOnly||window.admin,l=A?document.createElement("img"):null,q=A?document.createElement("lu"):null,G=!1,m=!1,d={},a=null,H=!1,z=function(b){var c=d[b];c&&(a&&a.unbind(n),n.setAttribute("current-data-id",b),a=c,a.bind(n),A&&G&&e.close(),e.changed&&async(e.changed,[b]))};n.controller=e;e.addItem=function(b,c){var e=new f,h=null;d[b]=e;c&&e.setValue(b);A&&(h=document.createElement("li"),
h.className="dropdown-item text-invert",h.onclick=function(){H||z(b)},q.appendChild(h),e.bind(h));a||z(b);return{controller:e,item:h}};e.addVirtual=function(){var a=document.createElement("li");a.className="dropdown-item virtual text-invert";q.appendChild(a);return a};e.removeVirtual=function(a){q.contains(a)&&q.removeChild(a)};n.className=b.className?0<n.className.length?n.className+(" dropdown-container no-select text "+b.className):"dropdown-container no-select text "+b.className:0<n.className.length?
n.className+" dropdown-container text":"dropdown-container text";A&&(l.src=b.src||"../images/down.png",n.appendChild(l),q.className="dropdown-list no-select",n.appendChild(q),n.onclick=function(){H||m||(e.beforeOpen&&e.beforeOpen(),G=!0,q.style.display="block")},n.onmouseleave=function(){H||e.close()});e.el=n;e.manual=function(){H=!0};e.auto=function(){H=!1};e.open=function(){H&&(G=!0,q.style.display="block")};e.close=function(){G&&(e.beforeClose&&e.beforeClose(),q.style.right="-200%",async(function(){q.removeAttribute("style")}))};
e.setText=function(a){p(n,a)};e.text=function(){return n.firstChild&&3==n.firstChild.nodeType?n.firstChild.nodeValue:""};e.value=function(){return n.getAttribute("current-data-id")};e.setValue=function(a){z(a)};e.lock=function(){m=!0;n.setAttribute("locked",!0)};e.unlock=function(){m=!1;n.removeAttribute("locked")}};y.classOf=function(b){return/\[object (\w+)\]/.exec(Object.prototype.toString.call(b))[1]};y.getHeight=function(b){var c;document.all?(c=parseInt(b.currentStyle.height),b=parseInt(b.currentStyle.marginTop,
10)+parseInt(b.currentStyle.marginBottom,10)):(c=parseInt(document.defaultView.getComputedStyle(b,"").getPropertyValue("height")),b=parseInt(document.defaultView.getComputedStyle(b,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(b,"").getPropertyValue("margin-bottom")));return c+b};y.browser={opera:!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),firefox:"undefined"!==typeof InstallTrigger,safari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),
ie:!!document.documentMode};y.browser.chrome=!!window.chrome&&!window.browser.opera;y.ajax=function(b){return new C(b)};y.scrollBodyTo=function(b,c){var p=document.getElementById("content-wrapper"),f=parseInt(b.offsetTop),e=parseInt(p.scrollTop);c=parseInt(c||0);if(e!=f){var n=f-e+c;morpheus.tween(500,function(b){b=e+n*b;0<=b&&b<=p.scrollHeight&&(p.scrollTop=b)})}};y.addEventListener("load",function(){new v(y);new q(y)})})(this);(function(){function y(){function l(b,c){if(b.controller)b.controller.setValue(c);else if(b.firstChild&&3==b.firstChild.nodeType&&b.firstChild.nodeValue)b.firstChild.nodeValue=c;else{var f=document.createTextNode(c);b.firstChild?b.insertBefore(f,b.firstChild):b.appendChild(f)}}var v="en",q={},b={};this.bind=function(b,c){l(c,C[v][b]);var f=q[b];f?f[f.length]=c:q[b]=[c]};this.bindInput=function(c,n){n.placeholder=C[v][c];var f=b[c];f?f[f.length]=n:b[c]=[n]};this.unbind=function(b){for(var c in q)if(q.hasOwnProperty(c)&&
0<q[c].length){var f=q[c].indexOf(b);-1!=f&&q[c].splice(f,1)}};this.unbindInput=function(c){for(var f in b)if(b.hasOwnProperty(f)&&0<b[f].length){var p=b[f].indexOf(c);-1!=p&&b[hey].splice(p,1)}};this.change=function(c){if(C[c]&&v!=c){v=c;for(var f in q)if(q.hasOwnProperty(f)&&0<q[f].length){c=q[f];for(var p=c.length,y=0;y<p;++y)l(c[y],C[v][f])}for(f in b)if(b.hasOwnProperty(f)&&0<b[f].length)for(c=b[f],p=c.length,y=0;y<p;++y)c[y].placeholder=C[v][f]}};for(var c=document.getElementsByTagName("*"),
p=0;p<c.length;++p)if(c[p].hasAttribute("lang")){var f=c[p].getAttribute("lang");this.bind(f,c[p])}else c[p].hasAttribute("placeholder-lang")&&(f=c[p].getAttribute("placeholder-lang"),this.bindInput(f,c[p]));this.change("pl")}var C={en:{about:"About",shop:"Shop",orders:"Orders",gallery:"Gallery",contact:"Contact",description:"Description",title:"Title",type:"Type",availability:"Availability",process:"Order Process",price:"Price",quantity:"Quantity",shipping:"Shipping",qandp:"Quantity & Price",payment_opt:"Payment methods",
lead:"Lead times",individual:"Individual",common:"Common",available:"Available",demand:"On-Demand",keep:"Keep in Shop",move:"Move to Gallery",remove:"Remove","delete":"Delete",save:"Save",close:"Close",order:"Order",aboutus:"About Us",office:"Our Office",contactus:"Contact Us",name:"Name",surname:"Surname",email:"E-mail",address:"Address",country:"Country",postcode:"Post Code",message:"Message"},pl:{about:"Pracownia",shop:"Sklep",orders:"Zam\u00f3wienie",order:"Zam\u00f3w",gallery:"Galeria",contact:"Kontakt",
description:"Opis",title:"Nazwa",type:"Rodzaj",availability:"Dost\u0119pno\u015b\u0107",process:"Akcja",price:"Cena",close:"Zamknij",save:"Zapisz","delete":"Kasuj",payment_opt:"Forma p\u0142atno\u015bci",lead:"Czas realizacji",quantity:"Ilo\u015b\u0107",shipping:"Transport",total:"Koszt ca\u0142kowity",checkout:"Dalej",about_us:"O nas",office:"Dane kontaktowe",about_us_value:"",send:"Wy\u015blij",personal_details:"Dane osobowe",forename:"Imi\u0119",surname:"Nazwisko",email:"Email",phone:"Numer telefonu",
shipping_address:"Adres wysy\u0142ki",company:"Nazwa firmy",address:"Ulica",city:"Miasto",county:"Wojew\u00f3dztwo",post_code:"Kod pocztowy",country:"Kraj",next:"Kontynuuj",back:"Wr\u00f3\u0107",payment_type:"Rodzaj p\u0142atno\u015bci",card_details:"Szczeg\u00f3\u0142y karty kredytowej",card_no:"Numer karty",cvv:"CVV",expiry:"Termin wa\u017cno\u015bci",billing_address:"Adres fakturowania",vat:"NIP",full_name:"Imi\u0119 i nazwisko",price_summary:"Podsumowanie",pay:"Zap\u0142a\u0107",message:"Wiadomo\u015b\u0107",
individual:"Pojedynczy",common:"Zbiorowy",advert:"Og\u0142oszenie",available:"Dost\u0119pny",demand:"Na zam\u00f3wienie",keep:"Sklep",move:"Galeria",remove:"Usu\u0144",today:"Dzisiaj",l_3_day:"3 dni",l_week:"Tydzie\u0144",l_month:"Miesi\u0105c",l_time:"Ca\u0142y czas",lead_avail:"- Realizacja zam\u00f3wienia: 1 dzie\u0144 roboczy\n- Czas dostawy: 2 - 3 dni robocze",lead_wait:"- Realizacja zam\u00f3wienia: 2 - 3 tygodnie\n- Czas dostawy: 2 - 3 dni robocze",components:"Nazwa",none:"Bez nazwy",labeled:"Oznaczona",
projects:"Projekt",category:"Kategoria",allitems:"Wszystkie",lowprice:"Cena malej\u0105co",hightprice:"Cena rosn\u0105co",iagree:"Akceptuj\u0119",terms:"Regulamin sklepu"}};window.addEventListener("load",function(){window.language=new y})})();(function(){function y(){var l=document.getElementById("main_menu"),v=document.getElementById("menu_list"),q=l.getElementsByClassName("menu_item"),b=!1,c={};l.onclick=function(){b?(b=!1,v.removeAttribute("style")):(v.style.display="block",b=!0)};for(l=0;l<q.length;++l){var p=q[l].getAttribute("scrollto");c[p]=document.getElementById(p);q[l].onclick=function(f){f.stopPropagation?f.stopPropagation():f.cancelBubble=!0;b=!1;v.removeAttribute("style");window.scrollBodyTo(c[f.target.getAttribute("scrollto")])}}}
function C(){if(window.mobile)new y;else{var l=document.getElementById("header"),v=document.getElementById("content-wrapper"),q=document.getElementById("title"),b=document.getElementById("main_menu"),c=b.getElementsByClassName("menu_item"),p=[l,v,q,b],f={},e=!1,n;for(n in c)if(c.hasOwnProperty(n)){var A=c[n].getAttribute("scrollto");f[A]=document.getElementById(A);c[n].onclick=function(b){window.scrollBodyTo(f[b.target.getAttribute("scrollto")])}}l.unset={height:160};v.unset={top:160};q.unset={height:120,
width:720,left:"50%",marginLeft:-360};b.unset={top:120,left:"50%",marginLeft:-350};l.set={height:60};v.set={top:60};q.set={height:60,width:350,left:"0%",marginLeft:0};b.set={top:15,left:"100%",marginLeft:-700};for(n in p){var c=p[n].unset,C;for(C in c)p[n].style[C]=c[C]}window.events.listen("requestHeaderHeight",function(b){b(l.offsetHeight)});window.addEventListener("resize",function(){e&&(q.style.marginLeft=(l.offsetWidth<b.offsetWidth+350?-350:0)+"px")});v.addEventListener("scroll",function(){var c=
v.scrollTop;e&&0==c?(e=!1,morpheus(p,{height:function(b){return b.unset.height},width:function(b){return b.unset.width},top:function(b){return b.unset.top},left:function(b){return b.unset.left},marginLeft:function(b){return b.unset.marginLeft},duration:350,complete:function(){window.events.emit("headerChanged",[l.unset.height])}})):!e&&0<c&&(e=!0,q.set.marginLeft=l.offsetWidth<b.offsetWidth+350?-350:0,morpheus(p,{height:function(b){return b.set.height},width:function(b){return b.set.width},top:function(b){return b.set.top},
left:function(b){return b.set.left},marginLeft:function(b){return b.set.marginLeft},duration:500,complete:function(){window.events.emit("headerChanged",[l.set.height])}}))})}}window.addEventListener("load",function(){window.header=new C})})();(function(){function y(l){var v=this,q=document.createElement("div"),b=new MSInputObject({multiline:!0,placeholder:"Description",className:"about-column-text text"}),c=window.admin?document.createElement("div"):null;q.className="about-column";b.setValue(l);q.appendChild(b.el);c&&(c.className="remove-about-column",q.appendChild(c),c.onclick=function(){v.remove&&v.remove(v)});v.el=q;v.text=function(){return b.value()}}function C(){var l=document.getElementById("about_panel"),v=document.getElementById("columns");
document.getElementById("demo_show");var q=window.admin?document.getElementById("create_about_column"):null,b=window.admin?document.getElementById("save_about_column"):null,c=window.admin?function(b){v.removeChild(b.el);p.splice(p.indexOf(b),1)}:null,p=[];window.admin&&l.setAttribute("admin",!0);q&&(q.onclick=function(){var b=new y;b.remove=c;p.push(b);v.appendChild(b.el)});b&&(b.onclick=function(){for(var b=[],c=0;c<p.length;++c)b.push(p[c].text());window.ajax({type:"POST",data:{fields:b},url:"/async/about/save"})});
window.ajax({type:"POST",url:"/async/about/load"}).done(function(b){if(b.status&&b.fields){var e=document.createDocumentFragment(),n;for(n in b.fields){var l=new y(b.fields[n]);l.remove=c;p.push(l);e.appendChild(l.el)}v.appendChild(e)}})}window.addEventListener("load",function(){window.home=new C})})();(function(){function y(d){var a=this,b=d.id,c=d.file?!0:!1,g=d.file,u=d.label,F=null,h=null,m=!1,t=null,I=!1,k=new MSDivObject;d=window.admin?document.createElement("div"):null;var w=function(a){u=a;F&&(F.innerHTML=u||"")};k.el.className="picture-thumb";d&&(d.className="picture-thumb-remove",d.onclick=function(){a.removed&&a.removed(b)},k.el.appendChild(d));window.admin&&(k.el.setAttribute("draggable",!0),k.el.ondragstart=function(a){a.dataTransfer.setData("target",b)},k.el.ondragover=function(a){a.preventDefault()},
k.el.ondrop=function(d){d.preventDefault();a.swap&&a.swap(d.dataTransfer.getData("target"),b)});k.el.onclick=function(){a.click&&a.click(a)};a.el=k.el;a.id=function(){return b};a.isTemp=function(){return c};a.file=function(){return g};a.label=function(){return u};a.setLabel=w;a.enableLabel=function(){F||(F=document.createElement("div"),F.className="picture-thumb-label header-text no-select",k.el.appendChild(F));F&&(F.innerHTML=u||"")};a.disableLabel=function(){F&&(k.el.removeChild(F),F=null)};a.data=
function(){return h};a.remove=function(){m=!0;return c};a.pack=function(){return{id:b,temp:c,file:g,label:u,data:h,removed:m}};a.onload=function(d){I&&d?async(d,[a]):t=d};a.commit=function(a){if(m&&!c)window.ajax({type:"POST",data:{id:b},url:"/async/images/delete"}).done(function(d){a()});else if(c){var d=new FormData;d.append("file",g);window.ajax({type:"POST",data:d,files:!0,url:"/async/images/save"}).done(function(d){a({id:d.id,label:u})})}else a({id:b,label:u})};a.update=function(a){b=a.id;c=
a.temp;w(a.label);g=a.file;h=a.data;m=a.removed;k.el.style.backgroundImage=c?"url("+h+")":"url(/async/thumb/load/"+b+")"};c?(d=new FileReader,d.onload=function(d){h=d.target.result;k.el.style.backgroundImage="url("+h+")";I=!0;t&&(async(t,[a]),t=null)},d.readAsDataURL(g)):(k.loadImage({url:"/async/thumb/load/"+b,color:"#e0e0e0",shadow:!0,radius:24,width:6,length:22,lines:15,speed:.75}),I=!0,t&&(async(t,[a]),t=null))}function C(){var d=this,a=document.createElement("div"),b=document.createElement("div"),
c=document.createElement("div"),g=new MSDivObject,u=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,m=null,h=null,B={},t=[],I=function(a){var d=B[a];d&&(d.remove()&&delete B[a],c.removeChild(d.el),Ps.update(c));a=t.indexOf(a);0<=a&&t.splice(a,1)},k=function(a,d){var b=B[a],c=b.pack(),k=B[d].pack();B[a]=B[d];B[d]=b;B[a].update(c);B[d].update(k);b=t.indexOf(a);c=t.indexOf(d);t[b]=d;t[c]=a},w=function(){var a=g.el.getAttribute("current");(a=B[a])&&a.setLabel(m.value())},
r=function(a){a.isTemp()?g.el.style.backgroundImage="url("+a.data()+")":g.loadImage({url:"/async/images/load/"+a.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});g.el.setAttribute("current",a.id());m&&(m.onchange=null,m.setValue(a.label()),m.onchange=w)};a.className="picture-manager";b.className="picture-container";c.className="picture-carousel";b.appendChild(c);g.el.className="picture-preview";u&&(c.appendChild(u.el),u.preview=function(a){if(a){d.beginAdd();for(var b=
null,c=0;c<a.length;++c){var k=new y({id:String(hashCode(a[c].name)),file:a[c]});b||(b=k);d.add(k)}d.endAdd();d.show(b)}});a.appendChild(g.el);a.appendChild(b);d.el=a;d.imageList=function(){return t};d.enableLabel=function(a){m||(m=new MSInputObject({className:"picture-preview-label text"}),g.el.appendChild(m.el));m.onchange=null;a?m.setValue(a):(a=g.el.getAttribute("current"),(a=B[a])&&m.setValue(a.label()));for(var d in B)B.hasOwnProperty(d)&&B[d].enableLabel();m.onchange=w};d.disableLabel=function(){m&&
(g.el.removeChild(m.el),m=null);for(var a in B)B.hasOwnProperty(a)&&B[a].disableLabel()};d.commit=function(a){var d=function(a,b,c,k,r){a==b?r(k):B[c[a]].commit(function(x){x&&k.push(x);d(a+1,b,c,k,r)})};d(0,t.length,t,[],a)};d.beginAdd=function(){null==h&&(h=document.createDocumentFragment())};d.endAdd=function(){if(h&&(c.appendChild(h),h=null,0<t.length))B[t[0]].onload(r)};d.present=function(a){(a=B[a])&&async(r,[a])};d.add=function(a){h&&!B[a.id()]&&(t.push(a.id()),B[a.id()]=a,a.removed=I,a.swap=
k,a.click=r,h.appendChild(a.el),m&&a.enableLabel())};d.show=function(a){var d=function(){if(h)async(d);else if(a)a.onload(r)};async(d)}}function l(){var d=document.createElement("table"),a=new MSInputObject({placeholder:"Price",className:"text"}),b=new MSInputObject({placeholder:"Shipping",className:"text"});language.bindInput("price",a.el);language.bindInput("shipping",b.el);var c=document.createElement("tr"),g=document.createElement("th"),u=document.createElement("th");c.className="text-invert";
language.bind("price",g);language.bind("shipping",u);c.appendChild(g);c.appendChild(u);d.appendChild(c);c=document.createElement("tr");g=document.createElement("td");u=document.createElement("td");g.appendChild(a.el);c.appendChild(g);u.appendChild(b.el);c.appendChild(u);d.appendChild(c);d.className="single-item";this.el=d;this.value=function(){return[{quantity:1,price:a.value(),shipping:b.value()}]};this.setValue=function(d){a.setValue(d[0].price);b.setValue(d[0].shipping)}}function v(){function d(a,
d,b){this.quantity=a;this.price=d;this.shipping=b}var a=document.createElement("table"),b=[],c=function(c,k,g){var r=document.createElement("tr"),x=document.createElement("td"),z=new MSInputObject({placeholder:"Quantity",className:"text"}),m=document.createElement("td"),u=new MSInputObject({placeholder:"Price",className:"text"}),h=document.createElement("td"),t=new MSInputObject({placeholder:"Shipping",className:"text"}),B=document.createElement("td"),e=document.createElement("div"),F=new d(z,u,t);
language.bindInput("quantity",z.el);language.bindInput("price",u.el);language.bindInput("shipping",t.el);e.className="remove-row";b.push(F);z.setValue(c||"");u.setValue(k||"");t.setValue(g||"");x.appendChild(z.el);r.appendChild(x);m.appendChild(u.el);r.appendChild(m);h.appendChild(t.el);r.appendChild(h);B.appendChild(e);r.appendChild(B);a.appendChild(r);e.onclick=function(d){d=b.indexOf(F);0<=d&&(b.splice(d,1),a.removeChild(r))}},g=document.createElement("tr"),u=document.createElement("th"),m=document.createElement("th"),
h=document.createElement("th"),B=document.createElement("th"),t=document.createElement("div");g.className="text-invert";language.bind("quantity",u);language.bind("price",m);language.bind("shipping",h);g.appendChild(u);g.appendChild(m);g.appendChild(h);t.className="add-new-row";B.appendChild(t);g.appendChild(B);t.onclick=function(){c()};a.appendChild(g);a.className="multi-item";this.el=a;this.value=function(){for(var a=[],d=0;d<b.length;++d)a.push({quantity:b[d].quantity.value(),price:b[d].price.value(),
shipping:b[d].shipping.value()});return a};this.setValue=function(a){for(var d=0;d<a.length;++d)c(a[d].quantity,a[d].price,a[d].shipping)}}function q(){var d=null,a=document.createElement("table"),b=document.createElement("tr"),c=document.createElement("th"),g=document.createElement("th"),u=document.createElement("th"),m=document.createElement("tr"),h=document.createElement("td"),B=document.createElement("td"),t=document.createElement("td");b.className="text-invert";language.bind("quantity",c);language.bind("price",
g);language.bind("shipping",u);b.appendChild(c);b.appendChild(g);b.appendChild(u);a.appendChild(b);m.appendChild(h);m.appendChild(B);m.appendChild(t);a.appendChild(m);B.setAttribute("currency","z\u0142");t.setAttribute("currency","z\u0142");this.el=a;this.value=function(){return d};this.setValue=function(a){if(1==a.length)h.innerHTML=a[0].quantity,B.innerHTML=a[0].price,t.innerHTML=a[0].shipping,d={quantity:a[0].quantity,price:a[0].price,shipping:a[0].shipping};else if(1<a.length){var b=new DropDown({});
b.changed=function(b){B.innerHTML=a[b].price;t.innerHTML=a[b].shipping;d={quantity:a[b].quantity,price:a[b].price,shipping:a[b].shipping}};for(var c=0;c<a.length;++c)b.addItem(c).controller.setValue(a[c].quantity);h.appendChild(b.el)}}}function b(d){var a=this,b=document.createElement("div"),c=null,g=!1,m=0;window.admin?(c=[new l,new v],d&&d.type&&(m=0<=d.type&&2>d.type?d.type:0),b.appendChild(c[m].el)):(c=new q,b.appendChild(c.el));b.className="price text advert-hide";a.el=b;window.admin&&(a.change=
function(d){b.removeChild(c[m].el);m=0<=d&&2>d?d:0;b.appendChild(c[m].el);a.changed&&a.changed(d)},a.nullValue=function(a){g=a});a.value=function(){return window.admin?g?null:{type:m,values:c[m].value()}:c.value()};a.setValue=function(d){d&&(window.admin?(a.change(d.type),c[m].setValue(d.values)):c.setValue(d.values))}}function c(){var d=this,a=!0,b=document.createElement("div"),c=new DropDown({className:"component-ctl"});b.className="text-header header-text";language.bind("projects",b);c.changed=
function(a){d.changed&&d.changed(a)};d.setValue=function(a){if(a)for(var d=0;d<a.length;++d)c.addItem(a[d].id).controller.setValue(a[d].label)};d.value=function(){return c.value()};d.text=function(){return c.text()};d.enabled=function(){return a};d.enable=function(){a=!0;b.removeAttribute("style");c.el.removeAttribute("style")};d.disable=function(){a=!1;b.style.display="none";c.el.style.display="none"};var g=document.createDocumentFragment();g.appendChild(b);g.appendChild(c.el);d.el=g}function p(){function d(d){if(e.length<
g.length){var c=document.createElement("div"),k=document.createElement("div"),w=new DropDown({className:"category-ctl"},k),r=document.createElement("div");c.className="category-item-view";r.className="remove-category-item";c.appendChild(k);c.appendChild(r);r.onclick=function(){var d=e.indexOf(w);0<=d&&(e.splice(d,1),delete h[w.id],a.removeChild(c),c=null);e.length<g.length&&(b.style.display=null)};e[e.length]=w;w.beforeOpen=function(){if(m)for(var a=0;a<m.length;++a)w.removeVirtual(m[a]);m=[];for(a=
0;a<g.length;++a)h[g[a]._id]&&h[g[a]._id]!=w||function(a,d){a.onclick=function(a){a.preventDefault();a.stopPropagation();w.setText(d.title);delete h[w.id];w.id=d._id;h[d._id]=w;w.close()};a.className="dropdown-item text-invert";a.innerHTML=d.title;m[m.length]=a}(w.addVirtual(),g[a])};w.beforeClose=function(){if(m){for(var a=0;a<m.length;++a)w.removeVirtual(m[a]);m=null}};if(d)for(k=0;k<g.length;++k){if(g[k]._id==d){h[d]=w;w.id=d;w.setText(g[k].title);break}}else for(k=0;k<g.length;++k)if(!h[g[k]._id]){h[g[k]._id]=
w;w.id=g[k]._id;w.setText(g[k].title);break}a.insertBefore(c,b);e.length==g.length&&(b.style.display="none")}}var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div"),g=[],m=null,e=[],h={},B=!1;a.className="category-list";b.className="category-item-view add-category-item";b.appendChild(c);a.appendChild(b);b.onclick=function(){d()};this.el=a;this.setValue=function(a){if(a){var b=function(){if(B)for(var c=0;c<a.length;++c)d(a[c]);else async(b)};b()}};this.value=
function(){return Object.keys(h)};window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(a){B=!0;a.status&&(g=a.categories||[],0==g.length&&(b.style.display="none"))})}function f(){function d(){this.removeAttribute("error");this.onfocus=null}var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("input"),m=document.createElement("input"),u=new MSInputObject({className:"message text",multiline:!0,user:!0});a.className="shop-item-contact-panel";
b.className="text-header header-text";c.className="name text";m.className="email text";language.bind("contact",b);language.bindInput("full_name",c);language.bindInput("email",m);language.bindInput("message",u.el);a.appendChild(b);a.appendChild(c);a.appendChild(m);a.appendChild(u.el);this.el=a;this.value=function(){return{name:c.value,email:m.value,message:u.value()}};this.error=function(a){for(var b in a)"name"==b?(c.setAttribute("error",!0),c.onfocus=d):"email"==b?(m.setAttribute("error",!0),m.onfocus=
d):"message"==b&&(u.el.setAttribute("error",!0),u.el.onfocus=d)}}function e(d){var a=this,m=document.createElement("div"),z=document.createElement("div"),g=document.createElement("div"),u=null,e=document.createElement("div"),h=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),B=window.admin?document.createElement("div"):null,t=window.admin?new DropDown({className:"type-ctl"}):{setValue:function(a){2==a&&(m.setAttribute("advert",!0),u=new f,z.appendChild(u.el),language.unbind("order",
L),language.bind("send",L))}},I=document.createElement("div"),k=new DropDown({className:"avail-ctl",adminOnly:!0}),w=window.admin?document.createElement("div"):null,r=window.admin?new DropDown({className:"action-ctl"}):null,x=window.admin?document.createElement("div"):null,n=window.admin?new DropDown({className:"component-ctl"}):{setValue:function(d){0==d?(a.disableLabel(),l.disable()):(a.enableLabel(),l.enable())}},l=window.admin?null:new c,q=window.admin?document.createElement("div"):null,A=window.admin?
new p:null,v=document.createElement("div"),G=new b({type:0}),y=document.createElement("div"),C=document.createElement("div"),D=document.createElement("div"),E=document.createElement("div"),O=document.createElement("div"),P=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),M=window.admin&&d.id()?document.createElement("div"):null,L=document.createElement("div"),N=document.createElement("div"),K={title:h,type:t,availability:k,action:r,components:n,images:l,categories:A,
price:G,descrition:P};m.className="details-container";z.className="details-view";m.appendChild(z);g.className="control-view";m.appendChild(g);e.className="text-header header-text";language.bind("title",e);language.bindInput("title",h.el);z.appendChild(e);z.appendChild(h.el);window.admin?(language.bind("individual",t.addItem(0)),language.bind("common",t.addItem(1)),language.bind("advert",t.addItem(2)),B.className="text-header header-text",language.bind("type",B),z.appendChild(B),z.appendChild(t.el)):
l.changed=function(d){a.selectImage&&a.selectImage(d)};k.changed=function(a){language.unbind(E);0==a?language.bind("lead_avail",E):language.bind("lead_wait",E)};language.bind("available",k.addItem(0));language.bind("demand",k.addItem(1));I.className="text-header header-text";language.bind("availability",I);z.appendChild(I);z.appendChild(k.el);window.admin?(language.bind("keep",r.addItem(0)),language.bind("move",r.addItem(1)),language.bind("remove",r.addItem(2)),w.className="text-header header-text",
language.bind("process",w),z.appendChild(w),z.appendChild(r.el),language.bind("components",x),x.className="text-header header-text",language.bind("none",n.addItem(0)),language.bind("labeled",n.addItem(1)),z.appendChild(x),z.appendChild(n.el),n.changed=function(d){0==d?a.disableLabel():a.enableLabel()},n.lock()):z.appendChild(l.el);window.admin&&(q.className="text-header header-text",language.bind("category",q),z.appendChild(q),z.appendChild(A.el));v.className="text-header header-text advert-hide";
language.bind("price",v);z.appendChild(v);z.appendChild(G.el);y.className="text-header header-text advert-hide";language.bind("payment_opt",y);C.className="payments advert-hide";window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status)for(var d=0;d<a.types.length;++d){var b=document.createElement("div");b.className="payment-option";b.setAttribute("type",a.types[d]);C.appendChild(b)}});z.appendChild(y);z.appendChild(C);D.className="text-header header-text advert-hide";
language.bind("lead",D);E.className="lead-time text advert-hide";z.appendChild(D);z.appendChild(E);O.className="text-header header-text";language.bind("description",O);language.bindInput("description",P.el);L.className="action-btn no-select text-invert";language.bind(window.admin?"save":"order",L);g.appendChild(L);L.onclick=function(){if(window.admin){var b={},c;for(c in K)K.hasOwnProperty(c)&&K[c]&&(b[c]=K[c].value());a.save(b)}else u?(b=u.value(),b.data={id:d.id(),preview:l.enabled()?l.value():
d.preview(),title:h.value(),component:l.enabled()?l.text():null},a.contact(b,function(a){a.status||u.error(a.error)})):(b=G.value()||{},b.id=d.id(),b.preview=l.enabled()?l.value():d.preview(),b.title=h.value(),b.availability=k.value(),b.component=l.enabled()?l.text():null,a.order(b))};N.className="close-btn no-select text-invert";language.bind("close",N);g.appendChild(N);N.onclick=function(){a.close()};M&&(M.className="delete-btn no-select text-invert",language.bind("delete",M),g.appendChild(M),M.onclick=
function(){a.remove()});z.appendChild(O);z.appendChild(P.el);a.el=m;a.show=function(){};a.init=function(){t.changed=function(a){G.nullValue(!1);m.removeAttribute("advert");0==a?(G.change(0),k.setValue(0),n.setValue(0),k.unlock(),r.unlock(),n.lock()):1==a?(G.change(1),k.setValue(1),r.setValue(0),k.lock(),r.lock(),n.unlock()):2==a&&(G.nullValue(!0),k.setValue(1),k.lock(),r.setValue(0),r.lock(),n.unlock(),m.setAttribute("advert",!0))}};a.setValue=function(a){for(var d in K)K.hasOwnProperty(d)&&K[d]&&
K[d].setValue(a[d])}}function n(d,a){function b(c,m,g){var k=this,w=new C,r=new e(c);r.close=function(){k.close()};r.order=function(a){k.close(function(){window.events.emit("order",[a])},{force:!0})};r.contact=function(a,d){window.ajax({type:"POST",data:a,url:"/async/contact"}).done(function(a){a.status?k.close():d(a)})};r.enableLabel=function(){w.enableLabel()};r.disableLabel=function(){w.disableLabel()};k.load=function(a){d.id()?window.ajax({type:"POST",data:{id:d.id()},url:"/async/shop/load"}).done(function(d){if(d.item){r.setValue(d.item);
w.beginAdd();for(var b in d.item.images)w.add(new y(d.item.images[b]));w.endAdd();r.init()}a&&a()}):(r.init(),a&&a())};r.selectImage=function(a){w.present(a)};k.create=function(){g.appendChild(w.el);g.appendChild(r.el)};k.destroy=function(){g.removeChild(w.el);g.removeChild(r.el)};k.show=function(){w.show();r.show()};window.admin&&(r.save=function(b){w.commit(function(m){b.id=d.id();b.images=m;window.ajax({type:"POST",data:b,url:"/async/shop/save"}).done(function(d){if(d.status){var r=null;c.id()==
d._id?c.update({title:b.title,price:b.price,preview:m[0]}):r=function(){a.reload()};k.close(r)}})})},r.remove=function(){window.ajax({type:"POST",data:{id:c.id()},url:"/async/shop/delete"}).done(function(a){a.status&&(m.removeItem(c),k.close())})})}function c(a,d){async(m.close,a?[a,d]:null)}var m=this,u=document.createElement("div"),f=document.createElement("div"),h=new b(d,a,f);h.close=c;u.className=window.admin?"shop-item-container edit":"shop-item-container";u.style.display="none";f.className=
"shop-item-view";h.create();u.appendChild(f);this.el=u;this.id=function(){return d.id()};this.item=function(){return d};this.replace=function(m,g,u){d=m;a=g;var k=new b(d,a,f);k.close=c;k.load(function(){h.destroy();k.create();h=k;u&&u()})};this.show=function(d){d=d||{};d.force?(scrollBodyTo(window.shop.el,a.el.offsetTop+u.offsetTop),morpheus(u,{marginLeft:0,duration:300,complete:function(){h.show()}})):(u.style.display="block",d=u.offsetHeight,scrollBodyTo(window.shop.el,a.el.offsetTop+u.offsetTop),
u.style.height="0px",morpheus(u,{height:d,duration:300,complete:function(){morpheus(u,{marginLeft:0,duration:300,complete:function(){h.show()}});u.style.height=null}}))};this.hide=function(b,c){c=c||{};morpheus(u,{marginLeft:"-110%",duration:300,complete:function(){c.force||scrollBodyTo(window.shop.el,a.el.offsetTop+d.position());u.style.marginLeft=null;c.inline?b&&b():morpheus(u,{height:0,duration:300,complete:function(){u.style.display="none";b&&b()}})}})};h.load()}function A(){var d=this,a=document.createElement("div"),
b=document.createElement("div"),c=document.createElement("div");a.className="shop-item-new";b.className="shop-item-internal";a.appendChild(b);c.className="shop-item-image";b.appendChild(c);d.el=a;a.onclick=function(){d.open&&d.open(d)};d.id=function(){return null};d.title=function(){return null};d.position=function(){return a.offsetTop}}function E(d){var a=this,b=document.createElement("div"),c=document.createElement("div"),m=document.createElement("div"),u=new MSDivObject,e=d.preview.id,h=document.createElement("div");
b.id=d._id;b.className=window.admin?"shop-item edit no-select":"shop-item no-select";c.className="shop-item-internal";b.appendChild(c);u.el.className="shop-item-image";c.appendChild(u.el);m.className="shop-item-title text";c.appendChild(m);h.className="shop-item-price text";c.appendChild(h);u.loadImage({url:"/async/preview/load/"+e,color:"#e0e0e0",shadow:!0,width:3});m.innerHTML=d.title;d.price?(h.innerHTML=Math.round(d.price.values[0].price/d.price.values[0].quantity),h.setAttribute("currency","z\u0142")):
(h.innerHTML=null,h.removeAttribute("currency"));a.id=function(){return b.id};a.title=function(){return m.innerHTML};a.position=function(){return b.offsetTop};a.preview=function(){return e};a.update=function(a){e=a.preview.id;u.loadImage({url:"/async/preview/load/"+e,color:"#e0e0e0",shadow:!0,width:3});m.innerHTML=a.title;a.price?(h.innerHTML=Math.round(a.price.values[0].price/a.price.values[0].quantity),h.setAttribute("currency","z\u0142")):(h.innerHTML=null,h.removeAttribute("currency"))};b.onclick=
function(){b.getAttribute("ordered")?window.scrollBodyTo(window.orders.el):a.open&&a.open(a)};if(window.admin){d.counts=d.counts||{};var f=document.createElement("div"),t=document.createElement("div"),I=document.createElement("span"),k=document.createElement("div"),w=document.createElement("span"),r=document.createElement("div"),x=document.createElement("span"),n=document.createElement("div"),p=document.createElement("span"),l=document.createElement("div"),q=document.createElement("span");f.className=
"visit-counter-container text";t.className="visit-counter";k.className="visit-counter";r.className="visit-counter";n.className="visit-counter";l.className="visit-counter";language.bind("today",t);language.bind("l_3_day",k);language.bind("l_week",r);language.bind("l_month",n);language.bind("l_time",l);I.innerHTML=d.counts.day_1||0;w.innerHTML=d.counts.day_3||0;x.innerHTML=d.counts.day_7||0;p.innerHTML=d.counts.day_28||0;q.innerHTML=d.counts.all||0;t.appendChild(I);k.appendChild(w);r.appendChild(x);
n.appendChild(p);l.appendChild(q);f.appendChild(t);f.appendChild(k);f.appendChild(r);f.appendChild(n);f.appendChild(l);c.appendChild(f)}else d=document.createElement("div"),c=document.createElement("div"),d.className="shop-item-ordered",c.className="shop-item-ordered-icon",d.appendChild(c),b.appendChild(d);a.el=b}function D(d){function a(a){async(function(){if(t){var d=e.childNodes,b=t.item().position(),c=null;e.contains(t.el)&&e.removeChild(t.el);for(var m=0;m<d.length;++m)if(b<d[m].offsetTop){c=
d[m];break}c?e.insertBefore(t.el,c):e.appendChild(t.el);a&&"Function"==classOf(a)&&a()}})}function b(d,c){if(t){window.removeEventListener("resize",a);var m=t.el;t.hide(function(){e.removeChild(m);m=null;d&&d()},c);t=null}else d&&d()}function c(d){if(t){var k=t.item().position()==d.position();t.hide(function(){t.replace(d,m,function(){k?t.show({force:!0}):a(function(){t.show()})})},{force:!0,inline:k})}else t=new n(d,m),t.close=b,a(function(){t.show()}),window.addEventListener("resize",a)}var m=this,
u=document.getElementById("shop_item_view"),e=document.createElement("div"),h=window.admin?new A:null,f=window.location.hash?window.location.hash.substring(1):null,t=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");m.createItem=function(a,d){d&&h&&h.el.nextSibling?e.insertBefore(a.el,h.el.nextSibling):e.appendChild(a.el);a.open=c};m.removeItem=function(a){e.removeChild(a.el)};u.appendChild(e);m.el=u;m.reload=function(){window.ajax({type:"POST",data:d.value(),
url:"/async/shop/list"}).done(function(a){if(a&&a.status){var d=document.createElement("div"),b=null;h&&(d.appendChild(h.el),h.open=c);if(a.items)for(var m=0;m<a.items.length;++m){var g=new E(a.items[m]);if(t&&t.item().id()==g.id()||g.id()==f)b=g,f=null;g.open=c;d.appendChild(g.el)}u.replaceChild(d,e);e=d;b?c(b):t=null}window.events.emit("update-ordered")})}}function G(){function d(a,d){var b=this,c=a.item,m=a.controller,k=document.createElement("div"),e=window.admin&&d?document.createElement("input"):
null,g=window.admin&&d?document.createElement("div"):null,h=!1,f=!1;c.manager=b;k.className="categoty-title";c.appendChild(k);b.setValue=function(a){k.innerHTML=a||""};b.value=function(){return k.innerHTML};b.id=function(){return d?d._id:null};d?(m.setValue(d.title),window.admin&&(g&&(g.className="category-remove",g.onclick=function(a){a.preventDefault();a.stopPropagation();c.parentNode.removeChild(c);f=!0;h=!1}),e&&(e.className="categoty-title header-text"),b.forceEditStart=function(){e&&(c.replaceChild(e,
k),c.appendChild(g),e.value=k.innerHTML,e.onchange=function(){f||(h=!0)})},b.forceEditEnd=function(){e&&(e.onchange=null,c.replaceChild(k,e),c.removeChild(g),k.innerHTML=e.value)},b.save=function(a){f&&b.id()?window.ajax({type:"POST",data:{id:b.id()},url:"/async/category/delete"}).done(a):h?window.ajax({type:"POST",data:{id:b.id(),title:k.innerHTML},url:"/async/category/save"}).done(a):a()})):language.bind("allitems",a)}function a(a){var d=this,b=document.createElement("div");b.className="category-add";
a.appendChild(b);d.el=a;b.onclick=function(){d.create&&d.create()}}function b(a,c){window.admin&&a.el.insertBefore(h,a.el.firstChild);new d(a.addItem(0));window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(b){var m=[];if(b.status)for(var k=0;k<b.categories.length;++k){var e=a.addItem(b.categories[k]._id),e=new d(e,b.categories[k]);window.admin&&(m[m.length]=e)}c(m)})}var c=null,m=document.getElementById("shop_navigator"),e=new DropDown({className:"category-nav",src:"../images/list.png"}),
f=null,h=null,n=1,t=new DropDown({className:"sorter-nav"}),l=t.addItem(0);l.controller.setValue("A  -  Z");l=t.addItem(1);l.controller.setValue("Z  -  A");l=t.addItem(2);language.bind("lowprice",l);l=t.addItem(3);language.bind("hightprice",l);if(window.admin){var k=[],h=document.createElement("div");h.className="shop-category-edit";h.onclick=function(w){w.preventDefault();w.stopPropagation();if(h.hasAttribute("open"))h.removeAttribute("open"),e.el.removeAttribute("edit-mode"),e.close(),e.el.removeChild(h),
f=null,function(a,d){var b=0,c=a.length,m=function(a){++b==c&&d()};if(0<c)for(var k=0;k<c;++k)a[k].forceEditEnd(),a[k].save(m);else d()}(k,function(){var a=new DropDown({className:"category-nav",src:"../images/list.png"});b(a,function(d){k=d;m.replaceChild(a.el,e.el);e=a;e.changed=function(){c&&c.reload()};e.setValue(0)})});else for(h.setAttribute("open",!0),e.el.setAttribute("edit-mode",!0),f=new a(e.addVirtual()),f.create=function(){var a=f.el.parentNode;a.removeChild(f.el);var b=e.addItem(String("000000000000000000000000"+
n++).slice(-24)),b=new d(b,{title:""});b.forceEditStart();k[k.length]=b;a.appendChild(f.el)},e.manual(),e.open(),w=0;w<k.length;++w)k[w].forceEditStart()}}m.appendChild(e.el);m.appendChild(t.el);e.changed=function(){c&&c.reload()};t.changed=function(){c&&c.reload()};this.setView=function(a){c=a};this.value=function(){var a=e.value();return{sort:t.value(),filter:0==a?null:a}};this.el=m;b(e,function(a){window.admin&&(k=a)})}function m(){var d=document.getElementById("shop_panel"),a=new G,b=new D(a);
a.setView(b);this.el=d}window.addEventListener("load",function(){window.shop=new m})})();(function(){function y(l){var v=this,q=l,b=new MSDivObject;l=window.admin?document.createElement("div"):null;b.el.className="gallery-thumb";l&&(l.className="gallery-thumb-remove",b.el.appendChild(l),l.onclick=function(){v.remove&&v.remove(v)});b.el.onclick=function(){v.click&&v.click(v)};if(window.admin){b.el.setAttribute("draggable",!0);var c=document.getElementById("content_scroll_top"),p=document.getElementById("content_scroll_bottom"),f=document.getElementById("content-wrapper"),e=!1,n=function(b){if(e){var c=
f.scrollTop;morpheus.tween(5,function(e){1==e&&async(n,[b]);e=c+b*e;0<=e&&e<=f.scrollHeight&&(f.scrollTop=e)})}};c.ondragenter=function(b){b.preventDefault();e=!0;n(-10)};c.ondragleave=function(b){b.preventDefault();e=!1};p.ondragenter=function(b){b.preventDefault();e=!0;n(10)};p.ondragleave=function(b){b.preventDefault();e=!1};b.el.ondragstart=function(b){b.dataTransfer.setData("target",q);c.setAttribute("enabled",!0);p.setAttribute("enabled",!0)};b.el.ondragend=function(b){b.preventDefault();c.removeAttribute("enabled");
p.removeAttribute("enabled")};b.el.ondragover=function(b){b.preventDefault()};b.el.ondrop=function(b){b.preventDefault();v.swap&&v.swap(b.dataTransfer.getData("target"),q)}}v.el=b.el;v.id=function(){return q};v.change=function(c){q=c;b.loadImage({url:"/async/thumb/load/"+q,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})};b.loadImage({url:"/async/thumb/load/"+q,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})}function C(){var l,v,q;function b(){var b=
p.el.childNodes,c=b.length;v=l=1;if(0<c){var d;for(d=0;d<c&&0!=b[d].style.display.length;++d);q=Math.floor((p.el.offsetWidth-2)/(b[d].offsetWidth+6))*Math.floor((p.el.offsetHeight-2)/(b[d].offsetHeight+6));v=Math.ceil(c/q);for(d=Math.min(q,c)-1;0<=d;--d)0!=b[d].style.display.length&&async(function(a){a.style.display=null},[b[d]]);for(d=Math.min(q,c);d<c;++d)0<b[d].style.display.length||async(function(a){a.style.display="none"},[b[d]])}e.prev.setAttribute("disabled",!0);1==v?e.next.setAttribute("disabled",
!0):e.next.removeAttribute("disabled");e.data.innerHTML=l+" / "+v}document.getElementById("gallery_panel");document.getElementById("content-wrapper");var c=window.admin?new FileUpload({id:"gallery_thumb_new",className:"gallery-thumb",multiple:!0}):null,p=new MSDivObject(document.getElementById("thumbs_container")),f=new MSDivObject(document.getElementById("gallery_view").firstElementChild),e={prev:document.getElementById("gallery_prev_page"),data:document.getElementById("gallery_page_info"),next:document.getElementById("gallery_next_page")};
v=l=1;q=0;var n={},A=function(b){f.loadImage({url:"/async/images/load/"+b.id()+"?height=700",color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75})},C=function(b){window.ajax({type:"POST",data:{id:b.id()},url:"/async/gallery/delete"}).done(function(c){c.status&&(delete n[b.id()],p.el.removeChild(b.el))})},D=function(b,c){if(b!=c){var d=n[b];d.change(c);n[b]=n[c];n[c]=d;n[b].change(b);window.ajax({type:"POST",data:{one:b,two:c},url:"/async/gallery/swap"})}};window.admin||(window.addEventListener("resize",
b),e.prev.onclick=function(){if(!e.prev.hasAttribute("disabled")){for(var b=p.el.childNodes,c=b.length,d=Math.min(q*l,c)-1;d>=q*(l-1);--d)async(function(a){a.style.display="none"},[b[d]]);--l;1==l&&e.prev.setAttribute("disabled",!0);e.next.removeAttribute("disabled");e.data.innerHTML=l+" / "+v;for(d=Math.min(q*l,c)-1;d>=q*(l-1);--d)async(function(a){a.style.display=null},[b[d]])}},e.next.onclick=function(){if(!e.next.hasAttribute("disabled")){for(var b=p.el.childNodes,c=b.length,d=q*(l-1);d<q*l&&
d<c;++d)async(function(a){a.style.display="none"},[b[d]]);l+=1;l==v&&e.next.setAttribute("disabled",!0);e.prev.removeAttribute("disabled");e.data.innerHTML=l+" / "+v;for(d=q*(l-1);d<q*l&&d<c;++d)async(function(a){a.style.display=null},[b[d]])}});c&&(p.el.appendChild(c.el),c.preview=function(b){for(var m=0;m<b.length;++m){var d=new FormData;d.append("file",b[m]);window.ajax({type:"POST",data:d,files:!0,url:"/async/gallery/save"}).done(function(a){a.status&&(a=new y(a.id),n[a.id()]=a,a.swap=D,a.click=
A,a.remove=C,c.el.nextSibling?p.el.insertBefore(a.el,c.el.nextSibling):p.el.appendChild(a.el),A(a))})}});window.ajax({type:"POST",url:"/async/gallery/load"}).done(function(c){if(c.status){for(var m=document.createDocumentFragment(),d=null,a=0;a<c.result.length;++a){var e=new y(c.result[a].id);n[e.id()]=e;e.swap=D;e.click=A;e.remove=C;m.appendChild(e.el);d||(d=e)}p.el.appendChild(m);d&&A(d);window.admin||b()}})}window.addEventListener("load",function(){window.gallery=new C})})();(function(){function y(){function y(){this.removeAttribute("error");this.onfocus=null}var l=document.getElementById("contact_name"),v=document.getElementById("contact_email"),q=document.getElementById("contact_message");document.getElementById("contact_send").onclick=function(){window.ajax({type:"POST",data:{name:l.value,email:v.value,message:q.value},url:"/async/contact"}).done(function(b){if(b.status)l.value="",v.value="",q.value="";else for(var c in b.error)"name"==c?(l.setAttribute("error",!0),
l.onfocus=y):"email"==c?(v.setAttribute("error",!0),v.onfocus=y):"message"==c&&(q.setAttribute("error",!0),q.onfocus=y)})}}window.addEventListener("load",function(){window.cantact=new y})})();(function(){function y(b){b=b.getElementsByTagName("*");for(var d={},a=0;a<b.length;++a)if(b[a].hasAttribute("user-input")){var c=b[a].getAttribute("user-input");b[a].controller?d[c]=b[a].controller.value():b[a].value?d[c]=b[a].value:b[a].firstChild&&3==b[a].firstChild.nodeType&&b[a].firstChild.nodeValue&&(d[c]=b[a].firstChild.nodeValue)}return d}function C(b,d){d=d||"";if("INPUT"==b.nodeName)b.value=d;else if("DIV"==b.nodeName)if(b.controller)b.controller.setValue(d);else if(b.firstChild&&3==b.firstChild.nodeType&&
b.firstChild.nodeValue)b.firstChild.nodeValue=d;else{var a=document.createTextNode(d);b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}}function l(b,d){for(var a=b.getElementsByTagName("*"),c=[],e=[],g=0;g<a.length;++g)if(a[g].hasAttribute("user-input")){a[g].parentNode.removeAttribute("unset");var f=a[g].getAttribute("user-input");if(d[f]){var n=c.indexOf(a[g].parentNode);0<=n&&c.splice(n,1);e[e.length]=a[g].parentNode;C(a[g],d[f])}else n=e.indexOf(a[g].parentNode),-1==n&&(c[c.length]=
a[g].parentNode),C(a[g],"")}for(g=0;g<c.length;++g)c[g].setAttribute("unset",!0)}function v(b,d){if(d)for(var a=b.getElementsByTagName("*"),c=0;c<a.length;++c)if(a[c].hasAttribute("user-input")){var e=a[c].getAttribute("user-input");d[e]&&function(a){a.setAttribute("error",!0);a.onfocus=function(){a.removeAttribute("error")}}(a[c])}}function q(b){b.controller=this;this.setValue=function(d){b.setAttribute("option",d)}}function b(b){b.controller=this;this.setValue=function(d){var a=b.getElementsByClassName("preview-data");
a&&0<a.length&&C(a[0],d.number);d?b.removeAttribute("unset"):b.setAttribute("unset",!0)}}function c(b){function d(){var b=c.run(a.value);b?a.setAttribute("card",b):a.removeAttribute("card")}var a=b,c=new function(){var a={visa:{values:[{type:0,value:4}]},mastercard:{values:[{type:1,range:{min:51,max:55}}]},discover:{values:[{type:0,value:65},{type:0,value:6011},{type:1,range:{min:644,max:649}},{type:1,range:{min:622126,max:622925}}]},amex:{values:[{type:0,value:34},{type:0,value:37}]}};this.run=function(b){for(var d in a)if(a.hasOwnProperty(d))for(var c=
a[d],e=0;e<c.values.length;++e)if(0==c.values[e].type){var m=String(c.values[e].value);if(b.substr(0,m.length)===m)return d}else if(1==c.values[e].type)for(var f=c.values[e].range.min;f<=c.values[e].range.max;++f)if(m=String(f),b.substr(0,m.length)===m)return d;return null}};a.onkeydown=function(b){var d=0<=[8,9,37,38,39,40,46].indexOf(b.keyCode),c=!isNaN(parseInt(b.key))&&16>a.value.length;d||c||b.preventDefault()};a.onkeyup=d;a.onfocus=d;a.onblue=d;a.onchange=d;a.controller=this;this.value=function(){return{type:c.run(a.value),
number:a.value}}}function p(e){var d={country:function(a){(new DropDown({},a)).addItem("Polska",!0)},county:function(a){var b="dolno\u015bl\u0105skie kujawsko-pomorskie lubelskie lubuskie \u0142\u00f3dzkie ma\u0142opolskie mazowieckie opolskie podkarpackie podlaskie pomorskie \u015bl\u0105skie \u015bwi\u0119tokrzyskie warmi\u0144sko-mazurskie wielkopolskie zachodniopomorskie".split(" ");a=new DropDown({},a);for(var d=0;d<b.length;++d)a.addItem(b[d],!0)},expiry_month:function(a){a=new DropDown({},
a);for(var b=1;12>=b;++b)a.addItem(b,!0)},expiry_year:function(a){var b=(new Date).getFullYear();a=new DropDown({},a);for(var d=b;d<=b+10;++d)a.addItem(d,!0)},card_number:function(a){new c(a)},paymentType:function(a){new q(a)},cardNumber:function(a){new b(a)}};e=e.getElementsByTagName("*");for(var a=0;a<e.length;++a)if(e[a].hasAttribute("control")){var f=e[a].getAttribute("control");d[f]&&async(d[f],[e[a]])}}function f(b){var d=this,a=document.createElement("tr"),c=document.createElement("td"),e=
new MSDivObject,g=document.createElement("td"),f=document.createElement("td"),n=document.createElement("td"),h=document.createElement("td"),l=document.createElement("td"),t=document.createElement("div");c.className="text";e.el.className="order-thumb";g.className="text";f.className="text";n.className="text";h.className="text";l.className="text";t.className="remove-btn";n.setAttribute("currency","z\u0142");h.setAttribute("currency","z\u0142");c.appendChild(e.el);a.appendChild(c);a.appendChild(g);a.appendChild(f);
a.appendChild(n);a.appendChild(h);l.appendChild(t);a.appendChild(l);e.loadImage({url:"/async/thumb/load/"+b.preview,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75});g.innerHTML=b.title;f.innerHTML=b.quantity;n.innerHTML=b.price;b.discount?(c=document.createElement("span"),e=document.createTextNode(Number(b.shipping)*(1-(b.discount||0))),c.className="discount-pin",h.appendChild(c),h.appendChild(e)):h.innerHTML=Number(b.shipping);d.el=a;d.id=function(){return b.id};d.item=
function(){return b.item};d.price=function(){return Number(b.price)};d.shipping=function(){return Number(b.shipping)};d.setDiscount=function(a){b.discount=a};t.onclick=function(){d.remove(d)};d.info=function(){return{title:b.title,quantity:Number(b.quantity),price:Number(b.price),shipping:Number(b.shipping)*(1-(b.discount||0))}};d.update=function(a){for(var d in a||{})a.hasOwnProperty(d)&&(b[d]=a[d]);f.innerHTML=b.quantity;n.innerHTML=b.price;b.discount?(a=document.createElement("span"),d=document.createTextNode(Number(b.shipping)*
(1-(b.discount||0))),a.className="discount-pin",h.innerHTML="",h.appendChild(a),h.appendChild(d)):h.innerHTML=Number(b.shipping)}}function e(){function b(a){var d=document.getElementById(a);d?d.setAttribute("ordered",!0):async(b,[a])}function d(a){var b=document.getElementById(a);b?b.removeAttribute("ordered"):async(d,[a])}function a(a){window.ajax({type:"POST",data:{id:a.id()},url:"/async/orders/remove"}).done(function(a){if(a.status&&a.removed){t=a.total;n.innerHTML=t;var b=q[a.removed];delete q[a.removed];
d(b.item());g.removeChild(b.el);for(var b=document.createDocumentFragment(),k=0;k<a.items.length;++k){var e=a.items[k];q[e.id]&&(q[e.id].update(e),g.removeChild(q[e.id].el));b.appendChild(q[e.id].el)}g.appendChild(b);0==a.items.length?c.hide():c.activate(c)}})}var c=this,e=document.getElementById("order_list_view"),g=document.getElementById("order_list_table"),n=document.getElementById("order_list_totals"),l=document.getElementById("order_list_advance"),h=document.getElementById("terms"),p=document.getElementById("terms_box"),
t=0,q={};n.setAttribute("currency","z\u0142");p.onclick=function(){h.hasAttribute("checked")?h.removeAttribute("checked"):(h.setAttribute("checked",!0),h.removeAttribute("error"))};window.events.listen("update-ordered",function(){for(var a in q)if(q.hasOwnProperty(a)){var b=document.getElementById(q[a].item());b&&b.setAttribute("ordered",!0)}});c.addOrder=function(d){window.ajax({type:"POST",data:d,url:"/async/orders/add"}).done(function(e){if(e.status){t=e.total;n.innerHTML=t;for(var r=document.createDocumentFragment(),
h=0;h<e.items.length;++h){var l=e.items[h];if(q[l.id])q[l.id].update(l),g.removeChild(q[l.id].el);else if(l.id==e.added){l.title=d.title;l.availability=d.availability;l.preview=d.preview;var p=new f(l);q[l.id]=p;p.remove=a;b(p.item())}q[l.id]&&r.appendChild(q[l.id].el)}g.appendChild(r);1==e.items.length&&c.show(!0);c.reset();c.activate(c)}})};c.clear=function(){for(var a in q)if(q.hasOwnProperty(a)){var b=q[a];delete q[a];d(b.item());g.removeChild(b.el)}};c.init=function(){window.ajax({type:"POST",
data:null,url:"/async/orders/session"}).done(function(d){if(d.status&&d.items){t=d.total;n.innerHTML=t;for(var e=document.createDocumentFragment(),h=0;h<d.items.length;++h){var l=new f(d.items[h]);q[l.id()]=l;l.remove=a;b(l.item());e.appendChild(q[l.id()].el)}g.appendChild(e);0<d.items.length&&(c.show(),c.activate(c))}})};l.onclick=function(){if(h.hasAttribute("checked")){var a=[],b;for(b in q)q.hasOwnProperty(b)&&(a[a.length]=q[b].info());c.advance(c,{items:a,total:t})}else h.setAttribute("error",
!0)};c.el=e}function n(){var b=this,d=document.getElementById("shipping_view"),a=document.getElementById("shipping_advance"),c=document.getElementById("shipping_back"),e=null;a.onclick=function(){var a=y(d);window.ajax({type:"POST",data:a,url:"/async/orders/shipping"}).done(function(a){a.status?(e.shipping=a.data,b.advance(b,e)):v(d,a.error)})};b.clear=function(){e=null};b.apply=function(a){e=a};c.onclick=function(){b.back(b)};b.el=d}function A(){function b(a){a.stopPropagation();for(a=0;a<n.length;++a)n[a].removeAttribute("checked");
this.setAttribute("checked",!0);t=this.getAttribute("option");d.expand(q,this.hasAttribute("expand"))}var d=this,a=document.getElementById("payment_view"),c=document.getElementById("payment_advance"),e=document.getElementById("payment_back"),f=document.getElementById("payment_type"),n=[],q=document.getElementById("payment_details"),h=document.getElementById("billing_details"),p=null,t=0;window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status){var d=0,c;for(c in a.options)if(a.options.hasOwnProperty(c)){var e=
document.createElement("div"),h=document.createElement("div"),l=document.createElement("div");e.className="payment-option "+c;h.className="checkbox";l.className="banner "+c;e.appendChild(h);e.appendChild(l);0==d&&e.setAttribute("checked",!0);e.setAttribute("option",d++);var h=a.options[c],t;for(t in h)h.hasOwnProperty(t)&&e.setAttribute(t,h[t]);f.appendChild(e);n[n.length]=e;e.onclick=b}}});d.apply=function(a){p=a;l(q,{forename:p.shipping.forename,surname:p.shipping.surname});l(h,p.shipping)};d.clear=
function(){p=null};c.onclick=function(){var b=y(h);if(0==t)window.ajax({type:"POST",data:b,url:"/async/orders/pay_paypal"}).done(function(a){a.status?(b=a.data,b.paymentType="Paypal",p.billing=b,d.advance(d,p)):v(h,a.error)});else if(1==t){var c=y(q),e;for(e in c)c.hasOwnProperty(e)&&(b[e]=c[e]);window.ajax({type:"POST",data:b,url:"/async/orders/pay_card"}).done(function(c){c.status?(b=c.data,b.paymentType=b.card.type,p.billing=b,d.advance(d,p)):v(a,c.error)})}};e.onclick=function(){d.back(d)};d.el=
a}function E(){function b(a){var d=document.createElement("table"),c=document.createElement("tr"),e=document.createElement("th"),k=document.createElement("th"),f=document.createElement("th"),g=document.createElement("th");language.bind("title",e);language.bind("quantity",k);language.bind("price",f);language.bind("shipping",g);e.className="preview-label text";k.className="preview-label text";f.className="preview-label text";g.className="preview-label text";c.appendChild(e);c.appendChild(k);c.appendChild(f);
c.appendChild(g);d.appendChild(c);for(c=0;c<a.length;++c){var e=document.createElement("tr"),k=document.createElement("td"),f=document.createElement("td"),g=document.createElement("td"),m=document.createElement("td");k.innerHTML=a[c].title;f.innerHTML=a[c].quantity;g.innerHTML=a[c].price;m.innerHTML=a[c].shipping;g.setAttribute("currency","z\u0142");m.setAttribute("currency","z\u0142");k.className="text preview-data";f.className="text preview-data";g.className="text preview-data";m.className="text preview-data";
e.appendChild(k);e.appendChild(f);e.appendChild(g);e.appendChild(m);d.appendChild(e)}return d}var d=this,a=document.getElementById("done_view"),c=document.getElementById("done_advance"),e=document.getElementById("done_back"),f=document.getElementById("data_preview"),n=document.getElementById("order_summary"),p=f.getElementsByClassName("preview-block");c.onclick=function(){window.location="/async/orders/process"};e.onclick=function(){d.back(d)};d.apply=function(a){for(var c=0;c<p.length;++c)if(p[c].hasAttribute("block-type")){var d=
p[c].getAttribute("block-type");a[d]&&l(p[c],a[d])}n.innerHTML=null;n.appendChild(b(a.items));c=document.createElement("div");d=document.createElement("div");c.className="seperator text";language.bind("total",c);d.className="total-price-summary text-invert-light";d.innerHTML=a.total;d.setAttribute("currency","z\u0142");n.appendChild(c);n.appendChild(d)};d.clear=function(){n.innerHTML=null};d.el=a}function D(b,c){function a(a,c){q!=a?(a.el.style.top=getHeight(b)+200+"px",a.el.style.display="block",
a.apply&&c&&a.apply(c),async(function(){var c=[a.el,b];a.el.set={top:150};b.set={h:200+getHeight(a.el)};q&&(q.el.set={o:0},c[c.length]=q.el,window.scrollBodyTo(b));morpheus(c,{top:function(a){return a.set.top},height:function(a){return a.set.h},opacity:function(a){return a.set.o},duration:250,complete:function(){q&&q.el.removeAttribute("style");q=a}})})):morpheus(b,{height:200+getHeight(a.el)+"px",duration:250})}function e(){for(var a=0;a<h.length;++a)p[a].removeAttribute("status");0<h.length&&p[0].setAttribute("status",
0)}function f(b,c){if(b==q){var d=h.indexOf(b);d+1==h.length?l.done():0<=d&&d+1<h.length&&(p[d].setAttribute("status",1),d+=1,a(h[d],c),p[d].setAttribute("status",0))}}function g(b){b==q&&(b=h.indexOf(b),0>b-1?l.done():0<=b&&0<=b-1&&(p[b].removeAttribute("status"),--b,a(h[b]),p[b].setAttribute("status",0)))}function n(a,c){var d=0,e=0,f=getHeight(b);c?(a.style.display="block",d=getHeight(a),e=a.offsetHeight,a.style.height="0px"):(d=getHeight(a),e=a.offsetHeight);d-=(d-e)/2;a.style.opacity=c?0:1;a.set=
{h:c?e:0,m:c?null:0,o:c?1:0};b.set={h:c?d+f:f-d};morpheus([b,a],{height:function(a){return a.set.h},"margin-bottom":function(a){return a.set.m},"margin-top":function(a){return a.set.m},opacity:function(a){return a.set.o},duration:250,complete:function(){c?(a.style.height="",a.style.opacity=""):a.removeAttribute("style")}})}for(var l=this,h=c,p=document.getElementById("progress_view").getElementsByClassName("progress-step"),q=null,v=0;v<h.length;++v)h[v].reset=e,h[v].activate=a,h[v].advance=f,h[v].back=
g,h[v].expand=n;l.init=function(){for(var a=0;a<h.length;++a)h[a].init&&h[a].init()};l.clear=function(){e();for(var a=b.getElementsByTagName("*"),c=0;c<a.length;++c)a[c].hasAttribute("user-input")&&(a[c].parentNode.removeAttribute("unset"),C(a[c],""));for(a=0;a<h.length;++a)h[a].clear()}}function G(){function b(){c.set={w:0};a.set={h:0};morpheus([c,a],{width:function(a){return a.set.w},height:function(a){return a.set.h},duration:350,complete:function(){c.style="";a.style="";a.removeChild(f)}});window.scrollBodyTo(window.shop.el)}
var c=document.getElementById("order"),a=document.getElementById("order_panel"),f=document.getElementById("order_panel_inner"),l=new e,g=new n,q=new A,v=new E,h=new D(a,[l,g,q,v]);p(a);a.removeChild(f);l.show=function(b){order_panel.appendChild(f);c.style.display="inline-block";a.style.display="block";b&&window.scrollBodyTo(a)};l.hide=b;window.events.listen("order",function(a){l.addOrder(a)});h.done=function(){h.clear();b()};h.init();this.el=a}window.addEventListener("load",function(){window.orders=
new G})})();(function(){function y(){var y=document.getElementById("username_input"),l=document.getElementById("password_input"),v=document.getElementById("login"),q=function(){var b=4<y.value.length&&6<l.value.length;v.style.display=b?"block":"none";return b},b=function(){window.ajax({type:"POST",data:{username:y.value,password:l.value},url:"/async/user/login"}).done(function(b){b.status?window.location.href="/":(l.value="",q(),l.focus())})};y.focus();y.onkeyup=function(){q()};l.onkeyup=function(c){q()&&13==
c.keyCode&&b()}}window.addEventListener("load",function(){"/admin"==window.location.pathname&&(window.login=new y)})})();
