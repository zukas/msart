(function(y,D){"function"==typeof define?define(D):"undefined"!=typeof module?module.exports=D():this[y]=D()})("morpheus",function(){function y(a){var n;n=x.length;for(d&&(a=m());n--;)x[n](a);x.length&&t(y)}function D(a,d){var n={},x;if(x=a.match(w))n.rotate=e(x[1],d?d.rotate:null);if(x=a.match(G))n.scale=e(x[1],d?d.scale:null);if(x=a.match(h))n.skewx=e(x[1],d?d.skewx:null),n.skewy=e(x[3],d?d.skewy:null);if(x=a.match(B))n.translatex=e(x[1],d?d.translatex:null),n.translatey=e(x[3],d?d.translatey:null);
return n}function p(a){var d="";"rotate"in a&&(d+="rotate("+a.rotate+"deg) ");"scale"in a&&(d+="scale("+a.scale+") ");"translatex"in a&&(d+="translate("+a.translatex+"px,"+a.translatey+"px) ");"skewx"in a&&(d+="skew("+a.skewx+"deg,"+a.skewy+"deg)");return d}function v(a){var d=a.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(d?"#"+(16777216|d[1]<<16|d[2]<<8|d[3]).toString(16).slice(1):a).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function q(a){return a.replace(/-(.)/g,function(a,d){return d.toUpperCase()})}
function b(a){return"function"==typeof a}function c(a){return Math.sin(a*Math.PI/2)}function k(a,d,n,g,z,w){function C(a){a-=e;if(a>I||h){w=isFinite(w)?w:1;h?r&&d(w):d(w);var t;a:if(a=x,t=void 0,Array.prototype.indexOf)t=a.indexOf(C);else{for(t=0;t<a.length;++t)if(a[t]===C)break a;t=void 0}0<=t&&(a=x.slice(t+1),x.length=t,x=x.concat(a));return n&&n.apply(u)}isFinite(w)?d(G*g(a/I)+z):d(g(a/I))}g=b(g)?g:l.easings[g]||c;var I=a||1E3,u=this,G=w-z,e=m(),h=0,r=0;1===x.push(C)&&t(y);return{stop:function(a){h=
1;(r=a)||(n=null)}}}function f(a,d){var n=a.length,x=[],g,t;for(g=0;g<n;++g)x[g]=[a[g][0],a[g][1]];for(t=1;t<n;++t)for(g=0;g<n-t;++g)x[g][0]=(1-d)*x[g][0]+d*x[parseInt(g+1,10)][0],x[g][1]=(1-d)*x[g][1]+d*x[parseInt(g+1,10)][1];return[x[0][0],x[0][1]]}function e(a,d,n,x,g){return(n=z.exec(a))?(g=parseFloat(n[2]))&&d+("+"==n[1]?1:-1)*g:parseFloat(a)}function l(a,d){var x=a?x=isFinite(a.length)?a:[a]:[],t,z=d.complete,w=d.duration,c=d.easing,G=d.bezier,h=[],m=[],B=[],l=[],A,H;G&&(A=d.left,H=d.top,delete d.right,
delete d.bottom,delete d.left,delete d.top);for(t=x.length;t--;){h[t]={};m[t]={};B[t]={};if(G){var F=u(x[t],"left"),E=u(x[t],"top"),y=[e(b(A)?A(x[t]):A||0,parseFloat(F)),e(b(H)?H(x[t]):H||0,parseFloat(E))];l[t]=b(G)?G(x[t],y):G;l[t].push(y);l[t].unshift([parseInt(F,10),parseInt(E,10)])}for(var J in d){switch(J){case "complete":case "duration":case "easing":case "bezier":continue}var F=u(x[t],J),Q,E=b(d[J])?d[J](x[t]):d[J];"string"==typeof E&&I.test(E)&&!I.test(F)?delete d[J]:(h[t][J]="transform"==
J?D(F):"string"==typeof E&&I.test(E)?v(F).slice(1):parseFloat(F),m[t][J]="transform"==J?D(E,h[t][J]):"string"==typeof E&&"#"==E.charAt(0)?v(E).slice(1):e(E,parseFloat(F)),"string"==typeof E&&(Q=E.match(g))&&(B[t][J]=Q[1]))}}return k.apply(x,[w,function(a,g,z){for(t=x.length;t--;){G&&(z=f(l[t],a),x[t].style.left=z[0]+"px",x[t].style.top=z[1]+"px");for(var w in d){g=a;var b=B;z=h;var I=m,u=w,c=t,e=void 0;if("transform"==u){e={};b=void 0;for(b in z[c][u])e[b]=b in I[c][u]?Math.round(1E3*((I[c][u][b]-
z[c][u][b])*g+z[c][u][b]))/1E3:z[c][u][b];g=e}else if("string"==typeof z[c][u]){z=z[c][u];I=I[c][u];u=[];b=e=e=c=void 0;for(c=0;6>c;c++)e=Math.min(15,parseInt(z.charAt(c),16)),b=Math.min(15,parseInt(I.charAt(c),16)),e=Math.floor((b-e)*g+e),e=15<e?15:0>e?0:e,u[c]=e.toString(16);g="#"+u.join("")}else e=Math.round(1E3*((I[c][u]-z[c][u])*g+z[c][u]))/1E3,u in r||(e+=b[c][u]||"px"),g=e;"transform"==w?x[t].style[C]=p(g):"opacity"!=w||n?x[t].style[q(w)]=g:x[t].style.filter="alpha(opacity="+100*g+")"}}},z,
c])}var A=document,F=window,E=F.performance,H=E&&(E.now||E.webkitNow||E.msNow||E.mozNow),m=H?function(){return H.call(E)}:function(){return+new Date},d=!1,a=A.documentElement,I=/^rgb\(|#/,z=/^([+\-])=([\d\.]+)/,g=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,w=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,G=/scale\(((?:[+\-]=)?([\d\.]+))\)/,h=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,B=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,r={lineHeight:1,
zoom:1,zIndex:1,opacity:1,transform:1},C=function(){var a=A.createElement("a").style,d=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],n;for(n=0;n<d.length;n++)if(d[n]in a)return d[n]}(),n="undefined"!==typeof A.createElement("a").style.opacity,u=A.defaultView&&A.defaultView.getComputedStyle?function(a,d){d="transform"==d?C:d;d=q(d);var n=null,x=A.defaultView.getComputedStyle(a,"");x&&(n=x[d]);return a.style[d]||n}:a.currentStyle?function(a,d){d=q(d);if("opacity"==d){var n=
100;try{n=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(x){try{n=a.filters("alpha").opacity}catch(g){}}return n/100}n=a.currentStyle?a.currentStyle[d]:null;return a.style[d]||n}:function(a,d){return a.style[q(d)]},t=function(){return F.requestAnimationFrame||F.webkitRequestAnimationFrame||F.mozRequestAnimationFrame||F.msRequestAnimationFrame||F.oRequestAnimationFrame||function(a){F.setTimeout(function(){a(+new Date)},17)}}();t(function(a){d=1E12<a!=1E12<m()});var x=[];l.tween=k;l.getStyle=
u;l.bezier=f;l.transform=C;l.parseTransform=D;l.formatTransform=p;l.animationFrame=t;l.easings={};return l});(function(y){function D(b){var c=null,k=new XMLHttpRequest;k.open(b.type,b.url,!0);b.files||k.setRequestHeader("Content-type","application/json");b.cache&&k.setRequestHeader("Cache-Control","max-age=86400");k.onloadend=function(){200==k.status?c&&c(JSON.parse(k.responseText)):c&&c(null);k=null};b.files?k.send(b.data):k.send(b.data?JSON.stringify(b.data):null);this.done=function(b){c=b}}function p(){var b=[],c=function(b,c){return b-c},k=function(f,e,l){var A=b.length;e=null==e?0:e;l=null==l?A-1:l;
var p=e+Math.floor((l-e)/2);if(0==A)return A;if(0<c(f,b[l]))return l+1;if(0>c(f,b[e]))return e;A=c(f,b[p]);if(0==A)return p;if(0>A)return k(f,e,p-1);if(0<A)return k(f,p+1,l)};this.setCompare=function(b){b&&(c=b)};this.insert=function(c){b.splice(k(c),0,c)};this.length=function(){return b.length};this.at=function(c){return b[c]};this.grab=function(c){return b.splice(0,c)};this.data=function(){return b}}function v(b){var c=function(){var c=window.performance||{};c.now=function(){return c.now||c.webkitNow||
c.msNow||c.oNow||c.mozNow||function(){return(new Date).getTime()}}();return c.now()},k=function(){return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.msRequestAnimationFrame||b.oRequestAnimationFrame||function(e){b.setTimeout(function(){e(c())},1E3/60)}}(),f=function(){return new function(){var c=new p,b=function(A){0<c.length()&&k(b);var f,p;f=0;for(p=c.length();f<p&&!(c.at(f).timestamp>A);++f);A=c.grab(f);f=0;for(p=A.length;f<p;++f)A[f].func.apply(null,A[f].args)};
c.setCompare(function(c,b){return c.timestamp-b.timestamp});this.addTask=function(A){c.insert(A);0<c.length()&&k(b)}}}();b.async=function(b,l,A){"Function"!=classOf(b)||l&&"Array"!=classOf(l)||f.addTask({timestamp:A?c()+A:0,func:b,args:l||[]})}}function q(b){var c={};b.events={listen:function(b,f){var e=c[b]||[];e[e.length]=f;c[b]=e},remove:function(b,f){var e=c[b]||[],l=e.indexOf(f);0<=l&&e.splice(l,1)},emit:function(k,f){var e=c[k];if(e)for(var l=0;l<e.length;++l)b.async(e[l],f)}}}y.hashCode=function(b){var c=
0,k,f,e;if(0===b.length)return c;k=0;for(e=b.length;k<e;k++)f=b.charCodeAt(k),c=(c<<5)-c+f,c|=0;return c};y.MSInputObject=function(b){var c=this;c.__get_value=null;c.__set_value=null;b=b||{};if(window.admin||b.user){if(b.multiline){c.el=document.createElement("textarea");var k=c.el.offsetHeight-c.el.clientHeight,f=0,e=c.el.clientHeight,l=function(){async(function(){var b=c.el.value.length;b<f&&(c.el.style.height="auto");var l=c.el.scrollHeight+k;0<l&&(c.el.style.height=l+"px");f=b;l!=e&&(e=l)})};
c.__get_value=function(){return c.el.value};c.__set_value=function(b){c.el.value=b;l()};c.el.addEventListener("keydown",l);c.el.addEventListener("keyup",l)}else c.el=document.createElement("input"),c.el.setAttribute("type","text"),c.__get_value=function(){return c.el.value},c.__set_value=function(b){c.el.value=b};c.el.onchange=function(){if(c.onchange)c.onchange(c)};b.placeholder&&this.el.setAttribute("placeholder",b.placeholder)}else c.el=document.createElement("div"),c.__get_value=function(){return c.el.innerHTML},
c.__set_value=function(b){c.el.innerHTML=b};b.className&&(c.el.className=b.className);b.id&&(c.el.id=b.id)};MSInputObject.prototype.value=function(){return this.__get_value()||""};MSInputObject.prototype.setValue=function(b){this.__set_value(b||"")};y.MSDivObject=function(b){this.el=b||document.createElement("div")};MSDivObject.prototype.addClass=function(b){-1==this.el.className.indexOf(b)&&(this.el.className=this.el.className.concat(" ",b))};MSDivObject.prototype.removeClass=function(b){-1<this.el.className.indexOf(b)&&
(this.el.className=this.el.className.replace(b,"").replace("  "," ").trim())};MSDivObject.prototype.setPlaceholder=function(b){if(window.admin){var c=this,k=document.createElement("span"),f=!0;c.has_placeholder=!0;k.className="placeholder";k.innerHTML=b;0==c.el.innerHTML.length&&(c.el.appendChild(k),c.addClass("placeholder-visible"));c.el.addEventListener("text-changed",function(){0==c.el.innerHTML.length?(f||(c.addClass("placeholder-visible"),f=!0),c.el.appendChild(k)):f&&(f=!1,c.removeClass("placeholder-visible"))});
c.el.addEventListener("focus",function(){f&&(c.el.removeChild(k),c.removeClass("placeholder-visible"),f=!1)});c.el.addEventListener("blur",function(){0==c.innerHTML.length&&(c.el.appendChild(k),c.addClass("placeholder-visible"),f=!0)});c.has_text=function(){return!f}}};MSDivObject.prototype.refresh=function(){(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed"))};MSDivObject.prototype.scrollable=function(){var b=this;b.track_change?Ps.update(b.el):(b.track_change=
!0,Ps.initialize(b.el,{suppressScrollX:!0}),b.el.addEventListener("text-changed",function(){Ps.update(b.el)}))};MSDivObject.prototype.setText=function(b){b&&(this.el.innerHTML=b,(this.has_placeholder||this.track_change)&&this.el.dispatchEvent(new Event("text-changed")))};MSDivObject.prototype.getText=function(){return this.has_placeholder?this.has_text()?this.el.innerHTML:"":this.el.innerHTML};MSDivObject.prototype.textEdit=function(b){if(window.admin){var c=this;b=b||{};b.textItem=b.textItem||c;
c.el.addEventListener("click",function(){if(!c.in_edit){c.in_edit=!0;var k=b.textItem.getText(),f=b.multiline?document.createElement("textarea"):document.createElement("input");b.multiline&&b.autosize&&f.addEventListener("keydown",function(){async(function(){f&&(f.style.height=f.scrollHeight+"px")})});b.multiline||(f.type="text");f.className="inplace-text-edit";f.value=k;f.style.width=c.el.offsetWidth-(b.offsetWidth||0)+"px";f.style.height=c.el.offsetHeight-(b.offsetHeight||0)+"px";c.el.innerHTML=
"";c.el.appendChild(f);f.focus();f.onblur=function(){b.textItem.setText(f.value);f=null;c.in_edit=!1;b.textItem!=c&&(c.el.innerHTML="",c.el.appendChild(b.textItem.el),c.refresh())}}})}};MSDivObject.prototype.loadImage=function(b){var c=this,k=b.url;async(function(){c.el.style.backgroundImage="url("+k+")"})};y.FileUpload=function(b){var c=this,k=document.createElement("div"),f=document.createElement("input");b=b||{multiple:!1};b.id&&(k.id=b.id);b.className&&(k.className=b.className);f.type="file";
f.name="file";f.accept="image/*";f.multiple=b.multiple;k.appendChild(f);f.onchange=function(b){c.preview&&c.preview(b.target.files)};c.el=k};y.DropDown=function(b,c){function k(a,d){if(a.manager)a.manager.setValue(d);else if(a.firstChild&&3==a.firstChild.nodeType)a.firstChild.nodeValue=d;else{var b=document.createTextNode(d);a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)}}function f(){var a=null,d=[];this.bind=function(b){d[d.length]=b;a&&k(b,a)};this.unbind=function(a){a=d.indexOf(a);
0<=a&&d.splice(a,1)};this.setValue=function(b){if(a=b)for(b=0;b<d.length;++b)k(d[b],a)}}var e=this,l=c||document.createElement("div"),A=!b.adminOnly||window.admin,p=A?document.createElement("img"):null,q=A?document.createElement("lu"):null,H=!1,m=!1,d={},a=null,I=!1,z=function(b){var c=d[b];c&&(a&&a.unbind(l),l.setAttribute("current-data-id",b),a=c,a.bind(l),A&&H&&e.close(),e.changed&&async(e.changed,[b]))};l.controller=e;e.addItem=function(b,c){var e=new f,h=null;d[b]=e;c&&e.setValue(b);A&&(h=document.createElement("li"),
h.className="dropdown-item text-invert",h.onclick=function(){I||z(b)},q.appendChild(h),e.bind(h));a||z(b);return{controller:e,item:h}};e.addVirtual=function(){var a=document.createElement("li");a.className="dropdown-item virtual text-invert";q.appendChild(a);return a};e.removeVirtual=function(a){q.contains(a)&&q.removeChild(a)};l.className=b.className?0<l.className.length?l.className+(" dropdown-container no-select text "+b.className):"dropdown-container no-select text "+b.className:0<l.className.length?
l.className+" dropdown-container text":"dropdown-container text";A&&(p.src=b.src||"../images/down.png",l.appendChild(p),q.className="dropdown-list no-select",l.appendChild(q),l.onclick=function(){I||m||(e.beforeOpen&&e.beforeOpen(),H=!0,q.style.display="block")},l.onmouseleave=function(){I||e.close()});e.el=l;e.manual=function(){I=!0};e.auto=function(){I=!1};e.open=function(){I&&(H=!0,q.style.display="block")};e.close=function(){H&&(e.beforeClose&&e.beforeClose(),q.style.right="-200%",async(function(){q.removeAttribute("style")}))};
e.setText=function(a){k(l,a)};e.text=function(){return l.firstChild&&3==l.firstChild.nodeType?l.firstChild.nodeValue:""};e.value=function(){return l.getAttribute("current-data-id")};e.setValue=function(a){z(a)};e.lock=function(){m=!0;l.setAttribute("locked",!0)};e.unlock=function(){m=!1;l.removeAttribute("locked")}};y.classOf=function(b){return/\[object (\w+)\]/.exec(Object.prototype.toString.call(b))[1]};y.getHeight=function(b){var c;document.all?(c=parseInt(b.currentStyle.height),b=parseInt(b.currentStyle.marginTop,
10)+parseInt(b.currentStyle.marginBottom,10)):(c=parseInt(document.defaultView.getComputedStyle(b,"").getPropertyValue("height")),b=parseInt(document.defaultView.getComputedStyle(b,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(b,"").getPropertyValue("margin-bottom")));return c+b};y.browser={opera:!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),firefox:"undefined"!==typeof InstallTrigger,safari:0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),
ie:!!document.documentMode};y.browser.chrome=!!window.chrome&&!window.browser.opera;y.ajax=function(b){return new D(b)};y.scrollBodyTo=function(b,c){var k=document.getElementById("content-wrapper"),f=parseInt(b.offsetTop),e=parseInt(k.scrollTop);c=parseInt(c||0);if(e!=f){var l=f-e+c;morpheus.tween(500,function(b){b=e+l*b;0<=b&&b<=k.scrollHeight&&(k.scrollTop=b)})}};y.addEventListener("load",function(){new v(y);new q(y)})})(this);(function(){function y(){function p(b,c){if(b.controller)b.controller.setValue(c);else if(b.firstChild&&3==b.firstChild.nodeType&&b.firstChild.nodeValue)b.firstChild.nodeValue=c;else{var f=document.createTextNode(c);b.firstChild?b.insertBefore(f,b.firstChild):b.appendChild(f)}}var v="en",q={},b={};this.bind=function(b,c){p(c,D[v][b]);var f=q[b];f?f[f.length]=c:q[b]=[c]};this.bindInput=function(c,l){l.placeholder=D[v][c];var f=b[c];f?f[f.length]=l:b[c]=[l]};this.unbind=function(b){for(var c in q)if(q.hasOwnProperty(c)&&
0<q[c].length){var f=q[c].indexOf(b);-1!=f&&q[c].splice(f,1)}};this.unbindInput=function(c){for(var f in b)if(b.hasOwnProperty(f)&&0<b[f].length){var k=b[f].indexOf(c);-1!=k&&b[hey].splice(k,1)}};this.change=function(c){if(D[c]&&v!=c){v=c;for(var f in q)if(q.hasOwnProperty(f)&&0<q[f].length){c=q[f];for(var k=c.length,y=0;y<k;++y)p(c[y],D[v][f])}for(f in b)if(b.hasOwnProperty(f)&&0<b[f].length)for(c=b[f],k=c.length,y=0;y<k;++y)c[y].placeholder=D[v][f]}};for(var c=document.getElementsByTagName("*"),
k=0;k<c.length;++k)if(c[k].hasAttribute("lang")){var f=c[k].getAttribute("lang");this.bind(f,c[k])}else c[k].hasAttribute("placeholder-lang")&&(f=c[k].getAttribute("placeholder-lang"),this.bindInput(f,c[k]));this.change("pl")}var D={en:{about:"About",shop:"Shop",orders:"Orders",gallery:"Gallery",contact:"Contact",description:"Description",title:"Title",type:"Type",availability:"Availability",process:"Order Process",price:"Price",quantity:"Quantity",shipping:"Shipping",qandp:"Quantity & Price",payment_opt:"Payment methods",
lead:"Lead times",individual:"Individual",common:"Common",available:"Available",demand:"On-Demand",keep:"Keep in Shop",move:"Move to Gallery",remove:"Remove","delete":"Delete",save:"Save",close:"Close",order:"Order",aboutus:"About Us",office:"Our Office",contactus:"Contact Us",name:"Name",surname:"Surname",email:"E-mail",address:"Address",country:"Country",postcode:"Post Code",message:"Message"},pl:{about:"Pracownia",shop:"Sklep",orders:"Zam\u00f3wienie",order:"Zam\u00f3w",gallery:"Galeria",contact:"Kontakt",
description:"Opis",title:"Nazwa",type:"Rodzaj",availability:"Dost\u0119pno\u015b\u0107",process:"Akcja",price:"Cena",close:"Zamknij",save:"Zapisz","delete":"Kasuj",payment_opt:"Forma p\u0142atno\u015bci",lead:"Czas realizacji",quantity:"Ilo\u015b\u0107",shipping:"Transport",total:"Koszt ca\u0142kowity",checkout:"Dalej",about_us:"O nas",office:"Dane kontaktowe",about_us_value:"",send:"Wy\u015blij",personal_details:"Dane osobowe",forename:"Imi\u0119",surname:"Nazwisko",email:"Email",phone:"Numer telefonu",
shipping_address:"Adres wysy\u0142ki",company:"Nazwa firmy",address:"Ulica",city:"Miasto",county:"Wojew\u00f3dztwo",post_code:"Kod pocztowy",country:"Kraj",next:"Kontynuuj",back:"Wr\u00f3\u0107",payment_type:"Rodzaj p\u0142atno\u015bci",card_details:"Szczeg\u00f3\u0142y karty kredytowej",card_no:"Numer karty",cvv:"CVV",expiry:"Termin wa\u017cno\u015bci",billing_address:"Adres fakturowania",vat:"NIP",full_name:"Imi\u0119 i nazwisko",price_summary:"Podsumowanie",pay:"Zap\u0142a\u0107",message:"Wiadomo\u015b\u0107",
individual:"Pojedynczy",common:"Zbiorowy",advert:"Og\u0142oszenie",available:"Dost\u0119pny",demand:"Na zam\u00f3wienie",keep:"Sklep",move:"Galeria",remove:"Usu\u0144",today:"Dzisiaj",l_3_day:"3 dni",l_week:"Tydzie\u0144",l_month:"Miesi\u0105c",l_time:"Ca\u0142y czas",lead_avail:"- Realizacja zam\u00f3wienia: 1 dzie\u0144 roboczy\n- Czas dostawy: 2 - 3 dni robocze",lead_wait:"- Realizacja zam\u00f3wienia: 2 - 3 tygodnie\n- Czas dostawy: 2 - 3 dni robocze",components:"Nazwa",none:"Bez nazwy",labeled:"Oznaczona",
projects:"Projekt",category:"Kategoria",allitems:"Wszystkie",lowprice:"Cena malej\u0105co",hightprice:"Cena rosn\u0105co",iagree:"Akceptuj\u0119",terms:"Regulamin sklepu"}};window.addEventListener("load",function(){window.language=new y})})();(function(){function y(){var p=document.getElementById("main_menu"),v=document.getElementById("menu_list"),q=p.getElementsByClassName("menu_item"),b=!1,c={};p.onclick=function(){b?(b=!1,v.removeAttribute("style")):(v.style.display="block",b=!0)};for(p=0;p<q.length;++p){var k=q[p].getAttribute("scrollto");c[k]=document.getElementById(k);q[p].onclick=function(f){f.stopPropagation?f.stopPropagation():f.cancelBubble=!0;b=!1;v.removeAttribute("style");window.scrollBodyTo(c[f.target.getAttribute("scrollto")])}}}
function D(){if(window.mobile)new y;else{var p=document.getElementById("header"),v=document.getElementById("content-wrapper"),q=document.getElementById("title"),b=document.getElementById("main_menu"),c=b.getElementsByClassName("menu_item"),k=[p,v,q,b],f={},e=!1,l;for(l in c)if(c.hasOwnProperty(l)){var A=c[l].getAttribute("scrollto");f[A]=document.getElementById(A);c[l].onclick=function(b){window.scrollBodyTo(f[b.target.getAttribute("scrollto")])}}p.unset={height:160};v.unset={top:160};q.unset={height:120,
width:720,left:"50%",marginLeft:-360};b.unset={top:120,left:"50%",marginLeft:-350};p.set={height:60};v.set={top:60};q.set={height:60,width:350,left:"0%",marginLeft:0};b.set={top:15,left:"100%",marginLeft:-700};for(l in k){var c=k[l].unset,D;for(D in c)k[l].style[D]=c[D]}window.events.listen("requestHeaderHeight",function(b){b(p.offsetHeight)});window.addEventListener("resize",function(){e&&(q.style.marginLeft=(p.offsetWidth<b.offsetWidth+350?-350:0)+"px")});v.addEventListener("scroll",function(){var c=
v.scrollTop;e&&0==c?(e=!1,morpheus(k,{height:function(b){return b.unset.height},width:function(b){return b.unset.width},top:function(b){return b.unset.top},left:function(b){return b.unset.left},marginLeft:function(b){return b.unset.marginLeft},duration:350,complete:function(){window.events.emit("headerChanged",[p.unset.height])}})):!e&&0<c&&(e=!0,q.set.marginLeft=p.offsetWidth<b.offsetWidth+350?-350:0,morpheus(k,{height:function(b){return b.set.height},width:function(b){return b.set.width},top:function(b){return b.set.top},
left:function(b){return b.set.left},marginLeft:function(b){return b.set.marginLeft},duration:500,complete:function(){window.events.emit("headerChanged",[p.set.height])}}))})}}window.addEventListener("load",function(){window.header=new D})})();(function(){function y(p){var v=this,q=document.createElement("div"),b=new MSInputObject({multiline:!0,placeholder:"Description",className:"about-column-text text"}),c=window.admin?document.createElement("div"):null;q.className="about-column";b.setValue(p);q.appendChild(b.el);c&&(c.className="remove-about-column",q.appendChild(c),c.onclick=function(){v.remove&&v.remove(v)});v.el=q;v.text=function(){return b.value()}}function D(){var p=document.getElementById("about_panel"),v=document.getElementById("columns");
document.getElementById("demo_show");var q=window.admin?document.getElementById("create_about_column"):null,b=window.admin?document.getElementById("save_about_column"):null,c=window.admin?function(b){v.removeChild(b.el);k.splice(k.indexOf(b),1)}:null,k=[];window.admin&&p.setAttribute("admin",!0);q&&(q.onclick=function(){var b=new y;b.remove=c;k.push(b);v.appendChild(b.el)});b&&(b.onclick=function(){for(var b=[],c=0;c<k.length;++c)b.push(k[c].text());window.ajax({type:"POST",data:{fields:b},url:"/async/about/save"})});
window.ajax({type:"POST",url:"/async/about/load"}).done(function(b){if(b.status&&b.fields){var e=document.createDocumentFragment(),l;for(l in b.fields){var p=new y(b.fields[l]);p.remove=c;k.push(p);e.appendChild(p.el)}v.appendChild(e)}})}window.addEventListener("load",function(){window.home=new D})})();(function(){function y(d){var a=this,b=d.id,c=d.file?!0:!1,g=d.file,w=d.label,G=null,h=null,m=!1,r=null,C=!1,n=new MSDivObject;d=window.admin?document.createElement("div"):null;var u=function(a){w=a;G&&(G.innerHTML=w||"")};n.el.className="picture-thumb";d&&(d.className="picture-thumb-remove",d.onclick=function(){a.removed&&a.removed(b)},n.el.appendChild(d));window.admin&&(n.el.setAttribute("draggable",!0),n.el.ondragstart=function(a){a.dataTransfer.setData("target",b)},n.el.ondragover=function(a){a.preventDefault()},
n.el.ondrop=function(d){d.preventDefault();a.swap&&a.swap(d.dataTransfer.getData("target"),b)});n.el.onclick=function(){a.click&&a.click(a)};a.el=n.el;a.id=function(){return b};a.isTemp=function(){return c};a.file=function(){return g};a.label=function(){return w};a.setLabel=u;a.enableLabel=function(){G||(G=document.createElement("div"),G.className="picture-thumb-label header-text no-select",n.el.appendChild(G));G&&(G.innerHTML=w||"")};a.disableLabel=function(){G&&(n.el.removeChild(G),G=null)};a.data=
function(){return h};a.remove=function(){m=!0;return c};a.pack=function(){return{id:b,temp:c,file:g,label:w,data:h,removed:m}};a.onload=function(d){C&&d?async(d,[a]):r=d};a.commit=function(a){if(m&&!c)window.ajax({type:"POST",data:{id:b},url:"/async/images/delete"}).done(function(d){a()});else if(c){var d=new FormData;d.append("file",g);window.ajax({type:"POST",data:d,files:!0,url:"/async/images/save"}).done(function(d){a({id:d.id,label:w})})}else a({id:b,label:w})};a.update=function(a){b=a.id;c=
a.temp;u(a.label);g=a.file;h=a.data;m=a.removed;n.el.style.backgroundImage=c?"url("+h+")":"url(/async/thumb/load/"+b+")"};c?(d=new FileReader,d.onload=function(d){h=d.target.result;n.el.style.backgroundImage="url("+h+")";C=!0;r&&(async(r,[a]),r=null)},d.readAsDataURL(g)):(n.loadImage({url:"/async/thumb/load/"+b,color:"#e0e0e0",shadow:!0,radius:24,width:6,length:22,lines:15,speed:.75}),C=!0,r&&(async(r,[a]),r=null))}function D(){var d=this,a=document.createElement("div"),b=document.createElement("div"),
c=document.createElement("div"),g=new MSDivObject,w=window.admin?new FileUpload({multiple:!0,className:"picture-thumb add"}):null,m=null,h=null,B={},r=[],C=function(a){var d=B[a];d&&(d.remove()&&delete B[a],c.removeChild(d.el),Ps.update(c));a=r.indexOf(a);0<=a&&r.splice(a,1)},n=function(a,d){var b=B[a],c=b.pack(),n=B[d].pack();B[a]=B[d];B[d]=b;B[a].update(c);B[d].update(n);b=r.indexOf(a);c=r.indexOf(d);r[b]=d;r[c]=a},u=function(){var a=g.el.getAttribute("current");(a=B[a])&&a.setLabel(m.value())},
t=function(a){a.isTemp()?g.el.style.backgroundImage="url("+a.data()+")":g.loadImage({url:"/async/images/load/"+a.id(),color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75});g.el.setAttribute("current",a.id());m&&(m.onchange=null,m.setValue(a.label()),m.onchange=u)};a.className="picture-manager";b.className="picture-container";c.className="picture-carousel";b.appendChild(c);g.el.className="picture-preview";w&&(c.appendChild(w.el),w.preview=function(a){if(a){d.beginAdd();for(var b=
null,c=0;c<a.length;++c){var n=new y({id:String(hashCode(a[c].name)),file:a[c]});b||(b=n);d.add(n)}d.endAdd();d.show(b)}});a.appendChild(g.el);a.appendChild(b);d.el=a;d.imageList=function(){return r};d.enableLabel=function(a){m||(m=new MSInputObject({className:"picture-preview-label text"}),g.el.appendChild(m.el));m.onchange=null;a?m.setValue(a):(a=g.el.getAttribute("current"),(a=B[a])&&m.setValue(a.label()));for(var d in B)B.hasOwnProperty(d)&&B[d].enableLabel();m.onchange=u};d.disableLabel=function(){m&&
(g.el.removeChild(m.el),m=null);for(var a in B)B.hasOwnProperty(a)&&B[a].disableLabel()};d.commit=function(a){var d=function(a,b,c,n,t){a==b?t(n):B[c[a]].commit(function(x){x&&n.push(x);d(a+1,b,c,n,t)})};d(0,r.length,r,[],a)};d.beginAdd=function(){null==h&&(h=document.createDocumentFragment())};d.endAdd=function(){if(h&&(c.appendChild(h),h=null,0<r.length))B[r[0]].onload(t)};d.present=function(a){(a=B[a])&&async(t,[a])};d.add=function(a){h&&!B[a.id()]&&(r.push(a.id()),B[a.id()]=a,a.removed=C,a.swap=
n,a.click=t,h.appendChild(a.el),m&&a.enableLabel())};d.show=function(a){var d=function(){if(h)async(d);else if(a)a.onload(t)};async(d)}}function p(){var d=document.createElement("table"),a=new MSInputObject({placeholder:"Price",className:"text"}),b=new MSInputObject({placeholder:"Shipping",className:"text"});language.bindInput("price",a.el);language.bindInput("shipping",b.el);var c=document.createElement("tr"),g=document.createElement("th"),w=document.createElement("th");c.className="text-invert";
language.bind("price",g);language.bind("shipping",w);c.appendChild(g);c.appendChild(w);d.appendChild(c);c=document.createElement("tr");g=document.createElement("td");w=document.createElement("td");g.appendChild(a.el);c.appendChild(g);w.appendChild(b.el);c.appendChild(w);d.appendChild(c);d.className="single-item";this.el=d;this.value=function(){return[{quantity:1,price:a.value(),shipping:b.value()}]};this.setValue=function(d){a.setValue(d[0].price);b.setValue(d[0].shipping)}}function v(){function d(a,
d,b){this.quantity=a;this.price=d;this.shipping=b}var a=document.createElement("table"),b=[],c=function(c,n,g){var t=document.createElement("tr"),x=document.createElement("td"),z=new MSInputObject({placeholder:"Quantity",className:"text"}),w=document.createElement("td"),m=new MSInputObject({placeholder:"Price",className:"text"}),h=document.createElement("td"),r=new MSInputObject({placeholder:"Shipping",className:"text"}),B=document.createElement("td"),e=document.createElement("div"),G=new d(z,m,r);
language.bindInput("quantity",z.el);language.bindInput("price",m.el);language.bindInput("shipping",r.el);e.className="remove-row";b.push(G);z.setValue(c||"");m.setValue(n||"");r.setValue(g||"");x.appendChild(z.el);t.appendChild(x);w.appendChild(m.el);t.appendChild(w);h.appendChild(r.el);t.appendChild(h);B.appendChild(e);t.appendChild(B);a.appendChild(t);e.onclick=function(d){d=b.indexOf(G);0<=d&&(b.splice(d,1),a.removeChild(t))}},g=document.createElement("tr"),w=document.createElement("th"),m=document.createElement("th"),
h=document.createElement("th"),B=document.createElement("th"),r=document.createElement("div");g.className="text-invert";language.bind("quantity",w);language.bind("price",m);language.bind("shipping",h);g.appendChild(w);g.appendChild(m);g.appendChild(h);r.className="add-new-row";B.appendChild(r);g.appendChild(B);r.onclick=function(){c()};a.appendChild(g);a.className="multi-item";this.el=a;this.value=function(){for(var a=[],d=0;d<b.length;++d)a.push({quantity:b[d].quantity.value(),price:b[d].price.value(),
shipping:b[d].shipping.value()});return a};this.setValue=function(a){for(var d=0;d<a.length;++d)c(a[d].quantity,a[d].price,a[d].shipping)}}function q(){var d=null,a=document.createElement("table"),b=document.createElement("tr"),c=document.createElement("th"),g=document.createElement("th"),m=document.createElement("th"),e=document.createElement("tr"),h=document.createElement("td"),B=document.createElement("td"),r=document.createElement("td");b.className="text-invert";language.bind("quantity",c);language.bind("price",
g);language.bind("shipping",m);b.appendChild(c);b.appendChild(g);b.appendChild(m);a.appendChild(b);e.appendChild(h);e.appendChild(B);e.appendChild(r);a.appendChild(e);B.setAttribute("currency","z\u0142");r.setAttribute("currency","z\u0142");this.el=a;this.value=function(){return d};this.setValue=function(a){if(1==a.length)h.innerHTML=a[0].quantity,B.innerHTML=a[0].price,r.innerHTML=a[0].shipping,d={quantity:a[0].quantity,price:a[0].price,shipping:a[0].shipping};else if(1<a.length){var b=new DropDown({});
b.changed=function(b){B.innerHTML=a[b].price;r.innerHTML=a[b].shipping;d={quantity:a[b].quantity,price:a[b].price,shipping:a[b].shipping}};for(var c=0;c<a.length;++c)b.addItem(c).controller.setValue(a[c].quantity);h.appendChild(b.el)}}}function b(d){var a=this,b=document.createElement("div"),c=null,g=!1,m=0;window.admin?(c=[new p,new v],d&&d.type&&(m=0<=d.type&&2>d.type?d.type:0),b.appendChild(c[m].el)):(c=new q,b.appendChild(c.el));b.className="price text advert-hide";a.el=b;window.admin&&(a.change=
function(d){b.removeChild(c[m].el);m=0<=d&&2>d?d:0;b.appendChild(c[m].el);a.changed&&a.changed(d)},a.nullValue=function(a){g=a});a.value=function(){return window.admin?g?null:{type:m,values:c[m].value()}:c.value()};a.setValue=function(d){d&&(window.admin?(a.change(d.type),c[m].setValue(d.values)):c.setValue(d.values))}}function c(){var d=this,a=!0,b=document.createElement("div"),c=new DropDown({className:"component-ctl"});b.className="text-header header-text";language.bind("projects",b);c.changed=
function(a){d.changed&&d.changed(a)};d.setValue=function(a){if(a)for(var d=0;d<a.length;++d)c.addItem(a[d].id).controller.setValue(a[d].label)};d.value=function(){return c.value()};d.text=function(){return c.text()};d.enabled=function(){return a};d.enable=function(){a=!0;b.removeAttribute("style");c.el.removeAttribute("style")};d.disable=function(){a=!1;b.style.display="none";c.el.style.display="none"};var g=document.createDocumentFragment();g.appendChild(b);g.appendChild(c.el);d.el=g}function k(){function d(d){if(e.length<
g.length){var c=document.createElement("div"),n=document.createElement("div"),u=new DropDown({className:"category-ctl"},n),t=document.createElement("div");c.className="category-item-view";t.className="remove-category-item";c.appendChild(n);c.appendChild(t);t.onclick=function(){var d=e.indexOf(u);0<=d&&(e.splice(d,1),delete h[u.id],a.removeChild(c),c=null);e.length<g.length&&(b.style.display=null)};e[e.length]=u;u.beforeOpen=function(){if(m)for(var a=0;a<m.length;++a)u.removeVirtual(m[a]);m=[];for(a=
0;a<g.length;++a)h[g[a]._id]&&h[g[a]._id]!=u||function(a,d){a.onclick=function(a){a.preventDefault();a.stopPropagation();u.setText(d.title);delete h[u.id];u.id=d._id;h[d._id]=u;u.close()};a.className="dropdown-item text-invert";a.innerHTML=d.title;m[m.length]=a}(u.addVirtual(),g[a])};u.beforeClose=function(){if(m){for(var a=0;a<m.length;++a)u.removeVirtual(m[a]);m=null}};if(d)for(n=0;n<g.length;++n){if(g[n]._id==d){h[d]=u;u.id=d;u.setText(g[n].title);break}}else for(n=0;n<g.length;++n)if(!h[g[n]._id]){h[g[n]._id]=
u;u.id=g[n]._id;u.setText(g[n].title);break}a.insertBefore(c,b);e.length==g.length&&(b.style.display="none")}}var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div"),g=[],m=null,e=[],h={},B=!1;a.className="category-list";b.className="category-item-view add-category-item";b.appendChild(c);a.appendChild(b);b.onclick=function(){d()};this.el=a;this.setValue=function(a){if(a){var b=function(){if(B)for(var c=0;c<a.length;++c)d(a[c]);else async(b)};b()}};this.value=
function(){return Object.keys(h)};window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(a){B=!0;a.status&&(g=a.categories||[],0==g.length&&(b.style.display="none"))})}function f(){function d(){this.removeAttribute("error");this.onfocus=null}var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("input"),m=document.createElement("input"),w=new MSInputObject({className:"message text",multiline:!0,user:!0});a.className="shop-item-contact-panel";
b.className="text-header header-text";c.className="name text";m.className="email text";language.bind("contact",b);language.bindInput("full_name",c);language.bindInput("email",m);language.bindInput("message",w.el);a.appendChild(b);a.appendChild(c);a.appendChild(m);a.appendChild(w.el);this.el=a;this.value=function(){return{name:c.value,email:m.value,message:w.value()}};this.error=function(a){for(var b in a)"name"==b?(c.setAttribute("error",!0),c.onfocus=d):"email"==b?(m.setAttribute("error",!0),m.onfocus=
d):"message"==b&&(w.el.setAttribute("error",!0),w.el.onfocus=d)}}function e(d){var a=this,m=document.createElement("div"),z=document.createElement("div"),g=document.createElement("div"),w=null,e=document.createElement("div"),h=new MSInputObject({className:"title text",placeholder:"Title",multiline:!0}),B=window.admin?document.createElement("div"):null,r=window.admin?new DropDown({className:"type-ctl"}):{setValue:function(a){2==a&&(m.setAttribute("advert",!0),w=new f,z.appendChild(w.el),language.unbind("order",
L),language.bind("send",L))}},C=document.createElement("div"),n=new DropDown({className:"avail-ctl",adminOnly:!0}),u=window.admin?document.createElement("div"):null,t=window.admin?new DropDown({className:"action-ctl"}):null,x=window.admin?document.createElement("div"):null,l=window.admin?new DropDown({className:"component-ctl"}):{setValue:function(d){0==d?(a.disableLabel(),p.disable()):(a.enableLabel(),p.enable())}},p=window.admin?null:new c,q=window.admin?document.createElement("div"):null,A=window.admin?
new k:null,v=document.createElement("div"),H=new b({type:0}),y=document.createElement("div"),D=document.createElement("div"),E=document.createElement("div"),F=document.createElement("div"),O=document.createElement("div"),P=new MSInputObject({className:"desc text",placeholder:"Description",multiline:!0}),M=window.admin&&d.id()?document.createElement("div"):null,L=document.createElement("div"),N=document.createElement("div"),K={title:h,type:r,availability:n,action:t,components:l,images:p,categories:A,
price:H,descrition:P};m.className="details-container";z.className="details-view";m.appendChild(z);g.className="control-view";m.appendChild(g);e.className="text-header header-text";language.bind("title",e);language.bindInput("title",h.el);z.appendChild(e);z.appendChild(h.el);window.admin?(language.bind("individual",r.addItem(0)),language.bind("common",r.addItem(1)),language.bind("advert",r.addItem(2)),B.className="text-header header-text",language.bind("type",B),z.appendChild(B),z.appendChild(r.el)):
p.changed=function(d){a.selectImage&&a.selectImage(d)};n.changed=function(a){language.unbind(F);0==a?language.bind("lead_avail",F):language.bind("lead_wait",F)};language.bind("available",n.addItem(0));language.bind("demand",n.addItem(1));C.className="text-header header-text";language.bind("availability",C);z.appendChild(C);z.appendChild(n.el);window.admin?(language.bind("keep",t.addItem(0)),language.bind("move",t.addItem(1)),language.bind("remove",t.addItem(2)),u.className="text-header header-text",
language.bind("process",u),z.appendChild(u),z.appendChild(t.el),language.bind("components",x),x.className="text-header header-text",language.bind("none",l.addItem(0)),language.bind("labeled",l.addItem(1)),z.appendChild(x),z.appendChild(l.el),l.changed=function(d){0==d?a.disableLabel():a.enableLabel()},l.lock()):z.appendChild(p.el);window.admin&&(q.className="text-header header-text",language.bind("category",q),z.appendChild(q),z.appendChild(A.el));v.className="text-header header-text advert-hide";
language.bind("price",v);z.appendChild(v);z.appendChild(H.el);y.className="text-header header-text advert-hide";language.bind("payment_opt",y);D.className="payments advert-hide";window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status)for(var d=0;d<a.types.length;++d){var b=document.createElement("div");b.className="payment-option";b.setAttribute("type",a.types[d]);D.appendChild(b)}});z.appendChild(y);z.appendChild(D);E.className="text-header header-text advert-hide";
language.bind("lead",E);F.className="lead-time text advert-hide";z.appendChild(E);z.appendChild(F);O.className="text-header header-text";language.bind("description",O);language.bindInput("description",P.el);L.className="action-btn no-select text-invert";language.bind(window.admin?"save":"order",L);g.appendChild(L);L.onclick=function(){if(window.admin){var b={},c;for(c in K)K.hasOwnProperty(c)&&K[c]&&(b[c]=K[c].value());a.save(b)}else w?(b=w.value(),b.data={id:d.id(),preview:p.enabled()?p.value():
d.preview(),title:h.value(),component:p.enabled()?p.text():null},a.contact(b,function(a){a.status||w.error(a.error)})):(b=H.value()||{},b.id=d.id(),b.preview=p.enabled()?p.value():d.preview(),b.title=h.value(),b.availability=n.value(),b.component=p.enabled()?p.text():null,a.order(b))};N.className="close-btn no-select text-invert";language.bind("close",N);g.appendChild(N);N.onclick=function(){a.close()};M&&(M.className="delete-btn no-select text-invert",language.bind("delete",M),g.appendChild(M),M.onclick=
function(){a.remove()});z.appendChild(O);z.appendChild(P.el);a.el=m;a.show=function(){};a.init=function(){r.changed=function(a){H.nullValue(!1);m.removeAttribute("advert");0==a?(H.change(0),n.setValue(0),l.setValue(0),n.unlock(),t.unlock(),l.lock()):1==a?(H.change(1),n.setValue(1),t.setValue(0),n.lock(),t.lock(),l.unlock()):2==a&&(H.nullValue(!0),n.setValue(1),n.lock(),t.setValue(0),t.lock(),l.unlock(),m.setAttribute("advert",!0))}};a.setValue=function(a){for(var d in K)K.hasOwnProperty(d)&&K[d]&&
K[d].setValue(a[d])}}function l(d,a){function b(c,m,g){var n=this,u=new D,t=new e(c);t.close=function(){n.close()};t.order=function(a){n.close(function(){window.events.emit("order",[a])},{force:!0})};t.contact=function(a,d){window.ajax({type:"POST",data:a,url:"/async/contact"}).done(function(a){a.status?n.close():d(a)})};t.enableLabel=function(){u.enableLabel()};t.disableLabel=function(){u.disableLabel()};n.load=function(a){d.id()?window.ajax({type:"POST",data:{id:d.id()},url:"/async/shop/load"}).done(function(d){if(d.item){t.setValue(d.item);
u.beginAdd();for(var b in d.item.images)u.add(new y(d.item.images[b]));u.endAdd();t.init()}a&&a()}):(t.init(),a&&a())};t.selectImage=function(a){u.present(a)};n.create=function(){g.appendChild(u.el);g.appendChild(t.el)};n.destroy=function(){g.removeChild(u.el);g.removeChild(t.el)};n.show=function(){u.show();t.show()};window.admin&&(t.save=function(b){u.commit(function(m){b.id=d.id();b.images=m;window.ajax({type:"POST",data:b,url:"/async/shop/save"}).done(function(d){if(d.status){var t=null;c.id()==
d._id?c.update({title:b.title,price:b.price,preview:m[0]}):t=function(){a.reload()};n.close(t)}})})},t.remove=function(){window.ajax({type:"POST",data:{id:c.id()},url:"/async/shop/delete"}).done(function(a){a.status&&(m.removeItem(c),n.close())})})}function c(a,d){async(m.close,a?[a,d]:null)}var m=this,w=document.createElement("div"),f=document.createElement("div"),h=new b(d,a,f);h.close=c;w.className=window.admin?"shop-item-container edit":"shop-item-container";w.style.display="none";f.className=
"shop-item-view";h.create();w.appendChild(f);this.el=w;this.id=function(){return d.id()};this.item=function(){return d};this.replace=function(m,g,e){d=m;a=g;var n=new b(d,a,f);n.close=c;n.load(function(){h.destroy();n.create();h=n;e&&e()})};this.show=function(d){d=d||{};d.force?(scrollBodyTo(window.shop.el,a.el.offsetTop+w.offsetTop),morpheus(w,{marginLeft:0,duration:300,complete:function(){h.show()}})):(w.style.display="block",d=w.offsetHeight,scrollBodyTo(window.shop.el,a.el.offsetTop+w.offsetTop),
w.style.height="0px",morpheus(w,{height:d,duration:300,complete:function(){morpheus(w,{marginLeft:0,duration:300,complete:function(){h.show()}});w.style.height=null}}))};this.hide=function(b,c){c=c||{};morpheus(w,{marginLeft:"-110%",duration:300,complete:function(){c.force||scrollBodyTo(window.shop.el,a.el.offsetTop+d.position());w.style.marginLeft=null;c.inline?b&&b():morpheus(w,{height:0,duration:300,complete:function(){w.style.display="none";b&&b()}})}})};h.load()}function A(){var d=this,a=document.createElement("div"),
b=document.createElement("div"),c=document.createElement("div");a.className="shop-item-new";b.className="shop-item-internal";a.appendChild(b);c.className="shop-item-image";b.appendChild(c);d.el=a;a.onclick=function(){d.open&&d.open(d)};d.id=function(){return null};d.title=function(){return null};d.position=function(){return a.offsetTop}}function F(d){var a=this,b=document.createElement("div"),c=document.createElement("div"),m=document.createElement("div"),e=new MSDivObject,f=d.preview.id,h=document.createElement("div");
b.id=d._id;b.className=window.admin?"shop-item edit no-select":"shop-item no-select";c.className="shop-item-internal";b.appendChild(c);e.el.className="shop-item-image";c.appendChild(e.el);m.className="shop-item-title text";c.appendChild(m);h.className="shop-item-price text";c.appendChild(h);e.loadImage({url:"/async/preview/load/"+f,color:"#e0e0e0",shadow:!0,width:3});m.innerHTML=d.title;d.price?(h.innerHTML=Math.round(d.price.values[0].price/d.price.values[0].quantity),h.setAttribute("currency","z\u0142")):
(h.innerHTML=null,h.removeAttribute("currency"));a.id=function(){return b.id};a.title=function(){return m.innerHTML};a.position=function(){return b.offsetTop};a.preview=function(){return f};a.update=function(a){f=a.preview.id;e.loadImage({url:"/async/preview/load/"+f,color:"#e0e0e0",shadow:!0,width:3});m.innerHTML=a.title;a.price?(h.innerHTML=Math.round(a.price.values[0].price/a.price.values[0].quantity),h.setAttribute("currency","z\u0142")):(h.innerHTML=null,h.removeAttribute("currency"))};b.onclick=
function(){b.getAttribute("ordered")?window.scrollBodyTo(window.orders.el):a.open&&a.open(a)};if(window.admin){d.counts=d.counts||{};var l=document.createElement("div"),r=document.createElement("div"),C=document.createElement("span"),n=document.createElement("div"),u=document.createElement("span"),t=document.createElement("div"),x=document.createElement("span"),k=document.createElement("div"),p=document.createElement("span"),q=document.createElement("div"),A=document.createElement("span");l.className=
"visit-counter-container text";r.className="visit-counter";n.className="visit-counter";t.className="visit-counter";k.className="visit-counter";q.className="visit-counter";language.bind("today",r);language.bind("l_3_day",n);language.bind("l_week",t);language.bind("l_month",k);language.bind("l_time",q);C.innerHTML=d.counts.day_1||0;u.innerHTML=d.counts.day_3||0;x.innerHTML=d.counts.day_7||0;p.innerHTML=d.counts.day_28||0;A.innerHTML=d.counts.all||0;r.appendChild(C);n.appendChild(u);t.appendChild(x);
k.appendChild(p);q.appendChild(A);l.appendChild(r);l.appendChild(n);l.appendChild(t);l.appendChild(k);l.appendChild(q);c.appendChild(l)}else d=document.createElement("div"),c=document.createElement("div"),d.className="shop-item-ordered",c.className="shop-item-ordered-icon",d.appendChild(c),b.appendChild(d);a.el=b}function E(b){function a(a){async(function(){if(r){var b=f.childNodes,d=r.item().position(),c=null;f.contains(r.el)&&f.removeChild(r.el);for(var m=0;m<b.length;++m)if(d<b[m].offsetTop){c=
b[m];break}c?f.insertBefore(r.el,c):f.appendChild(r.el);a&&"Function"==classOf(a)&&a()}})}function c(b,d){if(r){window.removeEventListener("resize",a);var m=r.el;r.hide(function(){f.removeChild(m);m=null;b&&b()},d);r=null}else b&&b()}function m(b){if(r){var d=r.item().position()==b.position();r.hide(function(){r.replace(b,g,function(){d?r.show({force:!0}):a(function(){r.show()})})},{force:!0,inline:d})}else r=new l(b,g),r.close=c,a(function(){r.show()}),window.addEventListener("resize",a)}var g=this,
e=document.getElementById("shop_item_view"),f=document.createElement("div"),h=window.admin?new A:null,k=window.location.hash?window.location.hash.substring(1):null,r=null;window.history&&window.history.replaceState&&window.history.replaceState({},document.title,"/");g.createItem=function(a,b){b&&h&&h.el.nextSibling?f.insertBefore(a.el,h.el.nextSibling):f.appendChild(a.el);a.open=m};g.removeItem=function(a){f.removeChild(a.el)};e.appendChild(f);g.el=e;g.reload=function(){window.ajax({type:"POST",data:b.value(),
url:"/async/shop/list"}).done(function(a){if(a&&a.status){var b=document.createElement("div"),d=null;h&&(b.appendChild(h.el),h.open=m);if(a.items)for(var c=0;c<a.items.length;++c){var g=new F(a.items[c]);if(r&&r.item().id()==g.id()||g.id()==k)d=g,k=null;g.open=m;b.appendChild(g.el)}e.replaceChild(b,f);f=b;d?m(d):r=null}window.events.emit("update-ordered")})}}function H(){function b(a,d){var c=this,m=a.item,n=a.controller,g=document.createElement("div"),e=window.admin&&d?document.createElement("input"):
null,h=window.admin&&d?document.createElement("div"):null,f=!1,r=!1;m.manager=c;g.className="categoty-title";m.appendChild(g);c.setValue=function(a){g.innerHTML=a||""};c.value=function(){return g.innerHTML};c.id=function(){return d?d._id:null};d?(n.setValue(d.title),window.admin&&(h&&(h.className="category-remove",h.onclick=function(a){a.preventDefault();a.stopPropagation();m.parentNode.removeChild(m);r=!0;f=!1}),e&&(e.className="categoty-title header-text"),c.forceEditStart=function(){e&&(m.replaceChild(e,
g),m.appendChild(h),e.value=g.innerHTML,e.onchange=function(){r||(f=!0)})},c.forceEditEnd=function(){e&&(e.onchange=null,m.replaceChild(g,e),m.removeChild(h),g.innerHTML=e.value)},c.save=function(a){r&&c.id()?window.ajax({type:"POST",data:{id:c.id()},url:"/async/category/delete"}).done(a):f?window.ajax({type:"POST",data:{id:c.id(),title:g.innerHTML},url:"/async/category/save"}).done(a):a()})):language.bind("allitems",a)}function a(a){var b=this,d=document.createElement("div");d.className="category-add";
a.appendChild(d);b.el=a;d.onclick=function(){b.create&&b.create()}}function c(a,m){window.admin&&a.el.insertBefore(h,a.el.firstChild);new b(a.addItem(0));window.ajax({type:"POST",data:null,url:"/async/category/list"}).done(function(c){var n=[];if(c.status)for(var g=0;g<c.categories.length;++g){var e=a.addItem(c.categories[g]._id),e=new b(e,c.categories[g]);window.admin&&(n[n.length]=e)}m(n)})}var m=null,g=document.getElementById("shop_navigator"),e=new DropDown({className:"category-nav",src:"../images/list.png"}),
f=null,h=null,l=1,r=new DropDown({className:"sorter-nav"}),k=r.addItem(0);k.controller.setValue("A  -  Z");k=r.addItem(1);k.controller.setValue("Z  -  A");k=r.addItem(2);language.bind("lowprice",k);k=r.addItem(3);language.bind("hightprice",k);if(window.admin){var n=[],h=document.createElement("div");h.className="shop-category-edit";h.onclick=function(u){u.preventDefault();u.stopPropagation();if(h.hasAttribute("open"))h.removeAttribute("open"),e.el.removeAttribute("edit-mode"),e.close(),e.el.removeChild(h),
f=null,function(a,b){var d=0,c=a.length,m=function(a){++d==c&&b()};if(0<c)for(var n=0;n<c;++n)a[n].forceEditEnd(),a[n].save(m);else b()}(n,function(){var a=new DropDown({className:"category-nav",src:"../images/list.png"});c(a,function(b){n=b;g.replaceChild(a.el,e.el);e=a;e.changed=function(){m&&m.reload()};e.setValue(0)})});else for(h.setAttribute("open",!0),e.el.setAttribute("edit-mode",!0),f=new a(e.addVirtual()),f.create=function(){var a=f.el.parentNode;a.removeChild(f.el);var c=e.addItem(String("000000000000000000000000"+
l++).slice(-24)),c=new b(c,{title:""});c.forceEditStart();n[n.length]=c;a.appendChild(f.el)},e.manual(),e.open(),u=0;u<n.length;++u)n[u].forceEditStart()}}g.appendChild(e.el);g.appendChild(r.el);e.changed=function(){m&&m.reload()};r.changed=function(){m&&m.reload()};this.setView=function(a){m=a};this.value=function(){var a=e.value();return{sort:r.value(),filter:0==a?null:a}};this.el=g;c(e,function(a){window.admin&&(n=a)})}function m(){var b=document.getElementById("shop_panel"),a=new H,c=new E(a);
a.setView(c);this.el=b}window.addEventListener("load",function(){window.shop=new m})})();(function(){function y(p){var v=this,q=p,b=new MSDivObject;p=window.admin?document.createElement("div"):null;b.el.className="gallery-thumb";p&&(p.className="gallery-thumb-remove",b.el.appendChild(p),p.onclick=function(){v.remove&&v.remove(v)});b.el.onclick=function(){v.click&&v.click(v)};if(window.admin){b.el.setAttribute("draggable",!0);var c=document.getElementById("content_scroll_top"),k=document.getElementById("content_scroll_bottom"),f=document.getElementById("content-wrapper"),e=!1,l=function(b){if(e){var c=
f.scrollTop;morpheus.tween(5,function(e){1==e&&async(l,[b]);e=c+b*e;0<=e&&e<=f.scrollHeight&&(f.scrollTop=e)})}};c.ondragenter=function(b){b.preventDefault();e=!0;l(-10)};c.ondragleave=function(b){b.preventDefault();e=!1};k.ondragenter=function(b){b.preventDefault();e=!0;l(10)};k.ondragleave=function(b){b.preventDefault();e=!1};b.el.ondragstart=function(b){b.dataTransfer.setData("target",q);c.setAttribute("enabled",!0);k.setAttribute("enabled",!0)};b.el.ondragend=function(b){b.preventDefault();c.removeAttribute("enabled");
k.removeAttribute("enabled")};b.el.ondragover=function(b){b.preventDefault()};b.el.ondrop=function(b){b.preventDefault();v.swap&&v.swap(b.dataTransfer.getData("target"),q)}}v.el=b.el;v.id=function(){return q};v.change=function(c){q=c;b.loadImage({url:"/async/thumb/load/"+q,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})};b.loadImage({url:"/async/thumb/load/"+q,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75})}function D(){var p,v,q;function b(){var b=
k.el.childNodes,c=b.length;v=p=1;if(0<c){q=Math.floor((k.el.offsetWidth-2)/(b[0].offsetWidth+6))*Math.floor((k.el.offsetHeight-2)/(b[0].offsetHeight+6));v=Math.ceil(c/q);for(var d=Math.min(q-1,c);0<=d&&0!=b[d].style.display.length;--d)async(function(a){a.style.display=null},[b[d]]);for(d=Math.min(q,c);d<c&&!(0<b[d].style.display.length);++d)async(function(a){a.style.display="none"},[b[d]])}e.prev.setAttribute("disabled",!0);1==v?e.next.setAttribute("disabled",!0):e.next.removeAttribute("disabled");
e.data.innerHTML=p+" / "+v}document.getElementById("gallery_panel");document.getElementById("content-wrapper");var c=window.admin?new FileUpload({id:"gallery_thumb_new",className:"gallery-thumb",multiple:!0}):null,k=new MSDivObject(document.getElementById("thumbs_container")),f=new MSDivObject(document.getElementById("gallery_view").firstElementChild),e={prev:document.getElementById("gallery_prev_page"),data:document.getElementById("gallery_page_info"),next:document.getElementById("gallery_next_page")};
v=p=1;q=0;var l={},A=function(b){f.loadImage({url:"/async/images/load/"+b.id()+"?height=700",color:"#e0e0e0",shadow:!0,radius:22,width:6,length:20,lines:13,speed:.75})},D=function(b){window.ajax({type:"POST",data:{id:b.id()},url:"/async/gallery/delete"}).done(function(c){c.status&&(delete l[b.id()],k.el.removeChild(b.el))})},E=function(b,c){if(b!=c){var d=l[b];d.change(c);l[b]=l[c];l[c]=d;l[b].change(b);window.ajax({type:"POST",data:{one:b,two:c},url:"/async/gallery/swap"})}};window.admin||(window.addEventListener("resize",
b),e.prev.onclick=function(){if(!e.prev.hasAttribute("disabled")){for(var b=k.el.childNodes,c=b.length,d=Math.min(q*p,c);d>=q*(p-1);--d)async(function(a){a.style.display="none"},[b[d]]);--p;1==p&&e.prev.setAttribute("disabled",!0);e.next.removeAttribute("disabled");e.data.innerHTML=p+" / "+v;for(d=Math.min(q*p,c);d>=q*(p-1);--d)async(function(a){a.style.display=null},[b[d]])}},e.next.onclick=function(){if(!e.next.hasAttribute("disabled")){for(var b=k.el.childNodes,c=b.length,d=q*(p-1);d<q*p&&d<c;++d)async(function(a){a.style.display=
"none"},[b[d]]);p+=1;p==v&&e.next.setAttribute("disabled",!0);e.prev.removeAttribute("disabled");e.data.innerHTML=p+" / "+v;for(d=q*(p-1);d<q*p&&d<c;++d)async(function(a){a.style.display=null},[b[d]])}});c&&(k.el.appendChild(c.el),c.preview=function(b){for(var m=0;m<b.length;++m){var d=new FormData;d.append("file",b[m]);window.ajax({type:"POST",data:d,files:!0,url:"/async/gallery/save"}).done(function(a){a.status&&(a=new y(a.id),l[a.id()]=a,a.swap=E,a.click=A,a.remove=D,c.el.nextSibling?k.el.insertBefore(a.el,
c.el.nextSibling):k.el.appendChild(a.el),A(a))})}});window.ajax({type:"POST",url:"/async/gallery/load"}).done(function(c){if(c.status){for(var m=document.createDocumentFragment(),d=null,a=0;a<c.result.length;++a){var e=new y(c.result[a].id);l[e.id()]=e;e.swap=E;e.click=A;e.remove=D;m.appendChild(e.el);d||(d=e)}k.el.appendChild(m);d&&A(d);window.admin||b()}})}window.addEventListener("load",function(){window.gallery=new D})})();(function(){function y(){function y(){this.removeAttribute("error");this.onfocus=null}var p=document.getElementById("contact_name"),v=document.getElementById("contact_email"),q=document.getElementById("contact_message");document.getElementById("contact_send").onclick=function(){window.ajax({type:"POST",data:{name:p.value,email:v.value,message:q.value},url:"/async/contact"}).done(function(b){if(b.status)p.value="",v.value="",q.value="";else for(var c in b.error)"name"==c?(p.setAttribute("error",!0),
p.onfocus=y):"email"==c?(v.setAttribute("error",!0),v.onfocus=y):"message"==c&&(q.setAttribute("error",!0),q.onfocus=y)})}}window.addEventListener("load",function(){window.cantact=new y})})();(function(){function y(b){b=b.getElementsByTagName("*");for(var d={},a=0;a<b.length;++a)if(b[a].hasAttribute("user-input")){var c=b[a].getAttribute("user-input");b[a].controller?d[c]=b[a].controller.value():b[a].value?d[c]=b[a].value:b[a].firstChild&&3==b[a].firstChild.nodeType&&b[a].firstChild.nodeValue&&(d[c]=b[a].firstChild.nodeValue)}return d}function D(b,d){d=d||"";if("INPUT"==b.nodeName)b.value=d;else if("DIV"==b.nodeName)if(b.controller)b.controller.setValue(d);else if(b.firstChild&&3==b.firstChild.nodeType&&
b.firstChild.nodeValue)b.firstChild.nodeValue=d;else{var a=document.createTextNode(d);b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}}function p(b,d){for(var a=b.getElementsByTagName("*"),c=[],e=[],g=0;g<a.length;++g)if(a[g].hasAttribute("user-input")){a[g].parentNode.removeAttribute("unset");var f=a[g].getAttribute("user-input");if(d[f]){var k=c.indexOf(a[g].parentNode);0<=k&&c.splice(k,1);e[e.length]=a[g].parentNode;D(a[g],d[f])}else k=e.indexOf(a[g].parentNode),-1==k&&(c[c.length]=
a[g].parentNode),D(a[g],"")}for(g=0;g<c.length;++g)c[g].setAttribute("unset",!0)}function v(b,c){if(c)for(var a=b.getElementsByTagName("*"),e=0;e<a.length;++e)if(a[e].hasAttribute("user-input")){var f=a[e].getAttribute("user-input");c[f]&&function(a){a.setAttribute("error",!0);a.onfocus=function(){a.removeAttribute("error")}}(a[e])}}function q(b){b.controller=this;this.setValue=function(c){b.setAttribute("option",c)}}function b(b){b.controller=this;this.setValue=function(c){var a=b.getElementsByClassName("preview-data");
a&&0<a.length&&D(a[0],c.number);c?b.removeAttribute("unset"):b.setAttribute("unset",!0)}}function c(b){function c(){var b=e.run(a.value);b?a.setAttribute("card",b):a.removeAttribute("card")}var a=b,e=new function(){var a={visa:{values:[{type:0,value:4}]},mastercard:{values:[{type:1,range:{min:51,max:55}}]},discover:{values:[{type:0,value:65},{type:0,value:6011},{type:1,range:{min:644,max:649}},{type:1,range:{min:622126,max:622925}}]},amex:{values:[{type:0,value:34},{type:0,value:37}]}};this.run=function(b){for(var c in a)if(a.hasOwnProperty(c))for(var d=
a[c],e=0;e<d.values.length;++e)if(0==d.values[e].type){var m=String(d.values[e].value);if(b.substr(0,m.length)===m)return c}else if(1==d.values[e].type)for(var f=d.values[e].range.min;f<=d.values[e].range.max;++f)if(m=String(f),b.substr(0,m.length)===m)return c;return null}};a.onkeydown=function(b){var c=0<=[8,9,37,38,39,40,46].indexOf(b.keyCode),d=!isNaN(parseInt(b.key))&&16>a.value.length;c||d||b.preventDefault()};a.onkeyup=c;a.onfocus=c;a.onblue=c;a.onchange=c;a.controller=this;this.value=function(){return{type:e.run(a.value),
number:a.value}}}function k(e){var d={country:function(a){(new DropDown({},a)).addItem("Polska",!0)},county:function(a){var b="dolno\u015bl\u0105skie kujawsko-pomorskie lubelskie lubuskie \u0142\u00f3dzkie ma\u0142opolskie mazowieckie opolskie podkarpackie podlaskie pomorskie \u015bl\u0105skie \u015bwi\u0119tokrzyskie warmi\u0144sko-mazurskie wielkopolskie zachodniopomorskie".split(" ");a=new DropDown({},a);for(var c=0;c<b.length;++c)a.addItem(b[c],!0)},expiry_month:function(a){a=new DropDown({},
a);for(var b=1;12>=b;++b)a.addItem(b,!0)},expiry_year:function(a){var b=(new Date).getFullYear();a=new DropDown({},a);for(var c=b;c<=b+10;++c)a.addItem(c,!0)},card_number:function(a){new c(a)},paymentType:function(a){new q(a)},cardNumber:function(a){new b(a)}};e=e.getElementsByTagName("*");for(var a=0;a<e.length;++a)if(e[a].hasAttribute("control")){var f=e[a].getAttribute("control");d[f]&&async(d[f],[e[a]])}}function f(b){var c=this,a=document.createElement("tr"),e=document.createElement("td"),f=
new MSDivObject,g=document.createElement("td"),k=document.createElement("td"),l=document.createElement("td"),h=document.createElement("td"),p=document.createElement("td"),r=document.createElement("div");e.className="text";f.el.className="order-thumb";g.className="text";k.className="text";l.className="text";h.className="text";p.className="text";r.className="remove-btn";l.setAttribute("currency","z\u0142");h.setAttribute("currency","z\u0142");e.appendChild(f.el);a.appendChild(e);a.appendChild(g);a.appendChild(k);
a.appendChild(l);a.appendChild(h);p.appendChild(r);a.appendChild(p);f.loadImage({url:"/async/thumb/load/"+b.preview,color:"#e0e0e0",shadow:!0,radius:18,width:4,length:16,lines:11,speed:.75});g.innerHTML=b.title;k.innerHTML=b.quantity;l.innerHTML=b.price;b.discount?(e=document.createElement("span"),f=document.createTextNode(Number(b.shipping)*(1-(b.discount||0))),e.className="discount-pin",h.appendChild(e),h.appendChild(f)):h.innerHTML=Number(b.shipping);c.el=a;c.id=function(){return b.id};c.item=
function(){return b.item};c.price=function(){return Number(b.price)};c.shipping=function(){return Number(b.shipping)};c.setDiscount=function(a){b.discount=a};r.onclick=function(){c.remove(c)};c.info=function(){return{title:b.title,quantity:Number(b.quantity),price:Number(b.price),shipping:Number(b.shipping)*(1-(b.discount||0))}};c.update=function(a){for(var c in a||{})a.hasOwnProperty(c)&&(b[c]=a[c]);k.innerHTML=b.quantity;l.innerHTML=b.price;b.discount?(a=document.createElement("span"),c=document.createTextNode(Number(b.shipping)*
(1-(b.discount||0))),a.className="discount-pin",h.innerHTML="",h.appendChild(a),h.appendChild(c)):h.innerHTML=Number(b.shipping)}}function e(){function b(a){var c=document.getElementById(a);c?c.setAttribute("ordered",!0):async(b,[a])}function c(a){var b=document.getElementById(a);b?b.removeAttribute("ordered"):async(c,[a])}function a(a){window.ajax({type:"POST",data:{id:a.id()},url:"/async/orders/remove"}).done(function(a){if(a.status&&a.removed){r=a.total;l.innerHTML=r;var b=C[a.removed];delete C[a.removed];
c(b.item());g.removeChild(b.el);for(var b=document.createDocumentFragment(),n=0;n<a.items.length;++n){var f=a.items[n];C[f.id]&&(C[f.id].update(f),g.removeChild(C[f.id].el));b.appendChild(C[f.id].el)}g.appendChild(b);0==a.items.length?e.hide():e.activate(e)}})}var e=this,k=document.getElementById("order_list_view"),g=document.getElementById("order_list_table"),l=document.getElementById("order_list_totals"),p=document.getElementById("order_list_advance"),h=document.getElementById("terms"),q=document.getElementById("terms_box"),
r=0,C={};l.setAttribute("currency","z\u0142");q.onclick=function(){h.hasAttribute("checked")?h.removeAttribute("checked"):(h.setAttribute("checked",!0),h.removeAttribute("error"))};window.events.listen("update-ordered",function(){for(var a in C)if(C.hasOwnProperty(a)){var b=document.getElementById(C[a].item());b&&b.setAttribute("ordered",!0)}});e.addOrder=function(c){window.ajax({type:"POST",data:c,url:"/async/orders/add"}).done(function(d){if(d.status){r=d.total;l.innerHTML=r;for(var h=document.createDocumentFragment(),
k=0;k<d.items.length;++k){var p=d.items[k];if(C[p.id])C[p.id].update(p),g.removeChild(C[p.id].el);else if(p.id==d.added){p.title=c.title;p.availability=c.availability;p.preview=c.preview;var q=new f(p);C[p.id]=q;q.remove=a;b(q.item())}C[p.id]&&h.appendChild(C[p.id].el)}g.appendChild(h);1==d.items.length&&e.show(!0);e.reset();e.activate(e)}})};e.clear=function(){for(var a in C)if(C.hasOwnProperty(a)){var b=C[a];delete C[a];c(b.item());g.removeChild(b.el)}};e.init=function(){window.ajax({type:"POST",
data:null,url:"/async/orders/session"}).done(function(c){if(c.status&&c.items){r=c.total;l.innerHTML=r;for(var d=document.createDocumentFragment(),h=0;h<c.items.length;++h){var k=new f(c.items[h]);C[k.id()]=k;k.remove=a;b(k.item());d.appendChild(C[k.id()].el)}g.appendChild(d);0<c.items.length&&(e.show(),e.activate(e))}})};p.onclick=function(){if(h.hasAttribute("checked")){var a=[],b;for(b in C)C.hasOwnProperty(b)&&(a[a.length]=C[b].info());e.advance(e,{items:a,total:r})}else h.setAttribute("error",
!0)};e.el=k}function l(){var b=this,c=document.getElementById("shipping_view"),a=document.getElementById("shipping_advance"),e=document.getElementById("shipping_back"),f=null;a.onclick=function(){var a=y(c);window.ajax({type:"POST",data:a,url:"/async/orders/shipping"}).done(function(a){a.status?(f.shipping=a.data,b.advance(b,f)):v(c,a.error)})};b.clear=function(){f=null};b.apply=function(a){f=a};e.onclick=function(){b.back(b)};b.el=c}function A(){function b(a){a.stopPropagation();for(a=0;a<k.length;++a)k[a].removeAttribute("checked");
this.setAttribute("checked",!0);r=this.getAttribute("option");c.expand(l,this.hasAttribute("expand"))}var c=this,a=document.getElementById("payment_view"),e=document.getElementById("payment_advance"),f=document.getElementById("payment_back"),g=document.getElementById("payment_type"),k=[],l=document.getElementById("payment_details"),h=document.getElementById("billing_details"),q=null,r=0;window.ajax({type:"POST",data:null,url:"/async/payment/types"}).done(function(a){if(a.status){var c=0,d;for(d in a.options)if(a.options.hasOwnProperty(d)){var e=
document.createElement("div"),f=document.createElement("div"),h=document.createElement("div");e.className="payment-option "+d;f.className="checkbox";h.className="banner "+d;e.appendChild(f);e.appendChild(h);0==c&&e.setAttribute("checked",!0);e.setAttribute("option",c++);var f=a.options[d],l;for(l in f)f.hasOwnProperty(l)&&e.setAttribute(l,f[l]);g.appendChild(e);k[k.length]=e;e.onclick=b}}});c.apply=function(a){q=a;p(l,{forename:q.shipping.forename,surname:q.shipping.surname});p(h,q.shipping)};c.clear=
function(){q=null};e.onclick=function(){var b=y(h);if(0==r)window.ajax({type:"POST",data:b,url:"/async/orders/pay_paypal"}).done(function(a){a.status?(b=a.data,b.paymentType="Paypal",q.billing=b,c.advance(c,q)):v(h,a.error)});else if(1==r){var e=y(l),f;for(f in e)e.hasOwnProperty(f)&&(b[f]=e[f]);window.ajax({type:"POST",data:b,url:"/async/orders/pay_card"}).done(function(e){e.status?(b=e.data,b.paymentType=b.card.type,q.billing=b,c.advance(c,q)):v(a,e.error)})}};f.onclick=function(){c.back(c)};c.el=
a}function F(){function b(a){var c=document.createElement("table"),d=document.createElement("tr"),e=document.createElement("th"),n=document.createElement("th"),f=document.createElement("th"),g=document.createElement("th");language.bind("title",e);language.bind("quantity",n);language.bind("price",f);language.bind("shipping",g);e.className="preview-label text";n.className="preview-label text";f.className="preview-label text";g.className="preview-label text";d.appendChild(e);d.appendChild(n);d.appendChild(f);
d.appendChild(g);c.appendChild(d);for(d=0;d<a.length;++d){var e=document.createElement("tr"),n=document.createElement("td"),f=document.createElement("td"),g=document.createElement("td"),m=document.createElement("td");n.innerHTML=a[d].title;f.innerHTML=a[d].quantity;g.innerHTML=a[d].price;m.innerHTML=a[d].shipping;g.setAttribute("currency","z\u0142");m.setAttribute("currency","z\u0142");n.className="text preview-data";f.className="text preview-data";g.className="text preview-data";m.className="text preview-data";
e.appendChild(n);e.appendChild(f);e.appendChild(g);e.appendChild(m);c.appendChild(e)}return c}var c=this,a=document.getElementById("done_view"),e=document.getElementById("done_advance"),f=document.getElementById("done_back"),g=document.getElementById("data_preview"),k=document.getElementById("order_summary"),l=g.getElementsByClassName("preview-block");e.onclick=function(){window.location="/async/orders/process"};f.onclick=function(){c.back(c)};c.apply=function(a){for(var c=0;c<l.length;++c)if(l[c].hasAttribute("block-type")){var d=
l[c].getAttribute("block-type");a[d]&&p(l[c],a[d])}k.innerHTML=null;k.appendChild(b(a.items));c=document.createElement("div");d=document.createElement("div");c.className="seperator text";language.bind("total",c);d.className="total-price-summary text-invert-light";d.innerHTML=a.total;d.setAttribute("currency","z\u0142");k.appendChild(c);k.appendChild(d)};c.clear=function(){k.innerHTML=null};c.el=a}function E(b,c){function a(a,c){r!=a?(a.el.style.top=getHeight(b)+200+"px",a.el.style.display="block",
a.apply&&c&&a.apply(c),async(function(){var c=[a.el,b];a.el.set={top:150};b.set={h:200+getHeight(a.el)};r&&(r.el.set={o:0},c[c.length]=r.el,window.scrollBodyTo(b));morpheus(c,{top:function(a){return a.set.top},height:function(a){return a.set.h},opacity:function(a){return a.set.o},duration:250,complete:function(){r&&r.el.removeAttribute("style");r=a}})})):morpheus(b,{height:200+getHeight(a.el)+"px",duration:250})}function e(){for(var a=0;a<h.length;++a)p[a].removeAttribute("status");0<h.length&&p[0].setAttribute("status",
0)}function f(b,c){if(b==r){var d=h.indexOf(b);d+1==h.length?l.done():0<=d&&d+1<h.length&&(p[d].setAttribute("status",1),d+=1,a(h[d],c),p[d].setAttribute("status",0))}}function g(b){b==r&&(b=h.indexOf(b),0>b-1?l.done():0<=b&&0<=b-1&&(p[b].removeAttribute("status"),--b,a(h[b]),p[b].setAttribute("status",0)))}function k(a,c){var d=0,e=0,f=getHeight(b);c?(a.style.display="block",d=getHeight(a),e=a.offsetHeight,a.style.height="0px"):(d=getHeight(a),e=a.offsetHeight);d-=(d-e)/2;a.style.opacity=c?0:1;a.set=
{h:c?e:0,m:c?null:0,o:c?1:0};b.set={h:c?d+f:f-d};morpheus([b,a],{height:function(a){return a.set.h},"margin-bottom":function(a){return a.set.m},"margin-top":function(a){return a.set.m},opacity:function(a){return a.set.o},duration:250,complete:function(){c?(a.style.height="",a.style.opacity=""):a.removeAttribute("style")}})}for(var l=this,h=c,p=document.getElementById("progress_view").getElementsByClassName("progress-step"),r=null,q=0;q<h.length;++q)h[q].reset=e,h[q].activate=a,h[q].advance=f,h[q].back=
g,h[q].expand=k;l.init=function(){for(var a=0;a<h.length;++a)h[a].init&&h[a].init()};l.clear=function(){e();for(var a=b.getElementsByTagName("*"),c=0;c<a.length;++c)a[c].hasAttribute("user-input")&&(a[c].parentNode.removeAttribute("unset"),D(a[c],""));for(a=0;a<h.length;++a)h[a].clear()}}function H(){function b(){c.set={w:0};a.set={h:0};morpheus([c,a],{width:function(a){return a.set.w},height:function(a){return a.set.h},duration:350,complete:function(){c.style="";a.style="";a.removeChild(f)}});window.scrollBodyTo(window.shop.el)}
var c=document.getElementById("order"),a=document.getElementById("order_panel"),f=document.getElementById("order_panel_inner"),p=new e,g=new l,q=new A,v=new F,h=new E(a,[p,g,q,v]);k(a);a.removeChild(f);p.show=function(b){order_panel.appendChild(f);c.style.display="inline-block";a.style.display="block";b&&window.scrollBodyTo(a)};p.hide=b;window.events.listen("order",function(a){p.addOrder(a)});h.done=function(){h.clear();b()};h.init();this.el=a}window.addEventListener("load",function(){window.orders=
new H})})();(function(){function y(){var y=document.getElementById("username_input"),p=document.getElementById("password_input"),v=document.getElementById("login"),q=function(){var b=4<y.value.length&&6<p.value.length;v.style.display=b?"block":"none";return b},b=function(){window.ajax({type:"POST",data:{username:y.value,password:p.value},url:"/async/user/login"}).done(function(b){b.status?window.location.href="/":(p.value="",q(),p.focus())})};y.focus();y.onkeyup=function(){q()};p.onkeyup=function(c){q()&&13==
c.keyCode&&b()}}window.addEventListener("load",function(){"/admin"==window.location.pathname&&(window.login=new y)})})();
